(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(on,ot,k)=>{"use strict";k.d(ot,{nm:()=>Xr});var y=k(2122);k(4650),k(259);var ze=k(5861),Ae=k(9681),q=k(4859),pt=k(2090),Ke=k(1877);const ne=new Map,nt={activated:!1,tokenObservers:[]},Me={initialized:!1,enabled:!1};function et(Je){return ne.get(Je)||Object.assign({},nt)}function Le(){return Me}const ut="https://content-firebaseappcheck.googleapis.com/v1",We="exchangeDebugToken",He={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class _t{constructor(at,wt,Vt,an,Bn){if(this.operation=at,this.retryPolicy=wt,this.getWaitDuration=Vt,this.lowerBound=an,this.upperBound=Bn,this.pending=null,this.nextErrorWaitInterval=an,an>Bn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(at){var wt=this;return(0,ze.Z)(function*(){wt.stop();try{wt.pending=new pt.BH,yield function mt(Je){return new Promise(at=>{setTimeout(at,Je)})}(wt.getNextRun(at)),wt.pending.resolve(),yield wt.pending.promise,wt.pending=new pt.BH,yield wt.operation(),wt.pending.resolve(),yield wt.pending.promise,wt.process(!0).catch(()=>{})}catch(Vt){wt.retryPolicy(Vt)?wt.process(!1).catch(()=>{}):wt.stop()}})()}getNextRun(at){if(at)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const wt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),wt}}}const jt=new pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Jt(Je,at){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,ze.Z)(function*({url:Je,body:at},wt){const Vt={"Content-Type":"application/json"},an=wt.getImmediate({optional:!0});if(an){const us=yield an.getHeartbeatsHeader();us&&(Vt["X-Firebase-Client"]=us)}const Bn={method:"POST",body:JSON.stringify(at),headers:Vt};let mr,ir;try{mr=yield fetch(Je,Bn)}catch(us){throw jt.create("fetch-network-error",{originalErrorMessage:null==us?void 0:us.message})}if(200!==mr.status)throw jt.create("fetch-status-error",{httpStatus:mr.status});try{ir=yield mr.json()}catch(us){throw jt.create("fetch-parse-error",{originalErrorMessage:null==us?void 0:us.message})}const kr=ir.ttl.match(/^([\d.]+)(s)$/);if(!kr||!kr[2]||isNaN(Number(kr[1])))throw jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ir.ttl}`});const $r=1e3*Number(kr[1]),Ei=Date.now();return{token:ir.token,expireTimeMillis:Ei+$r,issuedAtTimeMillis:Ei}})).apply(this,arguments)}const vn="firebase-app-check-database",Ut=1,nr="firebase-app-check-store";let un=null;function Ar(Je,at){return fr.apply(this,arguments)}function fr(){return(fr=(0,ze.Z)(function*(Je,at){const Vt=(yield function or(){return un||(un=new Promise((Je,at)=>{try{const wt=indexedDB.open(vn,Ut);wt.onsuccess=Vt=>{Je(Vt.target.result)},wt.onerror=Vt=>{var an;at(jt.create("storage-open",{originalErrorMessage:null===(an=Vt.target.error)||void 0===an?void 0:an.message}))},wt.onupgradeneeded=Vt=>{0===Vt.oldVersion&&Vt.target.result.createObjectStore(nr,{keyPath:"compositeKey"})}}catch(wt){at(jt.create("storage-open",{originalErrorMessage:null==wt?void 0:wt.message}))}}),un)}()).transaction(nr,"readwrite"),Bn=Vt.objectStore(nr).put({compositeKey:Je,value:at});return new Promise((mr,ir)=>{Bn.onsuccess=kr=>{mr()},Vt.onerror=kr=>{var $r;ir(jt.create("storage-set",{originalErrorMessage:null===($r=kr.target.error)||void 0===$r?void 0:$r.message}))}})})).apply(this,arguments)}const Lr=new Ke.Yd("@firebase/app-check");function Vr(Je,at){return(0,pt.hl)()?function Ir(Je,at){return Ar(function xr(Je){return`${Je.options.appId}-${Je.name}`}(Je),at)}(Je,at).catch(wt=>{Lr.warn(`Failed to write token to IndexedDB. Error: ${wt}`)}):Promise.resolve()}function er(){return bi.apply(this,arguments)}function bi(){return(bi=(0,ze.Z)(function*(){const Je=Le();if(Je.enabled&&Je.token)return Je.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mn={error:"UNKNOWN_ERROR"};function Gt(Je){return pt.US.encodeString(JSON.stringify(Je),!1)}function En(Je){return An.apply(this,arguments)}function An(){return(An=(0,ze.Z)(function*(Je,at=!1){const wt=Je.app;!function Tt(Je){if(!et(Je).activated)throw jt.create("use-before-activation",{appName:Je.name})}(wt);const Vt=et(wt);let Bn,an=Vt.token;if(an&&!fe(an)&&(Vt.token=void 0,an=void 0),!an){const kr=yield Vt.cachedTokenPromise;kr&&(fe(kr)?an=kr:yield Vr(wt,void 0))}if(!at&&an&&fe(an))return{token:an.token};let ir,mr=!1;if(function Zr(){return Le().enabled}()){Vt.exchangeTokenPromise||(Vt.exchangeTokenPromise=Jt(function nn(Je,at){const{projectId:wt,appId:Vt,apiKey:an}=Je.options;return{url:`${ut}/projects/${wt}/apps/${Vt}:${We}?key=${an}`,body:{debug_token:at}}}(wt,yield er()),Je.heartbeatServiceProvider).finally(()=>{Vt.exchangeTokenPromise=void 0}),mr=!0);const kr=yield Vt.exchangeTokenPromise;return yield Vr(wt,kr),Vt.token=kr,{token:kr.token}}try{Vt.exchangeTokenPromise||(Vt.exchangeTokenPromise=Vt.provider.getToken().finally(()=>{Vt.exchangeTokenPromise=void 0}),mr=!0),an=yield et(wt).exchangeTokenPromise}catch(kr){"appCheck/throttled"===kr.code?Lr.warn(kr.message):Lr.error(kr),Bn=kr}return an?Bn?ir=fe(an)?{token:an.token,internalError:Bn}:ve(Bn):(ir={token:an.token},Vt.token=an,yield Vr(wt,an)):ir=ve(Bn),mr&&function Ve(Je,at){const wt=et(Je).tokenObservers;for(const Vt of wt)try{"EXTERNAL"===Vt.type&&null!=at.error?Vt.error(at.error):Vt.next(at)}catch{}}(wt,ir),ir})).apply(this,arguments)}function ur(Je,at){const wt=et(Je),Vt=wt.tokenObservers.filter(an=>an.next!==at);0===Vt.length&&wt.tokenRefresher&&wt.tokenRefresher.isRunning()&&wt.tokenRefresher.stop(),wt.tokenObservers=Vt}function Pr(Je){const{app:at}=Je,wt=et(at);let Vt=wt.tokenRefresher;Vt||(Vt=function Ze(Je){const{app:at}=Je;return new _t((0,ze.Z)(function*(){let Vt;if(Vt=et(at).token?yield En(Je,!0):yield En(Je),Vt.error)throw Vt.error;if(Vt.internalError)throw Vt.internalError}),()=>!0,()=>{const wt=et(at);if(wt.token){let Vt=wt.token.issuedAtTimeMillis+.5*(wt.token.expireTimeMillis-wt.token.issuedAtTimeMillis)+3e5;return Vt=Math.min(Vt,wt.token.expireTimeMillis-3e5),Math.max(0,Vt-Date.now())}return 0},He.RETRIAL_MIN_WAIT,He.RETRIAL_MAX_WAIT)}(Je),wt.tokenRefresher=Vt),!Vt.isRunning()&&wt.isTokenAutoRefreshEnabled&&Vt.start()}function fe(Je){return Je.expireTimeMillis-Date.now()>0}function ve(Je){return{token:Gt(mn),error:Je}}class he{constructor(at,wt){this.app=at,this.heartbeatServiceProvider=wt}_delete(){const{tokenObservers:at}=et(this.app);for(const wt of at)ur(this.app,wt.next);return Promise.resolve()}}const ar="app-check-internal";!function gr(){(0,Ae._registerComponent)(new q.wA("app-check",Je=>function dt(Je,at){return new he(Je,at)}(Je.getProvider("app").getImmediate(),Je.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Je,at,wt)=>{Je.getProvider(ar).initialize()})),(0,Ae._registerComponent)(new q.wA(ar,Je=>function Oe(Je){return{getToken:at=>En(Je,at),addTokenListener:at=>function zn(Je,at,wt,Vt){const{app:an}=Je,Bn=et(an);if(Bn.tokenObservers=[...Bn.tokenObservers,{next:wt,error:Vt,type:at}],Bn.token&&fe(Bn.token)){const ir=Bn.token;Promise.resolve().then(()=>{wt({token:ir.token}),Pr(Je)}).catch(()=>{})}Bn.cachedTokenPromise.then(()=>Pr(Je))}(Je,"INTERNAL",at),removeTokenListener:at=>ur(Je.app,at)}}(Je.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)("@firebase/app-check","0.6.5")}();class Xr{constructor(){return(0,y.vb)("app-check")}}typeof window<"u"&&window},1205:(on,ot,k)=>{"use strict";k.d(ot,{zQ:()=>ut,ww:()=>bt,rT:()=>Me,f7:()=>vt,L6:()=>ne,_Q:()=>nt,lh:()=>et,Qv:()=>Ke,nw:()=>Le});var y=k(4650),g=k(7579),Y=k(9646),ae=k(9751),xe=k(8996),Pe=k(6451),Ce=k(5363),me=k(3900),Ue=k(4004),Te=k(6063);class pe extends g.x{constructor(We=1/0,He=1/0,Ge=Te.l){super(),this._bufferSize=We,this._windowTime=He,this._timestampProvider=Ge,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=He===1/0,this._bufferSize=Math.max(1,We),this._windowTime=Math.max(1,He)}next(We){const{isStopped:He,_buffer:Ge,_infiniteTimeWindow:_t,_timestampProvider:mt,_windowTime:Ct}=this;He||(Ge.push(We),!_t&&Ge.push(mt.now()+Ct)),this._trimBuffer(),super.next(We)}_subscribe(We){this._throwIfClosed(),this._trimBuffer();const He=this._innerSubscribe(We),{_infiniteTimeWindow:Ge,_buffer:_t}=this,mt=_t.slice();for(let Ct=0;Ct<mt.length&&!We.closed;Ct+=Ge?1:2)We.next(mt[Ct]);return this._checkFinalizedStatuses(We),He}_trimBuffer(){const{_bufferSize:We,_timestampProvider:He,_buffer:Ge,_infiniteTimeWindow:_t}=this,mt=(_t?1:2)*We;if(We<1/0&&mt<Ge.length&&Ge.splice(0,Ge.length-mt),!_t){const Ct=He.now();let jt=0;for(let _n=1;_n<Ge.length&&Ge[_n]<=Ct;_n+=2)jt=_n;jt&&Ge.splice(0,jt+1)}}}var De=k(3099);function Fe(yt,We,He){let Ge,_t=!1;return yt&&"object"==typeof yt?({bufferSize:Ge=1/0,windowTime:We=1/0,refCount:_t=!1,scheduler:He}=yt):Ge=null!=yt?yt:1/0,(0,De.B)({connector:()=>new pe(Ge,We,He),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:_t})}var je=k(590),Be=k(576);function Xe(yt,We){return(0,Be.m)(We)?(0,me.w)(()=>yt,We):(0,me.w)(()=>yt)}var Se=k(9468),_e=k(9300),oe=k(2122),lt=k(2011),ze=k(6895),Ae=k(6217),q=k(9260);const Ke=new y.OlP("angularfire2.auth.use-emulator"),ne=new y.OlP("angularfire2.auth.settings"),nt=new y.OlP("angularfire2.auth.tenant-id"),Me=new y.OlP("angularfire2.auth.langugage-code"),et=new y.OlP("angularfire2.auth.use-device-language"),vt=new y.OlP("angularfire.auth.persistence"),Le=(yt,We,He,Ge,_t,mt,Ct,jt)=>(0,lt.cc)(`${yt.name}.auth`,"AngularFireAuth",yt.name,()=>{const _n=We.runOutsideAngular(()=>yt.auth());if(He&&_n.useEmulator(...He),Ge&&(_n.tenantId=Ge),_n.languageCode=_t,mt&&_n.useDeviceLanguage(),Ct)for(const[Tt,ct]of Object.entries(Ct))_n.settings[Tt]=ct;return jt&&_n.setPersistence(jt),_n},[He,Ge,_t,mt,Ct,jt]);let ut=(()=>{class yt{constructor(He,Ge,_t,mt,Ct,jt,_n,Tt,ct,Rt,Jt,Cn){const Fn=new g.x,gn=(0,Y.of)(void 0).pipe((0,Ce.Q)(Ct.outsideAngular),(0,me.w)(()=>mt.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9568)))),(0,Ue.U)(()=>(0,lt.on)(He,mt,Ge)),(0,Ue.U)(nn=>Le(nn,mt,jt,Tt,ct,Rt,_n,Jt)),Fe({bufferSize:1,refCount:!1}));if((0,ze.PM)(_t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{gn.pipe((0,je.P)()).subscribe();const vn=gn.pipe((0,me.w)(Hn=>Hn.getRedirectResult().then(un=>un,()=>null)),oe.iC,Fe({bufferSize:1,refCount:!1})),Ut=gn.pipe((0,me.w)(Hn=>new ae.y(un=>({unsubscribe:mt.runOutsideAngular(()=>Hn.onAuthStateChanged(or=>un.next(or),or=>un.error(or),()=>un.complete()))})))),nr=gn.pipe((0,me.w)(Hn=>new ae.y(un=>({unsubscribe:mt.runOutsideAngular(()=>Hn.onIdTokenChanged(or=>un.next(or),or=>un.error(or),()=>un.complete()))}))));this.authState=vn.pipe(Xe(Ut),(0,Se.R)(Ct.outsideAngular),(0,Ce.Q)(Ct.insideAngular)),this.user=vn.pipe(Xe(nr),(0,Se.R)(Ct.outsideAngular),(0,Ce.Q)(Ct.insideAngular)),this.idToken=this.user.pipe((0,me.w)(Hn=>Hn?(0,xe.D)(Hn.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,me.w)(Hn=>Hn?(0,xe.D)(Hn.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,Pe.T)(vn,Fn,this.authState.pipe((0,_e.h)(Hn=>!Hn))).pipe((0,Ue.U)(Hn=>null!=Hn&&Hn.user?Hn:null),(0,Se.R)(Ct.outsideAngular),(0,Ce.Q)(Ct.insideAngular))}return(0,lt.pX)(this,gn,mt,{spy:{apply:(nn,vn,Ut)=>{(nn.startsWith("signIn")||nn.startsWith("createUser"))&&Ut.then(nr=>Fn.next(nr))}}})}}return yt.\u0275fac=function(He){return new(He||yt)(y.LFG(lt.Dh),y.LFG(lt.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(oe.HU),y.LFG(Ke,8),y.LFG(ne,8),y.LFG(nt,8),y.LFG(Me,8),y.LFG(et,8),y.LFG(vt,8),y.LFG(Ae.nm,8))},yt.\u0275prov=y.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"any"}),yt})(),bt=(()=>{class yt{constructor(){q.Z.registerVersion("angularfire",oe.q4.full,"auth-compat")}}return yt.\u0275fac=function(He){return new(He||yt)},yt.\u0275mod=y.oAB({type:yt}),yt.\u0275inj=y.cJS({providers:[ut]}),yt})()},3101:(on,ot,k)=>{"use strict";k.d(ot,{ST:()=>Sv,yb:()=>u0});var y=k(4650),g=k(4986),Y=k(9751),ae=k(8996),xe=k(9646),Pe=k(2122),Ce=k(8675),me=k(4482),Ue=k(5403);function Te(){return(0,me.e)((s,e)=>{let t,a=!1;s.subscribe((0,Ue.x)(e,h=>{const m=t;t=h,a&&e.next([m,h]),a=!0}))})}var ne,pe=k(4004),De=k(5026),Fe=k(1884),je=k(9300),Be=k(2011),Xe=k(6895),_e=(k(9568),k(3942)),oe=k(5861),lt=k(9681),ze=k(4859),Ae=k(1877),q=k(2090),pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ke={},nt=nt||{},Me=pt||self;function et(){}function vt(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function Le(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var bt="closure_uid_"+(1e9*Math.random()>>>0),yt=0;function We(s,e,t){return s.call.apply(s.bind,arguments)}function He(s,e,t){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function Ge(s,e,t){return(Ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?We:He).apply(null,arguments)}function _t(s,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function mt(s,e){function t(){}t.prototype=e.prototype,s.X=e.prototype,s.prototype=new t,s.prototype.constructor=s,s.Wb=function(a,h,m){for(var w=Array(arguments.length-2),O=2;O<arguments.length;O++)w[O-2]=arguments[O];return e.prototype[h].apply(a,w)}}function Ct(){this.s=this.s,this.o=this.o}Ct.prototype.s=!1,Ct.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function ut(s){Object.prototype.hasOwnProperty.call(s,bt)&&s[bt]||(s[bt]=++yt)}(this)},Ct.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _n=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let t=0;t<s.length;t++)if(t in s&&s[t]===e)return t;return-1};function Tt(s){const e=s.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=s[a];return t}return[]}function ct(s,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(vt(a)){const h=s.length||0,m=a.length||0;s.length=h+m;for(let w=0;w<m;w++)s[h+w]=a[w]}else s.push(a)}}function Rt(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var Jt=function(){if(!Me.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{Me.addEventListener("test",et,e),Me.removeEventListener("test",et,e)}catch{}return s}();function Cn(s){return/^[\s\xa0]*$/.test(s)}var Fn=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function gn(s,e){return s<e?-1:s>e?1:0}function nn(){var s=Me.navigator;return s&&(s=s.userAgent)?s:""}function vn(s){return-1!=nn().indexOf(s)}function Ut(s){return Ut[" "](s),s}Ut[" "]=et;var Ar,s,Hn=vn("Opera"),un=vn("Trident")||vn("MSIE"),or=vn("Edge"),ci=or||un,Ir=vn("Gecko")&&!(-1!=nn().toLowerCase().indexOf("webkit")&&!vn("Edge"))&&!(vn("Trident")||vn("MSIE"))&&!vn("Edge"),Ni=-1!=nn().toLowerCase().indexOf("webkit")&&!vn("Edge");function Gr(){var s=Me.document;return s?s.documentMode:void 0}e:{var fr="",Rn=(s=nn(),Ir?/rv:([^\);]+)(\)|;)/.exec(s):or?/Edge\/([\d\.]+)/.exec(s):un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Ni?/WebKit\/(\S+)/.exec(s):Hn?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Rn&&(fr=Rn?Rn[1]:""),un){var rn=Gr();if(null!=rn&&rn>parseFloat(fr)){Ar=String(rn);break e}}Ar=fr}var xr={};var Vr=Me.document&&un&&(Gr()||parseInt(Ar,10))||void 0;function xi(s,e){if(Rt.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var t=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Ir){e:{try{Ut(e.nodeName);var h=!0;break e}catch{}h=!1}h||(e=null)}}else"mouseover"==t?e=s.fromElement:"mouseout"==t&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:Er[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&xi.X.h.call(this)}}mt(xi,Rt);var Er={2:"touch",3:"pen",4:"mouse"};xi.prototype.h=function(){xi.X.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Zr="closure_listenable_"+(1e6*Math.random()|0),er=0;function bi(s,e,t,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.ha=h,this.key=++er,this.ba=this.ea=!1}function Xn(s){s.ba=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function mn(s,e,t){for(const a in s)e.call(t,s[a],a,s)}function Gt(s){const e={};for(const t in s)e[t]=s[t];return e}const En="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function An(s,e){let t,a;for(let h=1;h<arguments.length;h++){for(t in a=arguments[h],a)s[t]=a[t];for(let m=0;m<En.length;m++)t=En[m],Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}}function zn(s){this.src=s,this.g={},this.h=0}function ur(s,e){var t=e.type;if(t in s.g){var m,a=s.g[t],h=_n(a,e);(m=0<=h)&&Array.prototype.splice.call(a,h,1),m&&(Xn(e),0==s.g[t].length&&(delete s.g[t],s.h--))}}function Pr(s,e,t,a){for(var h=0;h<s.length;++h){var m=s[h];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==a)return h}return-1}zn.prototype.add=function(s,e,t,a,h){var m=s.toString();(s=this.g[m])||(s=this.g[m]=[],this.h++);var w=Pr(s,e,a,h);return-1<w?(e=s[w],t||(e.ea=!1)):((e=new bi(e,this.src,m,!!a,h)).ea=t,s.push(e)),e};var Ze="closure_lm_"+(1e6*Math.random()|0),Ve={};function fe(s,e,t,a,h){if(a&&a.once)return dt(s,e,t,a,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)fe(s,e[m],t,a,h);return null}return t=In(t),s&&s[Zr]?s.N(e,t,Le(a)?!!a.capture:!!a,h):ve(s,e,t,!1,a,h)}function ve(s,e,t,a,h,m){if(!e)throw Error("Invalid event type");var w=Le(h)?!!h.capture:!!h,O=Mt(s);if(O||(s[Ze]=O=new zn(s)),(t=O.add(e,t,a,w,m)).proxy)return t;if(a=function he(){const e=rt;return function s(t){return e.call(s.src,s.listener,t)}}(),t.proxy=a,a.src=s,a.listener=t,s.addEventListener)Jt||(h=w),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(we(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return t}function dt(s,e,t,a,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)dt(s,e[m],t,a,h);return null}return t=In(t),s&&s[Zr]?s.O(e,t,Le(a)?!!a.capture:!!a,h):ve(s,e,t,!0,a,h)}function Oe(s,e,t,a,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)Oe(s,e[m],t,a,h);else a=Le(a)?!!a.capture:!!a,t=In(t),s&&s[Zr]?(s=s.i,(e=String(e).toString())in s.g&&-1<(t=Pr(m=s.g[e],t,a,h))&&(Xn(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete s.g[e],s.h--))):s&&(s=Mt(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Pr(e,t,a,h)),(t=-1<s?e[s]:null)&&$e(t))}function $e(s){if("number"!=typeof s&&s&&!s.ba){var e=s.src;if(e&&e[Zr])ur(e.i,s);else{var t=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(t,a,s.capture):e.detachEvent?e.detachEvent(we(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=Mt(e))?(ur(t,s),0==t.h&&(t.src=null,e[Ze]=null)):Xn(s)}}}function we(s){return s in Ve?Ve[s]:Ve[s]="on"+s}function rt(s,e){if(s.ba)s=!0;else{e=new xi(e,this);var t=s.listener,a=s.ha||s.src;s.ea&&$e(s),s=t.call(a,e)}return s}function Mt(s){return(s=s[Ze])instanceof zn?s:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(s){return"function"==typeof s?s:(s[Yt]||(s[Yt]=function(e){return s.handleEvent(e)}),s[Yt])}function fn(){Ct.call(this),this.i=new zn(this),this.P=this,this.I=null}function dr(s,e){var t,a=s.I;if(a)for(t=[];a;a=a.I)t.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new Rt(e,s);else if(e instanceof Rt)e.target=e.target||s;else{var h=e;An(e=new Rt(a,s),h)}if(h=!0,t)for(var m=t.length-1;0<=m;m--){var w=e.g=t[m];h=Jr(w,a,!0,e)&&h}if(h=Jr(w=e.g=s,a,!0,e)&&h,h=Jr(w,a,!1,e)&&h,t)for(m=0;m<t.length;m++)h=Jr(w=e.g=t[m],a,!1,e)&&h}function Jr(s,e,t,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var w=e[m];if(w&&!w.ba&&w.capture==t){var O=w.listener,G=w.ha||w.src;w.ea&&ur(s.i,w),h=!1!==O.call(G,a)&&h}}return h&&!a.defaultPrevented}mt(fn,Ct),fn.prototype[Zr]=!0,fn.prototype.removeEventListener=function(s,e,t,a){Oe(this,s,e,t,a)},fn.prototype.M=function(){if(fn.X.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var t=s.g[e],a=0;a<t.length;a++)Xn(t[a]);delete s.g[e],s.h--}}this.I=null},fn.prototype.N=function(s,e,t,a){return this.i.add(String(s),e,!1,t,a)},fn.prototype.O=function(s,e,t,a){return this.i.add(String(s),e,!0,t,a)};var ki=Me.JSON.stringify;function rs(){var s=Jn;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var pi,Hi=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new is,s=>s.reset());class is{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ws(s){Me.setTimeout(()=>{throw s},0)}function pr(s,e){pi||function Qr(){var s=Me.Promise.resolve(void 0);pi=function(){s.then(Vs)}}(),rr||(pi(),rr=!0),Jn.add(s,e)}var rr=!1,Jn=new class Vi{constructor(){this.h=this.g=null}add(e,t){const a=Hi.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}};function Vs(){for(var s;s=rs();){try{s.h.call(s.g)}catch(t){ws(t)}var e=Hi;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}rr=!1}function oi(s,e){fn.call(this),this.h=s||1,this.g=e||Me,this.j=Ge(this.lb,this),this.l=Date.now()}function Fi(s){s.ca=!1,s.R&&(s.g.clearTimeout(s.R),s.R=null)}function gi(s,e,t){if("function"==typeof s)t&&(s=Ge(s,t));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=Ge(s.handleEvent,s)}return 2147483647<Number(e)?-1:Me.setTimeout(s,e||0)}function bn(s){s.g=gi(()=>{s.g=null,s.i&&(s.i=!1,bn(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}mt(oi,fn),(ne=oi.prototype).ca=!1,ne.R=null,ne.lb=function(){if(this.ca){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-s):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dr(this,"tick"),this.ca&&(Fi(this),this.start()))}},ne.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){oi.X.M.call(this),Fi(this),delete this.g};class ar extends Ct{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bn(this)}M(){super.M(),this.g&&(Me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(s){Ct.call(this),this.h=s,this.g={}}mt(gr,Ct);var ui=[];function ei(s,e,t,a){Array.isArray(t)||(t&&(ui[0]=t.toString()),t=ui);for(var h=0;h<t.length;h++){var m=fe(e,t[h],a||s.handleEvent,!1,s.h||s);if(!m)break;s.g[m.key]=m}}function Xr(s){mn(s.g,function(e,t){this.g.hasOwnProperty(t)&&$e(e)},s),s.g={}}function Ci(){this.g=!0}function Re(s,e,t,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function be(s,e){if(!s.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(s=0;s<t.length;s++)if(Array.isArray(t[s])){var a=t[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var w=1;w<h.length;w++)h[w]=""}}}return ki(t)}catch{return e}}(s,t)+(a?" "+a:"")})}gr.prototype.M=function(){gr.X.M.call(this),Xr(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ci.prototype.Aa=function(){this.g=!1},Ci.prototype.info=function(){};var tt={},st=null;function kt(){return st=st||new fn}function $t(s){Rt.call(this,tt.Pa,s)}function Wt(s){const e=kt();dr(e,new $t(e))}function zt(s,e){Rt.call(this,tt.STAT_EVENT,s),this.stat=e}function pn(s){const e=kt();dr(e,new zt(e,s))}function qn(s,e){Rt.call(this,tt.Qa,s),this.size=e}function Qn(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return Me.setTimeout(function(){s()},e)}tt.Pa="serverreachability",mt($t,Rt),tt.STAT_EVENT="statevent",mt(zt,Rt),tt.Qa="timingevent",mt(qn,Rt);var Je={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},at={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wt(){}function an(){}wt.prototype.h=null;var kr,Bn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function mr(){Rt.call(this,"d")}function ir(){Rt.call(this,"c")}function $r(){}function Ei(s,e,t,a){this.l=s,this.j=e,this.m=t,this.U=a||1,this.S=new gr(this),this.O=js,this.T=new oi(s=ci?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new us}function us(){this.i=null,this.g="",this.h=!1}mt(mr,Rt),mt(ir,Rt),mt($r,wt),$r.prototype.g=function(){return new XMLHttpRequest},$r.prototype.i=function(){return{}},kr=new $r;var js=45e3,Ys={},Yr={};function zo(s,e,t){s.K=1,s.v=Os(Ss(e)),s.s=t,s.P=!0,Go(s,null)}function Go(s,e){s.F=Date.now(),yo(s),s.A=Ss(s.v);var t=s.A,a=s.U;Array.isArray(a)||(a=[String(a)]),Pi(t.i,"t",a),s.C=0,t=s.l.H,s.h=new us,s.g=as(s.l,t?e:null,!s.s),0<s.N&&(s.L=new ar(Ge(s.La,s,s.g),s.N)),ei(s.S,s.g,"readystatechange",s.ib),e=s.H?Gt(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.da(s.A,s.u,s.s,e)):(s.u="GET",s.g.da(s.A,s.u,null,e)),Wt(),function Br(s,e,t,a,h,m){s.info(function(){if(s.g)if(m)for(var w="",O=m.split("&"),G=0;G<O.length;G++){var ee=O[G].split("=");if(1<ee.length){var ye=ee[0];ee=ee[1];var it=ye.split("_");w=2<=it.length&&"type"==it[1]?w+(ye+"=")+ee+"&":w+(ye+"=redacted&")}}else w=null;else w=m;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+t+"\n"+w})}(s.j,s.u,s.A,s.m,s.U,s.s)}function ss(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Da}function Wo(s,e,t){let h,a=!0;for(;!s.I&&s.C<t.length;){if(h=Ko(s,t),h==Yr){4==e&&(s.o=4,pn(14),a=!1),Re(s.j,s.m,null,"[Incomplete Response]");break}if(h==Ys){s.o=4,pn(15),Re(s.j,s.m,t,"[Invalid Chunk]"),a=!1;break}Re(s.j,s.m,h,null),sa(s,h)}ss(s)&&h!=Yr&&h!=Ys&&(s.h.g="",s.C=0),4!=e||0!=t.length||s.h.h||(s.o=1,pn(16),a=!1),s.i=s.i&&a,a?0<t.length&&!s.$&&(s.$=!0,(e=s.l).g==s&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),So(e),e.K=!0,pn(11))):(Re(s.j,s.m,t,"[Invalid Chunked Response]"),Hs(s),ro(s))}function Ko(s,e){var t=s.C,a=e.indexOf("\n",t);return-1==a?Yr:(t=Number(e.substring(t,a)),isNaN(t)?Ys:(a+=1)+t>e.length?Yr:(e=e.substr(a,t),s.C=a+t,e))}function yo(s){s.V=Date.now()+s.O,no(s,s.O)}function no(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Qn(Ge(s.gb,s),e)}function ia(s){s.B&&(Me.clearTimeout(s.B),s.B=null)}function ro(s){0==s.l.G||s.I||wc(s.l,s)}function Hs(s){ia(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Fi(s.T),Xr(s.S),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function sa(s,e){try{var t=s.l;if(0!=t.G&&(t.g==s||K(t.h,s)))if(!s.J&&K(t.h,s)&&3==t.G){try{var a=t.Fa.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<s.F))break e;xa(t),la(t)}To(t),pn(18)}}else t.Ba=h[1],0<t.Ba-t.T&&37500>h[2]&&t.L&&0==t.A&&!t.v&&(t.v=Qn(Ge(t.cb,t),6e3));if(1>=D(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ws(t,11)}else if((s.J||t.g==s)&&xa(t),!Cn(e))for(h=t.Fa.g.parse(e),e=0;e<h.length;e++){let ee=h[e];if(t.T=ee[0],ee=ee[1],2==t.G)if("c"==ee[0]){t.I=ee[1],t.ka=ee[2];const ye=ee[3];null!=ye&&(t.ma=ye,t.j.info("VER="+t.ma));const it=ee[4];null!=it&&(t.Ca=it,t.j.info("SVER="+t.Ca));const xt=ee[5];null!=xt&&"number"==typeof xt&&0<xt&&(t.J=a=1.5*xt,t.j.info("backChannelRequestTimeoutMs_="+a)),a=t;const en=s.g;if(en){const Dn=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dn){var m=a.h;m.g||-1==Dn.indexOf("spdy")&&-1==Dn.indexOf("quic")&&-1==Dn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(Ie(m,m.h),m.h=null))}if(a.D){const Zn=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Zn&&(a.za=Zn,di(a.F,a.D,Zn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-s.F,t.j.info("Handshake RTT: "+t.P+"ms"));var w=s;if((a=t).sa=sc(a,a.H?a.ka:null,a.V),w.J){Qt(a.h,w);var O=w,G=a.J;G&&O.setTimeout(G),O.B&&(ia(O),yo(O)),a.g=w}else qo(a);0<t.i.length&&al(t)}else"stop"!=ee[0]&&"close"!=ee[0]||Ws(t,7);else 3==t.G&&("stop"==ee[0]||"close"==ee[0]?"stop"==ee[0]?Ws(t,7):aa(t):"noop"!=ee[0]&&t.l&&t.l.wa(ee),t.A=0)}Wt()}catch{}}function _o(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(vt(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var t=function ds(s){if(s.oa&&"function"==typeof s.oa)return s.oa();if(!s.W||"function"!=typeof s.W){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(vt(s)||"string"==typeof s){var e=[];s=s.length;for(var t=0;t<s;t++)e.push(t);return e}e=[],t=0;for(const a in s)e[t++]=a;return e}}}(s),a=function Zs(s){if(s.W&&"function"==typeof s.W)return s.W();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(vt(s)){for(var e=[],t=s.length,a=0;a<t;a++)e.push(s[a]);return e}for(a in e=[],t=0,s)e[t++]=s[a];return e}(s),h=a.length,m=0;m<h;m++)e.call(void 0,a[m],t&&t[m],s)}(ne=Ei.prototype).setTimeout=function(s){this.O=s},ne.ib=function(s){s=s.target;const e=this.L;e&&3==uo(s)?e.l():this.La(s)},ne.La=function(s){try{if(s==this.g)e:{const ye=uo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ye)&&(3!=ye||ci||this.g&&(this.h.h||this.g.fa()||ol(this.g)))){this.I||4!=ye||7==e||Wt(),ia(this);var t=this.g.aa();this.Y=t;t:if(ss(this)){var a=ol(this.g);s="";var h=a.length,m=4==uo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),ro(this);var w="";break t}this.h.i=new Me.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:m&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==t,function de(s,e,t,a,h,m,w){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+m+" "+w})}(this.j,this.u,this.A,this.m,this.U,ye,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,G=this.g;if((O=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cn(O)){var ee=O;break t}}ee=null}if(!(t=ee)){this.i=!1,this.o=3,pn(12),Hs(this),ro(this);break e}Re(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sa(this,t)}this.P?(Wo(this,ye,w),ci&&this.i&&3==ye&&(ei(this.S,this.T,"tick",this.hb),this.T.start())):(Re(this.j,this.m,w,null),sa(this,w)),4==ye&&Hs(this),this.i&&!this.I&&(4==ye?wc(this.l,this):(this.i=!1,yo(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,pn(12)):(this.o=0,pn(13)),Hs(this),ro(this)}}}catch{}},ne.hb=function(){if(this.g){var s=uo(this.g),e=this.g.fa();this.C<e.length&&(ia(this),Wo(this,s,e),this.i&&4!=s&&yo(this))}},ne.cancel=function(){this.I=!0,Hs(this)},ne.gb=function(){this.B=null;const s=Date.now();0<=s-this.V?(function Ye(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Wt(),pn(17)),Hs(this),this.o=2,ro(this)):no(this,this.V-s)};var ga=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xs(s,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof xs){this.h=void 0!==e?e:s.h,zi(this,s.j),this.s=s.s,this.g=s.g,Ps(this,s.m),this.l=s.l,e=s.i;var t=new Ji;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zs(this,t),this.o=s.o}else s&&(t=String(s).match(ga))?(this.h=!!e,zi(this,t[1]||"",!0),this.s=io(t[2]||""),this.g=io(t[3]||"",!0),Ps(this,t[4]),this.l=io(t[5]||"",!0),zs(this,t[6]||"",!0),this.o=io(t[7]||"")):(this.h=!!e,this.i=new Ji(null,this.h))}function Ss(s){return new xs(s)}function zi(s,e,t){s.j=t?io(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function Ps(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function zs(s,e,t){e instanceof Ji?(s.i=e,function co(s,e){e&&!s.j&&(Gi(s),s.i=null,s.g.forEach(function(t,a){var h=a.toLowerCase();a!=h&&(qi(this,a),Pi(this,h,t))},s)),s.j=e}(s.i,s.h)):(t||(e=so(e,Io)),s.i=new Ji(e,s.h))}function di(s,e,t){s.i.set(e,t)}function Os(s){return di(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function io(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function so(s,e,t){return"string"==typeof s?(s=encodeURI(s).replace(e,oa),t&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function oa(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}xs.prototype.toString=function(){var s=[],e=this.j;e&&s.push(so(e,Aa,!0),":");var t=this.g;return(t||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(so(e,Aa,!0),"@"),s.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&s.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&s.push("/"),s.push(so(t,"/"==t.charAt(0)?ma:Eo,!0))),(t=this.i.toString())&&s.push("?",t),(t=this.o)&&s.push("#",so(t,wo)),s.join("")};var Aa=/[#\/\?@]/g,Eo=/[#\?:]/g,ma=/[#\?]/g,Io=/[#\?@]/g,wo=/#/g;function Ji(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Gi(s){s.g||(s.g=new Map,s.h=0,s.i&&function vo(s,e){if(s){s=s.split("&");for(var t=0;t<s.length;t++){var a=s[t].indexOf("="),h=null;if(0<=a){var m=s[t].substring(0,a);h=s[t].substring(a+1)}else m=s[t];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,t){s.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qi(s,e){Gi(s),e=ys(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function ms(s,e){return Gi(s),e=ys(s,e),s.g.has(e)}function Pi(s,e,t){qi(s,e),0<t.length&&(s.i=null,s.g.set(ys(s,e),Tt(t)),s.h+=t.length)}function ys(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function bo(s){this.l=s||C,s=Me.PerformanceNavigationTiming?0<(s=Me.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(Me.g&&Me.g.Ga&&Me.g.Ga()&&Me.g.Ga().$b),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=Ji.prototype).add=function(s,e){Gi(this),this.i=null,s=ys(this,s);var t=this.g.get(s);return t||this.g.set(s,t=[]),t.push(e),this.h+=1,this},ne.forEach=function(s,e){Gi(this),this.g.forEach(function(t,a){t.forEach(function(h){s.call(e,h,a,this)},this)},this)},ne.oa=function(){Gi(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const h=s[a];for(let m=0;m<h.length;m++)t.push(e[a])}return t},ne.W=function(s){Gi(this);let e=[];if("string"==typeof s)ms(this,s)&&(e=e.concat(this.g.get(ys(this,s))));else{s=Array.from(this.g.values());for(let t=0;t<s.length;t++)e=e.concat(s[t])}return e},ne.set=function(s,e){return Gi(this),this.i=null,ms(this,s=ys(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},ne.get=function(s,e){return s&&0<(s=this.W(s)).length?String(s[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const m=encodeURIComponent(String(a)),w=this.W(a);for(a=0;a<w.length;a++){var h=m;""!==w[a]&&(h+="="+encodeURIComponent(String(w[a]))),s.push(h)}}return this.i=s.join("&")};var C=10;function Q(s){return!!s.h||!!s.g&&s.g.size>=s.j}function D(s){return s.h?1:s.g?s.g.size:0}function K(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function Ie(s,e){s.g?s.g.add(e):s.h=e}function Qt(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function $n(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const t of s.g.values())e=e.concat(t.D);return e}return Tt(s.i)}function Gn(){}function Dr(){this.g=new Gn}function Pn(s,e,t){const a=t||"";try{_o(s,function(h,m){let w=h;Le(h)&&(w=ki(h)),e.push(a+m+"="+encodeURIComponent(w))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function z(s,e,t,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch{}}function j(s){this.l=s.ac||null,this.j=s.jb||!1}function F(s,e){fn.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=ue,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bo.prototype.cancel=function(){if(this.i=$n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},Gn.prototype.stringify=function(s){return Me.JSON.stringify(s,void 0)},Gn.prototype.parse=function(s){return Me.JSON.parse(s,void 0)},mt(j,wt),j.prototype.g=function(){return new F(this.l,this.j)},j.prototype.i=function(s){return function(){return s}}({}),mt(F,fn);var ue=0;function Ot(s){s.j.read().then(s.Ta.bind(s)).catch(s.ga.bind(s))}function Nn(s){s.readyState=4,s.l=null,s.j=null,s.A=null,hi(s)}function hi(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(ne=F.prototype).open=function(s,e){if(this.readyState!=ue)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,hi(this)},ne.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||Me).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nn(this)),this.readyState=ue},ne.Wa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Me.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ot(this)}else s.text().then(this.Va.bind(this),this.ga.bind(this))},ne.Ta=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Nn(this):hi(this),3==this.readyState&&Ot(this)}},ne.Va=function(s){this.g&&(this.response=this.responseText=s,Nn(this))},ne.Ua=function(s){this.g&&(this.response=s,Nn(this))},ne.ga=function(){this.g&&Nn(this)},ne.setRequestHeader=function(s,e){this.v.append(s,e)},ne.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var t=e.next();!t.done;)s.push((t=t.value)[0]+": "+t[1]),t=e.next();return s.join("\r\n")},Object.defineProperty(F.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var Ht=Me.JSON.parse;function Yn(s){fn.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ya,this.K=this.L=!1}mt(Yn,fn);var ya="",Ma=/^https?$/i,Ns=["POST","PUT"];function il(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Gs(s),_a(s)}function Gs(s){s.D||(s.D=!0,dr(s,"complete"),dr(s,"error"))}function sl(s){if(s.h&&typeof nt<"u"&&(!s.C[1]||4!=uo(s)||2!=s.aa()))if(s.v&&4==uo(s))gi(s.Ha,0,s);else if(dr(s,"readystatechange"),4==uo(s)){s.h=!1;try{const O=s.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===O){var h=String(s.H).match(ga)[1]||null;if(!h&&Me.self&&Me.self.location){var m=Me.self.location.protocol;h=m.substr(0,m.length-1)}a=!Ma.test(h?h.toLowerCase():"")}t=a}if(t)dr(s,"complete"),dr(s,"success");else{s.m=6;try{var w=2<uo(s)?s.g.statusText:""}catch{w=""}s.j=w+" ["+s.aa()+"]",Gs(s)}}finally{_a(s)}}}function _a(s,e){if(s.g){za(s);const t=s.g,a=s.C[0]?et:null;s.g=null,s.C=null,e||dr(s,"ready");try{t.onreadystatechange=a}catch{}}}function za(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(Me.clearTimeout(s.A),s.A=null)}function uo(s){return s.g?s.g.readyState:0}function ol(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case ya:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function os(s){let e="";return mn(s,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function ks(s,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=os(t),"string"==typeof s?null!=t&&encodeURIComponent(String(t)):di(s,e,t))}function Qs(s,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[s]||e}function Co(s){this.Ca=0,this.i=[],this.j=new Ci,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Qs("failFast",!1,s),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Qs("baseRetryDelayMs",5e3,s),this.bb=Qs("retryDelaySeedMs",1e4,s),this.$a=Qs("forwardChannelMaxRetries",2,s),this.ta=Qs("forwardChannelRequestTimeoutMs",2e4,s),this.ra=s&&s.xmlHttpFactory||void 0,this.Da=s&&s.Zb||!1,this.J=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.I="",this.h=new bo(s&&s.concurrentRequestLimit),this.Fa=new Dr,this.O=s&&s.fastHandshake||!1,this.N=s&&s.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=s&&s.Xb||!1,s&&s.Aa&&this.j.Aa(),s&&s.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&s&&s.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function aa(s){if(Ra(s),3==s.G){var e=s.U++,t=Ss(s.F);di(t,"SID",s.I),di(t,"RID",e),di(t,"TYPE","terminate"),Do(s,t),(e=new Ei(s,s.j,e,void 0)).K=2,e.v=Os(Ss(t)),t=!1,Me.navigator&&Me.navigator.sendBeacon&&(t=Me.navigator.sendBeacon(e.v.toString(),"")),!t&&Me.Image&&((new Image).src=e.v,t=!0),t||(e.g=as(e.l,null),e.g.da(e.v)),e.F=Date.now(),yo(e)}cl(s)}function la(s){s.g&&(So(s),s.g.cancel(),s.g=null)}function Ra(s){la(s),s.u&&(Me.clearTimeout(s.u),s.u=null),xa(s),s.h.cancel(),s.m&&("number"==typeof s.m&&Me.clearTimeout(s.m),s.m=null)}function al(s){Q(s.h)||s.m||(s.m=!0,pr(s.Ja,s),s.C=0)}function Ga(s,e){var t;t=e?e.m:s.U++;const a=Ss(s.F);di(a,"SID",s.I),di(a,"RID",t),di(a,"AID",s.T),Do(s,a),s.o&&s.s&&ks(a,s.o,s.s),t=new Ei(s,s.j,t,s.C+1),null===s.o&&(t.H=s.s),e&&(s.i=e.D.concat(s.i)),e=ll(s,t,1e3),t.setTimeout(Math.round(.5*s.ta)+Math.round(.5*s.ta*Math.random())),Ie(s.h,t),zo(t,a,e)}function Do(s,e){s.ia&&mn(s.ia,function(t,a){di(e,a,t)}),s.l&&_o({},function(t,a){di(e,a,t)})}function ll(s,e,t){t=Math.min(s.i.length,t);var a=s.l?Ge(s.l.Ra,s.l,s):null;e:{var h=s.i;let m=-1;for(;;){const w=["count="+t];-1==m?0<t?(m=h[0].h,w.push("ofs="+m)):m=0:w.push("ofs="+m);let O=!0;for(let G=0;G<t;G++){let ee=h[G].h;const ye=h[G].g;if(ee-=m,0>ee)m=Math.max(0,h[G].h-100),O=!1;else try{Pn(ye,w,"req"+ee+"_")}catch{a&&a(ye)}}if(O){a=w.join("&");break e}}}return s=s.i.splice(0,t),e.D=s,a}function qo(s){s.g||s.u||(s.Z=1,pr(s.Ia,s),s.A=0)}function To(s){return!(s.g||s.u||3<=s.A||(s.Z++,s.u=Qn(Ge(s.Ia,s),Pa(s,s.A)),s.A++,0))}function So(s){null!=s.B&&(Me.clearTimeout(s.B),s.B=null)}function Ao(s){s.g=new Ei(s,s.j,"rpc",s.Z),null===s.o&&(s.g.H=s.s),s.g.N=0;var e=Ss(s.sa);di(e,"RID","rpc"),di(e,"SID",s.I),di(e,"CI",s.L?"0":"1"),di(e,"AID",s.T),di(e,"TYPE","xmlhttp"),Do(s,e),s.o&&s.s&&ks(e,s.o,s.s),s.J&&s.g.setTimeout(s.J);var t=s.g;s=s.ka,t.K=1,t.v=Os(Ss(e)),t.s=null,t.P=!0,Go(t,s)}function xa(s){null!=s.v&&(Me.clearTimeout(s.v),s.v=null)}function wc(s,e){var t=null;if(s.g==e){xa(s),So(s),s.g=null;var a=2}else{if(!K(s.h,e))return;t=e.D,Qt(s.h,e),a=1}if(0!=s.G)if(s.pa=e.Y,e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;dr(a=kt(),new qn(a,t)),al(s)}else qo(s);else if(3==(h=e.o)||0==h&&0<s.pa||!(1==a&&function va(s,e){return!(D(s.h)>=s.h.j-(s.m?1:0)||(s.m?(s.i=e.D.concat(s.i),0):1==s.G||2==s.G||s.C>=(s.Za?0:s.$a)||(s.m=Qn(Ge(s.Ja,s,e),Pa(s,s.C)),s.C++,0)))}(s,e)||2==a&&To(s)))switch(t&&0<t.length&&(e=s.h,e.i=e.i.concat(t)),h){case 1:Ws(s,5);break;case 4:Ws(s,10);break;case 3:Ws(s,6);break;default:Ws(s,2)}}function Pa(s,e){let t=s.Xa+Math.floor(Math.random()*s.bb);return s.l||(t*=2),t*e}function Ws(s,e){if(s.j.info("Error code "+e),2==e){var t=null;s.l&&(t=null);var a=Ge(s.kb,s);t||(t=new xs("//www.google.com/images/cleardot.gif"),Me.location&&"http"==Me.location.protocol||zi(t,"https"),Os(t)),function Yi(s,e){const t=new Ci;if(Me.Image){const a=new Image;a.onload=_t(z,t,a,"TestLoadImage: loaded",!0,e),a.onerror=_t(z,t,a,"TestLoadImage: error",!1,e),a.onabort=_t(z,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=_t(z,t,a,"TestLoadImage: timeout",!1,e),Me.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(t.toString(),a)}else pn(2);s.G=0,s.l&&s.l.va(e),cl(s),Ra(s)}function cl(s){if(s.G=0,s.la=[],s.l){const e=$n(s.h);(0!=e.length||0!=s.i.length)&&(ct(s.la,e),ct(s.la,s.i),s.h.i.length=0,Tt(s.i),s.i.length=0),s.l.ua()}}function sc(s,e,t){var a=t instanceof xs?Ss(t):new xs(t,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),Ps(a,a.m);else{var h=Me.location;a=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var m=new xs(null,void 0);a&&zi(m,a),e&&(m.g=e),h&&Ps(m,h),t&&(m.l=t),a=m}return e=s.za,(t=s.D)&&e&&di(a,t,e),di(a,"VER",s.ma),Do(s,a),a}function as(s,e,t){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&s.Da&&!s.ra?new j({jb:!0}):s.ra)).Ka(s.H),e}function ls(){}function Xs(){if(un&&!(10<=Number(Vr)))throw Error("Environmental error: no available transport.")}function Nr(s,e){fn.call(this),this.g=new Co(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.S=s,(s=e&&e.Yb)&&!Cn(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cn(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new $i(this)}function es(s){mr.call(this);var e=s.__sm__;if(e){e:{for(const t in e){s=t;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function Ol(){ir.call(this),this.status=1}function $i(s){this.g=s}(ne=Yn.prototype).Ka=function(s){this.L=s},ne.da=function(s,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kr.g(),this.C=function Vt(s){return s.h||(s.h=s.i())}(this.u?this.u:kr),this.g.onreadystatechange=Ge(this.Ha,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(m){return void il(this,m)}if(s=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var h in a)t.set(h,a[h]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const m of a.keys())t.set(m,a.get(m))}a=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),h=Me.FormData&&s instanceof Me.FormData,!(0<=_n(Ns,e))||a||h||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,w]of t)this.g.setRequestHeader(m,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{za(this),0<this.B&&((this.K=function Ha(s){return un&&function Lr(){return function nr(s){var e=xr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=s(9)}(function(){let s=0;const e=Fn(String(Ar)).split("."),t=Fn("9").split("."),a=Math.max(e.length,t.length);for(let w=0;0==s&&w<a;w++){var h=e[w]||"",m=t[w]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;s=gn(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||gn(0==h[2].length,0==m[2].length)||gn(h[2],m[2]),h=h[3],m=m[3]}while(0==s)}return 0<=s})}()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ge(this.qa,this)):this.A=gi(this.qa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(m){il(this,m)}},ne.qa=function(){typeof nt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dr(this,"timeout"),this.abort(8))},ne.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,dr(this,"complete"),dr(this,"abort"),_a(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_a(this,!0)),Yn.X.M.call(this)},ne.Ha=function(){this.s||(this.F||this.v||this.l?sl(this):this.fb())},ne.fb=function(){sl(this)},ne.aa=function(){try{return 2<uo(this)?this.g.status:-1}catch{return-1}},ne.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ne.Sa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),Ht(e)}},ne.Ea=function(){return this.m},ne.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=Co.prototype).ma=8,ne.G=1,ne.Ja=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;const h=new Ei(this,this.j,s,void 0);let m=this.s;if(this.S&&(m?(m=Gt(m),An(m,this.S)):m=this.S),null!==this.o||this.N||(h.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var a=this.i[t];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ll(this,h,e),di(t=Ss(this.F),"RID",s),di(t,"CVER",22),this.D&&di(t,"X-HTTP-Session-Id",this.D),Do(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(os(m)))+"&"+e:this.o&&ks(t,this.o,m)),Ie(this.h,h),this.Ya&&di(t,"TYPE","init"),this.O?(di(t,"$req",e),di(t,"SID","null"),h.Z=!0,zo(h,t,null)):zo(h,t,e),this.G=2}}else 3==this.G&&(s?Ga(this,s):0==this.i.length||Q(this.h)||Ga(this))},ne.Ia=function(){if(this.u=null,Ao(this),this.$&&!(this.K||null==this.g||0>=this.P)){var s=2*this.P;this.j.info("BP detection timer enabled: "+s),this.B=Qn(Ge(this.eb,this),s)}},ne.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pn(10),la(this),Ao(this))},ne.cb=function(){null!=this.v&&(this.v=null,la(this),To(this),pn(19))},ne.kb=function(s){s?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))},(ne=ls.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Ra=function(){},Xs.prototype.g=function(s,e){return new Nr(s,e)},mt(Nr,fn),Nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,t=this.h||void 0;pn(0),s.V=e,s.ia=t||{},s.L=s.Y,s.F=sc(s,null,s.V),al(s)},Nr.prototype.close=function(){aa(this.g)},Nr.prototype.u=function(s){var e=this.g;if("string"==typeof s){var t={};t.__data__=s,s=t}else this.v&&((t={}).__data__=ki(s),s=t);e.i.push(new class{constructor(s,e){this.h=s,this.g=e}}(e.ab++,s)),3==e.G&&al(e)},Nr.prototype.M=function(){this.g.l=null,delete this.j,aa(this.g),delete this.g,Nr.X.M.call(this)},mt(es,mr),mt(Ol,ir),mt($i,ls),$i.prototype.xa=function(){dr(this.g,"a")},$i.prototype.wa=function(s){dr(this.g,new es(s))},$i.prototype.va=function(s){dr(this.g,new Ol)},$i.prototype.ua=function(){dr(this.g,"b")},Xs.prototype.createWebChannel=Xs.prototype.g,Nr.prototype.send=Nr.prototype.u,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,Je.NO_ERROR=0,Je.TIMEOUT=8,Je.HTTP_ERROR=6,at.COMPLETE="complete",an.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",fn.prototype.listen=fn.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.Oa,Yn.prototype.getLastErrorCode=Yn.prototype.Ea,Yn.prototype.getStatus=Yn.prototype.aa,Yn.prototype.getResponseJson=Yn.prototype.Sa,Yn.prototype.getResponseText=Yn.prototype.fa,Yn.prototype.send=Yn.prototype.da,Yn.prototype.setWithCredentials=Yn.prototype.Ka;var Gc=Ke.createWebChannelTransport=function(){return new Xs},fs=Ke.getStatEventTarget=function(){return kt()},Mo=Ke.ErrorCode=Je,Ro=Ke.EventType=at,Wc=Ke.Event=tt,Ea=Ke.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},L=Ke.FetchXmlHttpFactory=j,J=Ke.WebChannel=an,U=Ke.XhrIo=Yn;const ce="@firebase/firestore";class Ne{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");let Ft="9.20.0";const Zt=new Ae.Yd("@firebase/firestore");function jn(){return Zt.logLevel}function Kt(s,...e){if(Zt.logLevel<=Ae.in.DEBUG){const t=e.map(ts);Zt.debug(`Firestore (${Ft}): ${s}`,...t)}}function lr(s,...e){if(Zt.logLevel<=Ae.in.ERROR){const t=e.map(ts);Zt.error(`Firestore (${Ft}): ${s}`,...t)}}function vr(s,...e){if(Zt.logLevel<=Ae.in.WARN){const t=e.map(ts);Zt.warn(`Firestore (${Ft}): ${s}`,...t)}}function ts(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch{return s}}function dn(s="Unexpected state"){const e=`FIRESTORE (${Ft}) INTERNAL ASSERTION FAILED: `+s;throw lr(e),new Error(e)}function xn(s,e){s||dn()}function hn(s,e){return s}const Nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tn extends q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ka{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ne.UNAUTHENTICATED))}shutdown(){}}class Nl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qa{constructor(e){this.t=e,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let h=this.i;const m=ee=>this.i!==h?(h=this.i,t(ee)):Promise.resolve();let w=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Di,e.enqueueRetryable(()=>m(this.currentUser))};const O=()=>{const ee=w;e.enqueueRetryable((0,oe.Z)(function*(){yield ee.promise,yield m(a.currentUser)}))},G=ee=>{Kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ee,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ee=>G(ee)),setTimeout(()=>{if(!this.auth){const ee=this.t.getImmediate({optional:!0});ee?G(ee):(Kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Di)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(Kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(xn("string"==typeof a.accessToken),new Wa(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xn(null===e||"string"==typeof e),new Ne(e)}}class pu{constructor(e,t,a){this.h=e,this.l=t,this.m=a,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class oc{constructor(e,t,a){this.h=e,this.l=t,this.m=a}getToken(){return Promise.resolve(new pu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ul{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const a=m=>{null!=m.error&&Kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const w=m.token!==this.T;return this.T=m.token,Kt("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const h=m=>{Kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.I.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.I.getImmediate({optional:!0});m?h(m):Kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xn("string"==typeof t.token),this.T=t.token,new ul(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dd(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}class Yo{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=dd(40);for(let m=0;m<h.length;++m)a.length<20&&h[m]<t&&(a+=e.charAt(h[m]%e.length))}return a}}function hr(s,e){return s<e?-1:s>e?1:0}function Oi(s,e,t){return s.length===e.length&&s.every((a,h)=>t(a,e[h]))}function ca(s){return s+"\0"}class Ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tn(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tn(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new tn(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tn(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ti.fromMillis(Date.now())}static fromDate(e){return Ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Ti(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hr(this.nanoseconds,e.nanoseconds):hr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yr(e)}static min(){return new yr(new Ti(0,0))}static max(){return new yr(new Ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Oa{constructor(e,t,a){void 0===t?t=0:t>e.length&&dn(),void 0===a?a=e.length-t:a>e.length-t&&dn(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Oa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let h=0;h<a;h++){const m=e.get(h),w=t.get(h);if(m<w)return-1;if(m>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ti extends Oa{construct(e,t,a){return new ti(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new tn(Nt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(h=>h.length>0))}return new ti(t)}static emptyPath(){return new ti([])}}const hd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wi extends Oa{construct(e,t,a){return new Wi(e,t,a)}static isValidIdentifier(e){return hd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wi(["__name__"])}static fromServerFormat(e){const t=[];let a="",h=0;const m=()=>{if(0===a.length)throw new tn(Nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let w=!1;for(;h<e.length;){const O=e[h];if("\\"===O){if(h+1===e.length)throw new tn(Nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[h+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new tn(Nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=G,h+=2}else"`"===O?(w=!w,h++):"."!==O||w?(a+=O,h++):(m(),h++)}if(m(),w)throw new tn(Nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wi(t)}static emptyPath(){return new Wi([])}}class On{constructor(e){this.path=e}static fromPath(e){return new On(ti.fromString(e))}static fromName(e){return new On(ti.fromString(e).popFirst(5))}static empty(){return new On(ti.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ti.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ti.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new On(new ti(e.slice()))}}class bs{constructor(e,t,a,h){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=h}}function ns(s){return s.fields.find(e=>2===e.kind)}function Oo(s){return s.fields.filter(e=>2!==e.kind)}bs.UNKNOWN_ID=-1;class kl{constructor(e,t){this.fieldPath=e,this.kind=t}}class _s{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _s(0,oo.min())}}function Na(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=yr.fromTimestamp(1e9===a?new Ti(t+1,0):new Ti(t,a));return new oo(h,On.empty(),e)}function Cc(s){return new oo(s.readTime,s.key,-1)}class oo{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new oo(yr.min(),On.empty(),-1)}static max(){return new oo(yr.max(),On.empty(),-1)}}function Dc(s,e){let t=s.readTime.compareTo(e.readTime);return 0!==t?t:(t=On.comparator(s.documentKey,e.documentKey),0!==t?t:hr(s.largestBatchId,e.largestBatchId))}const Tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ya{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vs(s){return ko.apply(this,arguments)}function ko(){return ko=(0,oe.Z)(function*(s){if(s.code!==Nt.FAILED_PRECONDITION||s.message!==Tc)throw s;Kt("LocalStore","Unexpectedly lost primary lease")}),ko.apply(this,arguments)}class Lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Lt((a,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,h)},this.catchCallback=m=>{this.wrapFailure(t,m).next(a,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Lt?t:Lt.resolve(t)}catch(t){return Lt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Lt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Lt.reject(t)}static resolve(e){return new Lt((t,a)=>{t(e)})}static reject(e){return new Lt((t,a)=>{a(e)})}static waitFor(e){return new Lt((t,a)=>{let h=0,m=0,w=!1;e.forEach(O=>{++h,O.next(()=>{++m,w&&m===h&&t()},G=>a(G))}),w=!0,m===h&&t()})}static or(e){let t=Lt.resolve(!1);for(const a of e)t=t.next(h=>h?Lt.resolve(h):a());return t}static forEach(e,t){const a=[];return e.forEach((h,m)=>{a.push(t.call(this,h,m))}),this.waitFor(a)}static mapArray(e,t){return new Lt((a,h)=>{const m=e.length,w=new Array(m);let O=0;for(let G=0;G<m;G++){const ee=G;t(e[ee]).next(ye=>{w[ee]=ye,++O,O===m&&a(w)},ye=>h(ye))}})}static doWhile(e,t){return new Lt((a,h)=>{const m=()=>{!0===e()?t().next(()=>{m()},h):a()};m()})}}class ac{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Di,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Ac(e,t.error)):this.R.resolve()},this.transaction.onerror=a=>{const h=dl(a.target.error);this.R.reject(new Ac(e,h))}}static open(e,t,a,h){try{return new ac(t,e.transaction(h,a))}catch(m){throw new Ac(t,m)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ip(t)}}class As{constructor(e,t,a){this.name=e,this.version=t,this.V=a,12.2===As.S((0,q.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Kt("SimpleDb","Removing database:",e),ua(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,q.hl)())return!1;if(As.C())return!0;const e=(0,q.z$)(),t=As.S(e),a=0<t&&t<10,h=As.N(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static N(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}$(e){var t=this;return(0,oe.Z)(function*(){return t.db||(Kt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,h)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=w=>{a(w.target.result)},m.onblocked=()=>{h(new Ac(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=w=>{const O=w.target.error;h("VersionError"===O.name?new tn(Nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new tn(Nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new Ac(e,O))},m.onupgradeneeded=w=>{Kt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.V.M(w.target.result,m.transaction,w.oldVersion,t.version).next(()=>{Kt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=a=>t.F(a)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,h){var m=this;return(0,oe.Z)(function*(){const w="readonly"===t;let O=0;for(;;){++O;try{m.db=yield m.$(e);const G=ac.open(m.db,e,w?"readonly":"readwrite",a),ee=h(G).next(ye=>(G.P(),ye)).catch(ye=>(G.abort(ye),Lt.reject(ye))).toPromise();return ee.catch(()=>{}),yield G.v,ee}catch(G){const ee=G,ye="FirebaseError"!==ee.name&&O<3;if(Kt("SimpleDb","Transaction failed with error:",ee.message,"Retrying:",ye),m.close(),!ye)return Promise.reject(ee)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Sc{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ua(this.L.delete())}}class Ac extends tn{constructor(e,t){super(Nt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fi(s){return"IndexedDbTransactionError"===s.name}class Ip{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(Kt("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(Kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ua(a)}add(e){return Kt("SimpleDb","ADD",this.store.name,e,e),ua(this.store.add(e))}get(e){return ua(this.store.get(e)).next(t=>(void 0===t&&(t=null),Kt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Kt("SimpleDb","DELETE",this.store.name,e),ua(this.store.delete(e))}count(){return Kt("SimpleDb","COUNT",this.store.name),ua(this.store.count())}j(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),m=[];return this.W(h,(w,O)=>{m.push(O)}).next(()=>m)}{const h=this.store.getAll(a.range);return new Lt((m,w)=>{h.onerror=O=>{w(O.target.error)},h.onsuccess=O=>{m(O.target.result)}})}}H(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new Lt((h,m)=>{a.onerror=w=>{m(w.target.error)},a.onsuccess=w=>{h(w.target.result)}})}J(e,t){Kt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.Y=!1;const h=this.cursor(a);return this.W(h,(m,w,O)=>O.delete())}Z(e,t){let a;t?a=e:(a={},t=e);const h=this.cursor(a);return this.W(h,t)}X(e){const t=this.cursor({});return new Lt((a,h)=>{t.onerror=m=>{const w=dl(m.target.error);h(w)},t.onsuccess=m=>{const w=m.target.result;w?e(w.primaryKey,w.value).next(O=>{O?w.continue():a()}):a()}})}W(e,t){const a=[];return new Lt((h,m)=>{e.onerror=w=>{m(w.target.error)},e.onsuccess=w=>{const O=w.target.result;if(!O)return void h();const G=new Sc(O),ee=t(O.primaryKey,O.value,G);if(ee instanceof Lt){const ye=ee.catch(it=>(G.done(),Lt.reject(it)));a.push(ye)}G.isDone?h():null===G.K?O.continue():O.continue(G.K)}}).next(()=>Lt.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.Y?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ua(s){return new Lt((e,t)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=dl(a.target.error);t(h)}})}let fd=!1;function dl(s){const e=As.S((0,q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const a=new tn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fd||(fd=!0,setTimeout(()=>{throw a},0)),a}}return s}class pd{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Kt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,oe.Z)(function*(){t.task=null;try{Kt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(a){fi(a)?Kt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield vs(a)}yield t.et(6e4)}))}}class uh{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,oe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.st(a,e))})()}st(e,t){const a=new Set;let h=t,m=!0;return Lt.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!a.has(w))return Kt("IndexBackiller",`Processing collection: ${w}`),this.it(e,w,h).next(O=>{h-=O,a.add(w)});m=!1})).next(()=>t-h)}it(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,a).next(m=>{const w=m.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.rt(h,m)).next(O=>(Kt("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,t,O))).next(()=>w.size)}))}rt(e,t){let a=e;return t.changes.forEach((h,m)=>{const w=Cc(m);Dc(w,a)>0&&(a=w)}),new oo(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fo=(()=>{class s{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=h=>this.ot(h),this.ut=h=>a.writeSequenceNumber(h))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return s.ct=-1,s})();function ka(s){return null==s}function lc(s){return 0===s&&1/s==-1/0}function gu(s){return"number"==typeof s&&Number.isInteger(s)&&!lc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function mi(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Za(e)),e=Mc(s.get(t),e);return Za(e)}function Mc(s,e){let t=e;const a=s.length;for(let h=0;h<a;h++){const m=s.charAt(h);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Za(s){return s+"\x01\x01"}function Lo(s){const e=s.length;if(xn(e>=2),2===e)return xn("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),ti.emptyPath();const t=e-2,a=[];let h="";for(let m=0;m<e;){const w=s.indexOf("\x01",m);switch((w<0||w>t)&&dn(),s.charAt(w+1)){case"\x01":const O=s.substring(m,w);let G;0===h.length?G=O:(h+=O,G=h,h=""),a.push(G);break;case"\x10":h+=s.substring(m,w),h+="\0";break;case"\x11":h+=s.substring(m,w+1);break;default:dn()}m=w+2}return new ti(a)}const Bo=["userId","batchId"];function S(s,e){return[s,mi(e)]}function R(s,e,t){return[s,mi(e),t]}const b={},N=["prefixPath","collectionGroup","readTime","documentId"],H=["prefixPath","collectionGroup","documentId"],re=["collectionGroup","readTime","prefixPath","documentId"],le=["canonicalId","targetId"],ht=["targetId","path"],Dt=["path","targetId"],wn=["collectionId","parent"],Un=["indexId","uid"],Vn=["uid","sequenceNumber"],ai=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jr=["indexId","uid","orderedDocumentKey"],Tr=["userId","collectionPath","documentId"],Zi=["userId","collectionPath","largestBatchId"],Fs=["userId","collectionGroup","largestBatchId"],Zo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ps=[...Zo,"documentOverlays"],hl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ho=hl,fl=[...ho,"indexConfiguration","indexState","indexEntries"];class Fl extends Ya{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Qi(s,e){const t=hn(s);return As.O(t.at,e)}function pl(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function V(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function W(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class se{constructor(e,t){this.comparator=e,this.root=t||Et.EMPTY}insert(e,t){return new se(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return t+a.left.size;h<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qe(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qe(this.root,e,this.comparator,!1)}getReverseIterator(){return new qe(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qe(this.root,e,this.comparator,!0)}}class qe{constructor(e,t,a,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?a(e.key,t):1,t&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,t,a,h,m){this.key=e,this.value=t,this.color=null!=a?a:Et.RED,this.left=null!=h?h:Et.EMPTY,this.right=null!=m?m:Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,h,m){return new Et(null!=e?e:this.key,null!=t?t:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let h=this;const m=a(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,t,a),null):0===m?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return Et.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dn();const e=this.left.check();if(e!==this.right.check())throw dn();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1,Et.EMPTY=new class{constructor(){this.size=0}get key(){throw dn()}get value(){throw dn()}get color(){throw dn()}get left(){throw dn()}get right(){throw dn()}copy(s,e,t,a,h){return this}insert(s,e,t){return new Et(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class St{constructor(e){this.comparator=e,this.data=new se(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cn(this.data.getIterator())}getIteratorFrom(e){return new cn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=a.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class cn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kn(s){return s.hasNext()?s.getNext():void 0}class ln{constructor(e){this.fields=e,e.sort(Wi.comparator)}static empty(){return new ln([])}unionWith(e){let t=new St(Wi.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class wr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new wr("Invalid base64 string: "+h):h}}(e);return new tr(t)}static fromUint8Array(e){const t=function(a){let h="";for(let m=0;m<a.length;++m)h+=String.fromCharCode(a[m]);return h}(e);return new tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const Ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(s){if(xn(!!s),"string"==typeof s){let e=0;const t=Ms.exec(s);if(xn(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ii(s.seconds),nanos:Ii(s.nanos)}}function Ii(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function gl(s){return"string"==typeof s?tr.fromBase64String(s):tr.fromUint8Array(s)}function Cs(s){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $o(s){const e=s.mapValue.fields.__previous_value__;return Cs(e)?$o(e):e}function Uo(s){const e=Ki(s.mapValue.fields.__local_write_time__.timestampValue);return new Ti(e.seconds,e.nanos)}class Rc{constructor(e,t,a,h,m,w,O,G){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=h,this.ssl=m,this.forceLongPolling=w,this.autoDetectLongPolling=O,this.useFetchStreams=G}}class cc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}const Ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xc={nullValue:"NULL_VALUE"};function uc(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cs(s)?4:Oc(s)?9007199254740991:10:dn()}function Qo(s,e){if(s===e)return!0;const t=uc(s);if(t!==uc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Uo(s).isEqual(Uo(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const m=Ki(a.timestampValue),w=Ki(h.timestampValue);return m.seconds===w.seconds&&m.nanos===w.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,gl(s.bytesValue).isEqual(gl(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return Ii(a.geoPointValue.latitude)===Ii(h.geoPointValue.latitude)&&Ii(a.geoPointValue.longitude)===Ii(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return Ii(a.integerValue)===Ii(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const m=Ii(a.doubleValue),w=Ii(h.doubleValue);return m===w?lc(m)===lc(w):isNaN(m)&&isNaN(w)}return!1}(s,e);case 9:return Oi(s.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:return function(a,h){const m=a.mapValue.fields||{},w=h.mapValue.fields||{};if(pl(m)!==pl(w))return!1;for(const O in m)if(m.hasOwnProperty(O)&&(void 0===w[O]||!Qo(m[O],w[O])))return!1;return!0}(s,e);default:return dn()}var h}function Pc(s,e){return void 0!==(s.values||[]).find(t=>Qo(t,e))}function ml(s,e){if(s===e)return 0;const t=uc(s),a=uc(e);if(t!==a)return hr(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return hr(s.booleanValue,e.booleanValue);case 2:return function(h,m){const w=Ii(h.integerValue||h.doubleValue),O=Ii(m.integerValue||m.doubleValue);return w<O?-1:w>O?1:w===O?0:isNaN(w)?isNaN(O)?0:-1:1}(s,e);case 3:return wp(s.timestampValue,e.timestampValue);case 4:return wp(Uo(s),Uo(e));case 5:return hr(s.stringValue,e.stringValue);case 6:return function(h,m){const w=gl(h),O=gl(m);return w.compareTo(O)}(s.bytesValue,e.bytesValue);case 7:return function(h,m){const w=h.split("/"),O=m.split("/");for(let G=0;G<w.length&&G<O.length;G++){const ee=hr(w[G],O[G]);if(0!==ee)return ee}return hr(w.length,O.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,m){const w=hr(Ii(h.latitude),Ii(m.latitude));return 0!==w?w:hr(Ii(h.longitude),Ii(m.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,m){const w=h.values||[],O=m.values||[];for(let G=0;G<w.length&&G<O.length;++G){const ee=ml(w[G],O[G]);if(ee)return ee}return hr(w.length,O.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===Ll.mapValue&&m===Ll.mapValue)return 0;if(h===Ll.mapValue)return 1;if(m===Ll.mapValue)return-1;const w=h.fields||{},O=Object.keys(w),G=m.fields||{},ee=Object.keys(G);O.sort(),ee.sort();for(let ye=0;ye<O.length&&ye<ee.length;++ye){const it=hr(O[ye],ee[ye]);if(0!==it)return it;const xt=ml(w[O[ye]],G[ee[ye]]);if(0!==xt)return xt}return hr(O.length,ee.length)}(s.mapValue,e.mapValue);default:throw dn()}}function wp(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return hr(s,e);const t=Ki(s),a=Ki(e),h=hr(t.seconds,a.seconds);return 0!==h?h:hr(t.nanos,a.nanos)}function mu(s){return yu(s)}function yu(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=Ki(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?gl(s.bytesValue).toBase64():"referenceValue"in s?On.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",m=!0;for(const w of a.values||[])m?m=!1:h+=",",h+=yu(w);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let m="{",w=!0;for(const O of h)w?w=!1:m+=",",m+=`${O}:${yu(a.fields[O])}`;return m+"}"}(s.mapValue):dn();var e}function ji(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ef(s){return!!s&&"integerValue"in s}function _u(s){return!!s&&"arrayValue"in s}function dh(s){return!!s&&"nullValue"in s}function If(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function dc(s){return!!s&&"mapValue"in s}function Xo(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return V(s.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Xo(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xo(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Oc(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kr(s){return"nullValue"in s?xc:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ji(cc.empty(),On.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:dn()}function wf(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ji(cc.empty(),On.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?Ll:dn()}function Kc(s,e){const t=ml(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function wa(s,e){const t=ml(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!dc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(t)}setAll(e){let t=Wi.emptyPath(),a={},h=[];e.forEach((w,O)=>{if(!t.isImmediateParentOf(O)){const G=this.getFieldsMap(t);this.applyChanges(G,a,h),a={},h=[],t=O.popLast()}w?a[O.lastSegment()]=Xo(w):h.push(O.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,a,h)}delete(e){const t=this.field(e.popLast());dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=t.mapValue.fields[e.get(a)];dc(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,a){V(t,(h,m)=>e[h]=m);for(const h of a)delete e[h]}clone(){return new li(Xo(this.value))}}function hh(s){const e=[];return V(s.fields,(t,a)=>{const h=new Wi([t]);if(dc(a)){const m=hh(a.mapValue).fields;if(0===m.length)e.push(h);else for(const w of m)e.push(h.child(w))}else e.push(h)}),new ln(e)}class Es{constructor(e,t,a,h,m,w,O){this.key=e,this.documentType=t,this.version=a,this.readTime=h,this.createTime=m,this.data=w,this.documentState=O}static newInvalidDocument(e){return new Es(e,0,yr.min(),yr.min(),yr.min(),li.empty(),0)}static newFoundDocument(e,t,a,h){return new Es(e,1,t,yr.min(),a,h,0)}static newNoDocument(e,t){return new Es(e,2,t,yr.min(),yr.min(),li.empty(),0)}static newUnknownDocument(e,t){return new Es(e,3,t,yr.min(),yr.min(),li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Es&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yl{constructor(e,t){this.position=e,this.inclusive=t}}function gd(s,e,t){let a=0;for(let h=0;h<s.position.length;h++){const m=e[h],w=s.position[h];if(a=m.field.isKeyField()?On.comparator(On.fromName(w.referenceValue),t.key):ml(w,t.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function qc(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Qo(s.position[t],e.position[t]))return!1;return!0}class Bl{constructor(e,t="asc"){this.field=e,this.dir=t}}function md(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class yd{}class yi extends yd{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,a):new kg(e,t,a):"array-contains"===t?new vu(e,a):"in"===t?new Cf(e,a):"not-in"===t?new Ed(e,a):"array-contains-any"===t?new Eu(e,a):new yi(e,t,a)}static createKeyFieldInFilter(e,t,a){return"in"===t?new Yc(e,a):new ph(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ml(t,this.value)):null!==t&&uc(this.value)===uc(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Li extends yd{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Li(e,t)}matches(e){return ao(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ao(s){return"and"===s.op}function Nc(s){return"or"===s.op}function fh(s){return _d(s)&&ao(s)}function _d(s){for(const e of s.filters)if(e instanceof Li)return!1;return!0}function fo(s){if(s instanceof yi)return s.field.canonicalString()+s.op.toString()+mu(s.value);if(fh(s))return s.filters.map(e=>fo(e)).join(",");{const e=s.filters.map(t=>fo(t)).join(",");return`${s.op}(${e})`}}function kc(s,e){return s instanceof yi?(t=s,(a=e)instanceof yi&&t.op===a.op&&t.field.isEqual(a.field)&&Qo(t.value,a.value)):s instanceof Li?function(t,a){return a instanceof Li&&t.op===a.op&&t.filters.length===a.filters.length&&t.filters.reduce((h,m,w)=>h&&kc(m,a.filters[w]),!0)}(s,e):void dn();var t,a}function bf(s,e){const t=s.filters.concat(e);return Li.create(t,s.op)}function vd(s){return s instanceof yi?`${(e=s).field.canonicalString()} ${e.op} ${mu(e.value)}`:s instanceof Li?function(e){return e.op.toString()+" {"+e.getFilters().map(vd).join(" ,")+"}"}(s):"Filter";var e}class kg extends yi{constructor(e,t,a){super(e,t,a),this.key=On.fromName(a.referenceValue)}matches(e){const t=On.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yc extends yi{constructor(e,t){super(e,"in",t),this.keys=gh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ph extends yi{constructor(e,t){super(e,"not-in",t),this.keys=gh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gh(s,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>On.fromName(a.referenceValue))}class vu extends yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _u(t)&&Pc(t.arrayValue,this.value)}}class Cf extends yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pc(this.value.arrayValue,t)}}class Ed extends yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pc(this.value.arrayValue,t)}}class Eu extends yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_u(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Pc(this.value.arrayValue,a))}}class Zc{constructor(e,t=null,a=[],h=[],m=null,w=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=h,this.limit=m,this.startAt=w,this.endAt=O,this.ft=null}}function Qc(s,e=null,t=[],a=[],h=null,m=null,w=null){return new Zc(s,e,t,a,h,m,w)}function Iu(s){const e=hn(s);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>fo(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),ka(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>mu(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>mu(a)).join(",")),e.ft=t}return e.ft}function _l(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!md(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!kc(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!qc(s.startAt,e.startAt)&&qc(s.endAt,e.endAt)}function wu(s){return On.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Xc(s,e){return s.filters.filter(t=>t instanceof yi&&t.field.isEqual(e))}function Id(s,e,t){let a=xc,h=!0;for(const m of Xc(s,e)){let w=xc,O=!0;switch(m.op){case"<":case"<=":w=Kr(m.value);break;case"==":case"in":case">=":w=m.value;break;case">":w=m.value,O=!1;break;case"!=":case"not-in":w=xc}Kc({value:a,inclusive:h},{value:w,inclusive:O})<0&&(a=w,h=O)}if(null!==t)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const w=t.position[m];Kc({value:a,inclusive:h},{value:w,inclusive:t.inclusive})<0&&(a=w,h=t.inclusive);break}return{value:a,inclusive:h}}function wd(s,e,t){let a=Ll,h=!0;for(const m of Xc(s,e)){let w=Ll,O=!0;switch(m.op){case">=":case">":w=wf(m.value),O=!1;break;case"==":case"in":case"<=":w=m.value;break;case"<":w=m.value,O=!1;break;case"!=":case"not-in":w=Ll}wa({value:a,inclusive:h},{value:w,inclusive:O})>0&&(a=w,h=O)}if(null!==t)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const w=t.position[m];wa({value:a,inclusive:h},{value:w,inclusive:t.inclusive})>0&&(a=w,h=t.inclusive);break}return{value:a,inclusive:h}}class Ks{constructor(e,t=null,a=[],h=[],m=null,w="F",O=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=h,this.limit=m,this.limitType=w,this.startAt=O,this.endAt=G,this.dt=null,this.wt=null}}function hc(s,e,t,a,h,m,w,O){return new Ks(s,e,t,a,h,m,w,O)}function $l(s){return new Ks(s)}function bd(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function bu(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function vl(s){for(const e of s.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function fc(s){return null!==s.collectionGroup}function El(s){const e=hn(s);if(null===e.dt){e.dt=[];const t=vl(e),a=bu(e);if(null!==t&&null===a)t.isKeyField()||e.dt.push(new Bl(t)),e.dt.push(new Bl(Wi.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e.dt.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Bl(Wi.keyField(),m))}}}return e.dt}function M(s){const e=hn(s);if(!e.wt)if("F"===e.limitType)e.wt=Qc(e.path,e.collectionGroup,El(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of El(e))t.push(new Bl(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new yl(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new yl(e.startAt.position,e.startAt.inclusive):null;e.wt=Qc(e.path,e.collectionGroup,t,e.filters,e.limit,a,h)}return e.wt}function _(s,e){e.getFirstInequalityField(),vl(s);const t=s.filters.concat([e]);return new Ks(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function I(s,e,t){return new Ks(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function x(s,e){return _l(M(s),M(e))&&s.limitType===e.limitType}function te(s){return`${Iu(M(s))}|lt:${s.limitType}`}function Ee(s){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(a=>vd(a)).join(", ")}]`),ka(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(a=>{return`${(h=a).field.canonicalString()} (${h.dir})`;var h}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>mu(a)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>mu(a)).join(",")),`Target(${t})`}(M(s))}; limitType=${s.limitType})`}function It(s,e){return e.isFoundDocument()&&function(t,a){const h=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):On.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(s,e)&&function(t,a){for(const h of El(t))if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(t,a){for(const h of t.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((t=s).startAt&&!function(h,m,w){const O=gd(h,m,w);return h.inclusive?O<=0:O<0}(t.startAt,El(t),a)||t.endAt&&!function(h,m,w){const O=gd(h,m,w);return h.inclusive?O>=0:O>0}(t.endAt,El(t),a)));var t,a}function Bt(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Mn(s){return(e,t)=>{let a=!1;for(const h of El(s)){const m=Ln(h,e,t);if(0!==m)return m;a=a||h.field.isKeyField()}return 0}}function Ln(s,e,t){const a=s.field.isKeyField()?On.comparator(e.key,t.key):function(h,m,w){const O=m.data.field(h),G=w.data.field(h);return null!==O&&null!==G?ml(O,G):dn()}(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return dn()}}class Wn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[h,m]of a)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,t]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[t]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){V(this.inner,(t,a)=>{for(const[h,m]of a)e(h,m)})}isEmpty(){return W(this.inner)}size(){return this.innerSize}}const qr=new se(On.comparator);function Bi(){return qr}const Mi=new se(On.comparator);function lo(...s){let e=Mi;for(const t of s)e=e.insert(t.key,t);return e}function Jc(s){let e=Mi;return s.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Fa(){return Fc()}function eu(){return Fc()}function Fc(){return new Wn(s=>s.toString(),(s,e)=>s.isEqual(e))}const Ul=new se(On.comparator),mh=new St(On.comparator);function Or(...s){let e=mh;for(const t of s)e=e.add(t);return e}const tu=new St(hr);function Il(){return tu}function Cu(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function Vl(s){return{integerValue:""+s}}function Df(s,e){return gu(e)?Vl(e):Cu(s,e)}class yh{constructor(){this._=void 0}}function Fg(s,e,t){return s instanceof vh?function(a,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(t,e):s instanceof Du?Bg(s,e):s instanceof Tu?ey(s,e):function(a,h){const m=_h(a,h),w=$g(m)+$g(a._t);return Ef(m)&&Ef(a._t)?Vl(w):Cu(a.serializer,w)}(s,e)}function Lg(s,e,t){return s instanceof Du?Bg(s,e):s instanceof Tu?ey(s,e):t}function _h(s,e){return s instanceof Cd?Ef(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class vh extends yh{}class Du extends yh{constructor(e){super(),this.elements=e}}function Bg(s,e){const t=Tf(e);for(const a of s.elements)t.some(h=>Qo(h,a))||t.push(a);return{arrayValue:{values:t}}}class Tu extends yh{constructor(e){super(),this.elements=e}}function ey(s,e){let t=Tf(e);for(const a of s.elements)t=t.filter(h=>!Qo(h,a));return{arrayValue:{values:t}}}class Cd extends yh{constructor(e,t){super(),this.serializer=e,this._t=t}}function $g(s){return Ii(s.integerValue||s.doubleValue)}function Tf(s){return _u(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Dd{constructor(e,t){this.field=e,this.transform=t}}class bp{constructor(e,t){this.version=e,this.transformResults=t}}class Ds{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cp(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class Td{}function Dp(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new Ih(s.key,Ds.none()):new Ad(s.key,s.data,Ds.none());{const t=s.data,a=li.empty();let h=new St(Wi.comparator);for(let m of e.fields)if(!h.has(m)){let w=t.field(m);null===w&&m.length>1&&(m=m.popLast(),w=t.field(m)),null===w?a.delete(m):a.set(m,w),h=h.add(m)}return new pc(s.key,a,new ln(h.toArray()),Ds.none())}}function Ug(s,e,t){s instanceof Ad?function(a,h,m){const w=a.value.clone(),O=Su(a.fieldTransforms,h,m.transformResults);w.setAll(O),h.convertToFoundDocument(m.version,w).setHasCommittedMutations()}(s,e,t):s instanceof pc?function(a,h,m){if(!Cp(a.precondition,h))return void h.convertToUnknownDocument(m.version);const w=Su(a.fieldTransforms,h,m.transformResults),O=h.data;O.setAll(Af(a)),O.setAll(w),h.convertToFoundDocument(m.version,O).setHasCommittedMutations()}(s,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sd(s,e,t,a){return s instanceof Ad?function(h,m,w,O){if(!Cp(h.precondition,m))return w;const G=h.value.clone(),ee=ty(h.fieldTransforms,O,m);return G.setAll(ee),m.convertToFoundDocument(m.version,G).setHasLocalMutations(),null}(s,e,t,a):s instanceof pc?function(h,m,w,O){if(!Cp(h.precondition,m))return w;const G=ty(h.fieldTransforms,O,m),ee=m.data;return ee.setAll(Af(h)),ee.setAll(G),m.convertToFoundDocument(m.version,ee).setHasLocalMutations(),null===w?null:w.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ye=>ye.field))}(s,e,t,a):(w=t,Cp(s.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):w);var m,w}function Sf(s,e){let t=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),m=_h(a.transform,h||null);null!=m&&(null===t&&(t=li.empty()),t.set(a.field,m))}return t||null}function Tp(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=s.fieldTransforms)&&void 0===a||t&&a&&Oi(t,a,(h,m)=>function Eh(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(t=s.transform)instanceof Du&&a instanceof Du||t instanceof Tu&&a instanceof Tu?Oi(t.elements,a.elements,Qo):t instanceof Cd&&a instanceof Cd?Qo(t._t,a._t):t instanceof vh&&a instanceof vh);var t,a}(h,m))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var t,a}class Ad extends Td{constructor(e,t,a,h=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class pc extends Td{constructor(e,t,a,h,m=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Af(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}}),e}function Su(s,e,t){const a=new Map;xn(s.length===t.length);for(let h=0;h<t.length;h++){const m=s[h],w=m.transform,O=e.data.field(m.field);a.set(m.field,Lg(w,O,t[h]))}return a}function ty(s,e,t){const a=new Map;for(const h of s){const m=h.transform,w=t.data.field(h.field);a.set(h.field,Fg(m,w,e))}return a}class Ih extends Td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vg extends Td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sp{constructor(e,t,a,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&Ug(m,e,a[h])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Sd(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Sd(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=eu();return this.mutations.forEach(h=>{const m=e.get(h.key),w=m.overlayedDocument;let O=this.applyToLocalView(w,m.mutatedFields);O=t.has(h.key)?null:O;const G=Dp(w,O);null!==G&&a.set(h.key,G),w.isValidDocument()||w.convertToNoDocument(yr.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Or())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(t,a)=>Tp(t,a))&&Oi(this.baseMutations,e.baseMutations,(t,a)=>Tp(t,a))}}class wh{constructor(e,t,a,h){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=h}static from(e,t,a){xn(e.mutations.length===a.length);let h=Ul;const m=e.mutations;for(let w=0;w<m.length;w++)h=h.insert(m[w].key,a[w].version);return new wh(e,t,a,h)}}class wl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hg{constructor(e){this.count=e}}var po,Ui;function ry(s){switch(s){default:return dn();case Nt.CANCELLED:case Nt.UNKNOWN:case Nt.DEADLINE_EXCEEDED:case Nt.RESOURCE_EXHAUSTED:case Nt.INTERNAL:case Nt.UNAVAILABLE:case Nt.UNAUTHENTICATED:return!1;case Nt.INVALID_ARGUMENT:case Nt.NOT_FOUND:case Nt.ALREADY_EXISTS:case Nt.PERMISSION_DENIED:case Nt.FAILED_PRECONDITION:case Nt.ABORTED:case Nt.OUT_OF_RANGE:case Nt.UNIMPLEMENTED:case Nt.DATA_LOSS:return!0}}function zg(s){if(void 0===s)return lr("GRPC error has no .code"),Nt.UNKNOWN;switch(s){case po.OK:return Nt.OK;case po.CANCELLED:return Nt.CANCELLED;case po.UNKNOWN:return Nt.UNKNOWN;case po.DEADLINE_EXCEEDED:return Nt.DEADLINE_EXCEEDED;case po.RESOURCE_EXHAUSTED:return Nt.RESOURCE_EXHAUSTED;case po.INTERNAL:return Nt.INTERNAL;case po.UNAVAILABLE:return Nt.UNAVAILABLE;case po.UNAUTHENTICATED:return Nt.UNAUTHENTICATED;case po.INVALID_ARGUMENT:return Nt.INVALID_ARGUMENT;case po.NOT_FOUND:return Nt.NOT_FOUND;case po.ALREADY_EXISTS:return Nt.ALREADY_EXISTS;case po.PERMISSION_DENIED:return Nt.PERMISSION_DENIED;case po.FAILED_PRECONDITION:return Nt.FAILED_PRECONDITION;case po.ABORTED:return Nt.ABORTED;case po.OUT_OF_RANGE:return Nt.OUT_OF_RANGE;case po.UNIMPLEMENTED:return Nt.UNIMPLEMENTED;case po.DATA_LOSS:return Nt.DATA_LOSS;default:return dn()}}(Ui=po||(po={}))[Ui.OK=0]="OK",Ui[Ui.CANCELLED=1]="CANCELLED",Ui[Ui.UNKNOWN=2]="UNKNOWN",Ui[Ui.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ui[Ui.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ui[Ui.NOT_FOUND=5]="NOT_FOUND",Ui[Ui.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ui[Ui.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ui[Ui.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ui[Ui.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ui[Ui.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ui[Ui.ABORTED=10]="ABORTED",Ui[Ui.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ui[Ui.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ui[Ui.INTERNAL=13]="INTERNAL",Ui[Ui.UNAVAILABLE=14]="UNAVAILABLE",Ui[Ui.DATA_LOSS=15]="DATA_LOSS";class Gg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ap}static getOrCreateInstance(){return null===Ap&&(Ap=new Gg),Ap}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Ap=null;class Mf{constructor(e,t,a,h,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const h=new Map;return h.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Mf(yr.min(),h,Il(),Bi(),Or())}}class bh{constructor(e,t,a,h,m){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new bh(a,t,Or(),Or(),Or())}}class Rd{constructor(e,t,a,h){this.It=e,this.removedTargetIds=t,this.key=a,this.Tt=h}}class gc{constructor(e,t){this.targetId=e,this.Et=t}}class xd{constructor(e,t,a=tr.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=h}}class Wg{constructor(){this.At=0,this.Rt=iy(),this.vt=tr.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Or(),t=Or(),a=Or();return this.Rt.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:a=a.add(h);break;default:dn()}}),new bh(this.vt,this.bt,e,t,a)}xt(){this.Pt=!1,this.Rt=iy()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class Kg{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Bi(),this.qt=Ch(),this.Ut=new St(hr)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const a=this.jt(t);switch(e.state){case 0:this.Wt(t)&&a.Dt(e.resumeToken);break;case 1:a.$t(),a.Vt||a.xt(),a.Dt(e.resumeToken);break;case 2:a.$t(),a.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(a.Mt(),a.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),a.Dt(e.resumeToken));break;default:dn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((a,h)=>{this.Wt(h)&&t(h)})}Jt(e){var t;const a=e.targetId,h=e.Et.count,m=this.Yt(a);if(m){const w=m.target;if(wu(w))if(0===h){const O=new On(w.path);this.Qt(a,O,Es.newNoDocument(O,yr.min()))}else xn(1===h);else{const O=this.Zt(a);O!==h&&(this.Ht(a),this.Ut=this.Ut.add(a),null===(t=Gg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:O,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((m,w)=>{const O=this.Yt(w);if(O){if(m.current&&wu(O.target)){const G=new On(O.target.path);null!==this.Lt.get(G)||this.te(w,G)||this.Qt(w,G,Es.newNoDocument(G,e))}m.St&&(t.set(w,m.Ct()),m.xt())}});let a=Or();this.qt.forEach((m,w)=>{let O=!0;w.forEachWhile(G=>{const ee=this.Yt(G);return!ee||2===ee.purpose||(O=!1,!1)}),O&&(a=a.add(m))}),this.Lt.forEach((m,w)=>w.setReadTime(e));const h=new Mf(e,t,this.Ut,this.Lt,a);return this.Lt=Bi(),this.qt=Ch(),this.Ut=new St(hr),h}Gt(e,t){if(!this.Wt(e))return;const a=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,a),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,a){if(!this.Wt(e))return;const h=this.jt(e);this.te(e,t)?h.Nt(t,1):h.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),a&&(this.Lt=this.Lt.insert(t,a))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new Wg,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new St(hr),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Kt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new Wg),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function Ch(){return new se(On.comparator)}function iy(){return new se(On.comparator)}const Pv={asc:"ASCENDING",desc:"DESCENDING"},Ov={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qg={and:"AND",or:"OR"};class Rf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function sy(s,e){return Dh(s,e.toTimestamp())}function Js(s){return xn(!!s),yr.fromTimestamp(function(e){const t=Ki(e);return new Ti(t.seconds,t.nanos)}(s))}function Lc(s,e){return(t=s,new ti(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Yg(s){const e=ti.fromString(s);return xn(kd(e)),e}function Th(s,e){return Lc(s.databaseId,e.path)}function Jo(s,e){const t=Yg(e);if(t.get(1)!==s.databaseId.projectId)throw new tn(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new tn(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new On(oy(t))}function nu(s,e){return Lc(s.databaseId,e)}function Sh(s){const e=Yg(s);return 4===e.length?ti.emptyPath():oy(e)}function Pd(s){return new ti(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function oy(s){return xn(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function eo(s,e,t){return{name:Th(s,e),fields:t.value.mapValue.fields}}function Zg(s,e,t){const a=Jo(s,e.name),h=Js(e.updateTime),m=e.createTime?Js(e.createTime):yr.min(),w=new li({mapValue:{fields:e.fields}}),O=Es.newFoundDocument(a,h,m,w);return t&&O.setHasCommittedMutations(),t?O.setHasCommittedMutations():O}function bl(s,e){let t;if(e instanceof Ad)t={update:eo(s,e.key,e.value)};else if(e instanceof Ih)t={delete:Th(s,e.key)};else if(e instanceof pc)t={update:eo(s,e.key,e.data),updateMask:em(e.fieldMask)};else{if(!(e instanceof Vg))return dn();t={verify:Th(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(h,m){const w=m.transform;if(w instanceof vh)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Du)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Tu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Cd)return{fieldPath:m.field.canonicalString(),increment:w._t};throw dn()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:sy(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:dn()),t;var h}function Od(s,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ds.updateTime(Js(h.updateTime)):void 0!==h.exists?Ds.exists(h.exists):Ds.none():Ds.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(m,w){let O=null;"setToServerValue"in w?(xn("REQUEST_TIME"===w.setToServerValue),O=new vh):"appendMissingElements"in w?O=new Du(w.appendMissingElements.values||[]):"removeAllFromArray"in w?O=new Tu(w.removeAllFromArray.values||[]):"increment"in w?O=new Cd(m,w.increment):dn();const G=Wi.fromServerFormat(w.fieldPath);return new Dd(G,O)}(s,h)):[];var h;if(e.update){const h=Jo(s,e.update.name),m=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new ln((e.updateMask.fieldPaths||[]).map(ee=>Wi.fromServerFormat(ee)));return new pc(h,m,w,t,a)}return new Ad(h,m,t,a)}if(e.delete){const h=Jo(s,e.delete);return new Ih(h,t)}if(e.verify){const h=Jo(s,e.verify);return new Vg(h,t)}return dn()}function ly(s,e){return{documents:[nu(s,e.path)]}}function Xg(s,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=nu(s,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=nu(s,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(G){if(0!==G.length)return Jg(Li.create(G,"and"))}(e.filters);h&&(t.structuredQuery.where=h);const m=function(G){if(0!==G.length)return G.map(ee=>{return{field:Qa((ye=ee).field),direction:Nd(ye.dir)};var ye})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const w=(ee=e.limit,s.useProto3Json||ka(ee)?ee:{value:ee});var ee,O,G;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function Ah(s){let e=Sh(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let h=null;if(a>0){xn(1===a);const ye=t.from[0];ye.allDescendants?h=ye.collectionId:e=e.child(ye.collectionId)}let m=[];t.where&&(m=function(ye){const it=N_(ye);return it instanceof Li&&fh(it)?it.getFilters():[it]}(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(ye=>{return new Bl(Au((it=ye).field),function(xt){switch(xt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(it.direction));var it}));let O=null;t.limit&&(O=function(ye){let it;return it="object"==typeof ye?ye.value:ye,ka(it)?null:it}(t.limit));let G=null;var ye;t.startAt&&(G=new yl((ye=t.startAt).values||[],!!ye.before));let ee=null;return t.endAt&&(ee=function(ye){return new yl(ye.values||[],!ye.before)}(t.endAt)),hc(e,h,w,m,O,"F",G,ee)}function N_(s){return void 0!==s.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Au(e.unaryFilter.field);return yi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const a=Au(e.unaryFilter.field);return yi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Au(e.unaryFilter.field);return yi.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Au(e.unaryFilter.field);return yi.create(m,"!=",{nullValue:"NULL_VALUE"});default:return dn()}}(s):void 0!==s.fieldFilter?yi.create(Au((e=s).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==s.compositeFilter?function(e){return Li.create(e.compositeFilter.filters.map(t=>N_(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return dn()}}(e.compositeFilter.op))}(s):dn();var e}function Nd(s){return Pv[s]}function Mh(s){return Ov[s]}function cy(s){return qg[s]}function Qa(s){return{fieldPath:s.canonicalString()}}function Au(s){return Wi.fromServerFormat(s.fieldPath)}function Jg(s){return s instanceof yi?function(e){if("=="===e.op){if(If(e.value))return{unaryFilter:{field:Qa(e.field),op:"IS_NAN"}};if(dh(e.value))return{unaryFilter:{field:Qa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(If(e.value))return{unaryFilter:{field:Qa(e.field),op:"IS_NOT_NAN"}};if(dh(e.value))return{unaryFilter:{field:Qa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(e.field),op:Mh(e.op),value:e.value}}}(s):s instanceof Li?function(e){const t=e.getFilters().map(a=>Jg(a));return 1===t.length?t[0]:{compositeFilter:{op:cy(e.op),filters:t}}}(s):dn()}function em(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kd(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}class jl{constructor(e,t,a,h,m=yr.min(),w=yr.min(),O=tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=O}withSequenceNumber(e){return new jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Rh{constructor(e){this.se=e}}function xh(s,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Mp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Th(h=s.se,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Dh(h,m.version.toTimestamp()),createTime:Dh(h,m.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:Cl(e.version)};else{if(!e.isUnknownDocument())return dn();a.unknownDocument={path:t.path.toArray(),version:Cl(e.version)}}var h,m;return a}function Mp(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Cl(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mu(s){const e=new Ti(s.seconds,s.nanoseconds);return yr.fromTimestamp(e)}function Ru(s,e){const t=(e.baseMutations||[]).map(m=>Od(s.se,m));for(let m=0;m<e.mutations.length-1;++m)m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(e.mutations[m].updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m);const a=e.mutations.map(m=>Od(s.se,m)),h=Ti.fromMillis(e.localWriteTimeMs);return new Sp(e.batchId,h,t,a)}function mc(s){const e=Mu(s.readTime),t=void 0!==s.lastLimboFreeSnapshotVersion?Mu(s.lastLimboFreeSnapshotVersion):yr.min();let a;var h;return void 0!==s.query.documents?(xn(1===(h=s.query).documents.length),a=M($l(Sh(h.documents[0])))):a=M(Ah(s.query)),new jl(a,s.targetId,0,s.lastListenSequenceNumber,e,t,tr.fromBase64String(s.resumeToken))}function Rp(s,e){const t=Cl(e.snapshotVersion),a=Cl(e.lastLimboFreeSnapshotVersion);let h;h=wu(e.target)?ly(s.se,e.target):Xg(s.se,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Iu(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function Fd(s){const e=Ah({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?I(e,e.limit,"L"):e}function Ph(s,e){return new wl(e.largestBatchId,Od(s.se,e.overlayMutation))}function tm(s,e){const t=e.path.lastSegment();return[s,mi(e.path.popLast()),t]}function xp(s,e,t,a){return{indexId:s,uid:e.uid||"",sequenceNumber:t,readTime:Cl(a.readTime),documentKey:mi(a.documentKey.path),largestBatchId:a.largestBatchId}}class Pp{getBundleMetadata(e,t){return ru(e).get(t).next(a=>{if(a)return{id:(h=a).bundleId,createTime:Mu(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return ru(e).put({bundleId:(a=t).id,createTime:Cl(Js(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return xf(e).get(t).next(a=>{if(a)return{name:(h=a).name,query:Fd(h.bundledQuery),readTime:Mu(h.readTime)};var h})}saveNamedQuery(e,t){return xf(e).put({name:(a=t).name,readTime:Cl(Js(a.readTime)),bundledQuery:a.bundledQuery});var a}}function ru(s){return Qi(s,"bundles")}function xf(s){return Qi(s,"namedQueries")}class xu{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new xu(e,t.uid||"")}getOverlay(e,t){return Ld(e).get(tm(this.userId,t)).next(a=>a?Ph(this.serializer,a):null)}getOverlays(e,t){const a=Fa();return Lt.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,t,a){const h=[];return a.forEach((m,w)=>{const O=new wl(t,w);h.push(this.re(e,O))}),Lt.waitFor(h)}removeOverlaysForBatchId(e,t,a){const h=new Set;t.forEach(w=>h.add(mi(w.getCollectionPath())));const m=[];return h.forEach(w=>{const O=IDBKeyRange.bound([this.userId,w,a],[this.userId,w,a+1],!1,!0);m.push(Ld(e).J("collectionPathOverlayIndex",O))}),Lt.waitFor(m)}getOverlaysForCollection(e,t,a){const h=Fa(),m=mi(t),w=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Ld(e).j("collectionPathOverlayIndex",w).next(O=>{for(const G of O){const ee=Ph(this.serializer,G);h.set(ee.getKey(),ee)}return h})}getOverlaysForCollectionGroup(e,t,a,h){const m=Fa();let w;const O=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ld(e).Z({index:"collectionGroupOverlayIndex",range:O},(G,ee,ye)=>{const it=Ph(this.serializer,ee);m.size()<h||it.largestBatchId===w?(m.set(it.getKey(),it),w=it.largestBatchId):ye.done()}).next(()=>m)}re(e,t){return Ld(e).put(function(a,h,m){const[w,O,G]=tm(h,m.mutation.key);return{userId:h,collectionPath:O,documentId:G,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:bl(a.se,m.mutation)}}(this.serializer,this.userId,t))}}function Ld(s){return Qi(s,"documentOverlays")}class Bc{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Ii(e.integerValue));else if("doubleValue"in e){const a=Ii(e.doubleValue);isNaN(a)?this.ae(t,13):(this.ae(t,15),lc(a)?t.he(0):t.he(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ae(t,20),"string"==typeof a?t.le(a):(t.le(`${a.seconds||""}`),t.he(a.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(gl(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.ae(t,45),t.he(a.latitude||0),t.he(a.longitude||0)}else"mapValue"in e?Oc(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):dn()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const a=e.fields||{};this.ae(t,55);for(const h of Object.keys(a))this.fe(h,t),this.ue(a[h],t)}ge(e,t){const a=e.values||[];this.ae(t,50);for(const h of a)this.ue(h,t)}_e(e,t){this.ae(t,37),On.fromName(e).path.forEach(a=>{this.ae(t,60),this.ye(a,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function Pu(s){if(0===s)return 8;let e=0;return!(s>>4)&&(e+=4,s<<=4),!(s>>6)&&(e+=2,s<<=2),!(s>>7)&&(e+=1),e}function iu(s){const e=64-function(t){let a=0;for(let h=0;h<8;++h){const m=Pu(255&t[h]);if(a+=m,8!==m)break}return a}(s);return Math.ceil(e/8)}Bc.pe=new Bc;class dy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Te(a.value),a=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Re(a.value),a=t.next();this.ve()}be(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Te(a);else if(a<2048)this.Te(960|a>>>6),this.Te(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Te(480|a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a);else{const h=t.codePointAt(0);this.Te(240|h>>>18),this.Te(128|63&h>>>12),this.Te(128|63&h>>>6),this.Te(128|63&h)}}this.Ee()}Pe(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Re(a);else if(a<2048)this.Re(960|a>>>6),this.Re(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Re(480|a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a);else{const h=t.codePointAt(0);this.Re(240|h>>>18),this.Re(128|63&h>>>12),this.Re(128|63&h>>>6),this.Re(128|63&h)}}this.ve()}Ve(e){const t=this.Se(e),a=iu(t);this.De(1+a),this.buffer[this.position++]=255&a;for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Ce(e){const t=this.Se(e),a=iu(t);this.De(1+a),this.buffer[this.position++]=~(255&a);for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let h=1;h<t.length;++h)t[h]^=a?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class k_{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class Op{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Ou{constructor(){this.Me=new dy,this.Fe=new k_(this.Me),this.Be=new Op(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Bd{constructor(e,t,a,h){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=h}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Bd(this.indexId,this.documentKey,this.arrayValue,a)}}function Dl(s,e){let t=s.indexId-e.indexId;return 0!==t?t:(t=Np(s.arrayValue,e.arrayValue),0!==t?t:(t=Np(s.directionalValue,e.directionalValue),0!==t?t:On.comparator(s.documentKey,e.documentKey)))}function Np(s,e){for(let t=0;t<s.length&&t<e.length;++t){const a=s[t]-e[t];if(0!==a)return a}return s.length-e.length}class hy{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const a=t;a.isInequality()?this.Ge=a:this.Ke.push(a)}}Qe(e){xn(e.collectionGroup===this.collectionId);const t=ns(e);if(void 0!==t&&!this.ze(t))return!1;const a=Oo(e);let h=0,m=0;for(;h<a.length&&this.ze(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.Ge){const w=a[h];if(!this.je(this.Ge,w)||!this.We(this.Ue[m++],w))return!1;++h}for(;h<a.length;++h)if(m>=this.Ue.length||!this.We(this.Ue[m++],a[h]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function F_(s){var e,t;if(xn(s instanceof yi||s instanceof Li),s instanceof yi){if(s instanceof Cf){const h=(null===(t=null===(e=s.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>yi.create(s.field,"==",m)))||[];return Li.create(h,"or")}return s}const a=s.filters.map(h=>F_(h));return Li.create(a,s.op)}function L_(s){if(0===s.getFilters().length)return[];const e=$d(F_(s));return xn(Nu(e)),su(e)||Oh(e)?[e]:e.getFilters()}function su(s){return s instanceof yi}function Oh(s){return s instanceof Li&&fh(s)}function Nu(s){return su(s)||Oh(s)||function(e){if(e instanceof Li&&Nc(e)){for(const t of e.getFilters())if(!su(t)&&!Oh(t))return!1;return!0}return!1}(s)}function $d(s){if(xn(s instanceof yi||s instanceof Li),s instanceof yi)return s;if(1===s.filters.length)return $d(s.filters[0]);const e=s.filters.map(a=>$d(a));let t=Li.create(e,s.op);return t=ku(t),Nu(t)?t:(xn(t instanceof Li),xn(ao(t)),xn(t.filters.length>1),t.filters.reduce((a,h)=>Ud(a,h)))}function Ud(s,e){let t;return xn(s instanceof yi||s instanceof Li),xn(e instanceof yi||e instanceof Li),t=s instanceof yi?e instanceof yi?Li.create([s,e],"and"):Hl(s,e):e instanceof yi?Hl(e,s):function(a,h){if(xn(a.filters.length>0&&h.filters.length>0),ao(a)&&ao(h))return bf(a,h.getFilters());const m=Nc(a)?a:h,w=Nc(a)?h:a,O=m.filters.map(G=>Ud(G,w));return Li.create(O,"or")}(s,e),ku(t)}function Hl(s,e){if(ao(e))return bf(e,s.getFilters());{const t=e.filters.map(a=>Ud(s,a));return Li.create(t,"or")}}function ku(s){if(xn(s instanceof yi||s instanceof Li),s instanceof yi)return s;const e=s.getFilters();if(1===e.length)return ku(e[0]);if(_d(s))return s;const t=e.map(h=>ku(h)),a=[];return t.forEach(h=>{h instanceof yi?a.push(h):h instanceof Li&&(h.op===s.op?a.push(...h.filters):a.push(h))}),1===a.length?a[0]:Li.create(a,s.op)}class B_{constructor(){this.He=new kp}addToCollectionParentIndex(e,t){return this.He.add(t),Lt.resolve()}getCollectionParents(e,t){return Lt.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return Lt.resolve()}deleteFieldIndex(e,t){return Lt.resolve()}getDocumentsMatchingTarget(e,t){return Lt.resolve(null)}getIndexType(e,t){return Lt.resolve(0)}getFieldIndexes(e,t){return Lt.resolve([])}getNextCollectionGroupToUpdate(e){return Lt.resolve(null)}getMinOffset(e,t){return Lt.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return Lt.resolve(oo.min())}updateCollectionGroup(e,t,a){return Lt.resolve()}updateIndexEntries(e,t){return Lt.resolve()}}class kp{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t]||new St(ti.comparator),m=!h.has(a);return this.index[t]=h.add(a),m}has(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t];return h&&h.has(a)}getEntries(e){return(this.index[e]||new St(ti.comparator)).toArray()}}const Vd=new Uint8Array(0);class Nh{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new kp,this.Ye=new Wn(a=>Iu(a),(a,h)=>_l(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const a=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const m={collectionId:a,parent:mi(h)};return Fu(e).put(m)}return Lt.resolve()}getCollectionParents(e,t){const a=[],h=IDBKeyRange.bound([t,""],[ca(t),""],!1,!0);return Fu(e).j(h).next(m=>{for(const w of m){if(w.collectionId!==t)break;a.push(Lo(w.parent))}return a})}addFieldIndex(e,t){const a=La(e),h={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var w;delete h.indexId;const m=a.add(h);if(t.indexState){const w=Lu(e);return m.next(O=>{w.put(xp(O,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const a=La(e),h=Lu(e),m=jd(e);return a.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=jd(e);let h=!0;const m=new Map;return Lt.forEach(this.Ze(t),w=>this.Xe(e,w).next(O=>{h&&(h=!!O),m.set(w,O)})).next(()=>{if(h){let w=Or();const O=[];return Lt.forEach(m,(G,ee)=>{var ye;Kt("IndexedDbIndexManager",`Using index ${ye=G,`id=${ye.indexId}|cg=${ye.collectionGroup}|f=${ye.fields.map(Ri=>`${Ri.fieldPath}:${Ri.kind}`).join(",")}`} to execute ${Iu(t)}`);const it=function(Ri,Sa){const $s=ns(Sa);if(void 0===$s)return null;for(const Us of Xc(Ri,$s.fieldPath))switch(Us.op){case"array-contains-any":return Us.value.arrayValue.values||[];case"array-contains":return[Us.value]}return null}(ee,G),xt=function(Ri,Sa){const $s=new Map;for(const Us of Oo(Sa))for(const Pl of Xc(Ri,Us.fieldPath))switch(Pl.op){case"==":case"in":$s.set(Us.fieldPath.canonicalString(),Pl.value);break;case"not-in":case"!=":return $s.set(Us.fieldPath.canonicalString(),Pl.value),Array.from($s.values())}return null}(ee,G),en=function(Ri,Sa){const $s=[];let Us=!0;for(const Pl of Oo(Sa)){const _f=0===Pl.kind?Id(Ri,Pl.fieldPath,Ri.startAt):wd(Ri,Pl.fieldPath,Ri.startAt);$s.push(_f.value),Us&&(Us=_f.inclusive)}return new yl($s,Us)}(ee,G),Dn=function(Ri,Sa){const $s=[];let Us=!0;for(const Pl of Oo(Sa)){const _f=0===Pl.kind?wd(Ri,Pl.fieldPath,Ri.endAt):Id(Ri,Pl.fieldPath,Ri.endAt);$s.push(_f.value),Us&&(Us=_f.inclusive)}return new yl($s,Us)}(ee,G),Zn=this.tn(G,ee,en),br=this.tn(G,ee,Dn),Xi=this.en(G,ee,xt),Bs=this.nn(G.indexId,it,Zn,en.inclusive,br,Dn.inclusive,Xi);return Lt.forEach(Bs,Ri=>a.H(Ri,t.limit).next(Sa=>{Sa.forEach($s=>{const Us=On.fromSegments($s.documentKey);w.has(Us)||(w=w.add(Us),O.push(Us))})}))}).next(()=>O)}return Lt.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:L_(Li.create(e.filters,"and")).map(a=>Qc(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,a,h,m,w,O){const G=(null!=t?t.length:1)*Math.max(a.length,m.length),ee=G/(null!=t?t.length:1),ye=[];for(let it=0;it<G;++it){const xt=t?this.sn(t[it/ee]):Vd,en=this.rn(e,xt,a[it%ee],h),Dn=this.on(e,xt,m[it%ee],w),Zn=O.map(br=>this.rn(e,xt,br,!0));ye.push(...this.createRange(en,Dn,Zn))}return ye}rn(e,t,a,h){const m=new Bd(e,On.empty(),t,a);return h?m:m.qe()}on(e,t,a,h){const m=new Bd(e,On.empty(),t,a);return h?m.qe():m}Xe(e,t){const a=new hy(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let w=null;for(const O of m)a.Qe(O)&&(!w||O.fields.length>w.fields.length)&&(w=O);return w})}getIndexType(e,t){let a=2;const h=this.Ze(t);return Lt.forEach(h,m=>this.Xe(e,m).next(w=>{w?0!==a&&w.fields.length<function(O){let G=new St(Wi.comparator),ee=!1;for(const ye of O.filters)for(const it of ye.getFlattenedFilters())it.field.isKeyField()||("array-contains"===it.op||"array-contains-any"===it.op?ee=!0:G=G.add(it.field));for(const ye of O.orderBy)ye.field.isKeyField()||(G=G.add(ye.field));return G.size+(ee?1:0)}(m)&&(a=1):a=0})).next(()=>null!==t.limit&&h.length>1&&2===a?1:a)}un(e,t){const a=new Ou;for(const h of Oo(e)){const m=t.data.field(h.fieldPath);if(null==m)return null;const w=a.Le(h.kind);Bc.pe.oe(m,w)}return a.$e()}sn(e){const t=new Ou;return Bc.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const a=new Ou;return Bc.pe.oe(ji(this.databaseId,t),a.Le(function(h){const m=Oo(h);return 0===m.length?0:m[m.length-1].kind}(e))),a.$e()}en(e,t,a){if(null===a)return[];let h=[];h.push(new Ou);let m=0;for(const w of Oo(e)){const O=a[m++];for(const G of h)if(this.an(t,w.fieldPath)&&_u(O))h=this.hn(h,w,O);else{const ee=G.Le(w.kind);Bc.pe.oe(O,ee)}}return this.ln(h)}tn(e,t,a){return this.en(e,t,a.position)}ln(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].$e();return t}hn(e,t,a){const h=[...e],m=[];for(const w of a.arrayValue.values||[])for(const O of h){const G=new Ou;G.seed(O.$e()),Bc.pe.oe(w,G.Le(t.kind)),m.push(G)}return m}an(e,t){return!!e.filters.find(a=>a instanceof yi&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=La(e),h=Lu(e);return(t?a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.j()).next(m=>{const w=[];return Lt.forEach(m,O=>h.get([O.indexId,this.uid]).next(G=>{w.push(function(ee,ye){const it=ye?new _s(ye.sequenceNumber,new oo(Mu(ye.readTime),new On(Lo(ye.documentKey)),ye.largestBatchId)):_s.empty(),xt=ee.fields.map(([en,Dn])=>new kl(Wi.fromServerFormat(en),Dn));return new bs(ee.indexId,ee.collectionGroup,xt,it)}(O,G))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,h)=>{const m=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:hr(a.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const h=La(e),m=Lu(e);return this.fn(e).next(w=>h.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>Lt.forEach(O,G=>m.put(xp(G.indexId,this.user,w,a)))))}updateIndexEntries(e,t){const a=new Map;return Lt.forEach(t,(h,m)=>{const w=a.get(h.collectionGroup);return(w?Lt.resolve(w):this.getFieldIndexes(e,h.collectionGroup)).next(O=>(a.set(h.collectionGroup,O),Lt.forEach(O,G=>this.dn(e,h,G).next(ee=>{const ye=this.wn(m,G);return ee.isEqual(ye)?Lt.resolve():this._n(e,m,G,ee,ye)}))))})}mn(e,t,a,h){return jd(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.cn(a,t.key),documentKey:t.key.path.toArray()})}gn(e,t,a,h){return jd(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.cn(a,t.key),t.key.path.toArray()])}dn(e,t,a){const h=jd(e);let m=new St(Dl);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.cn(a,t)])},(w,O)=>{m=m.add(new Bd(a.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>m)}wn(e,t){let a=new St(Dl);const h=this.un(t,e);if(null==h)return a;const m=ns(t);if(null!=m){const w=e.data.field(m.fieldPath);if(_u(w))for(const O of w.arrayValue.values||[])a=a.add(new Bd(t.indexId,e.key,this.sn(O),h))}else a=a.add(new Bd(t.indexId,e.key,Vd,h));return a}_n(e,t,a,h,m){Kt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(O,G,ee,ye,it){const xt=O.getIterator(),en=G.getIterator();let Dn=kn(xt),Zn=kn(en);for(;Dn||Zn;){let br=!1,Xi=!1;if(Dn&&Zn){const Bs=ee(Dn,Zn);Bs<0?Xi=!0:Bs>0&&(br=!0)}else null!=Dn?Xi=!0:br=!0;br?(ye(Zn),Zn=kn(en)):Xi?(it(Dn),Dn=kn(xt)):(Dn=kn(xt),Zn=kn(en))}}(h,m,Dl,O=>{w.push(this.mn(e,t,a,O))},O=>{w.push(this.gn(e,t,a,O))}),Lt.waitFor(w)}fn(e){let t=1;return Lu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,m)=>{m.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((w,O)=>Dl(w,O)).filter((w,O,G)=>!O||0!==Dl(w,G[O-1]));const h=[];h.push(e);for(const w of a){const O=Dl(w,e),G=Dl(w,t);if(0===O)h[0]=e.qe();else if(O>0&&G<0)h.push(w),h.push(w.qe());else if(G>0)break}h.push(t);const m=[];for(let w=0;w<h.length;w+=2){if(this.yn(h[w],h[w+1]))return[];m.push(IDBKeyRange.bound([h[w].indexId,this.uid,h[w].arrayValue,h[w].directionalValue,Vd,[]],[h[w+1].indexId,this.uid,h[w+1].arrayValue,h[w+1].directionalValue,Vd,[]]))}return m}yn(e,t){return Dl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kh)}getMinOffset(e,t){return Lt.mapArray(this.Ze(t),a=>this.Xe(e,a).next(h=>h||dn())).next(kh)}}function Fu(s){return Qi(s,"collectionParents")}function jd(s){return Qi(s,"indexEntries")}function La(s){return Qi(s,"indexConfiguration")}function Lu(s){return Qi(s,"indexState")}function kh(s){xn(0!==s.length);let e=s[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;Dc(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new oo(e.readTime,e.documentKey,t)}const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ba{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Ba(e,Ba.DEFAULT_COLLECTION_PERCENTILE,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xa(s,e,t){const a=s.store("mutations"),h=s.store("documentMutations"),m=[],w=IDBKeyRange.only(t.batchId);let O=0;const G=a.Z({range:w},(ye,it,xt)=>(O++,xt.delete()));m.push(G.next(()=>{xn(1===O)}));const ee=[];for(const ye of t.mutations){const it=R(e,ye.key.path,t.batchId);m.push(h.delete(it)),ee.push(ye.key)}return Lt.waitFor(m).next(()=>ee)}function Of(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw dn();e=s.noDocument}return JSON.stringify(e).length}Ba.DEFAULT_COLLECTION_PERCENTILE=10,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ba.DEFAULT=new Ba(41943040,Ba.DEFAULT_COLLECTION_PERCENTILE,Ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ba.DISABLED=new Ba(-1,0,0);class Fp{constructor(e,t,a,h){this.userId=e,this.serializer=t,this.indexManager=a,this.referenceDelegate=h,this.pn={}}static ie(e,t,a,h){xn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Fp(m,t,a,h)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bu(e).Z({index:"userMutationsIndex",range:a},(h,m,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,a,h){const m=yc(e),w=Bu(e);return w.add({}).next(O=>{xn("number"==typeof O);const G=new Sp(O,t,a,h),ee=function(xt,en,Dn){const Zn=Dn.baseMutations.map(Xi=>bl(xt.se,Xi)),br=Dn.mutations.map(Xi=>bl(xt.se,Xi));return{userId:en,batchId:Dn.batchId,localWriteTimeMs:Dn.localWriteTime.toMillis(),baseMutations:Zn,mutations:br}}(this.serializer,this.userId,G),ye=[];let it=new St((xt,en)=>hr(xt.canonicalString(),en.canonicalString()));for(const xt of h){const en=R(this.userId,xt.key.path,O);it=it.add(xt.key.path.popLast()),ye.push(w.put(ee)),ye.push(m.put(en,b))}return it.forEach(xt=>{ye.push(this.indexManager.addToCollectionParentIndex(e,xt))}),e.addOnCommittedListener(()=>{this.pn[O]=G.keys()}),Lt.waitFor(ye).next(()=>G)})}lookupMutationBatch(e,t){return Bu(e).get(t).next(a=>a?(xn(a.userId===this.userId),Ru(this.serializer,a)):null)}In(e,t){return this.pn[t]?Lt.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const h=a.keys();return this.pn[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,h=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return Bu(e).Z({index:"userMutationsIndex",range:h},(w,O,G)=>{O.userId===this.userId&&(xn(O.batchId>=a),m=Ru(this.serializer,O)),G.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Bu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(h,m,w)=>{a=m.batchId,w.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bu(e).j("userMutationsIndex",t).next(a=>a.map(h=>Ru(this.serializer,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=S(this.userId,t.path),h=IDBKeyRange.lowerBound(a),m=[];return yc(e).Z({range:h},(w,O,G)=>{const[ee,ye,it]=w,xt=Lo(ye);if(ee===this.userId&&t.path.isEqual(xt))return Bu(e).get(it).next(en=>{if(!en)throw dn();xn(en.userId===this.userId),m.push(Ru(this.serializer,en))});G.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new St(hr);const h=[];return t.forEach(m=>{const w=S(this.userId,m.path),O=IDBKeyRange.lowerBound(w),G=yc(e).Z({range:O},(ee,ye,it)=>{const[xt,en,Dn]=ee,Zn=Lo(en);xt===this.userId&&m.path.isEqual(Zn)?a=a.add(Dn):it.done()});h.push(G)}),Lt.waitFor(h).next(()=>this.Tn(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1,m=S(this.userId,a),w=IDBKeyRange.lowerBound(m);let O=new St(hr);return yc(e).Z({range:w},(G,ee,ye)=>{const[it,xt,en]=G,Dn=Lo(xt);it===this.userId&&a.isPrefixOf(Dn)?Dn.length===h&&(O=O.add(en)):ye.done()}).next(()=>this.Tn(e,O))}Tn(e,t){const a=[],h=[];return t.forEach(m=>{h.push(Bu(e).get(m).next(w=>{if(null===w)throw dn();xn(w.userId===this.userId),a.push(Ru(this.serializer,w))}))}),Lt.waitFor(h).next(()=>a)}removeMutationBatch(e,t){return Xa(e.at,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),Lt.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Lt.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return yc(e).Z({range:a},(m,w,O)=>{if(m[0]===this.userId){const G=Lo(m[1]);h.push(G)}else O.done()}).next(()=>{xn(0===h.length)})})}containsKey(e,t){return nm(e,this.userId,t)}An(e){return $c(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nm(s,e,t){const a=S(e,t.path),h=a[1],m=IDBKeyRange.lowerBound(a);let w=!1;return yc(s).Z({range:m,Y:!0},(O,G,ee)=>{const[ye,it,xt]=O;ye===e&&it===h&&(w=!0),ee.done()}).next(()=>w)}function Bu(s){return Qi(s,"mutations")}function yc(s){return Qi(s,"documentMutations")}function $c(s){return Qi(s,"mutationQueues")}class $u{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new $u(0)}static bn(){return new $u(-1)}}class Nf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const a=new $u(t.highestTargetId);return t.highestTargetId=a.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>yr.fromTimestamp(new Ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.Pn(e).next(h=>(h.highestListenSequenceNumber=t,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Vn(e,h)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(a=>(a.targetCount+=1,this.Dn(t,a),this.Vn(e,a))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fh(e).delete(t.targetId)).next(()=>this.Pn(e)).next(a=>(xn(a.targetCount>0),a.targetCount-=1,this.Vn(e,a)))}removeTargets(e,t,a){let h=0;const m=[];return Fh(e).Z((w,O)=>{const G=mc(O);G.sequenceNumber<=t&&null===a.get(G.targetId)&&(h++,m.push(this.removeTargetData(e,G)))}).next(()=>Lt.waitFor(m)).next(()=>h)}forEachTarget(e,t){return Fh(e).Z((a,h)=>{const m=mc(h);t(m)})}Pn(e){return fy(e).get("targetGlobalKey").next(t=>(xn(null!==t),t))}Vn(e,t){return fy(e).put("targetGlobalKey",t)}Sn(e,t){return Fh(e).put(Rp(this.serializer,t))}Dn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const a=Iu(t),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return Fh(e).Z({range:h,index:"queryTargetsIndex"},(w,O,G)=>{const ee=mc(O);_l(t,ee.target)&&(m=ee,G.done())}).next(()=>m)}addMatchingKeys(e,t,a){const h=[],m=ou(e);return t.forEach(w=>{const O=mi(w.path);h.push(m.put({targetId:a,path:O})),h.push(this.referenceDelegate.addReference(e,a,w))}),Lt.waitFor(h)}removeMatchingKeys(e,t,a){const h=ou(e);return Lt.forEach(t,m=>{const w=mi(m.path);return Lt.waitFor([h.delete([a,w]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,t){const a=ou(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),h=ou(e);let m=Or();return h.Z({range:a,Y:!0},(w,O,G)=>{const ee=Lo(w[1]),ye=new On(ee);m=m.add(ye)}).next(()=>m)}containsKey(e,t){const a=mi(t.path),h=IDBKeyRange.bound([a],[ca(a)],!1,!0);let m=0;return ou(e).Z({index:"documentTargetsIndex",Y:!0,range:h},([w,O],G,ee)=>{0!==w&&(m++,ee.done())}).next(()=>m>0)}ne(e,t){return Fh(e).get(t).next(a=>a?mc(a):null)}}function Fh(s){return Qi(s,"targets")}function fy(s){return Qi(s,"targetGlobal")}function ou(s){return Qi(s,"targetDocuments")}function rm([s,e],[t,a]){const h=hr(s,t);return 0===h?hr(e,a):h}class kf{constructor(e){this.Cn=e,this.buffer=new St(rm),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();rm(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class py{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Kt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,oe.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){fi(a)?Kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield vs(a)}yield t.$n(3e5)}))}}class im{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return Lt.resolve(Fo.ct);const a=new kf(t);return this.Mn.forEachTarget(e,h=>a.kn(h.sequenceNumber)).next(()=>this.Mn.Bn(e,h=>a.kn(h))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.Mn.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Kt("LruGarbageCollector","Garbage collection skipped; disabled"),Lt.resolve(Pf)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pf):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let a,h,m,w,O,G,ee;const ye=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(it=>(it>this.params.maximumSequenceNumbersToCollect?(Kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${it}`),h=this.params.maximumSequenceNumbersToCollect):h=it,w=Date.now(),this.nthSequenceNumber(e,h))).next(it=>(a=it,O=Date.now(),this.removeTargets(e,a,t))).next(it=>(m=it,G=Date.now(),this.removeOrphanedDocuments(e,a))).next(it=>(ee=Date.now(),jn()<=Ae.in.DEBUG&&Kt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ye}ms\n\tDetermined least recently used ${h} in `+(O-w)+`ms\n\tRemoved ${m} targets in `+(G-O)+`ms\n\tRemoved ${it} documents in `+(ee-G)+`ms\nTotal Duration: ${ee-ye}ms`),Lt.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:it})))}}class gy{constructor(e,t){this.db=e,this.garbageCollector=new im(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(h=>a+h))}qn(e){let t=0;return this.Bn(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(a,h)=>t(h))}addReference(e,t,a){return Lp(e,a)}removeReference(e,t,a){return Lp(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return Lp(e,t)}Kn(e,t){return function(a,h){let m=!1;return $c(a).X(w=>nm(a,w,h).next(O=>(O&&(m=!0),Lt.resolve(!O)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Un(e,(w,O)=>{if(O<=t){const G=this.Kn(e,w).next(ee=>{if(!ee)return m++,a.getEntry(e,w).next(()=>(a.removeEntry(w,yr.min()),ou(e).delete([0,mi(w.path)])))});h.push(G)}}).next(()=>Lt.waitFor(h)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return Lp(e,t)}Un(e,t){const a=ou(e);let h,m=Fo.ct;return a.Z({index:"documentTargetsIndex"},([w,O],{path:G,sequenceNumber:ee})=>{0===w?(m!==Fo.ct&&t(new On(Lo(h)),m),m=ee,h=G):m=Fo.ct}).next(()=>{m!==Fo.ct&&t(new On(Lo(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lp(s,e){return ou(s).put((a=s.currentSequenceNumber,{targetId:0,path:mi(e.path),sequenceNumber:a}));var a}class my{constructor(){this.changes=new Wn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Es.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?Lt.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zl{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return au(e).put(a)}removeEntry(e,t,a){return au(e).delete(function(h,m){const w=h.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Mp(m),w[w.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Gn(e,a)))}getEntry(e,t){let a=Es.newInvalidDocument(t);return au(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Lh(t))},(h,m)=>{a=this.Qn(t,m)}).next(()=>a)}zn(e,t){let a={size:0,document:Es.newInvalidDocument(t)};return au(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Lh(t))},(h,m)=>{a={document:this.Qn(t,m),size:Of(m)}}).next(()=>a)}getEntries(e,t){let a=Bi();return this.jn(e,t,(h,m)=>{const w=this.Qn(h,m);a=a.insert(h,w)}).next(()=>a)}Wn(e,t){let a=Bi(),h=new se(On.comparator);return this.jn(e,t,(m,w)=>{const O=this.Qn(m,w);a=a.insert(m,O),h=h.insert(m,Of(w))}).next(()=>({documents:a,Hn:h}))}jn(e,t,a){if(t.isEmpty())return Lt.resolve();let h=new St(Uu);t.forEach(G=>h=h.add(G));const m=IDBKeyRange.bound(Lh(h.first()),Lh(h.last())),w=h.getIterator();let O=w.getNext();return au(e).Z({index:"documentKeyIndex",range:m},(G,ee,ye)=>{const it=On.fromSegments([...ee.prefixPath,ee.collectionGroup,ee.documentId]);for(;O&&Uu(O,it)<0;)a(O,null),O=w.getNext();O&&O.isEqual(it)&&(a(O,ee),O=w.hasNext()?w.getNext():null),O?ye.G(Lh(O)):ye.done()}).next(()=>{for(;O;)a(O,null),O=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,t,a,h){const m=t.path,w=[m.popLast().toArray(),m.lastSegment(),Mp(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],O=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return au(e).j(IDBKeyRange.bound(w,O,!0)).next(G=>{let ee=Bi();for(const ye of G){const it=this.Qn(On.fromSegments(ye.prefixPath.concat(ye.collectionGroup,ye.documentId)),ye);it.isFoundDocument()&&(It(t,it)||h.has(it.key))&&(ee=ee.insert(it.key,it))}return ee})}getAllFromCollectionGroup(e,t,a,h){let m=Bi();const w=Ey(t,a),O=Ey(t,oo.max());return au(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,O,!0)},(G,ee,ye)=>{const it=this.Qn(On.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);m=m.insert(it.key,it),m.size===h&&ye.done()}).next(()=>m)}newChangeBuffer(e){return new _y(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vy(e).get("remoteDocumentGlobalKey").next(t=>(xn(!!t),t))}Gn(e,t){return vy(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const a=function uy(s,e){let t;if(e.document)t=Zg(s.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=On.fromSegments(e.noDocument.path),h=Mu(e.noDocument.readTime);t=Es.newNoDocument(a,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dn();{const a=On.fromSegments(e.unknownDocument.path),h=Mu(e.unknownDocument.version);t=Es.newUnknownDocument(a,h)}}return e.readTime&&t.setReadTime(function(a){const h=new Ti(a[0],a[1]);return yr.fromTimestamp(h)}(e.readTime)),t}(this.serializer,t);if(!a.isNoDocument()||!a.version.isEqual(yr.min()))return a}return Es.newInvalidDocument(e)}}function yy(s){return new zl(s)}class _y extends my{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Wn(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const t=[];let a=0,h=new St((m,w)=>hr(m.canonicalString(),w.canonicalString()));return this.changes.forEach((m,w)=>{const O=this.Yn.get(m);if(t.push(this.Jn.removeEntry(e,m,O.readTime)),w.isValidDocument()){const G=xh(this.Jn.serializer,w);h=h.add(m.path.popLast());const ee=Of(G);a+=ee-O.size,t.push(this.Jn.addEntry(e,m,G))}else if(a-=O.size,this.trackRemovals){const G=xh(this.Jn.serializer,w.convertToNoDocument(yr.min()));t.push(this.Jn.addEntry(e,m,G))}}),h.forEach(m=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Jn.updateMetadata(e,a)),Lt.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(a=>(this.Yn.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:a,Hn:h})=>(h.forEach((m,w)=>{this.Yn.set(m,{size:w,readTime:a.get(m).readTime})}),a))}}function vy(s){return Qi(s,"remoteDocumentGlobal")}function au(s){return Qi(s,"remoteDocumentsV14")}function Lh(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ey(s,e){const t=e.documentKey.path.toArray();return[s,Mp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Uu(s,e){const t=s.path.toArray(),a=e.path.toArray();let h=0;for(let m=0;m<t.length-2&&m<a.length-2;++m)if(h=hr(t[m],a[m]),h)return h;return h=hr(t.length,a.length),h||(h=hr(t[t.length-2],a[a.length-2]),h||hr(t[t.length-1],a[a.length-1]))}class Vu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Iy{constructor(e,t,a,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(a=h,this.remoteDocumentCache.getEntry(e,t))).next(h=>(null!==a&&Sd(a.mutation,h,ln.empty(),Ti.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,Or()).next(()=>a))}getLocalViewOfDocuments(e,t,a=Or()){const h=Fa();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,a).next(m=>{let w=lo();return m.forEach((O,G)=>{w=w.insert(O,G.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const a=Fa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,Or()))}populateOverlays(e,t,a){const h=[];return a.forEach(m=>{t.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((w,O)=>{t.set(w,O)})})}computeViews(e,t,a,h){let m=Bi();const w=Fc(),O=Fc();return t.forEach((G,ee)=>{const ye=a.get(ee.key);h.has(ee.key)&&(void 0===ye||ye.mutation instanceof pc)?m=m.insert(ee.key,ee):void 0!==ye?(w.set(ee.key,ye.mutation.getFieldMask()),Sd(ye.mutation,ee,ye.mutation.getFieldMask(),Ti.now())):w.set(ee.key,ln.empty())}),this.recalculateAndSaveOverlays(e,m).next(G=>(G.forEach((ee,ye)=>w.set(ee,ye)),t.forEach((ee,ye)=>{var it;return O.set(ee,new Vu(ye,null!==(it=w.get(ee))&&void 0!==it?it:null))}),O))}recalculateAndSaveOverlays(e,t){const a=Fc();let h=new se((w,O)=>w-O),m=Or();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const O of w)O.keys().forEach(G=>{const ee=t.get(G);if(null===ee)return;let ye=a.get(G)||ln.empty();ye=O.applyToLocalView(ee,ye),a.set(G,ye);const it=(h.get(O.batchId)||Or()).add(G);h=h.insert(O.batchId,it)})}).next(()=>{const w=[],O=h.getReverseIterator();for(;O.hasNext();){const G=O.getNext(),ee=G.key,ye=G.value,it=eu();ye.forEach(xt=>{if(!m.has(xt)){const en=Dp(t.get(xt),a.get(xt));null!==en&&it.set(xt,en),m=m.add(xt)}}),w.push(this.documentOverlayCache.saveOverlays(e,ee,it))}return Lt.waitFor(w)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return On.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var h}getNextDocuments(e,t,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,h).next(m=>{const w=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,h-m.size):Lt.resolve(Fa());let O=-1,G=m;return w.next(ee=>Lt.forEach(ee,(ye,it)=>(O<it.largestBatchId&&(O=it.largestBatchId),m.get(ye)?Lt.resolve():this.remoteDocumentCache.getEntry(e,ye).next(xt=>{G=G.insert(ye,xt)}))).next(()=>this.populateOverlays(e,ee,m)).next(()=>this.computeViews(e,G,ee,Or())).next(ye=>({batchId:O,changes:Jc(ye)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new On(t)).next(a=>{let h=lo();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const h=t.collectionGroup;let m=lo();return this.indexManager.getCollectionParents(e,h).next(w=>Lt.forEach(w,O=>{const G=(ee=t,ye=O.child(h),new Ks(ye,null,ee.explicitOrderBy.slice(),ee.filters.slice(),ee.limit,ee.limitType,ee.startAt,ee.endAt));var ee,ye;return this.getDocumentsMatchingCollectionQuery(e,G,a).next(ee=>{ee.forEach((ye,it)=>{m=m.insert(ye,it)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,a){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(m=>(h=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,h))).next(m=>{h.forEach((O,G)=>{const ee=G.getKey();null===m.get(ee)&&(m=m.insert(ee,Es.newInvalidDocument(ee)))});let w=lo();return m.forEach((O,G)=>{const ee=h.get(O);void 0!==ee&&Sd(ee.mutation,G,ln.empty(),Ti.now()),It(t,G)&&(w=w.insert(O,G))}),w})}}class sm{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Lt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var a;return this.Zn.set(t.id,{id:(a=t).id,version:a.version,createTime:Js(a.createTime)}),Lt.resolve()}getNamedQuery(e,t){return Lt.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(a=t).name,query:Fd(a.bundledQuery),readTime:Js(a.readTime)}),Lt.resolve();var a}}class Wr{constructor(){this.overlays=new se(On.comparator),this.ts=new Map}getOverlay(e,t){return Lt.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Fa();return Lt.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((h,m)=>{this.re(e,t,m)}),Lt.resolve()}removeOverlaysForBatchId(e,t,a){const h=this.ts.get(a);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.ts.delete(a)),Lt.resolve()}getOverlaysForCollection(e,t,a){const h=Fa(),m=t.length+1,w=new On(t.child("")),O=this.overlays.getIteratorFrom(w);for(;O.hasNext();){const G=O.getNext().value,ee=G.getKey();if(!t.isPrefixOf(ee.path))break;ee.path.length===m&&G.largestBatchId>a&&h.set(G.getKey(),G)}return Lt.resolve(h)}getOverlaysForCollectionGroup(e,t,a,h){let m=new se((ee,ye)=>ee-ye);const w=this.overlays.getIterator();for(;w.hasNext();){const ee=w.getNext().value;if(ee.getKey().getCollectionGroup()===t&&ee.largestBatchId>a){let ye=m.get(ee.largestBatchId);null===ye&&(ye=Fa(),m=m.insert(ee.largestBatchId,ye)),ye.set(ee.getKey(),ee)}}const O=Fa(),G=m.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((ee,ye)=>O.set(ee,ye)),!(O.size()>=h)););return Lt.resolve(O)}re(e,t,a){const h=this.overlays.get(a.key);if(null!==h){const w=this.ts.get(h.largestBatchId).delete(a.key);this.ts.set(h.largestBatchId,w)}this.overlays=this.overlays.insert(a.key,new wl(t,a));let m=this.ts.get(t);void 0===m&&(m=Or(),this.ts.set(t,m)),this.ts.set(t,m.add(a.key))}}class Bp{constructor(){this.es=new St(Ls.ns),this.ss=new St(Ls.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const a=new Ls(e,t);this.es=this.es.add(a),this.ss=this.ss.add(a)}os(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.us(new Ls(e,t))}cs(e,t){e.forEach(a=>this.removeReference(a,t))}hs(e){const t=new On(new ti([])),a=new Ls(t,e),h=new Ls(t,e+1),m=[];return this.ss.forEachInRange([a,h],w=>{this.us(w),m.push(w.key)}),m}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new On(new ti([])),a=new Ls(t,e),h=new Ls(t,e+1);let m=Or();return this.ss.forEachInRange([a,h],w=>{m=m.add(w.key)}),m}containsKey(e){const t=new Ls(e,0),a=this.es.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class Ls{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return On.comparator(e.key,t.key)||hr(e.ds,t.ds)}static rs(e,t){return hr(e.ds,t.ds)||On.comparator(e.key,t.key)}}class wy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new St(Ls.ns)}checkEmpty(e){return Lt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,h){const m=this.ws;this.ws++;const w=new Sp(m,t,a,h);this.mutationQueue.push(w);for(const O of h)this._s=this._s.add(new Ls(O.key,m)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return Lt.resolve(w)}lookupMutationBatch(e,t){return Lt.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ys(t+1),m=h<0?0:h;return Lt.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Lt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Ls(t,0),h=new Ls(t,Number.POSITIVE_INFINITY),m=[];return this._s.forEachInRange([a,h],w=>{const O=this.gs(w.ds);m.push(O)}),Lt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new St(hr);return t.forEach(h=>{const m=new Ls(h,0),w=new Ls(h,Number.POSITIVE_INFINITY);this._s.forEachInRange([m,w],O=>{a=a.add(O.ds)})}),Lt.resolve(this.ps(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1;let m=a;On.isDocumentKey(m)||(m=m.child(""));const w=new Ls(new On(m),0);let O=new St(hr);return this._s.forEachWhile(G=>{const ee=G.key.path;return!!a.isPrefixOf(ee)&&(ee.length===h&&(O=O.add(G.ds)),!0)},w),Lt.resolve(this.ps(O))}ps(e){const t=[];return e.forEach(a=>{const h=this.gs(a);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){xn(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let a=this._s;return Lt.forEach(t.mutations,h=>{const m=new Ls(h.key,t.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this._s=a})}En(e){}containsKey(e,t){const a=new Ls(t,0),h=this._s.firstAfterOrEqual(a);return Lt.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return Lt.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class by{constructor(e){this.Ts=e,this.docs=new se(On.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,h=this.docs.get(a),m=h?h.size:0,w=this.Ts(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:w}),this.size+=w-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Lt.resolve(a?a.document.mutableCopy():Es.newInvalidDocument(t))}getEntries(e,t){let a=Bi();return t.forEach(h=>{const m=this.docs.get(h);a=a.insert(h,m?m.document.mutableCopy():Es.newInvalidDocument(h))}),Lt.resolve(a)}getDocumentsMatchingQuery(e,t,a,h){let m=Bi();const w=t.path,O=new On(w.child("")),G=this.docs.getIteratorFrom(O);for(;G.hasNext();){const{key:ee,value:{document:ye}}=G.getNext();if(!w.isPrefixOf(ee.path))break;ee.path.length>w.length+1||Dc(Cc(ye),a)<=0||(h.has(ye.key)||It(t,ye))&&(m=m.insert(ye.key,ye.mutableCopy()))}return Lt.resolve(m)}getAllFromCollectionGroup(e,t,a,h){dn()}Es(e,t){return Lt.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new Cy(this)}getSize(e){return Lt.resolve(this.size)}}class Cy extends my{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?t.push(this.Jn.addEntry(e,h)):this.Jn.removeEntry(a)}),Lt.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class om{constructor(e){this.persistence=e,this.As=new Wn(t=>Iu(t),_l),this.lastRemoteSnapshotVersion=yr.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Bp,this.targetCount=0,this.bs=$u.vn()}forEachTarget(e,t){return this.As.forEach((a,h)=>t(h)),Lt.resolve()}getLastRemoteSnapshotVersion(e){return Lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Lt.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Lt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.Rs&&(this.Rs=t),Lt.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new $u(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,Lt.resolve()}updateTargetData(e,t){return this.Sn(t),Lt.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Lt.resolve()}removeTargets(e,t,a){let h=0;const m=[];return this.As.forEach((w,O)=>{O.sequenceNumber<=t&&null===a.get(O.targetId)&&(this.As.delete(w),m.push(this.removeMatchingKeysForTargetId(e,O.targetId)),h++)}),Lt.waitFor(m).next(()=>h)}getTargetCount(e){return Lt.resolve(this.targetCount)}getTargetData(e,t){const a=this.As.get(t)||null;return Lt.resolve(a)}addMatchingKeys(e,t,a){return this.vs.os(t,a),Lt.resolve()}removeMatchingKeys(e,t,a){this.vs.cs(t,a);const h=this.persistence.referenceDelegate,m=[];return h&&t.forEach(w=>{m.push(h.markPotentiallyOrphaned(e,w))}),Lt.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),Lt.resolve()}getMatchingKeysForTargetId(e,t){const a=this.vs.fs(t);return Lt.resolve(a)}containsKey(e,t){return Lt.resolve(this.vs.containsKey(t))}}class Ff{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Fo(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new om(this),this.indexManager=new B_,this.remoteDocumentCache=new by(a=>this.referenceDelegate.Cs(a)),this.serializer=new Rh(t),this.xs=new sm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wr,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Ps[e.toKey()];return a||(a=new wy(t,this.referenceDelegate),this.Ps[e.toKey()]=a),a}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,a){Kt("MemoryPersistence","Starting transaction:",e);const h=new $p(this.Vs.next());return this.referenceDelegate.Ns(),a(h).next(m=>this.referenceDelegate.ks(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Os(e,t){return Lt.or(Object.values(this.Ps).map(a=>()=>a.containsKey(e,t)))}}class $p extends Ya{constructor(e){super(),this.currentSequenceNumber=e}}class Bh{constructor(e){this.persistence=e,this.$s=new Bp,this.Ms=null}static Fs(e){return new Bh(e)}get Bs(){if(this.Ms)return this.Ms;throw dn()}addReference(e,t,a){return this.$s.addReference(a,t),this.Bs.delete(a.toString()),Lt.resolve()}removeReference(e,t,a){return this.$s.removeReference(a,t),this.Bs.add(a.toString()),Lt.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),Lt.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(h=>this.Bs.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(m=>this.Bs.add(m.toString()))}).next(()=>a.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lt.forEach(this.Bs,a=>{const h=On.fromPath(a);return this.Ls(e,h).next(m=>{m||t.removeEntry(h,yr.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(a=>{a?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return Lt.or([()=>Lt.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class $_{constructor(e){this.serializer=e}M(e,t,a,h){const m=new ac("createOrUpgrade",t);var O;a<1&&h>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bo,{unique:!0}),O.createObjectStore("documentMutations"),U_(e),function(O){O.createObjectStore("remoteDocuments")}(e));let w=Lt.resolve();return a<3&&h>=3&&(0!==a&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),U_(e)),w=w.next(()=>function(O){const G=O.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yr.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",ee)}(m))),a<4&&h>=4&&(0!==a&&(w=w.next(()=>function(O,G){return G.store("mutations").j().next(ee=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bo,{unique:!0});const ye=G.store("mutations"),it=ee.map(xt=>ye.put(xt));return Lt.waitFor(it)})}(e,m))),w=w.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(w=w.next(()=>this.qs(m))),a<6&&h>=6&&(w=w.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Us(m)))),a<7&&h>=7&&(w=w.next(()=>this.Ks(m))),a<8&&h>=8&&(w=w.next(()=>this.Gs(e,m))),a<9&&h>=9&&(w=w.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(w=w.next(()=>this.Qs(m))),a<11&&h>=11&&(w=w.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(w=w.next(()=>{!function(O){const G=O.createObjectStore("documentOverlays",{keyPath:Tr});G.createIndex("collectionPathOverlayIndex",Zi,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",Fs,{unique:!1})}(e)})),a<13&&h>=13&&(w=w.next(()=>function(O){const G=O.createObjectStore("remoteDocumentsV14",{keyPath:N});G.createIndex("documentKeyIndex",H),G.createIndex("collectionGroupIndex",re)}(e)).next(()=>this.zs(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(w=w.next(()=>this.js(e,m))),a<15&&h>=15&&(w=w.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:Un}).createIndex("sequenceNumberIndex",Vn,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:ai}).createIndex("documentKeyIndex",jr,{unique:!1})}(e))),w}Us(e){let t=0;return e.store("remoteDocuments").Z((a,h)=>{t+=Of(h)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}qs(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.j().next(h=>Lt.forEach(h,m=>{const w=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.j("userMutationsIndex",w).next(O=>Lt.forEach(O,G=>{xn(G.userId===m.userId);const ee=Ru(this.serializer,G);return Xa(e,m.userId,ee).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return a.Z((w,O)=>{const G=new ti(w),ee=[0,mi(G)];m.push(t.get(ee).next(ye=>ye?Lt.resolve():t.put({targetId:0,path:mi(G),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>Lt.waitFor(m))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:wn});const a=t.store("collectionParents"),h=new kp,m=w=>{if(h.add(w)){const O=w.lastSegment(),G=w.popLast();return a.put({collectionId:O,parent:mi(G)})}};return t.store("remoteDocuments").Z({Y:!0},(w,O)=>{const G=new ti(w);return m(G.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([w,O,G],ee)=>{const ye=Lo(O);return m(ye.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((a,h)=>{const m=mc(h),w=Rp(this.serializer,m);return t.put(w)})}zs(e,t){const a=t.store("remoteDocuments"),h=[];return a.Z((m,w)=>{const O=t.store("remoteDocumentsV14"),G=(ee=w,ee.document?new On(ti.fromString(ee.document.name).popFirst(5)):ee.noDocument?On.fromSegments(ee.noDocument.path):ee.unknownDocument?On.fromSegments(ee.unknownDocument.path):dn()).path.toArray();var ee;const ye={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};h.push(O.put(ye))}).next(()=>Lt.waitFor(h))}js(e,t){const a=t.store("mutations"),h=yy(this.serializer),m=new Ff(Bh.Fs,this.serializer.se);return a.j().next(w=>{const O=new Map;return w.forEach(G=>{var ee;let ye=null!==(ee=O.get(G.userId))&&void 0!==ee?ee:Or();Ru(this.serializer,G).keys().forEach(it=>ye=ye.add(it)),O.set(G.userId,ye)}),Lt.forEach(O,(G,ee)=>{const ye=new Ne(ee),it=xu.ie(this.serializer,ye),xt=m.getIndexManager(ye),en=Fp.ie(ye,this.serializer,xt,m.referenceDelegate);return new Iy(h,en,it,xt).recalculateAndSaveOverlaysForDocumentKeys(new Fl(t,Fo.ct),G).next()})})}}function U_(s){s.createObjectStore("targetDocuments",{keyPath:ht}).createIndex("documentTargetsIndex",Dt,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",le,{unique:!0}),s.createObjectStore("targetGlobal")}const $h="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Up{constructor(e,t,a,h,m,w,O,G,ee,ye,it=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.Ws=m,this.window=w,this.document=O,this.Hs=ee,this.Js=ye,this.Ys=it,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=xt=>Promise.resolve(),!Up.D())throw new tn(Nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gy(this,h),this.si=t+"main",this.serializer=new Rh(G),this.ii=new As(this.si,this.Ys,new $_(this.serializer)),this.Ds=new Nf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yy(this.serializer),this.xs=new Pp,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===ye&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tn(Nt.FAILED_PRECONDITION,$h);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Fo(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var a=(0,oe.Z)(function*(h){if(t.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,oe.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,oe.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fi(e))return Kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Gl(e).get("owner").next(t=>Lt.resolve(this._i(t)))}mi(e){return Vp(e).delete(this.clientId)}gi(){var e=this;return(0,oe.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=Qi(a,"clientMetadata");return h.j().next(m=>{const w=e.pi(m,18e5),O=m.filter(G=>-1===w.indexOf(G));return Lt.forEach(O,G=>h.delete(G.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ri)for(const a of t)e.ri.removeItem(e.Ii(a.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?Lt.resolve(!0):Gl(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new tn(Nt.FAILED_PRECONDITION,$h);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vp(e).j().next(a=>void 0===this.pi(a,5e3).find(h=>!(this.clientId===h.clientId||!(!this.networkEnabled&&h.networkEnabled||!this.inForeground&&h.inForeground&&this.networkEnabled===h.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Kt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,oe.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new Fl(t,Fo.ct);return e.di(a).next(()=>e.mi(a))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(a=>this.yi(a.updateTimeMs,t)&&!this.Ti(a.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Vp(e).j().next(t=>this.pi(t,18e5).map(a=>a.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return Fp.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nh(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return xu.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,a){Kt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",m=15===(w=this.Ys)?fl:14===w?ho:13===w?hl:12===w?ps:11===w?Zo:void dn();var w;let O;return this.ii.runTransaction(e,h,m,G=>(O=new Fl(G,this.Vs?this.Vs.next():Fo.ct),"readwrite-primary"===t?this.li(O).next(ee=>!!ee||this.fi(O)).next(ee=>{if(!ee)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new tn(Nt.FAILED_PRECONDITION,Tc);return a(O)}).next(ee=>this.wi(O).next(()=>ee)):this.Pi(O).next(()=>a(O)))).then(G=>(O.raiseOnCommittedEvent(),G))}Pi(e){return Gl(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new tn(Nt.FAILED_PRECONDITION,$h)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gl(e).put("owner",t)}static D(){return As.D()}di(e){const t=Gl(e);return t.get("owner").next(a=>this._i(a)?(Kt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Lt.resolve())}yi(e,t){const a=Date.now();return!(e<a-t||e>a&&(lr(`Detected an update time that is in the future: ${e} > ${a}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,q.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const a=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Kt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return lr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gl(s){return Qi(s,"owner")}function Vp(s){return Qi(s,"clientMetadata")}function Uh(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class Vh{constructor(e,t,a,h){this.targetId=e,this.fromCache=t,this.Vi=a,this.Si=h}static Di(e,t){let a=Or(),h=Or();for(const m of t.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Vh(e,t.fromCache,a,h)}}class jp{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,a,h){return this.Ni(e,t).next(m=>m||this.ki(e,t,h,a)).next(m=>m||this.Oi(e,t))}Ni(e,t){if(bd(t))return Lt.resolve(null);let a=M(t);return this.indexManager.getIndexType(e,a).next(h=>0===h?null:(null!==t.limit&&1===h&&(t=I(t,null,"F"),a=M(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(m=>{const w=Or(...m);return this.xi.getDocuments(e,w).next(O=>this.indexManager.getMinOffset(e,a).next(G=>{const ee=this.$i(t,O);return this.Mi(t,ee,w,G.readTime)?this.Ni(e,I(t,null,"F")):this.Fi(e,ee,t,G)}))})))}ki(e,t,a,h){return bd(t)||h.isEqual(yr.min())?this.Oi(e,t):this.xi.getDocuments(e,a).next(m=>{const w=this.$i(t,m);return this.Mi(t,w,a,h)?this.Oi(e,t):(jn()<=Ae.in.DEBUG&&Kt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Ee(t)),this.Fi(e,w,t,Na(h,-1)))})}$i(e,t){let a=new St(Mn(e));return t.forEach((h,m)=>{It(e,m)&&(a=a.add(m))}),a}Mi(e,t,a,h){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Oi(e,t){return jn()<=Ae.in.DEBUG&&Kt("QueryEngine","Using full collection scan to execute query:",Ee(t)),this.xi.getDocumentsMatchingQuery(e,t,oo.min())}Fi(e,t,a,h){return this.xi.getDocumentsMatchingQuery(e,a,h).next(m=>(t.forEach(w=>{m=m.insert(w.key,w)}),m))}}class V_{constructor(e,t,a,h){this.persistence=e,this.Bi=t,this.serializer=h,this.Li=new se(hr),this.qi=new Wn(m=>Iu(m),_l),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(a)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Iy(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function Ja(s,e,t,a){return new V_(s,e,t,a)}function Hp(s,e){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,oe.Z)(function*(s,e){const t=hn(s);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let h;return t.mutationQueue.getAllMutationBatches(a).next(m=>(h=m,t.Gi(e),t.mutationQueue.getAllMutationBatches(a))).next(m=>{const w=[],O=[];let G=Or();for(const ee of h){w.push(ee.batchId);for(const ye of ee.mutations)G=G.add(ye.key)}for(const ee of m){O.push(ee.batchId);for(const ye of ee.mutations)G=G.add(ye.key)}return t.localDocuments.getDocuments(a,G).next(ee=>({Qi:ee,removedBatchIds:w,addedBatchIds:O}))})})}),Uc.apply(this,arguments)}function Wl(s){const e=hn(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function ju(s,e,t){let a=Or(),h=Or();return t.forEach(m=>a=a.add(m)),e.getEntries(s,a).next(m=>{let w=Bi();return t.forEach((O,G)=>{const ee=m.get(O);G.isFoundDocument()!==ee.isFoundDocument()&&(h=h.add(O)),G.isNoDocument()&&G.version.isEqual(yr.min())?(e.removeEntry(O,G.readTime),w=w.insert(O,G)):!ee.isValidDocument()||G.version.compareTo(ee.version)>0||0===G.version.compareTo(ee.version)&&ee.hasPendingWrites?(e.addEntry(G),w=w.insert(O,G)):Kt("LocalStore","Ignoring outdated watch update for ",O,". Current version:",ee.version," Watch version:",G.version)}),{zi:w,ji:h}})}function Dy(s,e){const t=hn(s);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Tl(s,e){const t=hn(s);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return t.Ds.getTargetData(a,e).next(m=>m?(h=m,Lt.resolve(h)):t.Ds.allocateTargetId(a).next(w=>(h=new jl(e,w,0,a.currentSequenceNumber),t.Ds.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=t.Li.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.Li=t.Li.insert(a.targetId,a),t.qi.set(e,a.targetId)),a})}function Hu(s,e,t){return am.apply(this,arguments)}function am(){return am=(0,oe.Z)(function*(s,e,t){const a=hn(s),h=a.Li.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",m,w=>a.persistence.referenceDelegate.removeTarget(w,h)))}catch(w){if(!fi(w))throw w;Kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}a.Li=a.Li.remove(e),a.qi.delete(h.target)}),am.apply(this,arguments)}function Bf(s,e,t){const a=hn(s);let h=yr.min(),m=Or();return a.persistence.runTransaction("Execute query","readonly",w=>function(O,G,ee){const ye=hn(O),it=ye.qi.get(ee);return void 0!==it?Lt.resolve(ye.Li.get(it)):ye.Ds.getTargetData(G,ee)}(a,w,M(e)).next(O=>{if(O)return h=O.lastLimboFreeSnapshotVersion,a.Ds.getMatchingKeysForTargetId(w,O.targetId).next(G=>{m=G})}).next(()=>a.Bi.getDocumentsMatchingQuery(w,e,t?h:yr.min(),t?m:Or())).next(O=>(Sy(a,Bt(e),O),{documents:O,Wi:m})))}function zp(s,e){const t=hn(s),a=hn(t.Ds),h=t.Li.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",m=>a.ne(m,e).next(w=>w?w.target:null))}function Ty(s,e){const t=hn(s),a=t.Ui.get(e)||yr.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Ki.getAllFromCollectionGroup(h,e,Na(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Sy(t,e,h),h))}function Sy(s,e,t){let a=s.Ui.get(e)||yr.min();t.forEach((h,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),s.Ui.set(e,a)}function lm(){return lm=(0,oe.Z)(function*(s,e,t,a){const h=hn(s);let m=Or(),w=Bi();for(const ee of t){const ye=e.Hi(ee.metadata.name);ee.document&&(m=m.add(ye));const it=e.Ji(ee);it.setReadTime(e.Yi(ee.metadata.readTime)),w=w.insert(ye,it)}const O=h.Ki.newChangeBuffer({trackRemovals:!0}),G=yield Tl(h,(ee=a,M($l(ti.fromString(`__bundle__/docs/${ee}`)))));var ee;return h.persistence.runTransaction("Apply bundle documents","readwrite",ee=>ju(ee,O,w).next(ye=>(O.apply(ee),ye)).next(ye=>h.Ds.removeMatchingKeysForTargetId(ee,G.targetId).next(()=>h.Ds.addMatchingKeys(ee,m,G.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(ee,ye.zi,ye.ji)).next(()=>ye.zi)))}),lm.apply(this,arguments)}function jh(s,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,oe.Z)(function*(s,e,t=Or()){const a=yield Tl(s,M(Fd(e.bundledQuery))),h=hn(s);return h.persistence.runTransaction("Save named query","readwrite",m=>{const w=Js(e.readTime);if(a.snapshotVersion.compareTo(w)>=0)return h.xs.saveNamedQuery(m,e);const O=a.withResumeToken(tr.EMPTY_BYTE_STRING,w);return h.Li=h.Li.insert(O.targetId,O),h.Ds.updateTargetData(m,O).next(()=>h.Ds.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>h.Ds.addMatchingKeys(m,t,a.targetId)).next(()=>h.xs.saveNamedQuery(m,e))})}),Hh.apply(this,arguments)}function zd(s,e){return`firestore_clients_${s}_${e}`}function $f(s,e,t){let a=`firestore_mutations_${s}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function zh(s,e){return`firestore_targets_${s}_${e}`}class Gp{constructor(e,t,a,h){this.user=e,this.batchId=t,this.state=a,this.error=h}static Zi(e,t,a){const h=JSON.parse(a);let m,w="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return w&&h.error&&(w="string"==typeof h.error.message&&"string"==typeof h.error.code,w&&(m=new tn(h.error.code,h.error.message))),w?new Gp(e,t,h.state,m):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zu{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static Zi(e,t){const a=JSON.parse(t);let h,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(h=new tn(a.error.code,a.error.message))),m?new zu(e,a.state,h):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const a=JSON.parse(t);let h="object"==typeof a&&a.activeTargetIds instanceof Array,m=Il();for(let w=0;h&&w<a.activeTargetIds.length;++w)h=gu(a.activeTargetIds[w]),m=m.add(a.activeTargetIds[w]);return h?new Uf(e,m):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cm{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cm(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ea{constructor(){this.activeTargetIds=Il()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vf{constructor(e,t,a,h,m){this.window=e,this.Ws=t,this.persistenceKey=a,this.nr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new se(hr),this.started=!1,this.ur=[];const w=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.cr=zd(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new ea),this.hr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,oe.Z)(function*(){const t=yield e.syncEngine.bi();for(const h of t){if(h===e.nr)continue;const m=e.getItem(zd(e.persistenceKey,h));if(m){const w=Uf.Zi(h,m);w&&(e.rr=e.rr.insert(w.clientId,w))}}e.mr();const a=e.storage.getItem(e.wr);if(a){const h=e.gr(a);h&&e.yr(h)}for(const h of e.ur)e.ir(h);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((a,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,a){this.Ir(e,t,a),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(zh(this.persistenceKey,e));if(a){const h=zu.Zi(e,a);h&&(t=h.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zh(this.persistenceKey,e))}updateQueryState(e,t,a){this.Ar(e,t,a)}handleUserChange(e,t,a){t.forEach(h=>{this.Tr(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Kt("SharedClientState","READ",e,t),t}setItem(e,t){Kt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const a=e;if(a.storageArea===this.storage){if(Kt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.cr)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,oe.Z)(function*(){if(t.started){if(null!==a.key)if(t.hr.test(a.key)){if(null==a.newValue){const h=t.br(a.key);return t.Pr(h,null)}{const h=t.Vr(a.key,a.newValue);if(h)return t.Pr(h.clientId,h)}}else if(t.lr.test(a.key)){if(null!==a.newValue){const h=t.Sr(a.key,a.newValue);if(h)return t.Dr(h)}}else if(t.dr.test(a.key)){if(null!==a.newValue){const h=t.Cr(a.key,a.newValue);if(h)return t.Nr(h)}}else if(a.key===t.wr){if(null!==a.newValue){const h=t.gr(a.newValue);if(h)return t.yr(h)}}else if(a.key===t.ar){const h=function(m){let w=Fo.ct;if(null!=m)try{const O=JSON.parse(m);xn("number"==typeof O),w=O}catch(O){lr("SharedClientState","Failed to read sequence number from WebStorage",O)}return w}(a.newValue);h!==Fo.ct&&t.sequenceNumberHandler(h)}else if(a.key===t._r){const h=t.kr(a.newValue);yield Promise.all(h.map(m=>t.syncEngine.Or(m)))}}else t.ur.push(a)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,a){const h=new Gp(this.currentUser,e,t,a),m=$f(this.persistenceKey,this.currentUser,e);this.setItem(m,h.Xi())}Tr(e){const t=$f(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,a){const h=zh(this.persistenceKey,e),m=new zu(e,t,a);this.setItem(h,m.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const a=this.br(e);return Uf.Zi(a,t)}Sr(e,t){const a=this.lr.exec(e),h=Number(a[1]);return Gp.Zi(new Ne(void 0!==a[2]?a[2]:null),h,t)}Cr(e,t){const a=this.dr.exec(e),h=Number(a[1]);return zu.Zi(h,t)}gr(e){return cm.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const a=t?this.rr.insert(e,t):this.rr.remove(e),h=this.pr(this.rr),m=this.pr(a),w=[],O=[];return m.forEach(G=>{h.has(G)||w.push(G)}),h.forEach(G=>{m.has(G)||O.push(G)}),this.syncEngine.Fr(w,O).then(()=>{this.rr=a})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=Il();return e.forEach((a,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Ay{constructor(){this.Br=new ea,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,a){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new ea,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class My{qr(e){}shutdown(){}}class Ry{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let jf=null;function Gh(){return null===jf?jf=268435456+Math.round(2147483648*Math.random()):jf++,"0x"+jf.toString(16)}const Wh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class um{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const go="WebChannelConnection";class dm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,a,h,m){const w=Gh(),O=this.ao(e,t);Kt("RestConnection",`Sending RPC '${e}' ${w}:`,O,a);const G={};return this.ho(G,h,m),this.lo(e,O,G,a).then(ee=>(Kt("RestConnection",`Received RPC '${e}' ${w}: `,ee),ee),ee=>{throw vr("RestConnection",`RPC '${e}' ${w} failed with error: `,ee,"url: ",O,"request:",a),ee})}fo(e,t,a,h,m,w){return this.co(e,t,a,h,m)}ho(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ft,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,m)=>e[m]=h),a&&a.headers.forEach((h,m)=>e[m]=h)}ao(e,t){return`${this.ro}/v1/${t}:${Wh[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,a,h){const m=Gh();return new Promise((w,O)=>{const G=new U;G.setWithCredentials(!0),G.listenOnce(Ro.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Mo.NO_ERROR:const ye=G.getResponseJson();Kt(go,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(ye)),w(ye);break;case Mo.TIMEOUT:Kt(go,`RPC '${e}' ${m} timed out`),O(new tn(Nt.DEADLINE_EXCEEDED,"Request time out"));break;case Mo.HTTP_ERROR:const it=G.getStatus();if(Kt(go,`RPC '${e}' ${m} failed with status:`,it,"response text:",G.getResponseText()),it>0){let xt=G.getResponseJson();Array.isArray(xt)&&(xt=xt[0]);const en=null==xt?void 0:xt.error;if(en&&en.status&&en.message){const Dn=function(Zn){const br=Zn.toLowerCase().replace(/_/g,"-");return Object.values(Nt).indexOf(br)>=0?br:Nt.UNKNOWN}(en.status);O(new tn(Dn,en.message))}else O(new tn(Nt.UNKNOWN,"Server responded with status "+G.getStatus()))}else O(new tn(Nt.UNAVAILABLE,"Connection failed."));break;default:dn()}}finally{Kt(go,`RPC '${e}' ${m} completed.`)}});const ee=JSON.stringify(h);Kt(go,`RPC '${e}' ${m} sending request:`,h),G.send(t,"POST",ee,a,15)})}wo(e,t,a){const h=Gh(),m=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=Gc(),O=fs(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(G.xmlHttpFactory=new L({})),this.ho(G.initMessageHeaders,t,a),G.encodeInitMessageHeaders=!0;const ee=m.join("");Kt(go,`Creating RPC '${e}' stream ${h}: ${ee}`,G);const ye=w.createWebChannel(ee,G);let it=!1,xt=!1;const en=new um({Wr:Zn=>{xt?Kt(go,`Not sending because RPC '${e}' stream ${h} is closed:`,Zn):(it||(Kt(go,`Opening RPC '${e}' stream ${h} transport.`),ye.open(),it=!0),Kt(go,`RPC '${e}' stream ${h} sending:`,Zn),ye.send(Zn))},Hr:()=>ye.close()}),Dn=(Zn,br,Xi)=>{Zn.listen(br,Bs=>{try{Xi(Bs)}catch(Ri){setTimeout(()=>{throw Ri},0)}})};return Dn(ye,J.EventType.OPEN,()=>{xt||Kt(go,`RPC '${e}' stream ${h} transport opened.`)}),Dn(ye,J.EventType.CLOSE,()=>{xt||(xt=!0,Kt(go,`RPC '${e}' stream ${h} transport closed`),en.so())}),Dn(ye,J.EventType.ERROR,Zn=>{xt||(xt=!0,vr(go,`RPC '${e}' stream ${h} transport errored:`,Zn),en.so(new tn(Nt.UNAVAILABLE,"The operation could not be completed")))}),Dn(ye,J.EventType.MESSAGE,Zn=>{var br;if(!xt){const Xi=Zn.data[0];xn(!!Xi);const Ri=Xi.error||(null===(br=Xi[0])||void 0===br?void 0:br.error);if(Ri){Kt(go,`RPC '${e}' stream ${h} received error:`,Ri);const Sa=Ri.status;let $s=function(Pl){const _f=po[Pl];if(void 0!==_f)return zg(_f)}(Sa),Us=Ri.message;void 0===$s&&($s=Nt.INTERNAL,Us="Unknown error status: "+Sa+" with message "+Ri.message),xt=!0,en.so(new tn($s,Us)),ye.close()}else Kt(go,`RPC '${e}' stream ${h} received:`,Xi),en.io(Xi)}}),Dn(O,Wc.STAT_EVENT,Zn=>{Zn.stat===Ea.PROXY?Kt(go,`RPC '${e}' stream ${h} detected buffering proxy`):Zn.stat===Ea.NOPROXY&&Kt(go,`RPC '${e}' stream ${h} detected no buffering proxy`)}),setTimeout(()=>{en.no()},0),en}}function Hf(){return typeof window<"u"?window:null}function zf(){return typeof document<"u"?document:null}function Gd(s){return new Rf(s,!0)}class Gf{constructor(e,t,a=1e3,h=1.5,m=6e4){this.Ws=e,this.timerId=t,this._o=a,this.mo=h,this.yo=m,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),a=Math.max(0,Date.now()-this.To),h=Math.max(0,t-a);h>0&&Kt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,h,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Wp{constructor(e,t,a,h,m,w,O,G){this.Ws=e,this.bo=a,this.Po=h,this.connection=m,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=O,this.listener=G,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Gf(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,oe.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,oe.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var a=this;return(0,oe.Z)(function*(){a.Bo(),a.Lo(),a.Co.cancel(),a.Vo++,4!==e?a.Co.reset():t&&t.code===Nt.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),a.Co.Eo()):t&&t.code===Nt.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.qo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Vo===t&&this.Ko(a,h)},a=>{e(()=>{const h=new tn(Nt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.Go(h)})})}Ko(e,t){const a=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{a(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(h=>{a(()=>this.Go(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}ko(){var e=this;this.state=5,this.Co.Ao((0,oe.Z)(function*(){e.state=0,e.start()}))}Go(e){return Kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xy extends Wp{constructor(e,t,a,h,m,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,h,w),this.serializer=m}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function ay(s,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:dn(),h=e.targetChange.targetIds||[],m=function(G,ee){return G.useProto3Json?(xn(void 0===ee||"string"==typeof ee),tr.fromBase64String(ee||"")):(xn(void 0===ee||ee instanceof Uint8Array),tr.fromUint8Array(ee||new Uint8Array))}(s,e.targetChange.resumeToken),w=e.targetChange.cause,O=w&&function(G){const ee=void 0===G.code?Nt.UNKNOWN:zg(G.code);return new tn(ee,G.message||"")}(w);t=new xd(a,h,m,O||null)}else if("documentChange"in e){const a=e.documentChange,h=Jo(s,a.document.name),m=Js(a.document.updateTime),w=a.document.createTime?Js(a.document.createTime):yr.min(),O=new li({mapValue:{fields:a.document.fields}}),G=Es.newFoundDocument(h,m,w,O);t=new Rd(a.targetIds||[],a.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const a=e.documentDelete,h=Jo(s,a.document),m=a.readTime?Js(a.readTime):yr.min(),w=Es.newNoDocument(h,m);t=new Rd([],a.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const a=e.documentRemove,h=Jo(s,a.document);t=new Rd([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return dn();{const a=e.filter,m=new Hg(a.count||0);t=new gc(a.targetId,m)}}var G;return t}(this.serializer,e),a=function(h){if(!("targetChange"in h))return yr.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?yr.min():m.readTime?Js(m.readTime):yr.min()}(e);return this.listener.zo(t,a)}jo(e){const t={};t.database=Pd(this.serializer),t.addTarget=function(h,m){let w;const O=m.target;return w=wu(O)?{documents:ly(h,O)}:{query:Xg(h,O)},w.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?w.resumeToken=x_(h,m.resumeToken):m.snapshotVersion.compareTo(yr.min())>0&&(w.readTime=Dh(h,m.snapshotVersion.toTimestamp())),w}(this.serializer,e);const a=function O_(s,e){const t=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Fo(t)}Wo(e){const t={};t.database=Pd(this.serializer),t.removeTarget=e,this.Fo(t)}}class hm extends Wp{constructor(e,t,a,h,m,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,h,w),this.serializer=m,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(xn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function P_(s,e){return s&&s.length>0?(xn(void 0!==e),s.map(t=>function(a,h){let m=Js(a.updateTime?a.updateTime:h);return m.isEqual(yr.min())&&(m=Js(h)),new bp(m,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=Js(e.commitTime);return this.listener.Zo(a,t)}return xn(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Pd(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>bl(this.serializer,a))};this.Fo(t)}}class H_ extends class{}{constructor(e,t,a,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=h,this.eu=!1}nu(){if(this.eu)throw new tn(Nt.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,a){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.co(e,t,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new tn(Nt.UNKNOWN,h.toString())})}fo(e,t,a,h){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,w])=>this.connection.fo(e,t,a,m,w,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new tn(Nt.UNKNOWN,m.toString())})}terminate(){this.eu=!0}}class G_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(lr(t),this.ru=!1):Kt("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class Py{constructor(e,t,a,h,m){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=m,this._u.qr(O=>{a.enqueueAndForget((0,oe.Z)(function*(){var G;lu(w)&&(Kt("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,oe.Z)(function*(ee){const ye=hn(ee);ye.du.add(4),yield Gu(ye),ye.mu.set("Unknown"),ye.du.delete(4),yield ba(ye)}),function(ee){return G.apply(this,arguments)})(w))}))}),this.mu=new G_(a,h)}}function ba(s){return fm.apply(this,arguments)}function fm(){return fm=(0,oe.Z)(function*(s){if(lu(s))for(const e of s.wu)yield e(!0)}),fm.apply(this,arguments)}function Gu(s){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,oe.Z)(function*(s){for(const e of s.wu)yield e(!1)}),Ca.apply(this,arguments)}function qp(s,e){const t=hn(s);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),pm(t)?Zp(t):Wd(t).No()&&Oy(t,e))}function Kh(s,e){const t=hn(s),a=Wd(t);t.fu.delete(e),a.No()&&Yp(t,e),0===t.fu.size&&(a.No()?a.$o():lu(t)&&t.mu.set("Unknown"))}function Oy(s,e){s.gu.Ot(e.targetId),Wd(s).jo(e)}function Yp(s,e){s.gu.Ot(e),Wd(s).Wo(e)}function Zp(s){s.gu=new Kg({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>s.fu.get(e)||null}),Wd(s).start(),s.mu.ou()}function pm(s){return lu(s)&&!Wd(s).xo()&&s.fu.size>0}function lu(s){return 0===hn(s).du.size}function Ny(s){s.gu=void 0}function ky(s){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,oe.Z)(function*(s){s.fu.forEach((e,t)=>{Oy(s,e)})}),Fy.apply(this,arguments)}function Ly(s,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,oe.Z)(function*(s,e){Ny(s),pm(s)?(s.mu.au(e),Zp(s)):s.mu.set("Unknown")}),Wf.apply(this,arguments)}function W_(s,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,oe.Z)(function*(s,e,t){if(s.mu.set("Online"),e instanceof xd&&2===e.state&&e.cause)try{yield(a=(0,oe.Z)(function*(h,m){const w=m.cause;for(const O of m.targetIds)h.fu.has(O)&&(yield h.remoteSyncer.rejectListen(O,w),h.fu.delete(O),h.gu.removeTarget(O))}),function(h,m){return a.apply(this,arguments)})(s,e)}catch(a){Kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Qp(s,a)}else if(e instanceof Rd?s.gu.Kt(e):e instanceof gc?s.gu.Jt(e):s.gu.zt(e),!t.isEqual(yr.min()))try{const a=yield Wl(s.localStore);t.compareTo(a)>=0&&(yield function(h,m){const w=h.gu.Xt(m);return w.targetChanges.forEach((O,G)=>{if(O.resumeToken.approximateByteSize()>0){const ee=h.fu.get(G);ee&&h.fu.set(G,ee.withResumeToken(O.resumeToken,m))}}),w.targetMismatches.forEach(O=>{const G=h.fu.get(O);if(!G)return;h.fu.set(O,G.withResumeToken(tr.EMPTY_BYTE_STRING,G.snapshotVersion)),Yp(h,O);const ee=new jl(G.target,O,1,G.sequenceNumber);Oy(h,ee)}),h.remoteSyncer.applyRemoteEvent(w)}(s,t))}catch(a){Kt("RemoteStore","Failed to raise snapshot:",a),yield Qp(s,a)}var a}),gm.apply(this,arguments)}function Qp(s,e,t){return mm.apply(this,arguments)}function mm(){return mm=(0,oe.Z)(function*(s,e,t){if(!fi(e))throw e;s.du.add(1),yield Gu(s),s.mu.set("Offline"),t||(t=()=>Wl(s.localStore)),s.asyncQueue.enqueueRetryable((0,oe.Z)(function*(){Kt("RemoteStore","Retrying IndexedDB access"),yield t(),s.du.delete(1),yield ba(s)}))}),mm.apply(this,arguments)}function By(s,e){return e().catch(t=>Qp(s,t,e))}function $a(s){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,oe.Z)(function*(s){const e=hn(s),t=cu(e);let a=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;K_(e);)try{const h=yield Dy(e.localStore,a);if(null===h){0===e.lu.length&&t.$o();break}a=h.batchId,Nv(e,h)}catch(h){yield Qp(e,h)}$y(e)&&Uy(e)}),Kf.apply(this,arguments)}function K_(s){return lu(s)&&s.lu.length<10}function Nv(s,e){s.lu.push(e);const t=cu(s);t.No()&&t.Jo&&t.Yo(e.mutations)}function $y(s){return lu(s)&&!cu(s).xo()&&s.lu.length>0}function Uy(s){cu(s).start()}function q_(s){return ym.apply(this,arguments)}function ym(){return ym=(0,oe.Z)(function*(s){cu(s).tu()}),ym.apply(this,arguments)}function Xp(s){return _m.apply(this,arguments)}function _m(){return _m=(0,oe.Z)(function*(s){const e=cu(s);for(const t of s.lu)e.Yo(t.mutations)}),_m.apply(this,arguments)}function Y_(s,e,t){return qh.apply(this,arguments)}function qh(){return qh=(0,oe.Z)(function*(s,e,t){const a=s.lu.shift(),h=wh.from(a,e,t);yield By(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield $a(s)}),qh.apply(this,arguments)}function Jp(s,e){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,oe.Z)(function*(s,e){var t;e&&cu(s).Jo&&(yield(t=(0,oe.Z)(function*(a,h){if(ry(m=h.code)&&m!==Nt.ABORTED){const w=a.lu.shift();cu(a).Oo(),yield By(a,()=>a.remoteSyncer.rejectFailedWrite(w.batchId,h)),yield $a(a)}var m}),function(a,h){return t.apply(this,arguments)})(s,e)),$y(s)&&Uy(s)}),Sl.apply(this,arguments)}function da(s,e){return ha.apply(this,arguments)}function ha(){return ha=(0,oe.Z)(function*(s,e){const t=hn(s);t.asyncQueue.verifyOperationInProgress(),Kt("RemoteStore","RemoteStore received new credentials");const a=lu(t);t.du.add(3),yield Gu(t),a&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield ba(t)}),ha.apply(this,arguments)}function Yh(s,e){return eg.apply(this,arguments)}function eg(){return eg=(0,oe.Z)(function*(s,e){const t=hn(s);e?(t.du.delete(2),yield ba(t)):e||(t.du.add(2),yield Gu(t),t.mu.set("Unknown"))}),eg.apply(this,arguments)}function Wd(s){return s.yu||(s.yu=function(e,t,a){const h=hn(e);return h.nu(),new xy(t,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,a)}(s.datastore,s.asyncQueue,{Jr:ky.bind(null,s),Zr:Ly.bind(null,s),zo:W_.bind(null,s)}),s.wu.push(function(){var e=(0,oe.Z)(function*(t){t?(s.yu.Oo(),pm(s)?Zp(s):s.mu.set("Unknown")):(yield s.yu.stop(),Ny(s))});return function(t){return e.apply(this,arguments)}}())),s.yu}function cu(s){return s.pu||(s.pu=function(e,t,a){const h=hn(e);return h.nu(),new hm(t,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,a)}(s.datastore,s.asyncQueue,{Jr:q_.bind(null,s),Zr:Jp.bind(null,s),Xo:Xp.bind(null,s),Zo:Y_.bind(null,s)}),s.wu.push(function(){var e=(0,oe.Z)(function*(t){t?(s.pu.Oo(),yield $a(s)):(yield s.pu.stop(),s.lu.length>0&&(Kt("RemoteStore",`Stopping write stream with ${s.lu.length} pending writes`),s.lu=[]))});return function(t){return e.apply(this,arguments)}}())),s.pu}class tg{constructor(e,t,a,h,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=h,this.removalCallback=m,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,a,h,m){const w=Date.now()+a,O=new tg(e,t,w,h,m);return O.start(a),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tn(Nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wu(s,e){if(lr("AsyncQueue",`${e}: ${s}`),fi(s))return new tn(Nt.UNAVAILABLE,`${e}: ${s}`);throw s}class el{constructor(e){this.comparator=e?(t,a)=>e(t,a)||On.comparator(t.key,a.key):(t,a)=>On.comparator(t.key,a.key),this.keyedMap=lo(),this.sortedSet=new se(this.comparator)}static emptySet(e){return new el(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=a.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new el;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Zh{constructor(){this.Iu=new se(On.comparator)}track(e){const t=e.doc.key,a=this.Iu.get(t);a?0!==e.type&&3===a.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==a.type?this.Iu=this.Iu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Iu=this.Iu.remove(t):1===e.type&&2===a.type?this.Iu=this.Iu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):dn():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,a)=>{e.push(a)}),e}}class Vc{constructor(e,t,a,h,m,w,O,G,ee){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=m,this.fromCache=w,this.syncStateChanged=O,this.excludesMetadataChanges=G,this.hasCachedResults=ee}static fromInitialDocuments(e,t,a,h,m){const w=[];return t.forEach(O=>{w.push({type:0,doc:O})}),new Vc(e,t,el.emptySet(t),w,a,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&x(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==a[h].type||!t[h].doc.isEqual(a[h].doc))return!1;return!0}}class Qh{constructor(){this.Eu=void 0,this.listeners=[]}}class Vy{constructor(){this.queries=new Wn(e=>te(e),x),this.onlineState="Unknown",this.Au=new Set}}function Ku(s,e){return ng.apply(this,arguments)}function ng(){return ng=(0,oe.Z)(function*(s,e){const t=hn(s),a=e.query;let h=!1,m=t.queries.get(a);if(m||(h=!0,m=new Qh),h)try{m.Eu=yield t.onListen(a)}catch(w){const O=Wu(w,`Initialization of query '${Ee(e.query)}' failed`);return void e.onError(O)}t.queries.set(a,m),m.listeners.push(e),e.Ru(t.onlineState),m.Eu&&e.vu(m.Eu)&&Em(t)}),ng.apply(this,arguments)}function rg(s,e){return vm.apply(this,arguments)}function vm(){return vm=(0,oe.Z)(function*(s,e){const t=hn(s),a=e.query;let h=!1;const m=t.queries.get(a);if(m){const w=m.listeners.indexOf(e);w>=0&&(m.listeners.splice(w,1),h=0===m.listeners.length)}if(h)return t.queries.delete(a),t.onUnlisten(a)}),vm.apply(this,arguments)}function qf(s,e){const t=hn(s);let a=!1;for(const h of e){const w=t.queries.get(h.query);if(w){for(const O of w.listeners)O.vu(h)&&(a=!0);w.Eu=h}}a&&Em(t)}function jy(s,e,t){const a=hn(s),h=a.queries.get(e);if(h)for(const m of h.listeners)m.onError(t);a.queries.delete(e)}function Em(s){s.Au.forEach(e=>{e.next()})}class ig{constructor(e,t,a){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=a||{}}vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Vc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class Z_{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class Hy{constructor(e){this.serializer=e}Hi(e){return Jo(this.serializer,e)}Ji(e){return e.metadata.exists?Zg(this.serializer,e.document,!1):Es.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Js(e)}}class Q_{constructor(e,t,a){this.Ou=e,this.localStore=t,this.serializer=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Im(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const a=ti.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,a=new Hy(this.serializer);for(const h of e)if(h.metadata.queries){const m=a.Hi(h.metadata.name);for(const w of h.metadata.queries){const O=(t.get(w)||Or()).add(m);t.set(w,O)}}return t}complete(){var e=this;return(0,oe.Z)(function*(){const t=yield function j_(s,e,t,a){return lm.apply(this,arguments)}(e.localStore,new Hy(e.serializer),e.documents,e.Ou.id),a=e.Mu(e.documents);for(const h of e.queries)yield jh(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function Im(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class zy{constructor(e){this.key=e}}class Gy{constructor(e){this.key=e}}class sg{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Or(),this.mutatedKeys=Or(),this.Ku=Mn(e),this.Gu=new el(this.Ku)}get Qu(){return this.Lu}zu(e,t){const a=t?t.ju:new Zh,h=t?t.Gu:this.Gu;let m=t?t.mutatedKeys:this.mutatedKeys,w=h,O=!1;const G="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,ee="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((ye,it)=>{const xt=h.get(ye),en=It(this.query,it)?it:null,Dn=!!xt&&this.mutatedKeys.has(xt.key),Zn=!!en&&(en.hasLocalMutations||this.mutatedKeys.has(en.key)&&en.hasCommittedMutations);let br=!1;xt&&en?xt.data.isEqual(en.data)?Dn!==Zn&&(a.track({type:3,doc:en}),br=!0):this.Wu(xt,en)||(a.track({type:2,doc:en}),br=!0,(G&&this.Ku(en,G)>0||ee&&this.Ku(en,ee)<0)&&(O=!0)):!xt&&en?(a.track({type:0,doc:en}),br=!0):xt&&!en&&(a.track({type:1,doc:xt}),br=!0,(G||ee)&&(O=!0)),br&&(en?(w=w.add(en),m=Zn?m.add(ye):m.delete(ye)):(w=w.delete(ye),m=m.delete(ye)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ye="F"===this.query.limitType?w.last():w.first();w=w.delete(ye.key),m=m.delete(ye.key),a.track({type:1,doc:ye})}return{Gu:w,ju:a,Mi:O,mutatedKeys:m}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const h=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const m=e.ju.Tu();m.sort((ee,ye)=>function(it,xt){const en=Dn=>{switch(Dn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dn()}};return en(it)-en(xt)}(ee.type,ye.type)||this.Ku(ee.doc,ye.doc)),this.Hu(a);const w=t?this.Ju():[],O=0===this.Uu.size&&this.current?1:0,G=O!==this.qu;return this.qu=O,0!==m.length||G?{snapshot:new Vc(this.query,e.Gu,h,m,e.mutatedKeys,0===O,G,!1,!!a&&a.resumeToken.approximateByteSize()>0),Yu:w}:{Yu:w}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Zh,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Or(),this.Gu.forEach(a=>{this.Zu(a.key)&&(this.Uu=this.Uu.add(a.key))});const t=[];return e.forEach(a=>{this.Uu.has(a)||t.push(new Gy(a))}),this.Uu.forEach(a=>{e.has(a)||t.push(new zy(a))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Or();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Vc.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class wm{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class X_{constructor(e){this.key=e,this.ec=!1}}class bm{constructor(e,t,a,h,m,w){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=w,this.nc={},this.sc=new Wn(O=>te(O),x),this.ic=new Map,this.rc=new Set,this.oc=new se(On.comparator),this.uc=new Map,this.cc=new Bp,this.ac={},this.hc=new Map,this.lc=$u.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function J_(s,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,oe.Z)(function*(s,e){const t=nf(s);let a,h;const m=t.sc.get(e);if(m)a=m.targetId,t.sharedClientState.addLocalQueryTarget(a),h=m.view.tc();else{const w=yield Tl(t.localStore,M(e));t.isPrimaryClient&&qp(t.remoteStore,w);const O=t.sharedClientState.addLocalQueryTarget(w.targetId);a=w.targetId,h=yield gs(t,e,a,"current"===O,w.resumeToken)}return h}),Cm.apply(this,arguments)}function gs(s,e,t,a,h){return Wy.apply(this,arguments)}function Wy(){return Wy=(0,oe.Z)(function*(s,e,t,a,h){s.dc=(it,xt,en)=>{return(Dn=(0,oe.Z)(function*(Zn,br,Xi,Bs){let Ri=br.view.zu(Xi);Ri.Mi&&(Ri=yield Bf(Zn.localStore,br.query,!1).then(({documents:Us})=>br.view.zu(Us,Ri)));const Sa=Bs&&Bs.targetChanges.get(br.targetId),$s=br.view.applyChanges(Ri,Zn.isPrimaryClient,Sa);return tl(Zn,br.targetId,$s.Yu),$s.snapshot}),function(Zn,br,Xi,Bs){return Dn.apply(this,arguments)})(s,it,xt,en);var Dn};const m=yield Bf(s.localStore,e,!0),w=new sg(e,m.Wi),O=w.zu(m.documents),G=bh.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==s.onlineState,h),ee=w.applyChanges(O,s.isPrimaryClient,G);tl(s,t,ee.Yu);const ye=new wm(e,t,w);return s.sc.set(e,ye),s.ic.has(t)?s.ic.get(t).push(e):s.ic.set(t,[e]),ee.snapshot}),Wy.apply(this,arguments)}function Ky(s,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,oe.Z)(function*(s,e){const t=hn(s),a=t.sc.get(e),h=t.ic.get(a.targetId);if(h.length>1)return t.ic.set(a.targetId,h.filter(m=>!x(m,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Hu(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),Kh(t.remoteStore,a.targetId),ql(t,a.targetId)}).catch(vs))):(ql(t,a.targetId),yield Hu(t.localStore,a.targetId,!0))}),Dm.apply(this,arguments)}function og(){return og=(0,oe.Z)(function*(s,e,t){const a=fa(s);try{const h=yield function(m,w){const O=hn(m),G=Ti.now(),ee=w.reduce((xt,en)=>xt.add(en.key),Or());let ye,it;return O.persistence.runTransaction("Locally write mutations","readwrite",xt=>{let en=Bi(),Dn=Or();return O.Ki.getEntries(xt,ee).next(Zn=>{en=Zn,en.forEach((br,Xi)=>{Xi.isValidDocument()||(Dn=Dn.add(br))})}).next(()=>O.localDocuments.getOverlayedDocuments(xt,en)).next(Zn=>{ye=Zn;const br=[];for(const Xi of w){const Bs=Sf(Xi,ye.get(Xi.key).overlayedDocument);null!=Bs&&br.push(new pc(Xi.key,Bs,hh(Bs.value.mapValue),Ds.exists(!0)))}return O.mutationQueue.addMutationBatch(xt,G,br,w)}).next(Zn=>{it=Zn;const br=Zn.applyToLocalDocumentSet(ye,Dn);return O.documentOverlayCache.saveOverlays(xt,Zn.batchId,br)})}).then(()=>({batchId:it.batchId,changes:Jc(ye)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(m,w,O){let G=m.ac[m.currentUser.toKey()];G||(G=new se(hr)),G=G.insert(w,O),m.ac[m.currentUser.toKey()]=G}(a,h.batchId,t),yield nl(a,h.changes),yield $a(a.remoteStore)}catch(h){const m=Wu(h,"Failed to persist write");t.reject(m)}}),og.apply(this,arguments)}function Tm(s,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,oe.Z)(function*(s,e){const t=hn(s);try{const a=yield function Hd(s,e){const t=hn(s),a=e.snapshotVersion;let h=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const w=t.Ki.newChangeBuffer({trackRemovals:!0});h=t.Li;const O=[];e.targetChanges.forEach((ye,it)=>{const xt=h.get(it);if(!xt)return;O.push(t.Ds.removeMatchingKeys(m,ye.removedDocuments,it).next(()=>t.Ds.addMatchingKeys(m,ye.addedDocuments,it)));let en=xt.withSequenceNumber(m.currentSequenceNumber);var Dn,Zn,br;e.targetMismatches.has(it)?en=en.withResumeToken(tr.EMPTY_BYTE_STRING,yr.min()).withLastLimboFreeSnapshotVersion(yr.min()):ye.resumeToken.approximateByteSize()>0&&(en=en.withResumeToken(ye.resumeToken,a)),h=h.insert(it,en),Zn=en,br=ye,(0===(Dn=xt).resumeToken.approximateByteSize()||Zn.snapshotVersion.toMicroseconds()-Dn.snapshotVersion.toMicroseconds()>=3e8||br.addedDocuments.size+br.modifiedDocuments.size+br.removedDocuments.size>0)&&O.push(t.Ds.updateTargetData(m,en))});let G=Bi(),ee=Or();if(e.documentUpdates.forEach(ye=>{e.resolvedLimboDocuments.has(ye)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(m,ye))}),O.push(ju(m,w,e.documentUpdates).next(ye=>{G=ye.zi,ee=ye.ji})),!a.isEqual(yr.min())){const ye=t.Ds.getLastRemoteSnapshotVersion(m).next(it=>t.Ds.setTargetsMetadata(m,m.currentSequenceNumber,a));O.push(ye)}return Lt.waitFor(O).next(()=>w.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,G,ee)).next(()=>G)}).then(m=>(t.Li=h,m))}(t.localStore,e);e.targetChanges.forEach((h,m)=>{const w=t.uc.get(m);w&&(xn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?w.ec=!0:h.modifiedDocuments.size>0?xn(w.ec):h.removedDocuments.size>0&&(xn(w.ec),w.ec=!1))}),yield nl(t,a,e)}catch(a){yield vs(a)}}),Sm.apply(this,arguments)}function tv(s,e,t){const a=hn(s);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const h=[];a.sc.forEach((m,w)=>{const O=w.view.Ru(e);O.snapshot&&h.push(O.snapshot)}),function(m,w){const O=hn(m);O.onlineState=w;let G=!1;O.queries.forEach((ee,ye)=>{for(const it of ye.listeners)it.Ru(w)&&(G=!0)}),G&&Em(O)}(a.eventManager,e),h.length&&a.nc.zo(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function qy(s,e,t){return Yy.apply(this,arguments)}function Yy(){return Yy=(0,oe.Z)(function*(s,e,t){const a=hn(s);a.sharedClientState.updateQueryState(e,"rejected",t);const h=a.uc.get(e),m=h&&h.key;if(m){let w=new se(On.comparator);w=w.insert(m,Es.newNoDocument(m,yr.min()));const O=Or().add(m),G=new Mf(yr.min(),new Map,new St(hr),w,O);yield Tm(a,G),a.oc=a.oc.remove(m),a.uc.delete(e),qu(a)}else yield Hu(a.localStore,e,!1).then(()=>ql(a,e,t)).catch(vs)}),Yy.apply(this,arguments)}function ag(s,e){return Am.apply(this,arguments)}function Am(){return Am=(0,oe.Z)(function*(s,e){const t=hn(s),a=e.batch.batchId;try{const h=yield function Lf(s,e){const t=hn(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),m=t.Ki.newChangeBuffer({trackRemovals:!0});return function(w,O,G,ee){const ye=G.batch,it=ye.keys();let xt=Lt.resolve();return it.forEach(en=>{xt=xt.next(()=>ee.getEntry(O,en)).next(Dn=>{const Zn=G.docVersions.get(en);xn(null!==Zn),Dn.version.compareTo(Zn)<0&&(ye.applyToRemoteDocument(Dn,G),Dn.isValidDocument()&&(Dn.setReadTime(G.commitVersion),ee.addEntry(Dn)))})}),xt.next(()=>w.mutationQueue.removeMutationBatch(O,ye))}(t,a,e,m).next(()=>m.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(w){let O=Or();for(let G=0;G<w.mutationResults.length;++G)w.mutationResults[G].transformResults.length>0&&(O=O.add(w.batch.mutations[G].key));return O}(e))).next(()=>t.localDocuments.getDocuments(a,h))})}(t.localStore,e);ta(t,a,null),Kd(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield nl(t,h)}catch(h){yield vs(h)}}),Am.apply(this,arguments)}function kv(s,e,t){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,oe.Z)(function*(s,e,t){const a=hn(s);try{const h=yield function(m,w){const O=hn(m);return O.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let ee;return O.mutationQueue.lookupMutationBatch(G,w).next(ye=>(xn(null!==ye),ee=ye.keys(),O.mutationQueue.removeMutationBatch(G,ye))).next(()=>O.mutationQueue.performConsistencyCheck(G)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(G,ee,w)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,ee)).next(()=>O.localDocuments.getDocuments(G,ee))})}(a.localStore,e);ta(a,e,t),Kd(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield nl(a,h)}catch(h){yield vs(h)}}),Yf.apply(this,arguments)}function Kl(){return Kl=(0,oe.Z)(function*(s,e){const t=hn(s);lu(t.remoteStore)||Kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const w=hn(m);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>w.mutationQueue.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===a)return void e.resolve();const h=t.hc.get(a)||[];h.push(e),t.hc.set(a,h)}catch(a){const h=Wu(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Kl.apply(this,arguments)}function Kd(s,e){(s.hc.get(e)||[]).forEach(t=>{t.resolve()}),s.hc.delete(e)}function ta(s,e,t){const a=hn(s);let h=a.ac[a.currentUser.toKey()];if(h){const m=h.get(e);m&&(t?m.reject(t):m.resolve(),h=h.remove(e)),a.ac[a.currentUser.toKey()]=h}}function ql(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.ic.get(e))s.sc.delete(a),t&&s.nc.wc(a,t);s.ic.delete(e),s.isPrimaryClient&&s.cc.hs(e).forEach(a=>{s.cc.containsKey(a)||Zf(s,a)})}function Zf(s,e){s.rc.delete(e.path.canonicalString());const t=s.oc.get(e);null!==t&&(Kh(s.remoteStore,t),s.oc=s.oc.remove(e),s.uc.delete(t),qu(s))}function tl(s,e,t){for(const a of t)a instanceof zy?(s.cc.addReference(a.key,e),Mm(s,a)):a instanceof Gy?(Kt("SyncEngine","Document no longer in limbo: "+a.key),s.cc.removeReference(a.key,e),s.cc.containsKey(a.key)||Zf(s,a.key)):dn()}function Mm(s,e){const t=e.key,a=t.path.canonicalString();s.oc.get(t)||s.rc.has(a)||(Kt("SyncEngine","New document in limbo: "+t),s.rc.add(a),qu(s))}function qu(s){for(;s.rc.size>0&&s.oc.size<s.maxConcurrentLimboResolutions;){const e=s.rc.values().next().value;s.rc.delete(e);const t=new On(ti.fromString(e)),a=s.lc.next();s.uc.set(a,new X_(t)),s.oc=s.oc.insert(t,a),qp(s.remoteStore,new jl(M($l(t.path)),a,2,Fo.ct))}}function nl(s,e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,oe.Z)(function*(s,e,t){const a=hn(s),h=[],m=[],w=[];var O;a.sc.isEmpty()||(a.sc.forEach((O,G)=>{w.push(a.dc(G,e,t).then(ee=>{if((ee||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(G.targetId,null!=ee&&ee.fromCache?"not-current":"current"),ee){h.push(ee);const ye=Vh.Di(G.targetId,ee);m.push(ye)}}))}),yield Promise.all(w),a.nc.zo(h),yield(O=(0,oe.Z)(function*(G,ee){const ye=hn(G);try{yield ye.persistence.runTransaction("notifyLocalViewChanges","readwrite",it=>Lt.forEach(ee,xt=>Lt.forEach(xt.Vi,en=>ye.persistence.referenceDelegate.addReference(it,xt.targetId,en)).next(()=>Lt.forEach(xt.Si,en=>ye.persistence.referenceDelegate.removeReference(it,xt.targetId,en)))))}catch(it){if(!fi(it))throw it;Kt("LocalStore","Failed to update sequence numbers: "+it)}for(const it of ee){const xt=it.targetId;if(!it.fromCache){const en=ye.Li.get(xt),Zn=en.withLastLimboFreeSnapshotVersion(en.snapshotVersion);ye.Li=ye.Li.insert(xt,Zn)}}}),function(G,ee){return O.apply(this,arguments)})(a.localStore,m))}),Yu.apply(this,arguments)}function Xh(s,e){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,oe.Z)(function*(s,e){const t=hn(s);if(!t.currentUser.isEqual(e)){Kt("SyncEngine","User change. New user:",e.toKey());const a=yield Hp(t.localStore,e);t.currentUser=e,(h=t).hc.forEach(w=>{w.forEach(O=>{O.reject(new tn(Nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.hc.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield nl(t,a.Qi)}var h}),Zu.apply(this,arguments)}function Jh(s,e){const t=hn(s),a=t.uc.get(e);if(a&&a.ec)return Or().add(a.key);{let h=Or();const m=t.ic.get(e);if(!m)return h;for(const w of m){const O=t.sc.get(w);h=h.unionWith(O.view.Qu)}return h}}function ef(s,e){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,oe.Z)(function*(s,e){const t=hn(s),a=yield Bf(t.localStore,e.query,!0),h=e.view.Xu(a);return t.isPrimaryClient&&tl(t,e.targetId,h.Yu),h}),Qu.apply(this,arguments)}function tf(s,e){return lg.apply(this,arguments)}function lg(){return lg=(0,oe.Z)(function*(s,e){const t=hn(s);return Ty(t.localStore,e).then(a=>nl(t,a))}),lg.apply(this,arguments)}function Zy(s,e,t,a){return cg.apply(this,arguments)}function cg(){return cg=(0,oe.Z)(function*(s,e,t,a){const h=hn(s),m=yield function(w,O){const G=hn(w),ee=hn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ye=>ee.In(ye,O).next(it=>it?G.localDocuments.getDocuments(ye,it):Lt.resolve(null)))}(h.localStore,e);var O;null!==m?("pending"===t?yield $a(h.remoteStore):"acknowledged"===t||"rejected"===t?(ta(h,e,a||null),Kd(h,e),O=e,hn(hn(h.localStore).mutationQueue).En(O)):dn(),yield nl(h,m)):Kt("SyncEngine","Cannot apply mutation batch with id: "+e)}),cg.apply(this,arguments)}function Rm(){return Rm=(0,oe.Z)(function*(s,e){const t=hn(s);if(nf(t),fa(t),!0===e&&!0!==t.fc){const a=t.sharedClientState.getAllActiveQueryTargets(),h=yield xm(t,a.toArray());t.fc=!0,yield Yh(t.remoteStore,!0);for(const m of h)qp(t.remoteStore,m)}else if(!1===e&&!1!==t.fc){const a=[];let h=Promise.resolve();t.ic.forEach((m,w)=>{t.sharedClientState.isLocalQueryTarget(w)?a.push(w):h=h.then(()=>(ql(t,w),Hu(t.localStore,w,!0))),Kh(t.remoteStore,w)}),yield h,yield xm(t,a),function(m){const w=hn(m);w.uc.forEach((O,G)=>{Kh(w.remoteStore,G)}),w.cc.ls(),w.uc=new Map,w.oc=new se(On.comparator)}(t),t.fc=!1,yield Yh(t.remoteStore,!1)}}),Rm.apply(this,arguments)}function xm(s,e,t){return ug.apply(this,arguments)}function ug(){return ug=(0,oe.Z)(function*(s,e,t){const a=hn(s),h=[],m=[];for(const w of e){let O;const G=a.ic.get(w);if(G&&0!==G.length){O=yield Tl(a.localStore,M(G[0]));for(const ee of G){const ye=a.sc.get(ee),it=yield ef(a,ye);it.snapshot&&m.push(it.snapshot)}}else{const ee=yield zp(a.localStore,w);O=yield Tl(a.localStore,ee),yield gs(a,Pm(ee),w,!1,O.resumeToken)}h.push(O)}return a.nc.zo(m),h}),ug.apply(this,arguments)}function Pm(s){return hc(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function dg(s){const e=hn(s);return hn(hn(e.localStore).persistence).bi()}function Xu(s,e,t,a){return hg.apply(this,arguments)}function hg(){return hg=(0,oe.Z)(function*(s,e,t,a){const h=hn(s);if(h.fc)return void Kt("SyncEngine","Ignoring unexpected query state notification.");const m=h.ic.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const w=yield Ty(h.localStore,Bt(m[0])),O=Mf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,tr.EMPTY_BYTE_STRING);yield nl(h,w,O);break}case"rejected":yield Hu(h.localStore,e,!0),ql(h,e,a);break;default:dn()}}),hg.apply(this,arguments)}function fg(s,e,t){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,oe.Z)(function*(s,e,t){const a=nf(s);if(a.fc){for(const h of e){if(a.ic.has(h)){Kt("SyncEngine","Adding an already active target "+h);continue}const m=yield zp(a.localStore,h),w=yield Tl(a.localStore,m);yield gs(a,Pm(m),w.targetId,!1,w.resumeToken),qp(a.remoteStore,w)}for(const h of t)a.ic.has(h)&&(yield Hu(a.localStore,h,!1).then(()=>{Kh(a.remoteStore,h),ql(a,h)}).catch(vs))}}),Qf.apply(this,arguments)}function nf(s){const e=hn(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qy.bind(null,e),e.nc.zo=qf.bind(null,e.eventManager),e.nc.wc=jy.bind(null,e.eventManager),e}function fa(s){const e=hn(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ag.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kv.bind(null,e),e}class rf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,oe.Z)(function*(){t.serializer=Gd(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ja(this.persistence,new jp,e.initialUser,this.serializer)}createPersistence(e){return new Ff(Bh.Fs,this.serializer)}createSharedClientState(e){return new Ay}terminate(){var e=this;return(0,oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qd extends rf{constructor(e,t,a){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,oe.Z)(function*(){yield t().call(a,e),yield a.mc.initialize(a,e),yield fa(a.mc.syncEngine),yield $a(a.mc.remoteStore),yield a.persistence.hi(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Ja(this.persistence,new jp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new py(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const a=new uh(t,this.persistence);return new pd(e.asyncQueue,a)}createPersistence(e){const t=Uh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Ba.withCacheSize(this.cacheSizeBytes):Ba.DEFAULT;return new Up(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,Hf(),zf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ay}}class sf extends qd{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,oe.Z)(function*(){yield t().call(a,e);const h=a.mc.syncEngine;a.sharedClientState instanceof Vf&&(a.sharedClientState.syncEngine={$r:Zy.bind(null,h),Mr:Xu.bind(null,h),Fr:fg.bind(null,h),bi:dg.bind(null,h),Or:tf.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.hi(function(){var m=(0,oe.Z)(function*(w){yield function Qy(s,e){return Rm.apply(this,arguments)}(a.mc.syncEngine,w),a.gcScheduler&&(w&&!a.gcScheduler.started?a.gcScheduler.start():w||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(w&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():w||a.indexBackfillerScheduler.stop())});return function(w){return m.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Hf();if(!Vf.D(t))throw new tn(Nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Uh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vf(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class jc{initialize(e,t){var a=this;return(0,oe.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>tv(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=Xh.bind(null,a.syncEngine),yield Yh(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Vy}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),a=new dm(e.databaseInfo);return new H_(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,h=e.asyncQueue,m=O=>tv(this.syncEngine,O,0),w=Ry.D()?new Ry:new My,new Py(t,a,h,m,w);var t,a,h,m,w}createSyncEngine(e,t){return function(a,h,m,w,O,G,ee){const ye=new bm(a,h,m,w,O,G);return ee&&(ye.fc=!0),ye}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,oe.Z)(function*(t){const a=hn(t);Kt("RemoteStore","RemoteStore shutting down."),a.du.add(5),yield Gu(a),a._u.shutdown(),a.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rv(s,e=10240){let t=0;return{read:()=>(0,oe.Z)(function*(){if(t<s.byteLength){const a={value:s.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,oe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Yd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Hc{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Di,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(a=>{a&&a.ku()?this.metadata.resolve(a.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.Nu)}`))},a=>this.metadata.reject(a))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,oe.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,oe.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const a=e.Tc.decode(t),h=Number(a);isNaN(h)&&e.Rc(`length string (${a}) is not valid number`);const m=yield e.vc(h);return new Z_(JSON.parse(m),t.length+h)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,oe.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}vc(e){var t=this;return(0,oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const a=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class gg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new tn(Nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,oe.Z)(function*(m,w){const O=hn(m),G=Pd(O.serializer)+"/documents",ee={documents:w.map(en=>Th(O.serializer,en))},ye=yield O.fo("BatchGetDocuments",G,ee,w.length),it=new Map;ye.forEach(en=>{const Dn=function Qg(s,e){return"found"in e?function(t,a){xn(!!a.found);const h=Jo(t,a.found.name),m=Js(a.found.updateTime),w=a.found.createTime?Js(a.found.createTime):yr.min(),O=new li({mapValue:{fields:a.found.fields}});return Es.newFoundDocument(h,m,w,O)}(s,e):"missing"in e?function(t,a){xn(!!a.missing),xn(!!a.readTime);const h=Jo(t,a.missing),m=Js(a.readTime);return Es.newNoDocument(h,m)}(s,e):dn()}(O.serializer,en);it.set(Dn.key.toString(),Dn)});const xt=[];return w.forEach(en=>{const Dn=it.get(en.toString());xn(!!Dn),xt.push(Dn)}),xt}),function(m,w){return h.apply(this,arguments)})(t.datastore,e);var h;return a.forEach(h=>t.recordVersion(h)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ih(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,h)=>{const m=On.fromPath(h);e.mutations.push(new Vg(m,e.precondition(m)))}),yield(a=(0,oe.Z)(function*(h,m){const w=hn(h),O=Pd(w.serializer)+"/documents",G={writes:m.map(ee=>bl(w.serializer,ee))};yield w.co("Commit",O,G)}),function(h,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dn();t=yr.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new tn(Nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yr.min())?Ds.exists(!1):Ds.updateTime(t):Ds.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yr.min()))throw new tn(Nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ds.updateTime(t)}return Ds.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Xy{constructor(e,t,a,h,m){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=h,this.deferred=m,this.Vc=a.maxAttempts,this.Co=new Gf(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,oe.Z)(function*(){const t=new gg(e.datastore),a=e.Dc(t);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Cc(m)}))}).catch(h=>{e.Cc(h)})}))}Dc(e){try{const t=this.updateFunction(e);return!ka(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ry(t)}return!1}}class Jy{constructor(e,t,a,h){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=h,this.user=Ne.UNAUTHENTICATED,this.clientId=Yo.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var w=(0,oe.Z)(function*(O){Kt("FirestoreClient","Received user=",O.uid),yield m.authCredentialListener(O),m.user=O});return function(O){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(a,w=>(Kt("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tn(Nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const h=Wu(a,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Xf(s,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,oe.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),Kt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield s.getConfiguration();yield e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener(function(){var h=(0,oe.Z)(function*(m){a.isEqual(m)||(yield Hp(e.localStore,m),a=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}),Jf.apply(this,arguments)}function af(s,e){return Om.apply(this,arguments)}function Om(){return Om=(0,oe.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const t=yield lf(s);Kt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(t,a),s.setCredentialChangeListener(h=>da(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,m)=>da(e.remoteStore,m)),s._onlineComponents=e}),Om.apply(this,arguments)}function Nm(s){return"FirebaseError"===s.name?s.code===Nt.FAILED_PRECONDITION||s.code===Nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code}function lf(s){return mg.apply(this,arguments)}function mg(){return mg=(0,oe.Z)(function*(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Kt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Xf(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Nm(t))throw t;vr("Error using user provided cache. Falling back to memory cache: "+t),yield Xf(s,new rf)}}else Kt("FirestoreClient","Using default OfflineComponentProvider"),yield Xf(s,new rf);return s._offlineComponents}),mg.apply(this,arguments)}function cf(s){return yg.apply(this,arguments)}function yg(){return yg=(0,oe.Z)(function*(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Kt("FirestoreClient","Using user provided OnlineComponentProvider"),yield af(s,s._uninitializedComponentsProvider._online)):(Kt("FirestoreClient","Using default OnlineComponentProvider"),yield af(s,new jc))),s._onlineComponents}),yg.apply(this,arguments)}function _g(s){return lf(s).then(e=>e.persistence)}function Ju(s){return lf(s).then(e=>e.localStore)}function uf(s){return cf(s).then(e=>e.remoteStore)}function Zd(s){return cf(s).then(e=>e.syncEngine)}function uu(s){return Yl.apply(this,arguments)}function Yl(){return Yl=(0,oe.Z)(function*(s){const e=yield cf(s),t=e.eventManager;return t.onListen=J_.bind(null,e.syncEngine),t.onUnlisten=Ky.bind(null,e.syncEngine),t}),Yl.apply(this,arguments)}function Qd(s,e,t={}){const a=new Di;return s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(h,m,w,O,G){const ee=new Yd({next:it=>{m.enqueueAndForget(()=>rg(h,ye));const xt=it.docs.has(w);!xt&&it.fromCache?G.reject(new tn(Nt.UNAVAILABLE,"Failed to get document because the client is offline.")):xt&&it.fromCache&&O&&"server"===O.source?G.reject(new tn(Nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(it)},error:it=>G.reject(it)}),ye=new ig($l(w.path),ee,{includeMetadataChanges:!0,xu:!0});return Ku(h,ye)}(yield uu(s),s.asyncQueue,e,t,a)})),a.promise}function Fm(s,e,t={}){const a=new Di;return s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(h,m,w,O,G){const ee=new Yd({next:it=>{m.enqueueAndForget(()=>rg(h,ye)),it.fromCache&&"server"===O.source?G.reject(new tn(Nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(it)},error:it=>G.reject(it)}),ye=new ig(w,ee,{includeMetadataChanges:!0,xu:!0});return Ku(h,ye)}(yield uu(s),s.asyncQueue,e,t,a)})),a.promise}const Al=new Map;function Va(s,e,t){if(!t)throw new tn(Nt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function ed(s,e,t,a){if(!0===e&&!0===a)throw new tn(Nt.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function r_(s){if(!On.isDocumentKey(s))throw new tn(Nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function df(s){if(On.isDocumentKey(s))throw new tn(Nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Eg(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(t=s).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof s?"a function":dn()}function wi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new tn(Nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Eg(s);throw new tn(Nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function rp(s,e){if(e<=0)throw new tn(Nt.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class i_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new tn(Nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tn(Nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ed("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,t,a,h){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new tn(Nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tn(Nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ka;switch(t.type){case"firstParty":return new oc(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new tn(Nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Al.get(e);t&&(Kt("ComponentProvider","Removing Datastore"),Al.delete(e),t.terminate())}(this),Promise.resolve()}}class ri{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ri(this.firestore,e,this._key)}}class na{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new na(this.firestore,e,this._query)}}class to extends na{constructor(e,t,a){super(e,t,$l(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ri(this.firestore,null,new On(e))}withConverter(e){return new to(this.firestore,e,this._path)}}function Lm(s,e,...t){if(s=(0,q.m9)(s),Va("collection","path",e),s instanceof td){const a=ti.fromString(e,...t);return df(a),new to(s,null,a)}{if(!(s instanceof ri||s instanceof to))throw new tn(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ti.fromString(e,...t));return df(a),new to(s.firestore,null,a)}}function Xd(s,e,...t){if(s=(0,q.m9)(s),1===arguments.length&&(e=Yo.A()),Va("doc","path",e),s instanceof td){const a=ti.fromString(e,...t);return r_(a),new ri(s,null,new On(a))}{if(!(s instanceof ri||s instanceof to))throw new tn(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ti.fromString(e,...t));return r_(a),new ri(s.firestore,s instanceof to?s.converter:null,new On(a))}}function Bm(s,e){return s=(0,q.m9)(s),e=(0,q.m9)(e),(s instanceof ri||s instanceof to)&&(e instanceof ri||e instanceof to)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Ig(s,e){return s=(0,q.m9)(s),e=(0,q.m9)(e),s instanceof na&&e instanceof na&&s.firestore===e.firestore&&x(s._query,e._query)&&s.converter===e.converter}class hf{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Gf(this,"async_queue_retry"),this.qc=()=>{const t=zf();t&&Kt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=zf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=zf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Di;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,oe.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!fi(t))throw t;Kt("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(a=>{throw this.Mc=a,this.Fc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(m){let w=m.message||"";return m.stack&&(w=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),w}(a)),a}).then(a=>(this.Fc=!1,a))));return this.Nc=t,t}enqueueAfterDelay(e,t,a){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const h=tg.createAndSchedule(this,e,t,a,m=>this.Qc(m));return this.$c.push(h),h}Uc(){this.Mc&&dn()}verifyOperationInProgress(){}zc(){var e=this;return(0,oe.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function o_(s){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class Fv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rs extends td{constructor(e,t,a,h){super(e,t,a,h),this.type="firestore",this._queue=new hf,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Jd(this),this._firestoreClient.terminate()}}function Ts(s){return s._firestoreClient||Jd(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Jd(s){var e,t,a;const h=s._freezeSettings(),m=(O=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Rc(s._databaseId,O,s._persistenceKey,(ee=h).host,ee.ssl,ee.experimentalForceLongPolling,ee.experimentalAutoDetectLongPolling,ee.useFetchStreams));var O,ee;s._firestoreClient=new Jy(s._authCredentials,s._appCheckCredentials,s._queue,m),null!==(t=h.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(a=h.cache)&&void 0!==a&&a._onlineComponentProvider&&(s._firestoreClient._uninitializedComponentsProvider={_offlineKind:h.cache.kind,_offline:h.cache._offlineComponentProvider,_online:h.cache._onlineComponentProvider})}function $m(s,e,t){const a=new Di;return s.asyncQueue.enqueue((0,oe.Z)(function*(){try{yield Xf(s,t),yield af(s,e),a.resolve()}catch(h){const m=h;if(!Nm(m))throw m;vr("Error enabling indexeddb cache. Falling back to memory cache: "+m),a.reject(m)}})).then(()=>a.promise)}function c_(s){if(s._initialized||s._terminated)throw new tn(Nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Da(tr.fromBase64String(e))}catch(t){throw new tn(Nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Da(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new tn(Nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eh{constructor(e){this._methodName=e}}class wg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tn(Nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tn(Nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hr(this._lat,e._lat)||hr(this._long,e._long)}}const u_=/^__.*__$/;class d_{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ad(e,this.data,t,this.fieldTransforms)}}class th{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function h_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dn()}}class nd{constructor(e,t,a,h,m,w){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=h,void 0===m&&this.Jc(),this.fieldTransforms=m||[],this.fieldMask=w||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new nd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.Zc({path:a,ta:!1});return h.ea(e),h}na(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.Zc({path:a,ta:!1});return h.Jc(),h}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Ag(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(h_(this.Yc)&&u_.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class bg{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Gd(e)}ua(e,t,a,h=!1){return new nd({Yc:e,methodName:t,oa:a,path:Wi.emptyPath(),ta:!1,ra:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ec(s){const e=s._freezeSettings(),t=Gd(s._databaseId);return new bg(s._databaseId,!!e.ignoreUndefinedProperties,t)}function nh(s,e,t,a,h,m={}){const w=s.ua(m.merge||m.mergeFields?2:0,e,t,h);jm("Data must be an object, but it was:",w,a);const O=uv(a,w);let G,ee;if(m.merge)G=new ln(w.fieldMask),ee=w.fieldTransforms;else if(m.mergeFields){const ye=[];for(const it of m.mergeFields){const xt=lp(e,it,t);if(!w.contains(xt))throw new tn(Nt.INVALID_ARGUMENT,`Field '${xt}' is specified in your field mask but missing from your input data.`);Hm(ye,xt)||ye.push(xt)}G=new ln(ye),ee=w.fieldTransforms.filter(it=>G.covers(it.field))}else G=null,ee=w.fieldTransforms;return new d_(new li(O),G,ee)}class rh extends eh{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rh}}function Um(s,e,t){return new nd({Yc:3,oa:e.settings.oa,methodName:s._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vm extends eh{_toFieldTransform(e){return new Dd(e.path,new vh)}isEqual(e){return e instanceof Vm}}class Cg extends eh{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Um(this,e,!0),a=this.ca.map(m=>rd(m,t)),h=new Du(a);return new Dd(e.path,h)}isEqual(e){return this===e}}class cv extends eh{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Um(this,e,!0),a=this.ca.map(m=>rd(m,t)),h=new Tu(a);return new Dd(e.path,h)}isEqual(e){return this===e}}class f_ extends eh{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Cd(e.serializer,Df(e.serializer,this.aa));return new Dd(e.path,t)}isEqual(e){return this===e}}function Dg(s,e,t,a){const h=s.ua(1,e,t);jm("Data must be an object, but it was:",h,a);const m=[],w=li.empty();V(a,(G,ee)=>{const ye=Sg(e,G,t);ee=(0,q.m9)(ee);const it=h.na(ye);if(ee instanceof rh)m.push(ye);else{const xt=rd(ee,it);null!=xt&&(m.push(ye),w.set(ye,xt))}});const O=new ln(m);return new th(w,O,h.fieldTransforms)}function ap(s,e,t,a,h,m){const w=s.ua(1,e,t),O=[lp(e,a,t)],G=[h];if(m.length%2!=0)throw new tn(Nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let xt=0;xt<m.length;xt+=2)O.push(lp(e,m[xt])),G.push(m[xt+1]);const ee=[],ye=li.empty();for(let xt=O.length-1;xt>=0;--xt)if(!Hm(ee,O[xt])){const en=O[xt];let Dn=G[xt];Dn=(0,q.m9)(Dn);const Zn=w.na(en);if(Dn instanceof rh)ee.push(en);else{const br=rd(Dn,Zn);null!=br&&(ee.push(en),ye.set(en,br))}}const it=new ln(ee);return new th(ye,it,w.fieldTransforms)}function Tg(s,e,t,a=!1){return rd(t,s.ua(a?4:3,e))}function rd(s,e){if(p_(s=(0,q.m9)(s)))return jm("Unsupported field value:",e,s),uv(s,e);if(s instanceof eh)return function(t,a){if(!h_(a.Yc))throw a.ia(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ia(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,a){const h=[];let m=0;for(const w of t){let O=rd(w,a.sa(m));null==O&&(O={nullValue:"NULL_VALUE"}),h.push(O),m++}return{arrayValue:{values:h}}}(s,e)}return function(t,a){if(null===(t=(0,q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Df(a.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=Ti.fromDate(t);return{timestampValue:Dh(a.serializer,h)}}if(t instanceof Ti){const h=new Ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,h)}}if(t instanceof wg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Da)return{bytesValue:x_(a.serializer,t._byteString)};if(t instanceof ri){const h=a.databaseId,m=t.firestore._databaseId;if(!m.isEqual(h))throw a.ia(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Lc(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a.ia(`Unsupported field value: ${Eg(t)}`)}(s,e)}function uv(s,e){const t={};return W(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):V(s,(a,h)=>{const m=rd(h,e.Xc(a));null!=m&&(t[a]=m)}),{mapValue:{fields:t}}}function p_(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Ti||s instanceof wg||s instanceof Da||s instanceof ri||s instanceof eh)}function jm(s,e,t){if(!p_(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Eg(t);throw e.ia("an object"===a?s+" a custom object":s+" "+a)}var a}function lp(s,e,t){if((e=(0,q.m9)(e))instanceof Jl)return e._internalPath;if("string"==typeof e)return Sg(s,e);throw Ag("Field path arguments must be of type string or ",s,!1,void 0,t)}const dv=new RegExp("[~\\*/\\[\\]]");function Sg(s,e,t){if(e.search(dv)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Jl(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Ag(s,e,t,a,h){const m=a&&!a.isEmpty(),w=void 0!==h;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let G="";return(m||w)&&(G+=" (found",m&&(G+=` in field ${a}`),w&&(G+=` in document ${h}`),G+=")"),new tn(Nt.INVALID_ARGUMENT,O+s+G)}function Hm(s,e){return s.some(t=>t.isEqual(e))}class cp{constructor(e,t,a,h,m){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(up("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hv extends cp{data(){return super.data()}}function up(s,e){return"string"==typeof e?Sg(s,e):e instanceof Jl?e._internalPath:e._delegate._internalPath}function g_(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new tn(Nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dp{}class hp extends dp{}function id(s,e,...t){let a=[];e instanceof dp&&a.push(e),a=a.concat(t),function(h){const m=h.filter(O=>O instanceof sd).length,w=h.filter(O=>O instanceof fp).length;if(m>1||m>0&&w>0)throw new tn(Nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const h of a)s=h._apply(s);return s}class fp extends hp{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new fp(e,t,a)}_apply(e){const t=this._parse(e);return ad(e._query,t),new na(e.firestore,e.converter,_(e._query,t))}_parse(e){const t=ec(e.firestore);return function(h,m,w,O,G,ee,ye){let it;if(G.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new tn(Nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){nc(ye,ee);const xt=[];for(const en of ye)xt.push(pp(O,h,en));it={arrayValue:{values:xt}}}else it=pp(O,h,ye)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||nc(ye,ee),it=Tg(w,"where",ye,"in"===ee||"not-in"===ee);return yi.create(G,ee,it)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class sd extends dp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sd(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===t.length?t[0]:Li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,h){let m=a;const w=h.getFlattenedFilters();for(const O of w)ad(m,O),m=_(m,O)}(e._query,t),new na(e.firestore,e.converter,_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ff extends hp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ff(e,t)}_apply(e){const t=function(a,h,m){if(null!==a.startAt)throw new tn(Nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new tn(Nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new Bl(h,m);return function(O,G){if(null===bu(O)){const ee=vl(O);null!==ee&&zm(0,ee,G.field)}}(a,w),w}(e._query,this._field,this._direction);return new na(e.firestore,e.converter,function(a,h){const m=a.explicitOrderBy.concat([h]);return new Ks(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class ih extends hp{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new ih(e,t,a)}_apply(e){return new na(e.firestore,e.converter,I(e._query,this._limit,this._limitType))}}class od extends hp{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new od(e,t,a)}_apply(e){const t=E_(e,this.type,this._docOrFields,this._inclusive);return new na(e.firestore,e.converter,(h=t,new Ks((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}class oh extends hp{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new oh(e,t,a)}_apply(e){const t=E_(e,this.type,this._docOrFields,this._inclusive);return new na(e.firestore,e.converter,(h=t,new Ks((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function E_(s,e,t,a){if(t[0]=(0,q.m9)(t[0]),t[0]instanceof cp)return function(h,m,w,O,G){if(!O)throw new tn(Nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const ee=[];for(const ye of El(h))if(ye.field.isKeyField())ee.push(ji(m,O.key));else{const it=O.data.field(ye.field);if(Cs(it))throw new tn(Nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ye.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===it){const xt=ye.field.canonicalString();throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${xt}' (used as the orderBy) does not exist.`)}ee.push(it)}return new yl(ee,G)}(s._query,s.firestore._databaseId,e,t[0]._document,a);{const h=ec(s.firestore);return function(m,w,O,G,ee,ye){const it=m.explicitOrderBy;if(ee.length>it.length)throw new tn(Nt.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const xt=[];for(let en=0;en<ee.length;en++){const Dn=ee[en];if(it[en].field.isKeyField()){if("string"!=typeof Dn)throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof Dn}`);if(!fc(m)&&-1!==Dn.indexOf("/"))throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${Dn}' contains a slash.`);const Zn=m.path.child(ti.fromString(Dn));if(!On.isDocumentKey(Zn))throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Zn}' is not because it contains an odd number of segments.`);const br=new On(Zn);xt.push(ji(w,br))}else{const Zn=Tg(O,G,Dn);xt.push(Zn)}}return new yl(xt,ye)}(s._query,s.firestore._databaseId,h,e,t,a)}}function pp(s,e,t){if("string"==typeof(t=(0,q.m9)(t))){if(""===t)throw new tn(Nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fc(e)&&-1!==t.indexOf("/"))throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(ti.fromString(t));if(!On.isDocumentKey(a))throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return ji(s,new On(a))}if(t instanceof ri)return ji(s,t._key);throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eg(t)}.`)}function nc(s,e){if(!Array.isArray(s)||0===s.length)throw new tn(Nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ad(s,e){if(e.isInequality()){const a=vl(s),h=e.field;if(null!==a&&!a.isEqual(h))throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${h.toString()}'`);const m=bu(s);null!==m&&zm(0,h,m)}const t=function(a,h){for(const m of a)for(const w of m.getFlattenedFilters())if(h.indexOf(w.op)>=0)return w.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new tn(Nt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function zm(s,e,t){if(!t.isEqual(e))throw new tn(Nt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rr{convertValue(e,t="none"){switch(uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dn()}}convertObject(e,t){const a={};return V(e.fields,(h,m)=>{a[h]=this.convertValue(m,t)}),a}convertGeoPoint(e){return new wg(Ii(e.latitude),Ii(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=$o(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const t=Ki(e);return new Ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=ti.fromString(e);xn(kd(a));const h=new cc(a.get(1),a.get(3)),m=new On(a.popFirst(5));return h.isEqual(t)||lr(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function Mg(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class I_ extends Rr{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,t)}}class cs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ld extends cp{constructor(e,t,a,h,m,w){super(e,t,a,h,w),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(up("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class lh extends ld{data(e={}){return super.data(e)}}class du{constructor(e,t,a,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new cs(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new lh(this._firestore,this._userDataWriter,a.key,a,new cs(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tn(Nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(w=>({type:"added",doc:new lh(a._firestore,a._userDataWriter,w.doc.key,w.doc,new cs(a._snapshot.mutatedKeys.has(w.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(w=>h||3!==w.type).map(w=>{const O=new lh(a._firestore,a._userDataWriter,w.doc.key,w.doc,new cs(a._snapshot.mutatedKeys.has(w.doc.key),a._snapshot.fromCache),a.query.converter);let G=-1,ee=-1;return 0!==w.type&&(G=m.indexOf(w.doc.key),m=m.delete(w.doc.key)),1!==w.type&&(m=m.add(w.doc),ee=m.indexOf(w.doc.key)),{type:yv(w.type),doc:O,oldIndex:G,newIndex:ee}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yv(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dn()}}function Km(s,e){return s instanceof ld&&e instanceof ld?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof du&&e instanceof du&&s._firestore===e._firestore&&Ig(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}class rc extends Rr{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,t)}}function b_(s,e,t){s=wi(s,ri);const a=wi(s.firestore,Rs),h=Mg(s.converter,e,t);return cd(a,[nh(ec(a),"setDoc",s._key,h,null!==s.converter,t).toMutation(s._key,Ds.none())])}function C_(s,e,t,...a){s=wi(s,ri);const h=wi(s.firestore,Rs),m=ec(h);let w;return w="string"==typeof(e=(0,q.m9)(e))||e instanceof Jl?ap(m,"updateDoc",s._key,e,t,a):Dg(m,"updateDoc",s._key,e),cd(h,[w.toMutation(s._key,Ds.exists(!0))])}function xg(s,...e){var t,a,h;s=(0,q.m9)(s);let m={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||o_(e[w])||(m=e[w],w++);const O={includeMetadataChanges:m.includeMetadataChanges};if(o_(e[w])){const it=e[w];e[w]=null===(t=it.next)||void 0===t?void 0:t.bind(it),e[w+1]=null===(a=it.error)||void 0===a?void 0:a.bind(it),e[w+2]=null===(h=it.complete)||void 0===h?void 0:h.bind(it)}let G,ee,ye;if(s instanceof ri)ee=wi(s.firestore,Rs),ye=$l(s._key.path),G={next:it=>{e[w]&&e[w](Zm(ee,s,it))},error:e[w+1],complete:e[w+2]};else{const it=wi(s,na);ee=wi(it.firestore,Rs),ye=it._query;const xt=new rc(ee);G={next:en=>{e[w]&&e[w](new du(ee,xt,it,en))},error:e[w+1],complete:e[w+2]},g_(s._query)}return function(it,xt,en,Dn){const Zn=new Yd(Dn),br=new ig(xt,Zn,en);return it.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return Ku(yield uu(it),br)})),()=>{Zn.yc(),it.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return rg(yield uu(it),br)}))}}(Ts(ee),ye,O,G)}function cd(s,e){return function(t,a){const h=new Di;return t.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function ev(s,e,t){return og.apply(this,arguments)}(yield Zd(t),a,h)})),h.promise}(Ts(s),e)}function Zm(s,e,t){const a=t.docs.get(e._key),h=new rc(s);return new ld(s,h,e._key,a,new cs(t.hasPendingWrites,t.fromCache),e.converter)}const B={maxAttempts:5};class Z{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ec(e)}set(e,t,a){this._verifyNotCommitted();const h=ie(e,this._firestore),m=Mg(h.converter,t,a),w=nh(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,a);return this._mutations.push(w.toMutation(h._key,Ds.none())),this}update(e,t,a,...h){this._verifyNotCommitted();const m=ie(e,this._firestore);let w;return w="string"==typeof(t=(0,q.m9)(t))||t instanceof Jl?ap(this._dataReader,"WriteBatch.update",m._key,t,a,h):Dg(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(w.toMutation(m._key,Ds.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ie(e,this._firestore);return this._mutations=this._mutations.concat(new Ih(t._key,Ds.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tn(Nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ie(s,e){if((s=(0,q.m9)(s)).firestore!==e)throw new tn(Nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class Qe extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ec(e)}get(e){const t=ie(e,this._firestore),a=new I_(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return dn();const m=h[0];if(m.isFoundDocument())return new cp(this._firestore,a,m.key,m,t.converter);if(m.isNoDocument())return new cp(this._firestore,a,t._key,null,t.converter);throw dn()})}set(e,t,a){const h=ie(e,this._firestore),m=Mg(h.converter,t,a),w=nh(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,a);return this._transaction.set(h._key,w),this}update(e,t,a,...h){const m=ie(e,this._firestore);let w;return w="string"==typeof(t=(0,q.m9)(t))||t instanceof Jl?ap(this._dataReader,"Transaction.update",m._key,t,a,h):Dg(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,w),this}delete(e){const t=ie(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ie(e,this._firestore),a=new rc(this._firestore);return super.get(e).then(h=>new ld(this._firestore,a,t._key,h._document,new cs(!1,!1),t.converter))}}!function(s,e=!0){Ft=lt.SDK_VERSION,(0,lt._registerComponent)(new ze.wA("firestore",(t,{instanceIdentifier:a,options:h})=>{const m=t.getProvider("app").getImmediate(),w=new Rs(new qa(t.getProvider("auth-internal")),new bc(t.getProvider("app-check-internal")),function(O,G){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new tn(Nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(O.options.projectId,G)}(m,a),m);return h=Object.assign({useFetchStreams:e},h),w._setSettings(h),w},"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)(ce,"3.10.1",s),(0,lt.registerVersion)(ce,"3.10.1","esm2017")}();function pa(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new tn("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function ra(){if(typeof Uint8Array>"u")throw new tn("unimplemented","Uint8Arrays are not available in this environment.")}function Vo(){if(!function ni(){return typeof atob<"u"}())throw new tn("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ml{constructor(e){this._delegate=e}static fromBase64String(e){return Vo(),new Ml(Da.fromBase64String(e))}static fromUint8Array(e){return ra(),new Ml(Da.fromUint8Array(e))}toBase64(){return Vo(),this._delegate.toBase64()}toUint8Array(){return ra(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Rl(s){return function _p(s,e){if("object"!=typeof s||null===s)return!1;const t=s;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(s,["next","error","complete"])}class hu{enableIndexedDbPersistence(e,t){return function Zl(s,e){c_(s=wi(s,Rs));const t=Ts(s);if(t._uninitializedComponentsProvider)throw new tn(Nt.FAILED_PRECONDITION,"SDK cache is already specified.");vr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const a=s._freezeSettings(),h=new jc;return $m(t,h,new qd(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function a_(s){c_(s=wi(s,Rs));const e=Ts(s);if(e._uninitializedComponentsProvider)throw new tn(Nt.FAILED_PRECONDITION,"SDK cache is already specified.");vr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings(),a=new jc;return $m(e,a,new sf(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ql(s){if(s._initialized&&!s._terminated)throw new tn(Nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Di;return s._queue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{yield(t=(0,oe.Z)(function*(a){if(!As.D())return Promise.resolve();const h=a+"main";yield As.delete(h)}),function(a){return t.apply(this,arguments)})(Uh(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gf{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof cc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function s_(s,e,t,a={}){var h;const m=(s=wi(s,td))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&vr("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),a.mockUserToken){let w,O;if("string"==typeof a.mockUserToken)w=a.mockUserToken,O=Ne.MOCK_USER;else{w=(0,q.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const G=a.mockUserToken.sub||a.mockUserToken.user_id;if(!G)throw new tn(Nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new Ne(G)}s._authCredentials=new Nl(new Wa(w,O))}}(this._delegate,e,t,a)}enableNetwork(){return function _c(s){return function vg(s){return s.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield _g(s),t=yield uf(s);return e.setNetworkEnabled(!0),function(a){const h=hn(a);return h.du.delete(0),ba(h)}(t)}))}(Ts(s=wi(s,Rs)))}(this._delegate)}disableNetwork(){return function l_(s){return function tp(s){return s.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield _g(s),t=yield uf(s);return e.setNetworkEnabled(!1),(a=(0,oe.Z)(function*(h){const m=hn(h);m.du.add(0),yield Gu(m),m.mu.set("Offline")}),function(h){return a.apply(this,arguments)})(t);var a}))}(Ts(s=wi(s,Rs)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,ed("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Xl(s){return function(e){const t=new Di;return e.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function nv(s,e){return Kl.apply(this,arguments)}(yield Zd(e),t)})),t.promise}(Ts(s=wi(s,Rs)))}(this._delegate)}onSnapshotsInSync(e){return function Pg(s,e){return function np(s,e){const t=new Yd(e);return s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return a=yield uu(s),h=t,hn(a).Au.add(h),void h.next();var a,h})),()=>{t.yc(),s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return a=yield uu(s),h=t,void hn(a).Au.delete(h);var a,h}))}}(Ts(s=wi(s,Rs)),o_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new tn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ic(this,Lm(this._delegate,e))}catch(t){throw Ai(t,"collection()","Firestore.collection()")}}doc(e){try{return new zr(this,Xd(this._delegate,e))}catch(t){throw Ai(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ta(this,function ip(s,e){if(s=wi(s,td),Va("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new tn(Nt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new na(s,null,(t=e,new Ks(ti.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ai(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ft(s,e,t){s=wi(s,Rs);const a=Object.assign(Object.assign({},B),t);return function(h){if(h.maxAttempts<1)throw new tn(Nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(h,m,w){const O=new Di;return h.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){const G=yield function ep(s){return cf(s).then(e=>e.datastore)}(h);new Xy(h.asyncQueue,G,w,m,O).run()})),O.promise}(Ts(s),h=>e(new Qe(s,h)),a)}(this._delegate,t=>e(new _r(this,t)))}batch(){return Ts(this._delegate),new Mr(new Z(this._delegate,e=>cd(this._delegate,e)))}loadBundle(e){return function ov(s,e){const t=Ts(s=wi(s,Rs)),a=new Fv;return function Ua(s,e,t,a){const h=function(m,w){let O;return O="string"==typeof m?(new TextEncoder).encode(m):m,G=function(G,ee){if(G instanceof Uint8Array)return rv(G,void 0);if(G instanceof ArrayBuffer)return rv(new Uint8Array(G),void 0);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new Hc(G,w);var G}(t,Gd(e));s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){!function pg(s,e,t){const a=hn(s);var h;(h=(0,oe.Z)(function*(m,w,O){try{const G=yield w.getMetadata();if(yield function(xt,en){const Dn=hn(xt),Zn=Js(en.createTime);return Dn.persistence.runTransaction("hasNewerBundle","readonly",br=>Dn.xs.getBundleMetadata(br,en.id)).then(br=>!!br&&br.createTime.compareTo(Zn)>=0)}(m.localStore,G))return yield w.close(),O._completeWith({taskState:"Success",documentsLoaded:(xt=G).totalDocuments,bytesLoaded:xt.totalBytes,totalDocuments:xt.totalDocuments,totalBytes:xt.totalBytes}),Promise.resolve(new Set);O._updateProgress(Im(G));const ee=new Q_(G,m.localStore,w.serializer);let ye=yield w._c();for(;ye;){const xt=yield ee.$u(ye);xt&&O._updateProgress(xt),ye=yield w._c()}const it=yield ee.complete();return yield nl(m,it.Bu,void 0),yield function(xt,en){const Dn=hn(xt);return Dn.persistence.runTransaction("Save bundle","readwrite",Zn=>Dn.xs.saveBundleMetadata(Zn,en))}(m.localStore,G),O._completeWith(it.progress),Promise.resolve(it.Fu)}catch(G){return vr("SyncEngine",`Loading bundle failed with ${G}`),O._failWith(G),Promise.resolve(new Set)}var xt}),function(m,w,O){return h.apply(this,arguments)})(a,e,t).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield Zd(s),h,a)}))}(t,s._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function av(s,e){return function t_(s,e){return s.asyncQueue.enqueue((0,oe.Z)(function*(){return function(t,a){const h=hn(t);return h.persistence.runTransaction("Get named query","readonly",m=>h.xs.getNamedQuery(m,a))}(yield Ju(s),e)}))}(Ts(s=wi(s,Rs)),e).then(t=>t?new na(s,null,t.query):null)}(this._delegate,e).then(t=>t?new Ta(this,t):null)}}class zc extends Rr{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(new Da(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zr.forKey(t,this.firestore,null)}}class _r{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zc(e)}get(e){const t=jo(e);return this._delegate.get(t).then(a=>new xl(this._firestore,new ld(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const h=jo(e);return a?(pa("Transaction.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const m=jo(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,a,...h),this}delete(e){const t=jo(e);return this._delegate.delete(t),this}}class Mr{constructor(e){this._delegate=e}set(e,t,a){const h=jo(e);return a?(pa("WriteBatch.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const m=jo(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,a,...h),this}delete(e){const t=jo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sr{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new lh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Is(this._firestore,a),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=Sr.INSTANCES;let h=a.get(e);h||(h=new WeakMap,a.set(e,h));let m=h.get(t);return m||(m=new Sr(e,new zc(e),t),h.set(t,m)),m}}Sr.INSTANCES=new WeakMap;class zr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zc(e)}static forPath(e,t,a){if(e.length%2!=0)throw new tn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zr(t,new ri(t._delegate,a,new On(e)))}static forKey(e,t,a){return new zr(t,new ri(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new ic(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ic(this.firestore,Lm(this._delegate,e))}catch(t){throw Ai(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,q.m9)(e))instanceof ri&&Bm(this._delegate,e)}set(e,t){t=pa("DocumentReference.set",t);try{return t?b_(this._delegate,e,t):b_(this._delegate,e)}catch(a){throw Ai(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?C_(this._delegate,e):C_(this._delegate,e,t,...a)}catch(h){throw Ai(h,"updateDoc()","DocumentReference.update()")}}delete(){return function Ev(s){return cd(wi(s.firestore,Rs),[new Ih(s._key,Ds.none())])}(this._delegate)}onSnapshot(...e){const t=Ec(e),a=ja(e,h=>new xl(this.firestore,new ld(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return xg(this._delegate,t,a)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ym(s){s=wi(s,ri);const e=wi(s.firestore,Rs),t=Ts(e),a=new rc(e);return function e_(s,e){const t=new Di;return s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(a=(0,oe.Z)(function*(h,m,w){try{const O=yield function(G,ee){const ye=hn(G);return ye.persistence.runTransaction("read document","readonly",it=>ye.localDocuments.getDocument(it,ee))}(h,m);O.isFoundDocument()?w.resolve(O):O.isNoDocument()?w.resolve(null):w.reject(new tn(Nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const G=Wu(O,`Failed to get document '${m} from cache`);w.reject(G)}}),function(h,m,w){return a.apply(this,arguments)})(yield Ju(s),e,t);var a})),t.promise}(t,s._key).then(h=>new ld(e,a,s._key,h,new cs(null!==h&&h.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function _v(s){s=wi(s,ri);const e=wi(s.firestore,Rs);return Qd(Ts(e),s._key,{source:"server"}).then(t=>Zm(e,s,t))}(this._delegate):function qm(s){s=wi(s,ri);const e=wi(s.firestore,Rs);return Qd(Ts(e),s._key).then(t=>Zm(e,s,t))}(this._delegate),t.then(a=>new xl(this.firestore,new ld(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new zr(this.firestore,this._delegate.withConverter(e?Sr.getInstance(this.firestore,e):null))}}function Ai(s,e,t){return s.message=s.message.replace(e,t),s}function Ec(s){for(const e of s)if("object"==typeof e&&!Rl(e))return e;return{}}function ja(s,e){var t,a;let h;return h=Rl(s[0])?s[0]:Rl(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:m=>{h.next&&h.next(e(m))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(a=h.complete)||void 0===a?void 0:a.bind(h)}}class xl{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Km(this._delegate,e._delegate)}}class Is extends xl{data(e){const t=this._delegate.data(e);return function xo(s,e){s||dn()}(void 0!==t),t}}class Ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zc(e)}where(e,t,a){try{return new Ta(this.firestore,id(this._delegate,function m_(s,e,t){const a=e,h=up("where",s);return fp._create(h,a,t)}(e,t,a)))}catch(h){throw Ai(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ta(this.firestore,id(this._delegate,function pf(s,e="asc"){const t=e,a=up("orderBy",s);return ff._create(a,t)}(e,t)))}catch(a){throw Ai(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ta(this.firestore,id(this._delegate,function y_(s){return rp("limit",s),ih._create("limit",s,"F")}(e)))}catch(t){throw Ai(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ta(this.firestore,id(this._delegate,function __(s){return rp("limitToLast",s),ih._create("limitToLast",s,"L")}(e)))}catch(t){throw Ai(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ta(this.firestore,id(this._delegate,function v_(...s){return od._create("startAt",s,!0)}(...e)))}catch(t){throw Ai(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ta(this.firestore,id(this._delegate,function sh(...s){return od._create("startAfter",s,!1)}(...e)))}catch(t){throw Ai(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ta(this.firestore,id(this._delegate,function pv(...s){return oh._create("endBefore",s,!1)}(...e)))}catch(t){throw Ai(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ta(this.firestore,id(this._delegate,function ah(...s){return oh._create("endAt",s,!0)}(...e)))}catch(t){throw Ai(t,"endAt()","Query.endAt()")}}isEqual(e){return Ig(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function vv(s){s=wi(s,na);const e=wi(s.firestore,Rs),t=Ts(e),a=new rc(e);return function km(s,e){const t=new Di;return s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(a=(0,oe.Z)(function*(h,m,w){try{const O=yield Bf(h,m,!0),G=new sg(m,O.Wi),ee=G.zu(O.documents),ye=G.applyChanges(ee,!1);w.resolve(ye.snapshot)}catch(O){const G=Wu(O,`Failed to execute query '${m} against cache`);w.reject(G)}}),function(h,m,w){return a.apply(this,arguments)})(yield Ju(s),e,t);var a})),t.promise}(t,s._query).then(h=>new du(e,a,s,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function yp(s){s=wi(s,na);const e=wi(s.firestore,Rs),t=Ts(e),a=new rc(e);return Fm(t,s._query,{source:"server"}).then(h=>new du(e,a,s,h))}(this._delegate):function w_(s){s=wi(s,na);const e=wi(s.firestore,Rs),t=Ts(e),a=new rc(e);return g_(s._query),Fm(t,s._query).then(h=>new du(e,a,s,h))}(this._delegate),t.then(a=>new mo(this.firestore,new du(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=Ec(e),a=ja(e,h=>new mo(this.firestore,new du(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return xg(this._delegate,t,a)}withConverter(e){return new Ta(this.firestore,this._delegate.withConverter(e?Sr.getInstance(this.firestore,e):null))}}class Iv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Is(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mo{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ta(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Is(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Iv(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new Is(this._firestore,a))})}isEqual(e){return Km(this._delegate,e._delegate)}}class ic extends Ta{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zr(this.firestore,e):null}doc(e){try{return new zr(this.firestore,void 0===e?Xd(this._delegate):Xd(this._delegate,e))}catch(t){throw Ai(t,"doc()","CollectionReference.doc()")}}add(e){return function Rg(s,e){const t=wi(s.firestore,Rs),a=Xd(s),h=Mg(s.converter,e);return cd(t,[nh(ec(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,Ds.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new zr(this.firestore,t))}isEqual(e){return Bm(this._delegate,e._delegate)}withConverter(e){return new ic(this.firestore,this._delegate.withConverter(e?Sr.getInstance(this.firestore,e):null))}}function jo(s){return wi(s,ri)}class mf{constructor(...e){this._delegate=new Jl(...e)}static documentId(){return new mf(Wi.keyField().canonicalString())}isEqual(e){return(e=(0,q.m9)(e))instanceof Jl&&this._delegate._internalPath.isEqual(e._internalPath)}}class fu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function qt(){return new Vm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fu(e)}static delete(){const e=function At(){return new rh("deleteField")}();return e._methodName="FieldValue.delete",new fu(e)}static arrayUnion(...e){const t=function Xt(...s){return new Cg("arrayUnion",s)}(...e);return t._methodName="FieldValue.arrayUnion",new fu(t)}static arrayRemove(...e){const t=function Sn(...s){return new cv("arrayRemove",s)}(...e);return t._methodName="FieldValue.arrayRemove",new fu(t)}static increment(e){const t=function sr(s){return new f_("increment",s)}(e);return t._methodName="FieldValue.increment",new fu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e0={Firestore:gf,GeoPoint:wg,Timestamp:Ti,Blob:Ml,Transaction:_r,WriteBatch:Mr,DocumentReference:zr,DocumentSnapshot:xl,Query:Ta,QueryDocumentSnapshot:Is,QuerySnapshot:mo,CollectionReference:ic,FieldPath:mf,FieldValue:fu,setLogLevel:function D_(s){!function Fr(s){Zt.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function n0(s){(function t0(s,e){s.INTERNAL.registerComponent(new ze.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(a,h)},"PUBLIC").setServiceProps(Object.assign({},e0)))})(s,(e,t)=>new gf(e,t,new hu)),s.registerVersion("@firebase/firestore-compat","0.3.7")}(_e.Z);var yf=k(1205),r0=k(6217),s0=k(9260);function wv(s,e){return function Bv(s,e=g.z){return new Y.y(t=>{let a;return null!=e?e.schedule(()=>{a=s.onSnapshot({includeMetadataChanges:!0},t)}):a=s.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=a&&a()}})}(s,e)}function bv(s,e){return wv(s,e).pipe((0,pe.U)(t=>({payload:t,type:"query"})))}function Xm(s,e){return bv(s,e).pipe((0,Ce.O)(void 0),Te(),(0,pe.U)(([t,a])=>{const h=a.payload.docChanges(),m=h.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((w,O)=>{const G=h.find(ye=>ye.doc.ref.isEqual(w.ref)),ee=null==t?void 0:t.payload.docs.find(ye=>ye.ref.isEqual(w.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(w.metadata)||!G&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(w.metadata)||m.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:w}})}),m}))}function $v(s,e,t){return Xm(s,t).pipe((0,De.R)((a,h)=>function a0(s,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(s=function Dv(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return Cv(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=s.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Cv(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Cv(s,e.oldIndex,1)}return s}(s,a))}),s}(a,h.map(m=>m.payload),e),[]),(0,Fe.x)(),(0,pe.U)(a=>a.map(h=>({type:h.type,payload:h}))))}function Cv(s,e,t,...a){const h=s.slice();return h.splice(e,t,...a),h}function T_(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class Tv{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=Xm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pe.U)(a=>a.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,Ce.O)(void 0),Te(),(0,je.h)(([a,h])=>h.length>0||!a),(0,pe.U)(([a,h])=>h),Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=T_(e);return $v(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return bv(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Pe.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(Pe.iC)}add(e){return this.ref.add(e)}doc(e){return new S_(this.ref.doc(e),this.afs)}}class S_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:h,query:m}=vp(a,t);return new Tv(h,m,this.afs)}snapshotChanges(){return function o0(s,e){return wv(s,e).pipe((0,Ce.O)(void 0),Te(),(0,pe.U)(([t,a])=>a.exists?null!=t&&t.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ae.D)(this.ref.get(e)).pipe(Pe.iC)}}class l0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Xm(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,je.h)(t=>t.length>0),Pe.iC):Xm(this.query,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=T_(e);return $v(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return bv(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(a=>a.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),Pe.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(Pe.iC)}}const Uv=new y.OlP("angularfire2.enableFirestorePersistence"),A_=new y.OlP("angularfire2.firestore.persistenceSettings"),c0=new y.OlP("angularfire2.firestore.settings"),Vv=new y.OlP("angularfire2.firestore.use-emulator");function vp(s,e=(t=>t)){return{query:e(s),ref:s}}let Sv=(()=>{class s{constructor(t,a,h,m,w,O,G,ee,ye,it,xt,en,Dn,Zn,br,Xi,Bs){this.schedulers=G;const Ri=(0,Be.on)(t,O,a),Sa=ye;it&&(0,yf.nw)(Ri,O,xt,Dn,Zn,br,en,Xi),[this.firestore,this.persistenceEnabled$]=(0,Be.cc)(`${Ri.name}.firestore`,"AngularFirestore",Ri.name,()=>{const $s=O.runOutsideAngular(()=>Ri.firestore());if(m&&$s.settings(m),Sa&&$s.useEmulator(...Sa),h&&!(0,Xe.PM)(w)){const Us=()=>{try{return(0,ae.D)($s.enablePersistence(ee||void 0).then(()=>!0,()=>!1))}catch(Pl){return typeof console<"u"&&console.warn(Pl),(0,xe.of)(!1)}};return[$s,O.runOutsideAngular(Us)]}return[$s,(0,xe.of)(!1)]},[m,Sa,h])}collection(t,a){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:w}=vp(h,a),O=this.schedulers.ngZone.run(()=>m);return new Tv(O,w,this)}collectionGroup(t,a){const h=a||(w=>w),m=this.firestore.collectionGroup(t);return new l0(h(m),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>a);return new S_(h,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(t){return new(t||s)(y.LFG(Be.Dh),y.LFG(Be.xv,8),y.LFG(Uv,8),y.LFG(c0,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Pe.HU),y.LFG(A_,8),y.LFG(Vv,8),y.LFG(yf.zQ,8),y.LFG(yf.Qv,8),y.LFG(yf.L6,8),y.LFG(yf._Q,8),y.LFG(yf.rT,8),y.LFG(yf.lh,8),y.LFG(yf.f7,8),y.LFG(r0.nm,8))},s.\u0275prov=y.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),u0=(()=>{class s{constructor(){s0.Z.registerVersion("angularfire",Pe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:s,providers:[{provide:Uv,useValue:!0},{provide:A_,useValue:t}]}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=y.oAB({type:s}),s.\u0275inj=y.cJS({providers:[Sv]}),s})()},2011:(on,ot,k)=>{"use strict";k.d(ot,{Dh:()=>me,GT:()=>Pe,cc:()=>je,hO:()=>Fe,on:()=>Te,pX:()=>xe,xv:()=>Ue});var y=k(4650),g=k(9260),Y=k(2122);on=k.hmd(on);const ae=["ngOnDestroy"],xe=(_e,oe,lt,ze={})=>new Proxy(_e,{get:(Ae,q)=>lt.runOutsideAngular(()=>{var pt;if(_e[q])return!(null===(pt=null==ze?void 0:ze.spy)||void 0===pt)&&pt.get&&ze.spy.get(q,_e[q]),_e[q];if(ae.indexOf(q)>-1)return()=>{};const Ke=oe.toPromise().then(ne=>{const nt=ne&&ne[q];return"function"==typeof nt?nt.bind(ne):nt&&nt.then?nt.then(Me=>lt.run(()=>Me)):lt.run(()=>nt)});return new Proxy(()=>{},{get:(ne,nt)=>Ke[nt],apply:(ne,nt,Me)=>Ke.then(et=>{var vt;const Le=et&&et(...Me);return!(null===(vt=null==ze?void 0:ze.spy)||void 0===vt)&&vt.apply&&ze.spy.apply(q,Me,Le),Le})})})}),Pe=(_e,oe)=>{oe.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(ze=>{Object.defineProperty(_e.prototype,ze,Object.getOwnPropertyDescriptor(lt.prototype||lt,ze))})})};class Ce{constructor(oe){return oe}}const me=new y.OlP("angularfire2.app.options"),Ue=new y.OlP("angularfire2.app.name");function Te(_e,oe,lt){const Ae="object"==typeof lt&&lt||{};Ae.name=Ae.name||"string"==typeof lt&&lt||"[DEFAULT]";const pt=g.Z.apps.filter(Ke=>Ke&&Ke.name===Ae.name)[0]||oe.runOutsideAngular(()=>g.Z.initializeApp(_e,Ae));try{JSON.stringify(_e)!==JSON.stringify(pt.options)&&pe("error",`${pt.name} Firebase App already initialized with different options${on.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(pt)}const pe=(_e,...oe)=>{(0,y.X6Q)()&&typeof console<"u"&&console[_e](...oe)},De={provide:Ce,useFactory:Te,deps:[me,y.R0b,[new y.FiY,Ue]]};let Fe=(()=>{class _e{constructor(lt){g.Z.registerVersion("angularfire",Y.q4.full,"core"),g.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),g.Z.registerVersion("angular",y.q4F.full,lt.toString())}static initializeApp(lt,ze){return{ngModule:_e,providers:[{provide:me,useValue:lt},{provide:Ue,useValue:ze}]}}}return _e.\u0275fac=function(lt){return new(lt||_e)(y.LFG(y.Lbi))},_e.\u0275mod=y.oAB({type:_e}),_e.\u0275inj=y.cJS({providers:[De]}),_e})();function je(_e,oe,lt,ze,Ae){const[,q,pt]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===_e)||[];if(q)return function Be(_e,oe){try{return _e.toString()===oe.toString()}catch{return _e===oe}}(Ae,pt)||(Se("error",`${oe} was already initialized on the ${lt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),Se("warn",{is:Ae,was:pt})),q;{const Ke=ze();return globalThis.\u0275AngularfireInstanceCache.push([_e,Ke,Ae]),Ke}}const Xe=!!on.hot,Se=(_e,...oe)=>{(0,y.X6Q)()&&typeof console<"u"&&console[_e](...oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(on,ot,k)=>{"use strict";k.d(ot,{q4:()=>Bo,iC:()=>fl,fc:()=>hl,HU:()=>Zi,vb:()=>Vn,JM:()=>Un});var y=k(4650),g=k(259),Y=k(5861),ae=k(9681),xe=k(2090),Pe=k(4859),Ce=k(1877),me=k(8766);const Ue="@firebase/installations",Te="0.6.4",pe=1e4,De=`w:${Te}`,Fe="FIS_v2",je="https://firebaseinstallations.googleapis.com/v1",Be=36e5,oe=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(V){return V instanceof xe.ZR&&V.code.includes("request-failed")}function ze({projectId:V}){return`${je}/projects/${V}/installations`}function Ae(V){return{token:V.token,requestStatus:2,expiresIn:et(V.expiresIn),creationTime:Date.now()}}function q(V,W){return pt.apply(this,arguments)}function pt(){return(pt=(0,Y.Z)(function*(V,W){const qe=(yield W.json()).error;return oe.create("request-failed",{requestName:V,serverCode:qe.code,serverMessage:qe.message,serverStatus:qe.status})})).apply(this,arguments)}function Ke({apiKey:V}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V})}function nt(V){return Me.apply(this,arguments)}function Me(){return(Me=(0,Y.Z)(function*(V){const W=yield V();return W.status>=500&&W.status<600?V():W})).apply(this,arguments)}function et(V){return Number(V.replace("s","000"))}function ut(){return(ut=(0,Y.Z)(function*({appConfig:V,heartbeatServiceProvider:W},{fid:se}){const qe=ze(V),Et=Ke(V),St=W.getImmediate({optional:!0});if(St){const wr=yield St.getHeartbeatsHeader();wr&&Et.append("x-firebase-client",wr)}const kn={method:"POST",headers:Et,body:JSON.stringify({fid:se,authVersion:Fe,appId:V.appId,sdkVersion:De})},ln=yield nt(()=>fetch(qe,kn));if(ln.ok){const wr=yield ln.json();return{fid:wr.fid||se,registrationStatus:2,refreshToken:wr.refreshToken,authToken:Ae(wr.authToken)}}throw yield q("Create Installation",ln)})).apply(this,arguments)}function bt(V){return new Promise(W=>{setTimeout(W,V)})}const We=/^[cdef][\w-]{21}$/,He="";function Ge(){try{const V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;const se=function _t(V){return function yt(V){return btoa(String.fromCharCode(...V)).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return We.test(se)?se:He}catch{return He}}function mt(V){return`${V.appName}!${V.appId}`}const Ct=new Map;function jt(V,W){const se=mt(V);ct(se,W),function Rt(V,W){const se=function Cn(){return!Jt&&"BroadcastChannel"in self&&(Jt=new BroadcastChannel("[Firebase] FID Change"),Jt.onmessage=V=>{ct(V.data.key,V.data.fid)}),Jt}();se&&se.postMessage({key:V,fid:W}),function Fn(){0===Ct.size&&Jt&&(Jt.close(),Jt=null)}()}(se,W)}function ct(V,W){const se=Ct.get(V);if(se)for(const qe of se)qe(W)}let Jt=null;const gn="firebase-installations-database",nn=1,vn="firebase-installations-store";let Ut=null;function nr(){return Ut||(Ut=(0,me.X3)(gn,nn,{upgrade:(V,W)=>{0===W&&V.createObjectStore(vn)}})),Ut}function Hn(V,W){return un.apply(this,arguments)}function un(){return(un=(0,Y.Z)(function*(V,W){const se=mt(V),Et=(yield nr()).transaction(vn,"readwrite"),St=Et.objectStore(vn),cn=yield St.get(se);return yield St.put(W,se),yield Et.done,(!cn||cn.fid!==W.fid)&&jt(V,W.fid),W})).apply(this,arguments)}function or(V){return ci.apply(this,arguments)}function ci(){return(ci=(0,Y.Z)(function*(V){const W=mt(V),qe=(yield nr()).transaction(vn,"readwrite");yield qe.objectStore(vn).delete(W),yield qe.done})).apply(this,arguments)}function Ir(V,W){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,Y.Z)(function*(V,W){const se=mt(V),Et=(yield nr()).transaction(vn,"readwrite"),St=Et.objectStore(vn),cn=yield St.get(se),kn=W(cn);return void 0===kn?yield St.delete(se):yield St.put(kn,se),yield Et.done,kn&&(!cn||cn.fid!==kn.fid)&&jt(V,kn.fid),kn})).apply(this,arguments)}function Gr(V){return Ar.apply(this,arguments)}function Ar(){return Ar=(0,Y.Z)(function*(V){let W;const se=yield Ir(V.appConfig,qe=>{const Et=function fr(V){return Vr(V||{fid:Ge(),registrationStatus:0})}(qe),St=function Rn(V,W){if(0===W.registrationStatus){if(!navigator.onLine)return{installationEntry:W,registrationPromise:Promise.reject(oe.create("app-offline"))};const se={fid:W.fid,registrationStatus:1,registrationTime:Date.now()},qe=function rn(V,W){return xr.apply(this,arguments)}(V,se);return{installationEntry:se,registrationPromise:qe}}return 1===W.registrationStatus?{installationEntry:W,registrationPromise:Lr(V)}:{installationEntry:W}}(V,Et);return W=St.registrationPromise,St.installationEntry});return se.fid===He?{installationEntry:yield W}:{installationEntry:se,registrationPromise:W}}),Ar.apply(this,arguments)}function xr(){return xr=(0,Y.Z)(function*(V,W){try{const se=yield function Le(V,W){return ut.apply(this,arguments)}(V,W);return Hn(V.appConfig,se)}catch(se){throw lt(se)&&409===se.customData.serverCode?yield or(V.appConfig):yield Hn(V.appConfig,{fid:W.fid,registrationStatus:0}),se}}),xr.apply(this,arguments)}function Lr(V){return cr.apply(this,arguments)}function cr(){return(cr=(0,Y.Z)(function*(V){let W=yield si(V.appConfig);for(;1===W.registrationStatus;)yield bt(100),W=yield si(V.appConfig);if(0===W.registrationStatus){const{installationEntry:se,registrationPromise:qe}=yield Gr(V);return qe||se}return W})).apply(this,arguments)}function si(V){return Ir(V,W=>{if(!W)throw oe.create("installation-not-found");return Vr(W)})}function Vr(V){return function xi(V){return 1===V.registrationStatus&&V.registrationTime+pe<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function Zr(){return(Zr=(0,Y.Z)(function*({appConfig:V,heartbeatServiceProvider:W},se){const qe=function er(V,{fid:W}){return`${ze(V)}/${W}/authTokens:generate`}(V,se),Et=function ne(V,{refreshToken:W}){const se=Ke(V);return se.append("Authorization",function vt(V){return`${Fe} ${V}`}(W)),se}(V,se),St=W.getImmediate({optional:!0});if(St){const wr=yield St.getHeartbeatsHeader();wr&&Et.append("x-firebase-client",wr)}const kn={method:"POST",headers:Et,body:JSON.stringify({installation:{sdkVersion:De,appId:V.appId}})},ln=yield nt(()=>fetch(qe,kn));if(ln.ok)return Ae(yield ln.json());throw yield q("Generate Auth Token",ln)})).apply(this,arguments)}function bi(V){return Xn.apply(this,arguments)}function Xn(){return Xn=(0,Y.Z)(function*(V,W=!1){let se;const qe=yield Ir(V.appConfig,St=>{if(!ur(St))throw oe.create("not-registered");const cn=St.authToken;if(!W&&function Pr(V){return 2===V.requestStatus&&!function Ze(V){const W=Date.now();return W<V.creationTime||V.creationTime+V.expiresIn<W+Be}(V)}(cn))return St;if(1===cn.requestStatus)return se=function mn(V,W){return Gt.apply(this,arguments)}(V,W),St;{if(!navigator.onLine)throw oe.create("app-offline");const kn=function Ve(V){const W={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},V),{authToken:W})}(St);return se=function An(V,W){return zn.apply(this,arguments)}(V,kn),kn}});return se?yield se:qe.authToken}),Xn.apply(this,arguments)}function Gt(){return(Gt=(0,Y.Z)(function*(V,W){let se=yield En(V.appConfig);for(;1===se.authToken.requestStatus;)yield bt(100),se=yield En(V.appConfig);const qe=se.authToken;return 0===qe.requestStatus?bi(V,W):qe})).apply(this,arguments)}function En(V){return Ir(V,W=>{if(!ur(W))throw oe.create("not-registered");return function fe(V){return 1===V.requestStatus&&V.requestTime+pe<Date.now()}(W.authToken)?Object.assign(Object.assign({},W),{authToken:{requestStatus:0}}):W})}function zn(){return zn=(0,Y.Z)(function*(V,W){try{const se=yield function Er(V,W){return Zr.apply(this,arguments)}(V,W),qe=Object.assign(Object.assign({},W),{authToken:se});return yield Hn(V.appConfig,qe),se}catch(se){if(!lt(se)||401!==se.customData.serverCode&&404!==se.customData.serverCode){const qe=Object.assign(Object.assign({},W),{authToken:{requestStatus:0}});yield Hn(V.appConfig,qe)}else yield or(V.appConfig);throw se}}),zn.apply(this,arguments)}function ur(V){return void 0!==V&&2===V.registrationStatus}function he(){return(he=(0,Y.Z)(function*(V){const W=V,{installationEntry:se,registrationPromise:qe}=yield Gr(W);return qe?qe.catch(console.error):bi(W).catch(console.error),se.fid})).apply(this,arguments)}function Oe(){return Oe=(0,Y.Z)(function*(V,W=!1){const se=V;return yield function $e(V){return we.apply(this,arguments)}(se),(yield bi(se,W)).token}),Oe.apply(this,arguments)}function we(){return(we=(0,Y.Z)(function*(V){const{registrationPromise:W}=yield Gr(V);W&&(yield W)})).apply(this,arguments)}function rs(V){return oe.create("missing-app-config-values",{valueName:V})}const Vi="installations",is=V=>{const W=V.getProvider("app").getImmediate(),se=function ki(V){if(!V||!V.options)throw rs("App Configuration");if(!V.name)throw rs("App Name");const W=["projectId","apiKey","appId"];for(const se of W)if(!V.options[se])throw rs(se);return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(W);return{app:W,appConfig:se,heartbeatServiceProvider:(0,ae._getProvider)(W,"heartbeat"),_delete:()=>Promise.resolve()}},ws=V=>{const W=V.getProvider("app").getImmediate(),se=(0,ae._getProvider)(W,Vi).getImmediate();return{getId:()=>function ve(V){return he.apply(this,arguments)}(se),getToken:Et=>function dt(V){return Oe.apply(this,arguments)}(se,Et)}};(function pr(){(0,ae._registerComponent)(new Pe.wA(Vi,is,"PUBLIC")),(0,ae._registerComponent)(new Pe.wA("installations-internal",ws,"PRIVATE"))})(),(0,ae.registerVersion)(Ue,Te),(0,ae.registerVersion)(Ue,Te,"esm2017");const pi="@firebase/remote-config",oi=new xe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zt{constructor(W,se,qe,Et){this.client=W,this.storage=se,this.storageCache=qe,this.logger=Et}isCachedDataFresh(W,se){if(!se)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const qe=Date.now()-se,Et=qe<=W;return this.logger.debug(`Config fetch cache check. Cache age millis: ${qe}. Cache max age millis (minimumFetchIntervalMillis setting): ${W}. Is cache hit: ${Et}.`),Et}fetch(W){var se=this;return(0,Y.Z)(function*(){const[qe,Et]=yield Promise.all([se.storage.getLastSuccessfulFetchTimestampMillis(),se.storage.getLastSuccessfulFetchResponse()]);if(Et&&se.isCachedDataFresh(W.cacheMaxAgeMillis,qe))return Et;W.eTag=Et&&Et.eTag;const St=yield se.client.fetch(W),cn=[se.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===St.status&&cn.push(se.storage.setLastSuccessfulFetchResponse(St)),yield Promise.all(cn),St})()}}function pn(V=navigator){return V.languages&&V.languages[0]||V.language}class qn{constructor(W,se,qe,Et,St,cn){this.firebaseInstallations=W,this.sdkVersion=se,this.namespace=qe,this.projectId=Et,this.apiKey=St,this.appId=cn}fetch(W){var se=this;return(0,Y.Z)(function*(){const[qe,Et]=yield Promise.all([se.firebaseInstallations.getId(),se.firebaseInstallations.getToken()]),cn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${se.projectId}/namespaces/${se.namespace}:fetch?key=${se.apiKey}`,kn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":W.eTag||"*"},ln={sdk_version:se.sdkVersion,app_instance_id:qe,app_instance_id_token:Et,app_id:se.appId,language_code:pn()},wr={method:"POST",headers:kn,body:JSON.stringify(ln)},ni=fetch(cn,wr),tr=new Promise(($o,Uo)=>{W.signal.addEventListener(()=>{const Rc=new Error("The operation was aborted.");Rc.name="AbortError",Uo(Rc)})});let Ms;try{yield Promise.race([ni,tr]),Ms=yield ni}catch($o){let Uo="fetch-client-network";throw"AbortError"===(null==$o?void 0:$o.name)&&(Uo="fetch-timeout"),oi.create(Uo,{originalErrorMessage:null==$o?void 0:$o.message})}let Ki=Ms.status;const Ii=Ms.headers.get("ETag")||void 0;let gl,Cs;if(200===Ms.status){let $o;try{$o=yield Ms.json()}catch(Uo){throw oi.create("fetch-client-parse",{originalErrorMessage:null==Uo?void 0:Uo.message})}gl=$o.entries,Cs=$o.state}if("INSTANCE_STATE_UNSPECIFIED"===Cs?Ki=500:"NO_CHANGE"===Cs?Ki=304:("NO_TEMPLATE"===Cs||"EMPTY_CONFIG"===Cs)&&(gl={}),304!==Ki&&200!==Ki)throw oi.create("fetch-status",{httpStatus:Ki});return{status:Ki,eTag:Ii,config:gl}})()}}class at{constructor(W,se){this.client=W,this.storage=se}fetch(W){var se=this;return(0,Y.Z)(function*(){const qe=(yield se.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return se.attemptFetch(W,qe)})()}attemptFetch(W,{throttleEndTimeMillis:se,backoffCount:qe}){var Et=this;return(0,Y.Z)(function*(){yield function Qn(V,W){return new Promise((se,qe)=>{const Et=Math.max(W-Date.now(),0),St=setTimeout(se,Et);V.addEventListener(()=>{clearTimeout(St),qe(oi.create("fetch-throttle",{throttleEndTimeMillis:W}))})})}(W.signal,se);try{const St=yield Et.client.fetch(W);return yield Et.storage.deleteThrottleMetadata(),St}catch(St){if(!function Je(V){if(!(V instanceof xe.ZR&&V.customData))return!1;const W=Number(V.customData.httpStatus);return 429===W||500===W||503===W||504===W}(St))throw St;const cn={throttleEndTimeMillis:Date.now()+(0,xe.$s)(qe),backoffCount:qe+1};return yield Et.storage.setThrottleMetadata(cn),Et.attemptFetch(W,cn)}})()}}class an{constructor(W,se,qe,Et,St){this.app=W,this._client=se,this._storageCache=qe,this._storage=Et,this._logger=St,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bn(V,W){const se=V.target.error||void 0;return oi.create(W,{originalErrorMessage:se&&(null==se?void 0:se.message)})}const mr="app_namespace_store";class Ei{constructor(W,se,qe,Et=function $r(){return new Promise((V,W)=>{try{const se=indexedDB.open("firebase_remote_config",1);se.onerror=qe=>{W(Bn(qe,"storage-open"))},se.onsuccess=qe=>{V(qe.target.result)},se.onupgradeneeded=qe=>{0===qe.oldVersion&&qe.target.result.createObjectStore(mr,{keyPath:"compositeKey"})}}catch(se){W(oi.create("storage-open",{originalErrorMessage:null==se?void 0:se.message}))}})}()){this.appId=W,this.appName=se,this.namespace=qe,this.openDbPromise=Et}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(W){return this.set("last_fetch_status",W)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(W){return this.set("last_successful_fetch_timestamp_millis",W)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(W){return this.set("last_successful_fetch_response",W)}getActiveConfig(){return this.get("active_config")}setActiveConfig(W){return this.set("active_config",W)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(W){return this.set("active_config_etag",W)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(W){return this.set("throttle_metadata",W)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(W){var se=this;return(0,Y.Z)(function*(){const qe=yield se.openDbPromise;return new Promise((Et,St)=>{const kn=qe.transaction([mr],"readonly").objectStore(mr),ln=se.createCompositeKey(W);try{const wr=kn.get(ln);wr.onerror=ni=>{St(Bn(ni,"storage-get"))},wr.onsuccess=ni=>{const tr=ni.target.result;Et(tr?tr.value:void 0)}}catch(wr){St(oi.create("storage-get",{originalErrorMessage:null==wr?void 0:wr.message}))}})})()}set(W,se){var qe=this;return(0,Y.Z)(function*(){const Et=yield qe.openDbPromise;return new Promise((St,cn)=>{const ln=Et.transaction([mr],"readwrite").objectStore(mr),wr=qe.createCompositeKey(W);try{const ni=ln.put({compositeKey:wr,value:se});ni.onerror=tr=>{cn(Bn(tr,"storage-set"))},ni.onsuccess=()=>{St()}}catch(ni){cn(oi.create("storage-set",{originalErrorMessage:null==ni?void 0:ni.message}))}})})()}delete(W){var se=this;return(0,Y.Z)(function*(){const qe=yield se.openDbPromise;return new Promise((Et,St)=>{const kn=qe.transaction([mr],"readwrite").objectStore(mr),ln=se.createCompositeKey(W);try{const wr=kn.delete(ln);wr.onerror=ni=>{St(Bn(ni,"storage-delete"))},wr.onsuccess=()=>{Et()}}catch(wr){St(oi.create("storage-delete",{originalErrorMessage:null==wr?void 0:wr.message}))}})})()}createCompositeKey(W){return[this.appId,this.appName,this.namespace,W].join()}}class us{constructor(W){this.storage=W}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var W=this;return(0,Y.Z)(function*(){const se=W.storage.getLastFetchStatus(),qe=W.storage.getLastSuccessfulFetchTimestampMillis(),Et=W.storage.getActiveConfig(),St=yield se;St&&(W.lastFetchStatus=St);const cn=yield qe;cn&&(W.lastSuccessfulFetchTimestampMillis=cn);const kn=yield Et;kn&&(W.activeConfig=kn)})()}setLastFetchStatus(W){return this.lastFetchStatus=W,this.storage.setLastFetchStatus(W)}setLastSuccessfulFetchTimestampMillis(W){return this.lastSuccessfulFetchTimestampMillis=W,this.storage.setLastSuccessfulFetchTimestampMillis(W)}setActiveConfig(W){return this.activeConfig=W,this.storage.setActiveConfig(W)}}function zo(){return Go.apply(this,arguments)}function Go(){return(Go=(0,Y.Z)(function*(){if(!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch{return!1}})).apply(this,arguments)}!function js(){(0,ae._registerComponent)(new Pe.wA("remote-config",function V(W,{instanceIdentifier:se}){const qe=W.getProvider("app").getImmediate(),Et=W.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw oi.create("registration-window");if(!(0,xe.hl)())throw oi.create("indexed-db-unavailable");const{projectId:St,apiKey:cn,appId:kn}=qe.options;if(!St)throw oi.create("registration-project-id");if(!cn)throw oi.create("registration-api-key");if(!kn)throw oi.create("registration-app-id");const ln=new Ei(kn,qe.name,se=se||"firebase"),wr=new us(ln),ni=new Ce.Yd(pi);ni.logLevel=Ce.in.ERROR;const tr=new qn(Et,ae.SDK_VERSION,se,St,cn,kn),Ms=new at(tr,ln),Ki=new zt(Ms,ln,wr,ni),Ii=new an(qe,Ki,wr,ln,ni);return function Br(V){const W=(0,xe.m9)(V);W._initializePromise||(W._initializePromise=W._storageCache.loadFromStorage().then(()=>{W._isInitializationComplete=!0}))}(Ii),Ii},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(pi,"0.4.4"),(0,ae.registerVersion)(pi,"0.4.4","esm2017")}();const ss="/firebase-messaging-sw.js",Wo="/firebase-cloud-messaging-push-scope",Ko="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yo="https://fcmregistrations.googleapis.com/v1",no="google.c.a.c_id",ia="google.c.a.c_l",ro="google.c.a.ts",Hs="google.c.a.e";var Zs=(()=>{return(V=Zs||(Zs={})).PUSH_RECEIVED="push-received",V.NOTIFICATION_CLICKED="notification-clicked",Zs;var V})();function ds(V){const W=new Uint8Array(V);return btoa(String.fromCharCode(...W)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _o(V){const se=(V+"=".repeat((4-V.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),qe=atob(se),Et=new Uint8Array(qe.length);for(let St=0;St<qe.length;++St)Et[St]=qe.charCodeAt(St);return Et}const ga="fcm_token_details_db",vo=5,xs="fcm_token_object_Store";function zi(){return zi=(0,Y.Z)(function*(V){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(St=>St.name).includes(ga))return null;let W=null;return(yield(0,me.X3)(ga,vo,{upgrade:(qe=(0,Y.Z)(function*(Et,St,cn,kn){var ln;if(St<2||!Et.objectStoreNames.contains(xs))return;const wr=kn.objectStore(xs),ni=yield wr.index("fcmSenderId").get(V);if(yield wr.clear(),ni)if(2===St){const tr=ni;if(!tr.auth||!tr.p256dh||!tr.endpoint)return;W={token:tr.fcmToken,createTime:null!==(ln=tr.createTime)&&void 0!==ln?ln:Date.now(),subscriptionOptions:{auth:tr.auth,p256dh:tr.p256dh,endpoint:tr.endpoint,swScope:tr.swScope,vapidKey:"string"==typeof tr.vapidKey?tr.vapidKey:ds(tr.vapidKey)}}}else if(3===St){const tr=ni;W={token:tr.fcmToken,createTime:tr.createTime,subscriptionOptions:{auth:ds(tr.auth),p256dh:ds(tr.p256dh),endpoint:tr.endpoint,swScope:tr.swScope,vapidKey:ds(tr.vapidKey)}}}else if(4===St){const tr=ni;W={token:tr.fcmToken,createTime:tr.createTime,subscriptionOptions:{auth:ds(tr.auth),p256dh:ds(tr.p256dh),endpoint:tr.endpoint,swScope:tr.swScope,vapidKey:ds(tr.vapidKey)}}}}),function(St,cn,kn,ln){return qe.apply(this,arguments)})})).close(),yield(0,me.Lj)(ga),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),function Ps(V){if(!V||!V.subscriptionOptions)return!1;const{subscriptionOptions:W}=V;return"number"==typeof V.createTime&&V.createTime>0&&"string"==typeof V.token&&V.token.length>0&&"string"==typeof W.auth&&W.auth.length>0&&"string"==typeof W.p256dh&&W.p256dh.length>0&&"string"==typeof W.endpoint&&W.endpoint.length>0&&"string"==typeof W.swScope&&W.swScope.length>0&&"string"==typeof W.vapidKey&&W.vapidKey.length>0}(W)?W:null;var qe}),zi.apply(this,arguments)}const zs="firebase-messaging-database",di=1,Os="firebase-messaging-store";let io=null;function so(){return io||(io=(0,me.X3)(zs,di,{upgrade:(V,W)=>{0===W&&V.createObjectStore(Os)}})),io}function oa(V){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,Y.Z)(function*(V){const W=Ji(V),qe=yield(yield so()).transaction(Os).objectStore(Os).get(W);if(qe)return qe;{const Et=yield function Ss(V){return zi.apply(this,arguments)}(V.appConfig.senderId);if(Et)return yield Eo(V,Et),Et}}),Aa.apply(this,arguments)}function Eo(V,W){return ma.apply(this,arguments)}function ma(){return(ma=(0,Y.Z)(function*(V,W){const se=Ji(V),Et=(yield so()).transaction(Os,"readwrite");return yield Et.objectStore(Os).put(W,se),yield Et.done,W})).apply(this,arguments)}function wo(){return(wo=(0,Y.Z)(function*(V){const W=Ji(V),qe=(yield so()).transaction(Os,"readwrite");yield qe.objectStore(Os).delete(W),yield qe.done})).apply(this,arguments)}function Ji({appConfig:V}){return V.appId}const qi=new xe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ms(V,W){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,Y.Z)(function*(V,W){const se=yield Q(V),qe=K(W),Et={method:"POST",headers:se,body:JSON.stringify(qe)};let St;try{St=yield(yield fetch(C(V.appConfig),Et)).json()}catch(cn){throw qi.create("token-subscribe-failed",{errorInfo:null==cn?void 0:cn.toString()})}if(St.error)throw qi.create("token-subscribe-failed",{errorInfo:St.error.message});if(!St.token)throw qi.create("token-subscribe-no-token");return St.token})).apply(this,arguments)}function co(){return(co=(0,Y.Z)(function*(V,W){const se=yield Q(V),qe=K(W.subscriptionOptions),Et={method:"PATCH",headers:se,body:JSON.stringify(qe)};let St;try{St=yield(yield fetch(`${C(V.appConfig)}/${W.token}`,Et)).json()}catch(cn){throw qi.create("token-update-failed",{errorInfo:null==cn?void 0:cn.toString()})}if(St.error)throw qi.create("token-update-failed",{errorInfo:St.error.message});if(!St.token)throw qi.create("token-update-no-token");return St.token})).apply(this,arguments)}function hs(V,W){return bo.apply(this,arguments)}function bo(){return(bo=(0,Y.Z)(function*(V,W){const qe={method:"DELETE",headers:yield Q(V)};try{const St=yield(yield fetch(`${C(V.appConfig)}/${W}`,qe)).json();if(St.error)throw qi.create("token-unsubscribe-failed",{errorInfo:St.error.message})}catch(Et){throw qi.create("token-unsubscribe-failed",{errorInfo:null==Et?void 0:Et.toString()})}})).apply(this,arguments)}function C({projectId:V}){return`${yo}/projects/${V}/registrations`}function Q(V){return D.apply(this,arguments)}function D(){return(D=(0,Y.Z)(function*({appConfig:V,installations:W}){const se=yield W.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V.apiKey,"x-goog-firebase-installations-auth":`FIS ${se}`})})).apply(this,arguments)}function K({p256dh:V,auth:W,endpoint:se,vapidKey:qe}){const Et={web:{endpoint:se,auth:W,p256dh:V}};return qe!==Ko&&(Et.web.applicationPubKey=qe),Et}const Ie=6048e5;function $n(){return $n=(0,Y.Z)(function*(V){const W=yield function F(V,W){return ue.apply(this,arguments)}(V.swRegistration,V.vapidKey),se={vapidKey:V.vapidKey,swScope:V.swRegistration.scope,endpoint:W.endpoint,auth:ds(W.getKey("auth")),p256dh:ds(W.getKey("p256dh"))},qe=yield oa(V.firebaseDependencies);if(qe){if(function Ot(V,W){return W.vapidKey===V.vapidKey&&W.endpoint===V.endpoint&&W.auth===V.auth&&W.p256dh===V.p256dh}(qe.subscriptionOptions,se))return Date.now()>=qe.createTime+Ie?function Pn(V,W){return Yi.apply(this,arguments)}(V,{token:qe.token,createTime:Date.now(),subscriptionOptions:se}):qe.token;try{yield hs(V.firebaseDependencies,qe.token)}catch(Et){console.warn(Et)}return z(V.firebaseDependencies,se)}return z(V.firebaseDependencies,se)}),$n.apply(this,arguments)}function Dr(){return Dr=(0,Y.Z)(function*(V){const W=yield oa(V.firebaseDependencies);W&&(yield hs(V.firebaseDependencies,W.token),yield function Io(V){return wo.apply(this,arguments)}(V.firebaseDependencies));const se=yield V.swRegistration.pushManager.getSubscription();return!se||se.unsubscribe()}),Dr.apply(this,arguments)}function Yi(){return Yi=(0,Y.Z)(function*(V,W){try{const se=yield function ys(V,W){return co.apply(this,arguments)}(V.firebaseDependencies,W),qe=Object.assign(Object.assign({},W),{token:se,createTime:Date.now()});return yield Eo(V.firebaseDependencies,qe),se}catch(se){throw yield function Gn(V){return Dr.apply(this,arguments)}(V),se}}),Yi.apply(this,arguments)}function z(V,W){return j.apply(this,arguments)}function j(){return(j=(0,Y.Z)(function*(V,W){const qe={token:yield ms(V,W),createTime:Date.now(),subscriptionOptions:W};return yield Eo(V,qe),qe.token})).apply(this,arguments)}function ue(){return(ue=(0,Y.Z)(function*(V,W){return(yield V.pushManager.getSubscription())||V.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_o(W)})})).apply(this,arguments)}function Nn(V){const W={from:V.from,collapseKey:V.collapse_key,messageId:V.fcmMessageId};return function hi(V,W){if(!W.notification)return;V.notification={};const se=W.notification.title;se&&(V.notification.title=se);const qe=W.notification.body;qe&&(V.notification.body=qe);const Et=W.notification.image;Et&&(V.notification.image=Et);const St=W.notification.icon;St&&(V.notification.icon=St)}(W,V),function Ht(V,W){W.data&&(V.data=W.data)}(W,V),function Yn(V,W){var se,qe,Et,St,cn;if(!(W.fcmOptions||null!==(se=W.notification)&&void 0!==se&&se.click_action))return;V.fcmOptions={};const kn=null!==(Et=null===(qe=W.fcmOptions)||void 0===qe?void 0:qe.link)&&void 0!==Et?Et:null===(St=W.notification)||void 0===St?void 0:St.click_action;kn&&(V.fcmOptions.link=kn);const ln=null===(cn=W.fcmOptions)||void 0===cn?void 0:cn.analytics_label;ln&&(V.fcmOptions.analyticsLabel=ln)}(W,V),W}function Ma(V,W){const se=[];for(let qe=0;qe<V.length;qe++)se.push(V.charAt(qe)),qe<W.length&&se.push(W.charAt(qe));return se.join("")}function Ha(V){return qi.create("missing-app-config-values",{valueName:V})}Ma("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ma("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class il{constructor(W,se,qe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Et=function Ns(V){if(!V||!V.options)throw Ha("App Configuration Object");if(!V.name)throw Ha("App Name");const W=["projectId","apiKey","appId","messagingSenderId"],{options:se}=V;for(const qe of W)if(!se[qe])throw Ha(qe);return{appName:V.name,projectId:se.projectId,apiKey:se.apiKey,appId:se.appId,senderId:se.messagingSenderId}}(W);this.firebaseDependencies={app:W,appConfig:Et,installations:se,analyticsProvider:qe}}_delete(){return Promise.resolve()}}function Gs(V){return sl.apply(this,arguments)}function sl(){return(sl=(0,Y.Z)(function*(V){try{V.swRegistration=yield navigator.serviceWorker.register(ss,{scope:Wo}),V.swRegistration.update().catch(()=>{})}catch(W){throw qi.create("failed-service-worker-registration",{browserErrorMessage:null==W?void 0:W.message})}})).apply(this,arguments)}function za(){return(za=(0,Y.Z)(function*(V,W){if(!W&&!V.swRegistration&&(yield Gs(V)),W||!V.swRegistration){if(!(W instanceof ServiceWorkerRegistration))throw qi.create("invalid-sw-registration");V.swRegistration=W}})).apply(this,arguments)}function ol(){return(ol=(0,Y.Z)(function*(V,W){W?V.vapidKey=W:V.vapidKey||(V.vapidKey=Ko)})).apply(this,arguments)}function ks(){return ks=(0,Y.Z)(function*(V,W){if(!navigator)throw qi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qi.create("permission-blocked");return yield function uo(V,W){return ol.apply(this,arguments)}(V,null==W?void 0:W.vapidKey),yield function _a(V,W){return za.apply(this,arguments)}(V,null==W?void 0:W.serviceWorkerRegistration),function Qt(V){return $n.apply(this,arguments)}(V)}),ks.apply(this,arguments)}function Co(){return(Co=(0,Y.Z)(function*(V,W,se){const qe=function aa(V){switch(V){case Zs.NOTIFICATION_CLICKED:return"notification_open";case Zs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(W);(yield V.firebaseDependencies.analyticsProvider.get()).logEvent(qe,{message_id:se[no],message_name:se[ia],message_time:se[ro],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ra(){return Ra=(0,Y.Z)(function*(V,W){const se=W.data;if(!se.isFirebaseMessaging)return;V.onMessageHandler&&se.messageType===Zs.PUSH_RECEIVED&&("function"==typeof V.onMessageHandler?V.onMessageHandler(Nn(se)):V.onMessageHandler.next(Nn(se)));const qe=se.data;(function ya(V){return"object"==typeof V&&!!V&&no in V})(qe)&&"1"===qe[Hs]&&(yield function Qs(V,W,se){return Co.apply(this,arguments)}(V,se.messageType,qe))}),Ra.apply(this,arguments)}const al="@firebase/messaging",Ga=V=>{const W=new il(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),V.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",se=>function la(V,W){return Ra.apply(this,arguments)}(W,se)),W},Do=V=>{const W=V.getProvider("messaging").getImmediate();return{getToken:qe=>function os(V,W){return ks.apply(this,arguments)}(W,qe)}};function qo(){return To.apply(this,arguments)}function To(){return(To=(0,Y.Z)(function*(){try{yield(0,xe.eu)()}catch{return!1}return typeof window<"u"&&(0,xe.hl)()&&(0,xe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ll(){(0,ae._registerComponent)(new Pe.wA("messaging",Ga,"PUBLIC")),(0,ae._registerComponent)(new Pe.wA("messaging-internal",Do,"PRIVATE")),(0,ae.registerVersion)(al,"0.12.4"),(0,ae.registerVersion)(al,"0.12.4","esm2017")}();const as="analytics",ls="firebase_id",Xs="origin",Nr=6e4,es="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ol="https://www.googletagmanager.com/gtag/js",$i=new Ce.Yd("@firebase/analytics"),fs=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Mo(V){if(!V.startsWith(Ol)){const W=fs.create("invalid-gtag-resource",{gtagURL:V});return $i.warn(W.message),""}return V}function Ro(V){return Promise.all(V.map(W=>W.catch(se=>se)))}function U(){return(U=(0,Y.Z)(function*(V,W,se,qe,Et,St){const cn=qe[Et];try{if(cn)yield W[cn];else{const ln=(yield Ro(se)).find(wr=>wr.measurementId===Et);ln&&(yield W[ln.appId])}}catch(kn){$i.error(kn)}V("config",Et,St)})).apply(this,arguments)}function Ne(){return(Ne=(0,Y.Z)(function*(V,W,se,qe,Et){try{let St=[];if(Et&&Et.send_to){let cn=Et.send_to;Array.isArray(cn)||(cn=[cn]);const kn=yield Ro(se);for(const ln of cn){const wr=kn.find(tr=>tr.measurementId===ln),ni=wr&&W[wr.appId];if(!ni){St=[];break}St.push(ni)}}0===St.length&&(St=Object.values(W)),yield Promise.all(St),V("event",qe,Et||{})}catch(St){$i.error(St)}})).apply(this,arguments)}const Fr=30,vr=new class lr{constructor(W={},se=1e3){this.throttleMetadata=W,this.intervalMillis=se}getThrottleMetadata(W){return this.throttleMetadata[W]}setThrottleMetadata(W,se){this.throttleMetadata[W]=se}deleteThrottleMetadata(W){delete this.throttleMetadata[W]}};function ts(V){return new Headers({Accept:"application/json","x-goog-api-key":V})}function xn(){return(xn=(0,Y.Z)(function*(V){var W;const{appId:se,apiKey:qe}=V,Et={method:"GET",headers:ts(qe)},St=es.replace("{app-id}",se),cn=yield fetch(St,Et);if(200!==cn.status&&304!==cn.status){let kn="";try{const ln=yield cn.json();null!==(W=ln.error)&&void 0!==W&&W.message&&(kn=ln.error.message)}catch{}throw fs.create("config-fetch-failed",{httpStatus:cn.status,responseMessage:kn})}return cn.json()})).apply(this,arguments)}function hn(){return(hn=(0,Y.Z)(function*(V,W=vr,se){const{appId:qe,apiKey:Et,measurementId:St}=V.options;if(!qe)throw fs.create("no-app-id");if(!Et){if(St)return{measurementId:St,appId:qe};throw fs.create("no-api-key")}const cn=W.getThrottleMetadata(qe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},kn=new Ka;return setTimeout((0,Y.Z)(function*(){kn.abort()}),void 0!==se?se:Nr),Nt({appId:qe,apiKey:Et,measurementId:St},cn,kn,W)})).apply(this,arguments)}function Nt(V,W,se){return tn.apply(this,arguments)}function tn(){return tn=(0,Y.Z)(function*(V,{throttleEndTimeMillis:W,backoffCount:se},qe,Et=vr){var St;const{appId:cn,measurementId:kn}=V;try{yield function Di(V,W){return new Promise((se,qe)=>{const Et=Math.max(W-Date.now(),0),St=setTimeout(se,Et);V.addEventListener(()=>{clearTimeout(St),qe(fs.create("fetch-throttle",{throttleEndTimeMillis:W}))})})}(qe,W)}catch(ln){if(kn)return $i.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kn} provided in the "measurementId" field in the local Firebase config. [${null==ln?void 0:ln.message}]`),{appId:cn,measurementId:kn};throw ln}try{const ln=yield function dn(V){return xn.apply(this,arguments)}(V);return Et.deleteThrottleMetadata(cn),ln}catch(ln){const wr=ln;if(!function Wa(V){if(!(V instanceof xe.ZR&&V.customData))return!1;const W=Number(V.customData.httpStatus);return 429===W||500===W||503===W||504===W}(wr)){if(Et.deleteThrottleMetadata(cn),kn)return $i.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kn} provided in the "measurementId" field in the local Firebase config. [${null==wr?void 0:wr.message}]`),{appId:cn,measurementId:kn};throw ln}const ni=503===Number(null===(St=null==wr?void 0:wr.customData)||void 0===St?void 0:St.httpStatus)?(0,xe.$s)(se,Et.intervalMillis,Fr):(0,xe.$s)(se,Et.intervalMillis),tr={throttleEndTimeMillis:Date.now()+ni,backoffCount:se+1};return Et.setThrottleMetadata(cn,tr),$i.debug(`Calling attemptFetch again in ${ni} millis`),Nt(V,tr,qe,Et)}}),tn.apply(this,arguments)}class Ka{constructor(){this.listeners=[]}addEventListener(W){this.listeners.push(W)}abort(){this.listeners.forEach(W=>W())}}let Nl,ca;function pu(){return(pu=(0,Y.Z)(function*(V,W,se,qe,Et){if(Et&&Et.global)V("event",se,qe);else{const St=yield W;V("event",se,Object.assign(Object.assign({},qe),{send_to:St}))}})).apply(this,arguments)}function ti(){return(ti=(0,Y.Z)(function*(){if(!(0,xe.hl)())return $i.warn(fs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(V){return $i.warn(fs.create("indexeddb-unavailable",{errorInfo:null==V?void 0:V.toString()}).message),!1}return!0})).apply(this,arguments)}function Wi(){return Wi=(0,Y.Z)(function*(V,W,se,qe,Et,St,cn){var kn;const ln=function xo(V){return hn.apply(this,arguments)}(V);ln.then(Ki=>{se[Ki.measurementId]=Ki.appId,V.options.measurementId&&Ki.measurementId!==V.options.measurementId&&$i.warn(`The measurement ID in the local Firebase config (${V.options.measurementId}) does not match the measurement ID fetched from the server (${Ki.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ki=>$i.error(Ki)),W.push(ln);const wr=function Oa(){return ti.apply(this,arguments)}().then(Ki=>{if(Ki)return qe.getId()}),[ni,tr]=yield Promise.all([ln,wr]);(function jn(V){const W=window.document.getElementsByTagName("script");for(const se of Object.values(W))if(se.src&&se.src.includes(Ol)&&se.src.includes(V))return se;return null})(St)||function Ea(V,W){const se=function Wc(V,W){let se;return window.trustedTypes&&(se=window.trustedTypes.createPolicy(V,W)),se}("firebase-js-sdk-policy",{createScriptURL:Mo}),qe=document.createElement("script"),Et=`${Ol}?l=${V}&id=${W}`;qe.src=se?null==se?void 0:se.createScriptURL(Et):Et,qe.async=!0,document.head.appendChild(qe)}(St,ni.measurementId),ca&&(Et("consent","default",ca),function Ti(V){ca=V}(void 0)),Et("js",new Date);const Ms=null!==(kn=null==cn?void 0:cn.config)&&void 0!==kn?kn:{};return Ms[Xs]="firebase",Ms.update=!0,null!=tr&&(Ms[ls]=tr),Et("config",ni.measurementId,Ms),Nl&&(Et("set",Nl),function yr(V){Nl=V}(void 0)),ni.measurementId}),Wi.apply(this,arguments)}class On{constructor(W){this.app=W}_delete(){return delete bs[this.app.options.appId],Promise.resolve()}}let bs={},ns=[];const Oo={};let Ia,_s,No="dataLayer",kl="gtag",Na=!1;function Dc(V,W,se){!function oo(){const V=[];if((0,xe.ru)()&&V.push("This is a browser extension environment."),(0,xe.zI)()||V.push("Cookies are not available."),V.length>0){const W=V.map((qe,Et)=>`(${Et+1}) ${qe}`).join(" "),se=fs.create("invalid-analytics-context",{errorInfo:W});$i.warn(se.message)}}();const qe=V.options.appId;if(!qe)throw fs.create("no-app-id");if(!V.options.apiKey){if(!V.options.measurementId)throw fs.create("no-api-key");$i.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${V.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bs[qe])throw fs.create("already-exists",{id:qe});if(!Na){!function L(V){let W=[];Array.isArray(window[V])?W=window[V]:window[V]=W}(No);const{wrappedGtag:St,gtagCore:cn}=function Zt(V,W,se,qe,Et){let St=function(...cn){window[qe].push(arguments)};return window[Et]&&"function"==typeof window[Et]&&(St=window[Et]),window[Et]=function Ft(V,W,se,qe){function St(){return St=(0,Y.Z)(function*(cn,kn,ln){try{"event"===cn?yield function ce(V,W,se,qe,Et){return Ne.apply(this,arguments)}(V,W,se,kn,ln):"config"===cn?yield function J(V,W,se,qe,Et,St){return U.apply(this,arguments)}(V,W,se,qe,kn,ln):"consent"===cn?V("consent","update",ln):V("set",kn)}catch(wr){$i.error(wr)}}),St.apply(this,arguments)}return function Et(cn,kn,ln){return St.apply(this,arguments)}}(St,V,W,se),{gtagCore:St,wrappedGtag:window[Et]}}(bs,ns,Oo,No,kl);_s=St,Ia=cn,Na=!0}return bs[qe]=function hd(V,W,se,qe,Et,St,cn){return Wi.apply(this,arguments)}(V,ns,Oo,W,Ia,No,se),new On(V)}function vs(){return ko.apply(this,arguments)}function ko(){return(ko=(0,Y.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch{return!1}})).apply(this,arguments)}const ua="@firebase/analytics";!function dl(){(0,ae._registerComponent)(new Pe.wA(as,(W,{options:se})=>Dc(W.getProvider("app").getImmediate(),W.getProvider("installations-internal").getImmediate(),se),"PUBLIC")),(0,ae._registerComponent)(new Pe.wA("analytics-internal",function V(W){try{const se=W.getProvider(as).getImmediate();return{logEvent:(qe,Et,St)=>function fi(V,W,se,qe){V=(0,xe.m9)(V),function qa(V,W,se,qe,Et){return pu.apply(this,arguments)}(_s,bs[V.app.options.appId],W,se,qe).catch(Et=>$i.error(Et))}(se,qe,Et,St)}}catch(se){throw fs.create("interop-component-reg-failed",{reason:se})}},"PRIVATE")),(0,ae.registerVersion)(ua,"0.9.5"),(0,ae.registerVersion)(ua,"0.9.5","esm2017")}();var pd=k(4408),Fo=k(7565);const lc=new class ka extends Fo.v{}(class uh extends pd.o{constructor(W,se){super(W,se),this.scheduler=W,this.work=se}schedule(W,se=0){return se>0?super.schedule(W,se):(this.delay=se,this.state=W,this.scheduler.flush(this),this)}execute(W,se){return se>0||this.closed?super.execute(W,se):this._execute(W,se)}requestAsyncId(W,se,qe=0){return null!=qe&&qe>0||null==qe&&this.delay>0?super.requestAsyncId(W,se,qe):(W.flush(this),0)}});var mi=k(4986),Mc=k(8505),Za=k(5363),Lo=k(9468);const Bo=new y.GfV("7.5.0"),S="__angularfire_symbol__analyticsIsSupportedValue",R="__angularfire_symbol__analyticsIsSupported",b="__angularfire_symbol__remoteConfigIsSupportedValue",N="__angularfire_symbol__remoteConfigIsSupported",H="__angularfire_symbol__messagingIsSupportedValue",re="__angularfire_symbol__messagingIsSupported";function Un(V,W,se){if(W){if(1===W.length)return W[0];const St=W.filter(cn=>cn.app===se);if(1===St.length)return St[0]}return se.container.getProvider(V).getImmediate({optional:!0})}globalThis[R]||(globalThis[R]=vs().then(V=>globalThis[S]=V).catch(()=>globalThis[S]=!1)),globalThis[re]||(globalThis[re]=qo().then(V=>globalThis[H]=V).catch(()=>globalThis[H]=!1)),globalThis[N]||(globalThis[N]=zo().then(V=>globalThis[b]=V).catch(()=>globalThis[b]=!1));const Vn=(V,W)=>{const se=W?[W]:(0,g.C6)(),qe=[];return se.forEach(Et=>{Et.container.getProvider(V).instances.forEach(cn=>{qe.includes(cn)||qe.push(cn)})}),qe};function ai(){}class jr{constructor(W,se=lc){this.zone=W,this.delegate=se}now(){return this.delegate.now()}schedule(W,se,qe){const Et=this.zone;return this.delegate.schedule(function(cn){Et.runGuarded(()=>{W.apply(this,[cn])})},se,qe)}}class Tr{constructor(W){this.zone=W,this.task=null}call(W,se){const qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ai,{},ai,ai)),se.pipe((0,Mc.b)({next:qe,complete:qe,error:qe})).subscribe(W).add(qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zi=(()=>{class V{constructor(se){this.ngZone=se,this.outsideAngular=se.runOutsideAngular(()=>new jr(Zone.current)),this.insideAngular=se.run(()=>new jr(Zone.current,mi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return V.\u0275fac=function(se){return new(se||V)(y.LFG(y.R0b))},V.\u0275prov=y.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function Fs(){const V=globalThis.\u0275AngularFireScheduler;if(!V)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return V}function hl(V){return V.pipe((0,Za.Q)(Fs().outsideAngular))}function fl(V){return Fs(),function Fl(V){return function(se){return(se=se.lift(new Tr(V.ngZone))).pipe((0,Lo.R)(V.outsideAngular),(0,Za.Q)(V.insideAngular))}}(Fs())(V)}},8277:(on,ot,k)=>{"use strict";k.d(ot,{$:()=>Dr,A:()=>pe,D:()=>je,I:()=>Ci,J:()=>be,L:()=>ss,N:()=>ur,P:()=>wn,Q:()=>Ss,R:()=>Mc,U:()=>di,V:()=>Os,W:()=>io,X:()=>zs,Y:()=>Eo,Z:()=>ma,_:()=>qi,a:()=>bc,a0:()=>Yi,a1:()=>j,a2:()=>Nn,a3:()=>Ns,a4:()=>il,a5:()=>sl,a6:()=>za,a7:()=>ol,a8:()=>ks,a9:()=>Co,aA:()=>ne,aB:()=>wp,aC:()=>An,aD:()=>Pr,aE:()=>xc,aF:()=>ln,aG:()=>kn,aH:()=>gr,aL:()=>Yo,aO:()=>oa,aa:()=>aa,ab:()=>Ra,ac:()=>al,ad:()=>ll,ae:()=>To,af:()=>Ao,ai:()=>Ws,aj:()=>sc,ak:()=>as,an:()=>hs,ao:()=>Ro,aq:()=>lr,ar:()=>tn,as:()=>Me,at:()=>rt,au:()=>Oe,av:()=>ze,aw:()=>Yc,ax:()=>Ef,ay:()=>Mt,az:()=>Ae,b:()=>oc,c:()=>ps,d:()=>Fl,e:()=>ho,f:()=>tr,g:()=>$o,h:()=>Ii,i:()=>ko,j:()=>cc,k:()=>Ed,l:()=>R,m:()=>Qc,p:()=>me,r:()=>N,s:()=>Bo,u:()=>ht});var y=k(5861),g=k(2090),Y=k(9681),ae=k(655),xe=k(1877),Pe=k(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const je=function De(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Be=function Fe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Xe=new g.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new xe.Yd("@firebase/auth");function lt(M,..._){_e.logLevel<=xe.in.ERROR&&_e.error(`Auth (${Y.SDK_VERSION}): ${M}`,..._)}function ze(M,..._){throw Ke(M,..._)}function Ae(M,..._){return Ke(M,..._)}function q(M,_,I){const x=Object.assign(Object.assign({},Be()),{[_]:I});return new g.LL("auth","Firebase",x).create(_,{appName:M.name})}function pt(M,_,I){if(!(_ instanceof I))throw I.name!==_.constructor.name&&ze(M,"argument-error"),q(M,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(M,..._){if("string"!=typeof M){const I=_[0],x=[..._.slice(1)];return x[0]&&(x[0].appName=M.name),M._errorFactory.create(I,...x)}return Xe.create(M,..._)}function ne(M,_,...I){if(!M)throw Ke(_,...I)}function nt(M){const _="INTERNAL ASSERTION FAILED: "+M;throw lt(_),new Error(_)}function Me(M,_){M||nt(_)}function et(){var M;return typeof self<"u"&&(null===(M=self.location)||void 0===M?void 0:M.href)||""}function vt(){return"http:"===Le()||"https:"===Le()}function Le(){var M;return typeof self<"u"&&(null===(M=self.location)||void 0===M?void 0:M.protocol)||null}class yt{constructor(_,I){this.shortDelay=_,this.longDelay=I,Me(I>_,"Short delay should be less than long delay!"),this.isMobile=(0,g.uI)()||(0,g.b$)()}get(){return function ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,g.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function We(M,_){Me(M.emulator,"Emulator should always be set here");const{url:I}=M.emulator;return _?`${I}${_.startsWith("/")?_.slice(1):_}`:I}class He{static initialize(_,I,x){this.fetchImpl=_,I&&(this.headersImpl=I),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_t=new yt(3e4,6e4);function mt(M,_){return M.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:M.tenantId}):_}function Ct(M,_,I,x){return jt.apply(this,arguments)}function jt(){return(jt=(0,y.Z)(function*(M,_,I,x,te={}){return _n(M,te,(0,y.Z)(function*(){let Ee={},It={};x&&("GET"===_?It=x:Ee={body:JSON.stringify(x)});const Bt=(0,g.xO)(Object.assign({key:M.config.apiKey},It)).slice(1),Mn=yield M._getAdditionalHeaders();return Mn["Content-Type"]="application/json",M.languageCode&&(Mn["X-Firebase-Locale"]=M.languageCode),He.fetch()(Jt(M,M.config.apiHost,I,Bt),Object.assign({method:_,headers:Mn,referrerPolicy:"no-referrer"},Ee))}))})).apply(this,arguments)}function _n(M,_,I){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,y.Z)(function*(M,_,I){M._canInitEmulator=!1;const x=Object.assign(Object.assign({},Ge),_);try{const te=new Cn(M),Ee=yield Promise.race([I(),te.promise]);te.clearNetworkTimeout();const It=yield Ee.json();if("needConfirmation"in It)throw Fn(M,"account-exists-with-different-credential",It);if(Ee.ok&&!("errorMessage"in It))return It;{const Bt=Ee.ok?It.errorMessage:It.error.message,[Mn,Ln]=Bt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Mn)throw Fn(M,"credential-already-in-use",It);if("EMAIL_EXISTS"===Mn)throw Fn(M,"email-already-in-use",It);if("USER_DISABLED"===Mn)throw Fn(M,"user-disabled",It);const Wn=x[Mn]||Mn.toLowerCase().replace(/[_\s]+/g,"-");if(Ln)throw q(M,Wn,Ln);ze(M,Wn)}}catch(te){if(te instanceof g.ZR)throw te;ze(M,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function ct(M,_,I,x){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,y.Z)(function*(M,_,I,x,te={}){const Ee=yield Ct(M,_,I,x,te);return"mfaPendingCredential"in Ee&&ze(M,"multi-factor-auth-required",{_serverResponse:Ee}),Ee})).apply(this,arguments)}function Jt(M,_,I,x){const te=`${_}${I}?${x}`;return M.config.emulator?We(M.config,te):`${M.config.apiScheme}://${te}`}class Cn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((I,x)=>{this.timer=setTimeout(()=>x(Ae(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(M,_,I){const x={appName:M.name};I.email&&(x.email=I.email),I.phoneNumber&&(x.phoneNumber=I.phoneNumber);const te=Ae(M,_,x);return te.customData._tokenResponse=I,te}function nn(){return(nn=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function Ut(){return(Ut=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Hn(){return(Hn=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function un(M){if(M)try{const _=new Date(Number(M));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function Ir(){return(Ir=(0,y.Z)(function*(M,_=!1){const I=(0,g.m9)(M),x=yield I.getIdToken(_),te=Gr(x);ne(te&&te.exp&&te.auth_time&&te.iat,I.auth,"internal-error");const Ee="object"==typeof te.firebase?te.firebase:void 0,It=null==Ee?void 0:Ee.sign_in_provider;return{claims:te,token:x,authTime:un(Ni(te.auth_time)),issuedAtTime:un(Ni(te.iat)),expirationTime:un(Ni(te.exp)),signInProvider:It||null,signInSecondFactor:(null==Ee?void 0:Ee.sign_in_second_factor)||null}})).apply(this,arguments)}function Ni(M){return 1e3*Number(M)}function Gr(M){const[_,I,x]=M.split(".");if(void 0===_||void 0===I||void 0===x)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,g.tV)(I);return te?JSON.parse(te):(lt("Failed to decode base64 JWT payload"),null)}catch(te){return lt("Caught error parsing JWT payload as JSON",null==te?void 0:te.toString()),null}}function fr(M,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,y.Z)(function*(M,_,I=!1){if(I)return _;try{return yield _}catch(x){throw x instanceof g.ZR&&function rn({code:M}){return"auth/user-disabled"===M||"auth/user-token-expired"===M}(x)&&M.auth.currentUser===M&&(yield M.auth.signOut()),x}})).apply(this,arguments)}class xr{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var I;if(_){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const te=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(_=!1){var I=this;if(!this.isRunning)return;const x=this.getInterval(_);this.timerId=setTimeout((0,y.Z)(function*(){yield I.iteration()}),x)}iteration(){var _=this;return(0,y.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null==I?void 0:I.code)&&_.schedule(!0))}_.schedule()})()}}class Lr{constructor(_,I){this.createdAt=_,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=un(this.lastLoginAt),this.creationTime=un(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(M){return si.apply(this,arguments)}function si(){return si=(0,y.Z)(function*(M){var _;const I=M.auth,x=yield M.getIdToken(),te=yield fr(M,function nr(M,_){return Hn.apply(this,arguments)}(I,{idToken:x}));ne(null==te?void 0:te.users.length,I,"internal-error");const Ee=te.users[0];M._notifyReloadListener(Ee);const It=null!==(_=Ee.providerUserInfo)&&void 0!==_&&_.length?function Zr(M){return M.map(_=>{var{providerId:I}=_,x=(0,ae._T)(_,["providerId"]);return{providerId:I,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(Ee.providerUserInfo):[],Bt=function Er(M,_){return[...M.filter(x=>!_.some(te=>te.providerId===x.providerId)),..._]}(M.providerData,It),Wn=!!M.isAnonymous&&!(M.email&&Ee.passwordHash||null!=Bt&&Bt.length),qr={uid:Ee.localId,displayName:Ee.displayName||null,photoURL:Ee.photoUrl||null,email:Ee.email||null,emailVerified:Ee.emailVerified||!1,phoneNumber:Ee.phoneNumber||null,tenantId:Ee.tenantId||null,providerData:Bt,metadata:new Lr(Ee.createdAt,Ee.lastLoginAt),isAnonymous:Wn};Object.assign(M,qr)}),si.apply(this,arguments)}function xi(){return(xi=(0,y.Z)(function*(M){const _=(0,g.m9)(M);yield cr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function bi(){return(bi=(0,y.Z)(function*(M,_){const I=yield _n(M,{},(0,y.Z)(function*(){const x=(0,g.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:te,apiKey:Ee}=M.config,It=Jt(M,te,"/v1/token",`key=${Ee}`),Bt=yield M._getAdditionalHeaders();return Bt["Content-Type"]="application/x-www-form-urlencoded",He.fetch()(It,{method:"POST",headers:Bt,body:x})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class Xn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){ne(_.idToken,"internal-error"),ne(typeof _.idToken<"u","internal-error"),ne(typeof _.refreshToken<"u","internal-error");const I="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Ar(M){const _=Gr(M);return ne(_,"internal-error"),ne(typeof _.exp<"u","internal-error"),ne(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,I)}getToken(_,I=!1){var x=this;return(0,y.Z)(function*(){return ne(!x.accessToken||x.refreshToken,_,"user-token-expired"),I||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(_,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,I){var x=this;return(0,y.Z)(function*(){const{accessToken:te,refreshToken:Ee,expiresIn:It}=yield function er(M,_){return bi.apply(this,arguments)}(_,I);x.updateTokensAndExpiration(te,Ee,Number(It))})()}updateTokensAndExpiration(_,I,x){this.refreshToken=I||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(_,I){const{refreshToken:x,accessToken:te,expirationTime:Ee}=I,It=new Xn;return x&&(ne("string"==typeof x,"internal-error",{appName:_}),It.refreshToken=x),te&&(ne("string"==typeof te,"internal-error",{appName:_}),It.accessToken=te),Ee&&(ne("number"==typeof Ee,"internal-error",{appName:_}),It.expirationTime=Ee),It}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new Xn,this.toJSON())}_performRefresh(){return nt("not implemented")}}function mn(M,_){ne("string"==typeof M||typeof M>"u","internal-error",{appName:_})}class Gt{constructor(_){var{uid:I,auth:x,stsTokenManager:te}=_,Ee=(0,ae._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=x,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=Ee.displayName||null,this.email=Ee.email||null,this.emailVerified=Ee.emailVerified||!1,this.phoneNumber=Ee.phoneNumber||null,this.photoURL=Ee.photoURL||null,this.isAnonymous=Ee.isAnonymous||!1,this.tenantId=Ee.tenantId||null,this.providerData=Ee.providerData?[...Ee.providerData]:[],this.metadata=new Lr(Ee.createdAt||void 0,Ee.lastLoginAt||void 0)}getIdToken(_){var I=this;return(0,y.Z)(function*(){const x=yield fr(I,I.stsTokenManager.getToken(I.auth,_));return ne(x,I.auth,"internal-error"),I.accessToken!==x&&(I.accessToken=x,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),x})()}getIdTokenResult(_){return function ci(M){return Ir.apply(this,arguments)}(this,_)}reload(){return function Vr(M){return xi.apply(this,arguments)}(this)}_assign(_){this!==_&&(ne(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(I=>Object.assign({},I)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const I=new Gt(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return I.metadata._copy(this.metadata),I}_onReload(_){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,I=!1){var x=this;return(0,y.Z)(function*(){let te=!1;_.idToken&&_.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(_),te=!0),I&&(yield cr(x)),yield x.auth._persistUserIfCurrent(x),te&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var _=this;return(0,y.Z)(function*(){const I=yield _.getIdToken();return yield fr(_,function gn(M,_){return nn.apply(this,arguments)}(_.auth,{idToken:I})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,I){var x,te,Ee,It,Bt,Mn,Ln,Wn;const qr=null!==(x=I.displayName)&&void 0!==x?x:void 0,Bi=null!==(te=I.email)&&void 0!==te?te:void 0,Mi=null!==(Ee=I.phoneNumber)&&void 0!==Ee?Ee:void 0,lo=null!==(It=I.photoURL)&&void 0!==It?It:void 0,Jc=null!==(Bt=I.tenantId)&&void 0!==Bt?Bt:void 0,Fa=null!==(Mn=I._redirectEventId)&&void 0!==Mn?Mn:void 0,eu=null!==(Ln=I.createdAt)&&void 0!==Ln?Ln:void 0,Fc=null!==(Wn=I.lastLoginAt)&&void 0!==Wn?Wn:void 0,{uid:Ul,emailVerified:mh,isAnonymous:Or,providerData:tu,stsTokenManager:Il}=I;ne(Ul&&Il,_,"internal-error");const Cu=Xn.fromJSON(this.name,Il);ne("string"==typeof Ul,_,"internal-error"),mn(qr,_.name),mn(Bi,_.name),ne("boolean"==typeof mh,_,"internal-error"),ne("boolean"==typeof Or,_,"internal-error"),mn(Mi,_.name),mn(lo,_.name),mn(Jc,_.name),mn(Fa,_.name),mn(eu,_.name),mn(Fc,_.name);const Vl=new Gt({uid:Ul,auth:_,email:Bi,emailVerified:mh,displayName:qr,isAnonymous:Or,photoURL:lo,phoneNumber:Mi,tenantId:Jc,stsTokenManager:Cu,createdAt:eu,lastLoginAt:Fc});return tu&&Array.isArray(tu)&&(Vl.providerData=tu.map(Df=>Object.assign({},Df))),Fa&&(Vl._redirectEventId=Fa),Vl}static _fromIdTokenResponse(_,I,x=!1){return(0,y.Z)(function*(){const te=new Xn;te.updateFromServerResponse(I);const Ee=new Gt({uid:I.localId,auth:_,stsTokenManager:te,isAnonymous:x});return yield cr(Ee),Ee})()}}const En=new Map;function An(M){Me(M instanceof Function,"Expected a class definition");let _=En.get(M);return _?(Me(_ instanceof M,"Instance stored in cache mismatched with class"),_):(_=new M,En.set(M,_),_)}const ur=(()=>{class M{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(I,x){var te=this;return(0,y.Z)(function*(){te.storage[I]=x})()}_get(I){var x=this;return(0,y.Z)(function*(){const te=x.storage[I];return void 0===te?null:te})()}_remove(I){var x=this;return(0,y.Z)(function*(){delete x.storage[I]})()}_addListener(I,x){}_removeListener(I,x){}}return M.type="NONE",M})();function Pr(M,_,I){return`firebase:${M}:${_}:${I}`}class Ze{constructor(_,I,x){this.persistence=_,this.auth=I,this.userKey=x;const{config:te,name:Ee}=this.auth;this.fullUserKey=Pr(this.userKey,te.apiKey,Ee),this.fullPersistenceKey=Pr("persistence",te.apiKey,Ee),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,y.Z)(function*(){const I=yield _.persistence._get(_.fullUserKey);return I?Gt._fromJSON(_.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var I=this;return(0,y.Z)(function*(){if(I.persistence===_)return;const x=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=_,x?I.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,I,x="authUser"){return(0,y.Z)(function*(){if(!I.length)return new Ze(An(ur),_,x);const te=(yield Promise.all(I.map(function(){var Ln=(0,y.Z)(function*(Wn){if(yield Wn._isAvailable())return Wn});return function(Wn){return Ln.apply(this,arguments)}}()))).filter(Ln=>Ln);let Ee=te[0]||An(ur);const It=Pr(x,_.config.apiKey,_.name);let Bt=null;for(const Ln of I)try{const Wn=yield Ln._get(It);if(Wn){const qr=Gt._fromJSON(_,Wn);Ln!==Ee&&(Bt=qr),Ee=Ln;break}}catch{}const Mn=te.filter(Ln=>Ln._shouldAllowMigration);return Ee._shouldAllowMigration&&Mn.length?(Ee=Mn[0],Bt&&(yield Ee._set(It,Bt.toJSON())),yield Promise.all(I.map(function(){var Ln=(0,y.Z)(function*(Wn){if(Wn!==Ee)try{yield Wn._remove(It)}catch{}});return function(Wn){return Ln.apply(this,arguments)}}())),new Ze(Ee,_,x)):new Ze(Ee,_,x)})()}}function Ve(M){const _=M.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(dt(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(fe(_))return"Firefox";if(_.includes("silk/"))return"Silk";if($e(_))return"Blackberry";if(we(_))return"Webos";if(ve(_))return"Safari";if((_.includes("chrome/")||he(_))&&!_.includes("edge/"))return"Chrome";if(Oe(_))return"Android";{const x=M.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function fe(M=(0,g.z$)()){return/firefox\//i.test(M)}function ve(M=(0,g.z$)()){const _=M.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function he(M=(0,g.z$)()){return/crios\//i.test(M)}function dt(M=(0,g.z$)()){return/iemobile/i.test(M)}function Oe(M=(0,g.z$)()){return/android/i.test(M)}function $e(M=(0,g.z$)()){return/blackberry/i.test(M)}function we(M=(0,g.z$)()){return/webos/i.test(M)}function rt(M=(0,g.z$)()){return/iphone|ipad|ipod/i.test(M)||/macintosh/i.test(M)&&/mobile/i.test(M)}function Mt(M=(0,g.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(M)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(M)}function fn(M=(0,g.z$)()){return rt(M)||Oe(M)||we(M)||$e(M)||/windows phone/i.test(M)||dt(M)}function Jr(M,_=[]){let I;switch(M){case"Browser":I=Ve((0,g.z$)());break;case"Worker":I=`${Ve((0,g.z$)())}-${M}`;break;default:I=M}const x=_.length?_.join(","):"FirebaseCore-web";return`${I}/JsCore/${Y.SDK_VERSION}/${x}`}function rs(){return(rs=(0,y.Z)(function*(M){return(yield Ct(M,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vi(M,_){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,y.Z)(function*(M,_){return Ct(M,"GET","/v2/recaptchaConfig",mt(M,_))})).apply(this,arguments)}function is(M){return void 0!==M&&void 0!==M.getResponse}function ws(M){return void 0!==M&&void 0!==M.enterprise}class pr{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(I=>"EMAIL_PASSWORD_PROVIDER"===I.provider&&"OFF"!==I.enforcementState)}}function Qr(M){return new Promise((_,I)=>{const x=document.createElement("script");x.setAttribute("src",M),x.onload=_,x.onerror=te=>{const Ee=Ae("internal-error");Ee.customData=te,I(Ee)},x.type="text/javascript",x.charset="UTF-8",function pi(){var M,_;return null!==(_=null===(M=document.getElementsByTagName("head"))||void 0===M?void 0:M[0])&&void 0!==_?_:document}().appendChild(x)})}function rr(M){return`__${M}${Math.floor(1e6*Math.random())}`}class oi{constructor(_){this.type="recaptcha-enterprise",this.auth=gr(_)}verify(_="verify",I=!1){var x=this;return(0,y.Z)(function*(){function Ee(){return Ee=(0,y.Z)(function*(Bt){if(!I){if(null==Bt.tenantId&&null!=Bt._agentRecaptchaConfig)return Bt._agentRecaptchaConfig.siteKey;if(null!=Bt.tenantId&&void 0!==Bt._tenantRecaptchaConfigs[Bt.tenantId])return Bt._tenantRecaptchaConfigs[Bt.tenantId].siteKey}return new Promise(function(){var Mn=(0,y.Z)(function*(Ln,Wn){Vi(Bt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(qr=>{if(void 0!==qr.recaptchaKey){const Bi=new pr(qr);return null==Bt.tenantId?Bt._agentRecaptchaConfig=Bi:Bt._tenantRecaptchaConfigs[Bt.tenantId]=Bi,Ln(Bi.siteKey)}Wn(new Error("recaptcha Enterprise site key undefined"))}).catch(qr=>{Wn(qr)})});return function(Ln,Wn){return Mn.apply(this,arguments)}}())}),Ee.apply(this,arguments)}function It(Bt,Mn,Ln){const Wn=window.grecaptcha;ws(Wn)?Wn.enterprise.ready(()=>{try{Wn.enterprise.execute(Bt,{action:_}).then(qr=>{Mn(qr)}).catch(qr=>{Ln(qr)})}catch(qr){Ln(qr)}}):Ln(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Bt,Mn)=>{(function te(Bt){return Ee.apply(this,arguments)})(x.auth).then(Ln=>{if(!I&&ws(window.grecaptcha))It(Ln,Bt,Mn);else{if(typeof window>"u")return void Mn(new Error("RecaptchaVerifier is only supported in browser"));Qr("https://www.google.com/recaptcha/enterprise.js?render="+Ln).then(()=>{It(Ln,Bt,Mn)}).catch(Wn=>{Mn(Wn)})}}).catch(Ln=>{Mn(Ln)})})})()}}function Fi(M,_,I){return gi.apply(this,arguments)}function gi(){return(gi=(0,y.Z)(function*(M,_,I,x=!1){const te=new oi(M);let Ee;try{Ee=yield te.verify(I)}catch{Ee=yield te.verify(I,!0)}const It=Object.assign({},_);return Object.assign(It,x?{captchaResp:Ee}:{captchaResponse:Ee}),Object.assign(It,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(It,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),It})).apply(this,arguments)}class bn{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,I){const x=Ee=>new Promise((It,Bt)=>{try{It(_(Ee))}catch(Mn){Bt(Mn)}});x.onAbort=I,this.queue.push(x);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(_){var I=this;return(0,y.Z)(function*(){if(I.auth.currentUser===_)return;const x=[];try{for(const te of I.queue)yield te(_),te.onAbort&&x.push(te.onAbort)}catch(te){x.reverse();for(const Ee of x)try{Ee()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:null==te?void 0:te.message})}})()}}class ar{constructor(_,I,x,te){this.app=_,this.heartbeatServiceProvider=I,this.appCheckServiceProvider=x,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ui(this),this.idTokenSubscription=new ui(this),this.beforeStateQueue=new bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(_,I){var x=this;return I&&(this._popupRedirectResolver=An(I)),this._initializationPromise=this.queue((0,y.Z)(function*(){var te,Ee;if(!x._deleted&&(x.persistenceManager=yield Ze.create(x,_),!x._deleted)){if(null!==(te=x._popupRedirectResolver)&&void 0!==te&&te._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(I),x.lastNotifiedUid=(null===(Ee=x.currentUser)||void 0===Ee?void 0:Ee.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,y.Z)(function*(){if(_._deleted)return;const I=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||I){if(_.currentUser&&I&&_.currentUser.uid===I.uid)return _._currentUser._assign(I),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(I,!0)}})()}initializeCurrentUser(_){var I=this;return(0,y.Z)(function*(){var x;const te=yield I.assertedPersistence.getCurrentUser();let Ee=te,It=!1;if(_&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const Bt=null===(x=I.redirectUser)||void 0===x?void 0:x._redirectEventId,Mn=null==Ee?void 0:Ee._redirectEventId,Ln=yield I.tryRedirectSignIn(_);(!Bt||Bt===Mn)&&null!=Ln&&Ln.user&&(Ee=Ln.user,It=!0)}if(!Ee)return I.directlySetCurrentUser(null);if(!Ee._redirectEventId){if(It)try{yield I.beforeStateQueue.runMiddleware(Ee)}catch(Bt){Ee=te,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(Bt))}return Ee?I.reloadAndSetCurrentUserOrClear(Ee):I.directlySetCurrentUser(null)}return ne(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===Ee._redirectEventId?I.directlySetCurrentUser(Ee):I.reloadAndSetCurrentUserOrClear(Ee)})()}tryRedirectSignIn(_){var I=this;return(0,y.Z)(function*(){let x=null;try{x=yield I._popupRedirectResolver._completeRedirectFn(I,_,!0)}catch{yield I._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(_){var I=this;return(0,y.Z)(function*(){try{yield cr(_)}catch(x){if("auth/network-request-failed"!==(null==x?void 0:x.code))return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function bt(){if(typeof navigator>"u")return null;const M=navigator;return M.languages&&M.languages[0]||M.language||null}()}_delete(){var _=this;return(0,y.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var I=this;return(0,y.Z)(function*(){const x=_?(0,g.m9)(_):null;return x&&ne(x.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(x&&x._clone(I))})()}_updateCurrentUser(_,I=!1){var x=this;return(0,y.Z)(function*(){if(!x._deleted)return _&&ne(x.tenantId===_.tenantId,x,"tenant-id-mismatch"),I||(yield x.beforeStateQueue.runMiddleware(_)),x.queue((0,y.Z)(function*(){yield x.directlySetCurrentUser(_),x.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,y.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var I=this;return this.queue((0,y.Z)(function*(){yield I.assertedPersistence.setPersistence(An(_))}))}initializeRecaptchaConfig(){var _=this;return(0,y.Z)(function*(){const I=yield Vi(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),x=new pr(I);null==_.tenantId?_._agentRecaptchaConfig=x:_._tenantRecaptchaConfigs[_.tenantId]=x,x.emailPasswordEnabled&&new oi(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new g.LL("auth","Firebase",_())}onAuthStateChanged(_,I,x){return this.registerStateListener(this.authStateSubscription,_,I,x)}beforeAuthStateChanged(_,I){return this.beforeStateQueue.pushCallback(_,I)}onIdTokenChanged(_,I,x){return this.registerStateListener(this.idTokenSubscription,_,I,x)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,I){var x=this;return(0,y.Z)(function*(){const te=yield x.getOrInitRedirectPersistenceManager(I);return null===_?te.removeCurrentUser():te.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var I=this;return(0,y.Z)(function*(){if(!I.redirectPersistenceManager){const x=_&&An(_)||I._popupRedirectResolver;ne(x,I,"argument-error"),I.redirectPersistenceManager=yield Ze.create(I,[An(x._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(_){var I=this;return(0,y.Z)(function*(){var x,te;return I._isInitialized&&(yield I.queue((0,y.Z)(function*(){}))),(null===(x=I._currentUser)||void 0===x?void 0:x._redirectEventId)===_?I._currentUser:(null===(te=I.redirectUser)||void 0===te?void 0:te._redirectEventId)===_?I.redirectUser:null})()}_persistUserIfCurrent(_){var I=this;return(0,y.Z)(function*(){if(_===I.currentUser)return I.queue((0,y.Z)(function*(){return I.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(I=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,I,x,te){if(this._deleted)return()=>{};const Ee="function"==typeof I?I:I.next.bind(I),It=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(It,this,"internal-error"),It.then(()=>Ee(this.currentUser)),"function"==typeof I?_.addObserver(I,x,te):_.addObserver(I)}directlySetCurrentUser(_){var I=this;return(0,y.Z)(function*(){I.currentUser&&I.currentUser!==_&&I._currentUser._stopProactiveRefresh(),_&&I.isProactiveRefreshEnabled&&_._startProactiveRefresh(),I.currentUser=_,_?yield I.assertedPersistence.setCurrentUser(_):yield I.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=Jr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,y.Z)(function*(){var I;const x={"X-Client-Version":_.clientVersion};_.app.options.appId&&(x["X-Firebase-gmpid"]=_.app.options.appId);const te=yield null===(I=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();te&&(x["X-Firebase-Client"]=te);const Ee=yield _._getAppCheckToken();return Ee&&(x["X-Firebase-AppCheck"]=Ee),x})()}_getAppCheckToken(){var _=this;return(0,y.Z)(function*(){var I;const x=yield null===(I=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getToken();return null!=x&&x.error&&function oe(M,..._){_e.logLevel<=xe.in.WARN&&_e.warn(`Auth (${Y.SDK_VERSION}): ${M}`,..._)}(`Error while retrieving App Check token: ${x.error}`),null==x?void 0:x.token})()}}function gr(M){return(0,g.m9)(M)}class ui{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,g.ne)(I=>this.observer=I)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ci(M,_,I){const x=gr(M);ne(x._canInitEmulator,x,"emulator-config-failed"),ne(/^https?:\/\//.test(_),x,"invalid-emulator-scheme");const te=!(null==I||!I.disableWarnings),Ee=Br(_),{host:It,port:Bt}=function de(M){const _=Br(M),I=/(\/\/)?([^?#/]+)/.exec(M.substr(_.length));if(!I)return{host:"",port:null};const x=I[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(x);if(te){const Ee=te[1];return{host:Ee,port:Re(x.substr(Ee.length+1))}}{const[Ee,It]=x.split(":");return{host:Ee,port:Re(It)}}}(_);x.config.emulator={url:`${Ee}//${It}${null===Bt?"":`:${Bt}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:It,port:Bt,protocol:Ee.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function Ye(){function M(){const _=document.createElement("p"),I=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",M):M())}()}function Br(M){const _=M.indexOf(":");return _<0?"":M.substr(0,_+1)}function Re(M){if(!M)return null;const _=Number(M);return isNaN(_)?null:_}class be{constructor(_,I){this.providerId=_,this.signInMethod=I}toJSON(){return nt("not implemented")}_getIdTokenResponse(_){return nt("not implemented")}_linkToIdToken(_,I){return nt("not implemented")}_getReauthenticationResolver(_){return nt("not implemented")}}function tt(M,_){return st.apply(this,arguments)}function st(){return(st=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:resetPassword",mt(M,_))})).apply(this,arguments)}function kt(M,_){return $t.apply(this,arguments)}function $t(){return($t=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function zt(){return(zt=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:update",mt(M,_))})).apply(this,arguments)}function pn(M,_){return qn.apply(this,arguments)}function qn(){return(qn=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signInWithPassword",mt(M,_))})).apply(this,arguments)}function Qn(M,_){return Je.apply(this,arguments)}function Je(){return(Je=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:sendOobCode",mt(M,_))})).apply(this,arguments)}function wt(){return(wt=(0,y.Z)(function*(M,_){return Qn(M,_)})).apply(this,arguments)}function Vt(M,_){return an.apply(this,arguments)}function an(){return(an=(0,y.Z)(function*(M,_){return Qn(M,_)})).apply(this,arguments)}function Bn(M,_){return mr.apply(this,arguments)}function mr(){return(mr=(0,y.Z)(function*(M,_){return Qn(M,_)})).apply(this,arguments)}function kr(){return(kr=(0,y.Z)(function*(M,_){return Qn(M,_)})).apply(this,arguments)}function Ei(){return(Ei=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signInWithEmailLink",mt(M,_))})).apply(this,arguments)}function js(){return(js=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signInWithEmailLink",mt(M,_))})).apply(this,arguments)}class Ys extends be{constructor(_,I,x,te=null){super("password",x),this._email=_,this._password=I,this._tenantId=te}static _fromEmailAndPassword(_,I){return new Ys(_,I,"password")}static _fromEmailAndCode(_,I,x=null){return new Ys(_,I,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const I="string"==typeof _?JSON.parse(_):_;if(null!=I&&I.email&&null!=I&&I.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(_){var I=this;return(0,y.Z)(function*(){var x;switch(I.signInMethod){case"password":const te={returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=_._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Ee=yield Fi(_,te,"signInWithPassword");return pn(_,Ee)}return pn(_,te).catch(function(){var Ee=(0,y.Z)(function*(It){if("auth/missing-recaptcha-token"===It.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Bt=yield Fi(_,te,"signInWithPassword");return pn(_,Bt)}return Promise.reject(It)});return function(It){return Ee.apply(this,arguments)}}());case"emailLink":return function $r(M,_){return Ei.apply(this,arguments)}(_,{email:I._email,oobCode:I._password});default:ze(_,"internal-error")}})()}_linkToIdToken(_,I){var x=this;return(0,y.Z)(function*(){switch(x.signInMethod){case"password":return kt(_,{idToken:I,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function us(M,_){return js.apply(this,arguments)}(_,{idToken:I,email:x._email,oobCode:x._password});default:ze(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Yr(M,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signInWithIdp",mt(M,_))})).apply(this,arguments)}class ss extends be{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const I=new ss(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(I.idToken=_.idToken),_.accessToken&&(I.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(I.nonce=_.nonce),_.pendingToken&&(I.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(I.accessToken=_.oauthToken,I.secret=_.oauthTokenSecret):ze("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const I="string"==typeof _?JSON.parse(_):_,{providerId:x,signInMethod:te}=I,Ee=(0,ae._T)(I,["providerId","signInMethod"]);if(!x||!te)return null;const It=new ss(x,te);return It.idToken=Ee.idToken||void 0,It.accessToken=Ee.accessToken||void 0,It.secret=Ee.secret,It.nonce=Ee.nonce,It.pendingToken=Ee.pendingToken||null,It}_getIdTokenResponse(_){return Yr(_,this.buildRequest())}_linkToIdToken(_,I){const x=this.buildRequest();return x.idToken=I,Yr(_,x)}_getReauthenticationResolver(_){const I=this.buildRequest();return I.autoCreate=!1,Yr(_,I)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),_.postBody=(0,g.xO)(I)}return _}}function Ko(){return(Ko=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:sendVerificationCode",mt(M,_))})).apply(this,arguments)}function no(){return(no=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signInWithPhoneNumber",mt(M,_))})).apply(this,arguments)}function ro(){return(ro=(0,y.Z)(function*(M,_){const I=yield ct(M,"POST","/v1/accounts:signInWithPhoneNumber",mt(M,_));if(I.temporaryProof)throw Fn(M,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const Hs={USER_NOT_FOUND:"user-not-found"};function Zs(){return(Zs=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signInWithPhoneNumber",mt(M,Object.assign(Object.assign({},_),{operation:"REAUTH"})),Hs)})).apply(this,arguments)}class ds extends be{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,I){return new ds({verificationId:_,verificationCode:I})}static _fromTokenResponse(_,I){return new ds({phoneNumber:_,temporaryProof:I})}_getIdTokenResponse(_){return function yo(M,_){return no.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,I){return function ia(M,_){return ro.apply(this,arguments)}(_,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function sa(M,_){return Zs.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:I,verificationId:x,verificationCode:te}=this.params;return _&&I?{temporaryProof:_,phoneNumber:I}:{sessionInfo:x,code:te}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:I,verificationCode:x,phoneNumber:te,temporaryProof:Ee}=_;return x||I||te||Ee?new ds({verificationId:I,verificationCode:x,phoneNumber:te,temporaryProof:Ee}):null}}class vo{constructor(_){var I,x,te,Ee,It,Bt;const Mn=(0,g.zd)((0,g.pd)(_)),Ln=null!==(I=Mn.apiKey)&&void 0!==I?I:null,Wn=null!==(x=Mn.oobCode)&&void 0!==x?x:null,qr=function _o(M){switch(M){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=Mn.mode)&&void 0!==te?te:null);ne(Ln&&Wn&&qr,"argument-error"),this.apiKey=Ln,this.operation=qr,this.code=Wn,this.continueUrl=null!==(Ee=Mn.continueUrl)&&void 0!==Ee?Ee:null,this.languageCode=null!==(It=Mn.languageCode)&&void 0!==It?It:null,this.tenantId=null!==(Bt=Mn.tenantId)&&void 0!==Bt?Bt:null}static parseLink(_){const I=function ga(M){const _=(0,g.zd)((0,g.pd)(M)).link,I=_?(0,g.zd)((0,g.pd)(_)).deep_link_id:null,x=(0,g.zd)((0,g.pd)(M)).deep_link_id;return(x?(0,g.zd)((0,g.pd)(x)).link:null)||x||I||_||M}(_);try{return new vo(I)}catch{return null}}}let Ss=(()=>{class M{constructor(){this.providerId=M.PROVIDER_ID}static credential(I,x){return Ys._fromEmailAndPassword(I,x)}static credentialWithLink(I,x){const te=vo.parseLink(x);return ne(te,"argument-error"),Ys._fromEmailAndCode(I,te.code,te.tenantId)}}return M.PROVIDER_ID="password",M.EMAIL_PASSWORD_SIGN_IN_METHOD="password",M.EMAIL_LINK_SIGN_IN_METHOD="emailLink",M})();class zi{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Ps extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class zs extends Ps{static credentialFromJSON(_){const I="string"==typeof _?JSON.parse(_):_;return ne("providerId"in I&&"signInMethod"in I,"argument-error"),ss._fromParams(I)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return ne(_.idToken||_.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return zs.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return zs.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x,oauthTokenSecret:te,pendingToken:Ee,nonce:It,providerId:Bt}=_;if(!x&&!te&&!I&&!Ee||!Bt)return null;try{return new zs(Bt)._credential({idToken:I,accessToken:x,nonce:It,pendingToken:Ee})}catch{return null}}}let di=(()=>{class M extends Ps{constructor(){super("facebook.com")}static credential(I){return ss._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return M.credentialFromTaggedObject(I)}static credentialFromError(I){return M.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return M.credential(I.oauthAccessToken)}catch{return null}}}return M.FACEBOOK_SIGN_IN_METHOD="facebook.com",M.PROVIDER_ID="facebook.com",M})(),Os=(()=>{class M extends Ps{constructor(){super("google.com"),this.addScope("profile")}static credential(I,x){return ss._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:x})}static credentialFromResult(I){return M.credentialFromTaggedObject(I)}static credentialFromError(I){return M.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:x,oauthAccessToken:te}=I;if(!x&&!te)return null;try{return M.credential(x,te)}catch{return null}}}return M.GOOGLE_SIGN_IN_METHOD="google.com",M.PROVIDER_ID="google.com",M})(),io=(()=>{class M extends Ps{constructor(){super("github.com")}static credential(I){return ss._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return M.credentialFromTaggedObject(I)}static credentialFromError(I){return M.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return M.credential(I.oauthAccessToken)}catch{return null}}}return M.GITHUB_SIGN_IN_METHOD="github.com",M.PROVIDER_ID="github.com",M})();class oa extends be{constructor(_,I){super(_,_),this.pendingToken=I}_getIdTokenResponse(_){return Yr(_,this.buildRequest())}_linkToIdToken(_,I){const x=this.buildRequest();return x.idToken=I,Yr(_,x)}_getReauthenticationResolver(_){const I=this.buildRequest();return I.autoCreate=!1,Yr(_,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const I="string"==typeof _?JSON.parse(_):_,{providerId:x,signInMethod:te,pendingToken:Ee}=I;return x&&te&&Ee&&x===te?new oa(x,Ee):null}static _create(_,I){return new oa(_,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Eo extends zi{constructor(_){ne(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Eo.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Eo.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const I=oa.fromJSON(_);return ne(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:I,providerId:x}=_;if(!I||!x)return null;try{return oa._create(x,I)}catch{return null}}}let ma=(()=>{class M extends Ps{constructor(){super("twitter.com")}static credential(I,x){return ss._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:x})}static credentialFromResult(I){return M.credentialFromTaggedObject(I)}static credentialFromError(I){return M.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:x,oauthTokenSecret:te}=I;if(!x||!te)return null;try{return M.credential(x,te)}catch{return null}}}return M.TWITTER_SIGN_IN_METHOD="twitter.com",M.PROVIDER_ID="twitter.com",M})();function Io(M,_){return wo.apply(this,arguments)}function wo(){return(wo=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signUp",mt(M,_))})).apply(this,arguments)}class Ji{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,I,x,te=!1){return(0,y.Z)(function*(){const Ee=yield Gt._fromIdTokenResponse(_,x,te),It=Gi(x);return new Ji({user:Ee,providerId:It,_tokenResponse:x,operationType:I})})()}static _forOperation(_,I,x){return(0,y.Z)(function*(){yield _._updateTokensIfNecessary(x,!0);const te=Gi(x);return new Ji({user:_,providerId:te,_tokenResponse:x,operationType:I})})()}}function Gi(M){return M.providerId?M.providerId:"phoneNumber"in M?"phone":null}function qi(M){return ms.apply(this,arguments)}function ms(){return(ms=(0,y.Z)(function*(M){var _;const I=gr(M);if(yield I._initializationPromise,null!==(_=I.currentUser)&&void 0!==_&&_.isAnonymous)return new Ji({user:I.currentUser,providerId:null,operationType:"signIn"});const x=yield Io(I,{returnSecureToken:!0}),te=yield Ji._fromIdTokenResponse(I,"signIn",x,!0);return yield I._updateCurrentUser(te.user),te})).apply(this,arguments)}class Pi extends g.ZR{constructor(_,I,x,te){var Ee;super(I.code,I.message),this.operationType=x,this.user=te,Object.setPrototypeOf(this,Pi.prototype),this.customData={appName:_.name,tenantId:null!==(Ee=_.tenantId)&&void 0!==Ee?Ee:void 0,_serverResponse:I.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(_,I,x,te){return new Pi(_,I,x,te)}}function ys(M,_,I,x){return("reauthenticate"===_?I._getReauthenticationResolver(M):I._getIdTokenResponse(M)).catch(Ee=>{throw"auth/multi-factor-auth-required"===Ee.code?Pi._fromErrorAndOperation(M,Ee,_,x):Ee})}function co(M){return new Set(M.map(({providerId:_})=>_).filter(_=>!!_))}function hs(M,_){return bo.apply(this,arguments)}function bo(){return bo=(0,y.Z)(function*(M,_){const I=(0,g.m9)(M);yield D(!0,I,_);const{providerUserInfo:x}=yield function vn(M,_){return Ut.apply(this,arguments)}(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[_]}),te=co(x||[]);return I.providerData=I.providerData.filter(Ee=>te.has(Ee.providerId)),te.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I}),bo.apply(this,arguments)}function C(M,_){return Q.apply(this,arguments)}function Q(){return(Q=(0,y.Z)(function*(M,_,I=!1){const x=yield fr(M,_._linkToIdToken(M.auth,yield M.getIdToken()),I);return Ji._forOperation(M,"link",x)})).apply(this,arguments)}function D(M,_,I){return K.apply(this,arguments)}function K(){return(K=(0,y.Z)(function*(M,_,I){yield cr(_);const te=!1===M?"provider-already-linked":"no-such-provider";ne(co(_.providerData).has(I)===M,_.auth,te)})).apply(this,arguments)}function Ie(M,_){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,y.Z)(function*(M,_,I=!1){const{auth:x}=M,te="reauthenticate";try{const Ee=yield fr(M,ys(x,te,_,M),I);ne(Ee.idToken,x,"internal-error");const It=Gr(Ee.idToken);ne(It,x,"internal-error");const{sub:Bt}=It;return ne(M.uid===Bt,x,"user-mismatch"),Ji._forOperation(M,te,Ee)}catch(Ee){throw"auth/user-not-found"===(null==Ee?void 0:Ee.code)&&ze(x,"user-mismatch"),Ee}})).apply(this,arguments)}function $n(M,_){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,y.Z)(function*(M,_,I=!1){const x="signIn",te=yield ys(M,x,_),Ee=yield Ji._fromIdTokenResponse(M,x,te);return I||(yield M._updateCurrentUser(Ee.user)),Ee})).apply(this,arguments)}function Dr(M,_){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,y.Z)(function*(M,_){return $n(gr(M),_)})).apply(this,arguments)}function Yi(M,_){return z.apply(this,arguments)}function z(){return(z=(0,y.Z)(function*(M,_){const I=(0,g.m9)(M);return yield D(!1,I,_.providerId),C(I,_)})).apply(this,arguments)}function j(M,_){return F.apply(this,arguments)}function F(){return(F=(0,y.Z)(function*(M,_){return Ie((0,g.m9)(M),_)})).apply(this,arguments)}function Ot(){return(Ot=(0,y.Z)(function*(M,_){return ct(M,"POST","/v1/accounts:signInWithCustomToken",mt(M,_))})).apply(this,arguments)}function Nn(M,_){return hi.apply(this,arguments)}function hi(){return hi=(0,y.Z)(function*(M,_){const I=gr(M),x=yield function ue(M,_){return Ot.apply(this,arguments)}(I,{token:_,returnSecureToken:!0}),te=yield Ji._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(te.user),te}),hi.apply(this,arguments)}class Ht{constructor(_,I){this.factorId=_,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(_,I){return"phoneInfo"in I?Yn._fromServerResponse(_,I):"totpInfo"in I?ya._fromServerResponse(_,I):ze(_,"internal-error")}}class Yn extends Ht{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,I){return new Yn(I)}}class ya extends Ht{constructor(_){super("totp",_)}static _fromServerResponse(_,I){return new ya(I)}}function Ma(M,_,I){var x;ne((null===(x=I.url)||void 0===x?void 0:x.length)>0,M,"invalid-continue-uri"),ne(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,M,"invalid-dynamic-link-domain"),_.continueUrl=I.url,_.dynamicLinkDomain=I.dynamicLinkDomain,_.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(ne(I.iOS.bundleId.length>0,M,"missing-ios-bundle-id"),_.iOSBundleId=I.iOS.bundleId),I.android&&(ne(I.android.packageName.length>0,M,"missing-android-pkg-name"),_.androidInstallApp=I.android.installApp,_.androidMinimumVersionCode=I.android.minimumVersion,_.androidPackageName=I.android.packageName)}function Ns(M,_,I){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,y.Z)(function*(M,_,I){var x;const te=gr(M),Ee={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=te._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const It=yield Fi(te,Ee,"getOobCode",!0);I&&Ma(te,It,I),yield Vt(te,It)}else I&&Ma(te,Ee,I),yield Vt(te,Ee).catch(function(){var It=(0,y.Z)(function*(Bt){if("auth/missing-recaptcha-token"!==Bt.code)return Promise.reject(Bt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Mn=yield Fi(te,Ee,"getOobCode",!0);I&&Ma(te,Mn,I),yield Vt(te,Mn)}});return function(Bt){return It.apply(this,arguments)}}())}),Ha.apply(this,arguments)}function il(M,_,I){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,y.Z)(function*(M,_,I){yield tt((0,g.m9)(M),{oobCode:_,newPassword:I})})).apply(this,arguments)}function sl(M,_){return _a.apply(this,arguments)}function _a(){return _a=(0,y.Z)(function*(M,_){yield function Wt(M,_){return zt.apply(this,arguments)}((0,g.m9)(M),{oobCode:_})}),_a.apply(this,arguments)}function za(M,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,y.Z)(function*(M,_){const I=(0,g.m9)(M),x=yield tt(I,{oobCode:_}),te=x.requestType;switch(ne(te,I,"internal-error"),te){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(x.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(x.mfaInfo,I,"internal-error");default:ne(x.email,I,"internal-error")}let Ee=null;return x.mfaInfo&&(Ee=Ht._fromServerResponse(gr(I),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:Ee},operation:te}})).apply(this,arguments)}function ol(M,_){return os.apply(this,arguments)}function os(){return(os=(0,y.Z)(function*(M,_){const{data:I}=yield za((0,g.m9)(M),_);return I.email})).apply(this,arguments)}function ks(M,_,I){return Qs.apply(this,arguments)}function Qs(){return Qs=(0,y.Z)(function*(M,_,I){var x;const te=gr(M),Ee={returnSecureToken:!0,email:_,password:I,clientType:"CLIENT_TYPE_WEB"};let It;if(null!==(x=te._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Ln=yield Fi(te,Ee,"signUpPassword");It=Io(te,Ln)}else It=Io(te,Ee).catch(function(){var Ln=(0,y.Z)(function*(Wn){if("auth/missing-recaptcha-token"===Wn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const qr=yield Fi(te,Ee,"signUpPassword");return Io(te,qr)}return Promise.reject(Wn)});return function(Wn){return Ln.apply(this,arguments)}}());const Bt=yield It.catch(Ln=>Promise.reject(Ln)),Mn=yield Ji._fromIdTokenResponse(te,"signIn",Bt);return yield te._updateCurrentUser(Mn.user),Mn}),Qs.apply(this,arguments)}function Co(M,_,I){return Dr((0,g.m9)(M),Ss.credential(_,I))}function aa(M,_,I){return la.apply(this,arguments)}function la(){return la=(0,y.Z)(function*(M,_,I){var x;const te=gr(M),Ee={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function It(Bt,Mn){ne(Mn.handleCodeInApp,te,"argument-error"),Mn&&Ma(te,Bt,Mn)}if(null!==(x=te._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Bt=yield Fi(te,Ee,"getOobCode",!0);It(Bt,I),yield Bn(te,Bt)}else It(Ee,I),yield Bn(te,Ee).catch(function(){var Bt=(0,y.Z)(function*(Mn){if("auth/missing-recaptcha-token"!==Mn.code)return Promise.reject(Mn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ln=yield Fi(te,Ee,"getOobCode",!0);It(Ln,I),yield Bn(te,Ln)}});return function(Mn){return Bt.apply(this,arguments)}}())}),la.apply(this,arguments)}function Ra(M,_){const I=vo.parseLink(_);return"EMAIL_SIGNIN"===(null==I?void 0:I.operation)}function al(M,_,I){return va.apply(this,arguments)}function va(){return(va=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M),te=Ss.credentialWithLink(_,I||et());return ne(te._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Dr(x,te)})).apply(this,arguments)}function Do(){return(Do=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:createAuthUri",mt(M,_))})).apply(this,arguments)}function ll(M,_){return qo.apply(this,arguments)}function qo(){return qo=(0,y.Z)(function*(M,_){const x={identifier:_,continueUri:vt()?et():"http://localhost"},{signinMethods:te}=yield function Ga(M,_){return Do.apply(this,arguments)}((0,g.m9)(M),x);return te||[]}),qo.apply(this,arguments)}function To(M,_){return So.apply(this,arguments)}function So(){return So=(0,y.Z)(function*(M,_){const I=(0,g.m9)(M),te={requestType:"VERIFY_EMAIL",idToken:yield M.getIdToken()};_&&Ma(I.auth,te,_);const{email:Ee}=yield function at(M,_){return wt.apply(this,arguments)}(I.auth,te);Ee!==M.email&&(yield M.reload())}),So.apply(this,arguments)}function Ao(M,_,I){return xa.apply(this,arguments)}function xa(){return xa=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M),Ee={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield M.getIdToken(),newEmail:_};I&&Ma(x.auth,Ee,I);const{email:It}=yield function ir(M,_){return kr.apply(this,arguments)}(x.auth,Ee);It!==M.email&&(yield M.reload())}),xa.apply(this,arguments)}function Pa(){return(Pa=(0,y.Z)(function*(M,_){return Ct(M,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Ws(M,_){return cl.apply(this,arguments)}function cl(){return cl=(0,y.Z)(function*(M,{displayName:_,photoURL:I}){if(void 0===_&&void 0===I)return;const x=(0,g.m9)(M),Ee={idToken:yield x.getIdToken(),displayName:_,photoUrl:I,returnSecureToken:!0},It=yield fr(x,function wc(M,_){return Pa.apply(this,arguments)}(x.auth,Ee));x.displayName=It.displayName||null,x.photoURL=It.photoUrl||null;const Bt=x.providerData.find(({providerId:Mn})=>"password"===Mn);Bt&&(Bt.displayName=x.displayName,Bt.photoURL=x.photoURL),yield x._updateTokensIfNecessary(It)}),cl.apply(this,arguments)}function sc(M,_){return ls((0,g.m9)(M),_,null)}function as(M,_){return ls((0,g.m9)(M),null,_)}function ls(M,_,I){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,y.Z)(function*(M,_,I){const{auth:x}=M,Ee={idToken:yield M.getIdToken(),returnSecureToken:!0};_&&(Ee.email=_),I&&(Ee.password=I);const It=yield fr(M,kt(x,Ee));yield M._updateTokensIfNecessary(It,!0)})).apply(this,arguments)}class es{constructor(_,I,x={}){this.isNewUser=_,this.providerId=I,this.profile=x}}class Ol extends es{constructor(_,I,x,te){super(_,I,x),this.username=te}}class $i extends es{constructor(_,I){super(_,"facebook.com",I)}}class Gc extends Ol{constructor(_,I){super(_,"github.com",I,"string"==typeof(null==I?void 0:I.login)?null==I?void 0:I.login:null)}}class fs extends es{constructor(_,I){super(_,"google.com",I)}}class Mo extends Ol{constructor(_,I,x){super(_,"twitter.com",I,x)}}function Ro(M){const{user:_,_tokenResponse:I}=M;return _.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function Nr(M){var _,I;if(!M)return null;const{providerId:x}=M,te=M.rawUserInfo?JSON.parse(M.rawUserInfo):{},Ee=M.isNewUser||"identitytoolkit#SignupNewUserResponse"===M.kind;if(!x&&null!=M&&M.idToken){const It=null===(I=null===(_=Gr(M.idToken))||void 0===_?void 0:_.firebase)||void 0===I?void 0:I.sign_in_provider;if(It)return new es(Ee,"anonymous"!==It&&"custom"!==It?It:null)}if(!x)return null;switch(x){case"facebook.com":return new $i(Ee,te);case"github.com":return new Gc(Ee,te);case"google.com":return new fs(Ee,te);case"twitter.com":return new Mo(Ee,te,M.screenName||null);case"custom":case"anonymous":return new es(Ee,null);default:return new es(Ee,x,te)}}(I)}class Fr{constructor(_,I,x){this.type=_,this.credential=I,this.auth=x}static _fromIdtoken(_,I){return new Fr("enroll",_,I)}static _fromMfaPendingCredential(_){return new Fr("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var I,x;if(null!=_&&_.multiFactorSession){if(null!==(I=_.multiFactorSession)&&void 0!==I&&I.pendingCredential)return Fr._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(x=_.multiFactorSession)&&void 0!==x&&x.idToken)return Fr._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Kt{constructor(_,I,x){this.session=_,this.hints=I,this.signInResolver=x}static _fromError(_,I){const x=gr(_),te=I.customData._serverResponse,Ee=(te.mfaInfo||[]).map(Bt=>Ht._fromServerResponse(x,Bt));ne(te.mfaPendingCredential,x,"internal-error");const It=Fr._fromMfaPendingCredential(te.mfaPendingCredential);return new Kt(It,Ee,function(){var Bt=(0,y.Z)(function*(Mn){const Ln=yield Mn._process(x,It);delete te.mfaInfo,delete te.mfaPendingCredential;const Wn=Object.assign(Object.assign({},te),{idToken:Ln.idToken,refreshToken:Ln.refreshToken});switch(I.operationType){case"signIn":const qr=yield Ji._fromIdTokenResponse(x,I.operationType,Wn);return yield x._updateCurrentUser(qr.user),qr;case"reauthenticate":return ne(I.user,x,"internal-error"),Ji._forOperation(I.user,I.operationType,Wn);default:ze(x,"internal-error")}});return function(Mn){return Bt.apply(this,arguments)}}())}resolveSignIn(_){var I=this;return(0,y.Z)(function*(){return I.signInResolver(_)})()}}function lr(M,_){var I;const x=(0,g.m9)(M),te=_;return ne(_.customData.operationType,x,"argument-error"),ne(null===(I=te.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,x,"argument-error"),Kt._fromError(x,te)}class hn{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(x=>Ht._fromServerResponse(_.auth,x)))})}static _fromUser(_){return new hn(_)}getSession(){var _=this;return(0,y.Z)(function*(){return Fr._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,I){var x=this;return(0,y.Z)(function*(){const te=_,Ee=yield x.getSession(),It=yield fr(x.user,te._process(x.user.auth,Ee,I));return yield x.user._updateTokensIfNecessary(It),x.user.reload()})()}unenroll(_){var I=this;return(0,y.Z)(function*(){const x="string"==typeof _?_:_.uid,te=yield I.user.getIdToken();try{const Ee=yield fr(I.user,function xo(M,_){return Ct(M,"POST","/v2/accounts/mfaEnrollment:withdraw",mt(M,_))}(I.user.auth,{idToken:te,mfaEnrollmentId:x}));I.enrolledFactors=I.enrolledFactors.filter(({uid:It})=>It!==x),yield I.user._updateTokensIfNecessary(Ee),yield I.user.reload()}catch(Ee){throw Ee}})()}}const Nt=new WeakMap;function tn(M){const _=(0,g.m9)(M);return Nt.has(_)||Nt.set(_,hn._fromUser(_)),Nt.get(_)}const Di="__sak";class Wa{constructor(_,I){this.storageRetriever=_,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(Di,"1"),this.storage.removeItem(Di),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,I){return this.storage.setItem(_,JSON.stringify(I)),Promise.resolve()}_get(_){const I=this.storage.getItem(_);return Promise.resolve(I?JSON.parse(I):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const oc=(()=>{class M extends Wa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,x)=>this.onStorageEvent(I,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ka(){const M=(0,g.z$)();return ve(M)||rt(M)}()&&function dr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const x of Object.keys(this.listeners)){const te=this.storage.getItem(x),Ee=this.localCache[x];te!==Ee&&I(x,Ee,te)}}onStorageEvent(I,x=!1){if(!I.key)return void this.forAllChangedKeys((Bt,Mn,Ln)=>{this.notifyListeners(Bt,Ln)});const te=I.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Bt=this.storage.getItem(te);if(I.newValue!==Bt)null!==I.newValue?this.storage.setItem(te,I.newValue):this.storage.removeItem(te);else if(this.localCache[te]===I.newValue&&!x)return}const Ee=()=>{const Bt=this.storage.getItem(te);!x&&this.localCache[te]===Bt||this.notifyListeners(te,Bt)},It=this.storage.getItem(te);!function In(){return(0,g.w1)()&&10===document.documentMode}()||It===I.newValue||I.newValue===I.oldValue?Ee():setTimeout(Ee,10)}notifyListeners(I,x){this.localCache[I]=x;const te=this.listeners[I];if(te)for(const Ee of Array.from(te))Ee(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,x,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:x,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(x)}_removeListener(I,x){this.listeners[I]&&(this.listeners[I].delete(x),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,x){var te=()=>super._set,Ee=this;return(0,y.Z)(function*(){yield te().call(Ee,I,x),Ee.localCache[I]=JSON.stringify(x)})()}_get(I){var x=()=>super._get,te=this;return(0,y.Z)(function*(){const Ee=yield x().call(te,I);return te.localCache[I]=JSON.stringify(Ee),Ee})()}_remove(I){var x=()=>super._remove,te=this;return(0,y.Z)(function*(){yield x().call(te,I),delete te.localCache[I]})()}}return M.type="LOCAL",M})(),bc=(()=>{class M extends Wa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,x){}_removeListener(I,x){}}return M.type="SESSION",M})();let dd=(()=>{class M{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const x=this.receivers.find(Ee=>Ee.isListeningto(I));if(x)return x;const te=new M(I);return this.receivers.push(te),te}isListeningto(I){return this.eventTarget===I}handleEvent(I){var x=this;return(0,y.Z)(function*(){const te=I,{eventId:Ee,eventType:It,data:Bt}=te.data,Mn=x.handlersMap[It];if(null==Mn||!Mn.size)return;te.ports[0].postMessage({status:"ack",eventId:Ee,eventType:It});const Ln=Array.from(Mn).map(function(){var qr=(0,y.Z)(function*(Bi){return Bi(te.origin,Bt)});return function(Bi){return qr.apply(this,arguments)}}()),Wn=yield function Po(M){return Promise.all(M.map(function(){var _=(0,y.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(x){return{fulfilled:!1,reason:x}}});return function(I){return _.apply(this,arguments)}}()))}(Ln);te.ports[0].postMessage({status:"done",eventId:Ee,eventType:It,response:Wn})})()}_subscribe(I,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(x)}_unsubscribe(I,x){this.handlersMap[I]&&x&&this.handlersMap[I].delete(x),(!x||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return M.receivers=[],M})();function Yo(M="",_=10){let I="";for(let x=0;x<_;x++)I+=Math.floor(10*Math.random());return M+I}class hr{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,I,x=50){var te=this;return(0,y.Z)(function*(){const Ee=typeof MessageChannel<"u"?new MessageChannel:null;if(!Ee)throw new Error("connection_unavailable");let It,Bt;return new Promise((Mn,Ln)=>{const Wn=Yo("",20);Ee.port1.start();const qr=setTimeout(()=>{Ln(new Error("unsupported_event"))},x);Bt={messageChannel:Ee,onMessage(Bi){const Mi=Bi;if(Mi.data.eventId===Wn)switch(Mi.data.status){case"ack":clearTimeout(qr),It=setTimeout(()=>{Ln(new Error("timeout"))},3e3);break;case"done":clearTimeout(It),Mn(Mi.data.response);break;default:clearTimeout(qr),clearTimeout(It),Ln(new Error("invalid_response"))}}},te.handlers.add(Bt),Ee.port1.addEventListener("message",Bt.onMessage),te.target.postMessage({eventType:_,eventId:Wn,data:I},[Ee.port2])}).finally(()=>{Bt&&te.removeMessageHandler(Bt)})})()}}function Oi(){return window}function Ti(){return typeof Oi().WorkerGlobalScope<"u"&&"function"==typeof Oi().importScripts}function Oa(){return(Oa=(0,y.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wi="firebaseLocalStorageDb",On=1,bs="firebaseLocalStorage",ns="fbase_key";class Oo{constructor(_){this.request=_}toPromise(){return new Promise((_,I)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function No(M,_){return M.transaction([bs],_?"readwrite":"readonly").objectStore(bs)}function Ia(){const M=indexedDB.open(Wi,On);return new Promise((_,I)=>{M.addEventListener("error",()=>{I(M.error)}),M.addEventListener("upgradeneeded",()=>{const x=M.result;try{x.createObjectStore(bs,{keyPath:ns})}catch(te){I(te)}}),M.addEventListener("success",(0,y.Z)(function*(){const x=M.result;x.objectStoreNames.contains(bs)?_(x):(x.close(),yield function kl(){const M=indexedDB.deleteDatabase(Wi);return new Oo(M).toPromise()}(),_(yield Ia()))}))})}function _s(M,_,I){return Na.apply(this,arguments)}function Na(){return(Na=(0,y.Z)(function*(M,_,I){const x=No(M,!0).put({[ns]:_,value:I});return new Oo(x).toPromise()})).apply(this,arguments)}function oo(){return(oo=(0,y.Z)(function*(M,_){const I=No(M,!1).get(_),x=yield new Oo(I).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function Dc(M,_){const I=No(M,!0).delete(_);return new Oo(I).toPromise()}const ko=(()=>{class M{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,y.Z)(function*(){return I.db||(I.db=yield Ia()),I.db})()}_withRetries(I){var x=this;return(0,y.Z)(function*(){let te=0;for(;;)try{const Ee=yield x._openDb();return yield I(Ee)}catch(Ee){if(te++>3)throw Ee;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,y.Z)(function*(){return Ti()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,y.Z)(function*(){I.receiver=dd._getInstance(function hd(){return Ti()?self:null}()),I.receiver._subscribe("keyChanged",function(){var x=(0,y.Z)(function*(te,Ee){return{keyProcessed:(yield I._poll()).includes(Ee.key)}});return function(te,Ee){return x.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var x=(0,y.Z)(function*(te,Ee){return["keyChanged"]});return function(te,Ee){return x.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,y.Z)(function*(){var x,te;if(I.activeServiceWorker=yield function yr(){return Oa.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new hr(I.activeServiceWorker);const Ee=yield I.sender._send("ping",{},800);Ee&&null!==(x=Ee[0])&&void 0!==x&&x.fulfilled&&null!==(te=Ee[0])&&void 0!==te&&te.value.includes("keyChanged")&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var x=this;return(0,y.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function ti(){var M;return(null===(M=null==navigator?void 0:navigator.serviceWorker)||void 0===M?void 0:M.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:I},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const I=yield Ia();return yield _s(I,Di,"1"),yield Dc(I,Di),!0}catch{}return!1})()}_withPendingWrite(I){var x=this;return(0,y.Z)(function*(){x.pendingWrites++;try{yield I()}finally{x.pendingWrites--}})()}_set(I,x){var te=this;return(0,y.Z)(function*(){return te._withPendingWrite((0,y.Z)(function*(){return yield te._withRetries(Ee=>_s(Ee,I,x)),te.localCache[I]=x,te.notifyServiceWorker(I)}))})()}_get(I){var x=this;return(0,y.Z)(function*(){const te=yield x._withRetries(Ee=>function Cc(M,_){return oo.apply(this,arguments)}(Ee,I));return x.localCache[I]=te,te})()}_remove(I){var x=this;return(0,y.Z)(function*(){return x._withPendingWrite((0,y.Z)(function*(){return yield x._withRetries(te=>Dc(te,I)),delete x.localCache[I],x.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,y.Z)(function*(){const x=yield I._withRetries(It=>{const Bt=No(It,!1).getAll();return new Oo(Bt).toPromise()});if(!x)return[];if(0!==I.pendingWrites)return[];const te=[],Ee=new Set;for(const{fbase_key:It,value:Bt}of x)Ee.add(It),JSON.stringify(I.localCache[It])!==JSON.stringify(Bt)&&(I.notifyListeners(It,Bt),te.push(It));for(const It of Object.keys(I.localCache))I.localCache[It]&&!Ee.has(It)&&(I.notifyListeners(It,null),te.push(It));return te})()}notifyListeners(I,x){this.localCache[I]=x;const te=this.listeners[I];if(te)for(const Ee of Array.from(te))Ee(x)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(x)}_removeListener(I,x){this.listeners[I]&&(this.listeners[I].delete(x),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return M.type="LOCAL",M})(),fi=1e12;class Ip{constructor(_){this.auth=_,this.counter=fi,this._widgets=new Map}render(_,I){const x=this.counter;return this._widgets.set(x,new ua(_,this.auth.name,I||{})),this.counter++,x}reset(_){var I;const x=_||fi;null===(I=this._widgets.get(x))||void 0===I||I.delete(),this._widgets.delete(x)}getResponse(_){var I;return(null===(I=this._widgets.get(_||fi))||void 0===I?void 0:I.getResponse())||""}execute(_){var I=this;return(0,y.Z)(function*(){var x;return null===(x=I._widgets.get(_||fi))||void 0===x||x.execute(),""})()}}class ua{constructor(_,I,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const te="string"==typeof _?document.getElementById(_):_;ne(te,"argument-error",{appName:I}),this.container=te,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fd(M){const _=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<M;x++)_.push(I.charAt(Math.floor(Math.random()*I.length)));return _.join("")}(50);const{callback:_,"expired-callback":I}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dl=rr("rcb"),pd=new yt(3e4,6e4);class Fo{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=Oi().grecaptcha)||void 0===_||!_.render)}load(_,I=""){return ne(function ka(M){return M.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(M)}(I),_,"argument-error"),this.shouldResolveImmediately(I)&&is(Oi().grecaptcha)?Promise.resolve(Oi().grecaptcha):new Promise((x,te)=>{const Ee=Oi().setTimeout(()=>{te(Ae(_,"network-request-failed"))},pd.get());Oi()[dl]=()=>{Oi().clearTimeout(Ee),delete Oi()[dl];const Bt=Oi().grecaptcha;if(!Bt||!is(Bt))return void te(Ae(_,"internal-error"));const Mn=Bt.render;Bt.render=(Ln,Wn)=>{const qr=Mn(Ln,Wn);return this.counter++,qr},this.hostLanguage=I,x(Bt)},Qr(`https://www.google.com/recaptcha/api.js??${(0,g.xO)({onload:dl,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(Ee),te(Ae(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var I;return!(null===(I=Oi().grecaptcha)||void 0===I||!I.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class lc{load(_){return(0,y.Z)(function*(){return new Ip(_)})()}clearedOneInstance(){}}const gu="recaptcha",mi={theme:"light",type:"image"};class Mc{constructor(_,I=Object.assign({},mi),x){this.parameters=I,this.type=gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gr(x),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const te="string"==typeof _?document.getElementById(_):_;ne(te,this.auth,"argument-error"),this.container=te,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lc:new Fo,this.validateStartingState()}verify(){var _=this;return(0,y.Z)(function*(){_.assertNotDestroyed();const I=yield _.render(),x=_.getAssertedRecaptcha();return x.getResponse(I)||new Promise(Ee=>{const It=Bt=>{Bt&&(_.tokenChangeListeners.delete(It),Ee(Bt))};_.tokenChangeListeners.add(It),_.isInvisible&&x.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return I=>{if(this.tokenChangeListeners.forEach(x=>x(I)),"function"==typeof _)_(I);else if("string"==typeof _){const x=Oi()[_];"function"==typeof x&&x(I)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,y.Z)(function*(){if(yield _.init(),!_.widgetId){let I=_.container;if(!_.isInvisible){const x=document.createElement("div");I.appendChild(x),I=x}_.widgetId=_.getAssertedRecaptcha().render(I,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,y.Z)(function*(){ne(vt()&&!Ti(),_.auth,"internal-error"),yield function Za(){let M=null;return new Promise(_=>{"complete"!==document.readyState?(M=()=>_(),window.addEventListener("load",M)):_()}).catch(_=>{throw M&&window.removeEventListener("load",M),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const I=yield function ki(M){return rs.apply(this,arguments)}(_.auth);ne(I,_.auth,"internal-error"),_.parameters.sitekey=I})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Lo{constructor(_,I){this.verificationId=_,this.onConfirmation=I}confirm(_){const I=ds._fromVerification(this.verificationId,_);return this.onConfirmation(I)}}function Bo(M,_,I){return S.apply(this,arguments)}function S(){return(S=(0,y.Z)(function*(M,_,I){const x=gr(M),te=yield re(x,_,(0,g.m9)(I));return new Lo(te,Ee=>Dr(x,Ee))})).apply(this,arguments)}function R(M,_,I){return b.apply(this,arguments)}function b(){return(b=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M);yield D(!1,x,"phone");const te=yield re(x.auth,_,(0,g.m9)(I));return new Lo(te,Ee=>Yi(x,Ee))})).apply(this,arguments)}function N(M,_,I){return H.apply(this,arguments)}function H(){return(H=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M),te=yield re(x.auth,_,(0,g.m9)(I));return new Lo(te,Ee=>j(x,Ee))})).apply(this,arguments)}function re(M,_,I){return le.apply(this,arguments)}function le(){return le=(0,y.Z)(function*(M,_,I){var x;const te=yield I.verify();try{let Ee;if(ne("string"==typeof te,M,"argument-error"),ne(I.type===gu,M,"argument-error"),Ee="string"==typeof _?{phoneNumber:_}:_,"session"in Ee){const It=Ee.session;if("phoneNumber"in Ee)return ne("enroll"===It.type,M,"internal-error"),(yield function vr(M,_){return Ct(M,"POST","/v2/accounts/mfaEnrollment:start",mt(M,_))}(M,{idToken:It.credential,phoneEnrollmentInfo:{phoneNumber:Ee.phoneNumber,recaptchaToken:te}})).phoneSessionInfo.sessionInfo;{ne("signin"===It.type,M,"internal-error");const Bt=(null===(x=Ee.multiFactorHint)||void 0===x?void 0:x.uid)||Ee.multiFactorUid;return ne(Bt,M,"missing-multi-factor-info"),(yield function Lt(M,_){return Ct(M,"POST","/v2/accounts/mfaSignIn:start",mt(M,_))}(M,{mfaPendingCredential:It.credential,mfaEnrollmentId:Bt,phoneSignInInfo:{recaptchaToken:te}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:It}=yield function Wo(M,_){return Ko.apply(this,arguments)}(M,{phoneNumber:Ee.phoneNumber,recaptchaToken:te});return It}}finally{I._reset()}}),le.apply(this,arguments)}function ht(M,_){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,y.Z)(function*(M,_){yield C((0,g.m9)(M),_)})).apply(this,arguments)}let wn=(()=>{class M{constructor(I){this.providerId=M.PROVIDER_ID,this.auth=gr(I)}verifyPhoneNumber(I,x){return re(this.auth,I,(0,g.m9)(x))}static credential(I,x){return ds._fromVerification(I,x)}static credentialFromResult(I){return M.credentialFromTaggedObject(I)}static credentialFromError(I){return M.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:x,temporaryProof:te}=I;return x&&te?ds._fromTokenResponse(x,te):null}}return M.PROVIDER_ID="phone",M.PHONE_SIGN_IN_METHOD="phone",M})();function Un(M,_){return _?An(_):(ne(M._popupRedirectResolver,M,"argument-error"),M._popupRedirectResolver)}class Vn extends be{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Yr(_,this._buildIdpRequest())}_linkToIdToken(_,I){return Yr(_,this._buildIdpRequest(I))}_getReauthenticationResolver(_){return Yr(_,this._buildIdpRequest())}_buildIdpRequest(_){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(I.idToken=_),I}}function ai(M){return $n(M.auth,new Vn(M),M.bypassAuthState)}function jr(M){const{auth:_,user:I}=M;return ne(I,_,"internal-error"),Ie(I,new Vn(M),M.bypassAuthState)}function Tr(M){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,y.Z)(function*(M){const{auth:_,user:I}=M;return ne(I,_,"internal-error"),C(I,new Vn(M),M.bypassAuthState)})).apply(this,arguments)}class Fs{constructor(_,I,x,te,Ee=!1){this.auth=_,this.resolver=x,this.user=te,this.bypassAuthState=Ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var _=this;return new Promise(function(){var I=(0,y.Z)(function*(x,te){_.pendingPromise={resolve:x,reject:te};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(Ee){_.reject(Ee)}});return function(x,te){return I.apply(this,arguments)}}())}onAuthEvent(_){var I=this;return(0,y.Z)(function*(){const{urlResponse:x,sessionId:te,postBody:Ee,tenantId:It,error:Bt,type:Mn}=_;if(Bt)return void I.reject(Bt);const Ln={auth:I.auth,requestUri:x,sessionId:te,tenantId:It||void 0,postBody:Ee||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(Mn)(Ln))}catch(Wn){I.reject(Wn)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return ai;case"linkViaPopup":case"linkViaRedirect":return Tr;case"reauthViaPopup":case"reauthViaRedirect":return jr;default:ze(this.auth,"internal-error")}}resolve(_){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zo=new yt(2e3,1e4);function ps(M,_,I){return hl.apply(this,arguments)}function hl(){return(hl=(0,y.Z)(function*(M,_,I){const x=gr(M);pt(M,_,zi);const te=Un(x,I);return new pl(x,"signInViaPopup",_,te).executeNotNull()})).apply(this,arguments)}function ho(M,_,I){return fl.apply(this,arguments)}function fl(){return(fl=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M);pt(x.auth,_,zi);const te=Un(x.auth,I);return new pl(x.auth,"reauthViaPopup",_,te,x).executeNotNull()})).apply(this,arguments)}function Fl(M,_,I){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M);pt(x.auth,_,zi);const te=Un(x.auth,I);return new pl(x.auth,"linkViaPopup",_,te,x).executeNotNull()})).apply(this,arguments)}let pl=(()=>{class M extends Fs{constructor(I,x,te,Ee,It){super(I,x,Ee,It),this.provider=te,this.authWindow=null,this.pollId=null,M.currentPopupAction&&M.currentPopupAction.cancel(),M.currentPopupAction=this}executeNotNull(){var I=this;return(0,y.Z)(function*(){const x=yield I.execute();return ne(x,I.auth,"internal-error"),x})()}onExecution(){var I=this;return(0,y.Z)(function*(){Me(1===I.filter.length,"Popup operations only handle one event");const x=Yo();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],x),I.authWindow.associatedEvent=x,I.resolver._originValidation(I.auth).catch(te=>{I.reject(te)}),I.resolver._isIframeWebStorageSupported(I.auth,te=>{te||I.reject(Ae(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(Ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,M.currentPopupAction=null}pollUserCancellation(){const I=()=>{var x,te;this.pollId=null!==(te=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==te&&te.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ae(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,Zo.get())};I()}}return M.currentPopupAction=null,M})();const V="pendingRedirect",W=new Map;class se extends Fs{constructor(_,I,x=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,x),this.eventId=null}execute(){var _=()=>super.execute,I=this;return(0,y.Z)(function*(){let x=W.get(I.auth._key());if(!x){try{const Ee=(yield function qe(M,_){return Et.apply(this,arguments)}(I.resolver,I.auth))?yield _().call(I):null;x=()=>Promise.resolve(Ee)}catch(te){x=()=>Promise.reject(te)}W.set(I.auth._key(),x)}return I.bypassAuthState||W.set(I.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(_){var I=()=>super.onAuthEvent,x=this;return(0,y.Z)(function*(){if("signInViaRedirect"===_.type)return I().call(x,_);if("unknown"!==_.type){if(_.eventId){const te=yield x.auth._redirectUserForId(_.eventId);if(te)return x.user=te,I().call(x,_);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Et(){return(Et=(0,y.Z)(function*(M,_){const I=ni(_),x=wr(M);if(!(yield x._isAvailable()))return!1;const te="true"===(yield x._get(I));return yield x._remove(I),te})).apply(this,arguments)}function St(M,_){return cn.apply(this,arguments)}function cn(){return(cn=(0,y.Z)(function*(M,_){return wr(M)._set(ni(_),"true")})).apply(this,arguments)}function kn(){W.clear()}function ln(M,_){W.set(M._key(),_)}function wr(M){return An(M._redirectPersistence)}function ni(M){return Pr(V,M.config.apiKey,M.name)}function tr(M,_,I){return function Ms(M,_,I){return Ki.apply(this,arguments)}(M,_,I)}function Ki(){return(Ki=(0,y.Z)(function*(M,_,I){const x=gr(M);pt(M,_,zi),yield x._initializationPromise;const te=Un(x,I);return yield St(te,x),te._openRedirect(x,_,"signInViaRedirect")})).apply(this,arguments)}function Ii(M,_,I){return function gl(M,_,I){return Cs.apply(this,arguments)}(M,_,I)}function Cs(){return(Cs=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M);pt(x.auth,_,zi),yield x.auth._initializationPromise;const te=Un(x.auth,I);yield St(te,x.auth);const Ee=yield Qo(x);return te._openRedirect(x.auth,_,"reauthViaRedirect",Ee)})).apply(this,arguments)}function $o(M,_,I){return function Uo(M,_,I){return Rc.apply(this,arguments)}(M,_,I)}function Rc(){return(Rc=(0,y.Z)(function*(M,_,I){const x=(0,g.m9)(M);pt(x.auth,_,zi),yield x.auth._initializationPromise;const te=Un(x.auth,I);yield D(!1,x,_.providerId),yield St(te,x.auth);const Ee=yield Qo(x);return te._openRedirect(x.auth,_,"linkViaRedirect",Ee)})).apply(this,arguments)}function cc(M,_){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,y.Z)(function*(M,_){return yield gr(M)._initializationPromise,xc(M,_,!1)})).apply(this,arguments)}function xc(M,_){return uc.apply(this,arguments)}function uc(){return(uc=(0,y.Z)(function*(M,_,I=!1){const x=gr(M),te=Un(x,_),It=yield new se(x,te,I).execute();return It&&!I&&(delete It.user._redirectEventId,yield x._persistUserIfCurrent(It.user),yield x._setRedirectUser(null,_)),It})).apply(this,arguments)}function Qo(M){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,y.Z)(function*(M){const _=Yo(`${M.uid}:::`);return M._redirectEventId=_,yield M.auth._setRedirectUser(M),yield M.auth._persistUserIfCurrent(M),_})).apply(this,arguments)}class wp{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let I=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(_,x)&&(I=!0,this.sendToConsumer(_,x),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function ji(M){switch(M.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yu(M);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=_,I=!0)),I}sendToConsumer(_,I){var x;if(_.error&&!yu(_)){const te=(null===(x=_.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";I.onError(Ae(this.auth,te))}else I.onAuthEvent(_)}isEventForConsumer(_,I){const x=null===I.eventId||!!_.eventId&&_.eventId===I.eventId;return I.filter.includes(_.type)&&x}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mu(_))}saveEventToCache(_){this.cachedEventUids.add(mu(_)),this.lastProcessedEventTime=Date.now()}}function mu(M){return[M.type,M.eventId,M.sessionId,M.tenantId].filter(_=>_).join("-")}function yu({type:M,error:_}){return"unknown"===M&&"auth/no-auth-event"===(null==_?void 0:_.code)}function Ef(M){return _u.apply(this,arguments)}function _u(){return(_u=(0,y.Z)(function*(M,_={}){return Ct(M,"GET","/v1/projects",_)})).apply(this,arguments)}const dh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,If=/^https?/;function Xo(){return(Xo=(0,y.Z)(function*(M){if(M.config.emulator)return;const{authorizedDomains:_}=yield Ef(M);for(const I of _)try{if(Oc(I))return}catch{}ze(M,"unauthorized-domain")})).apply(this,arguments)}function Oc(M){const _=et(),{protocol:I,hostname:x}=new URL(_);if(M.startsWith("chrome-extension://")){const It=new URL(M);return""===It.hostname&&""===x?"chrome-extension:"===I&&M.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===I&&It.hostname===x}if(!If.test(I))return!1;if(dh.test(M))return x===M;const te=M.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(x)}const Kr=new yt(3e4,6e4);function wf(){const M=Oi().___jsl;if(null!=M&&M.H)for(const _ of Object.keys(M.H))if(M.H[_].r=M.H[_].r||[],M.H[_].L=M.H[_].L||[],M.H[_].r=[...M.H[_].L],M.CP)for(let I=0;I<M.CP.length;I++)M.CP[I]=null}let wa=null;const hh=new yt(5e3,15e3),Es="__/auth/iframe",yl="emulator/auth/iframe",gd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bl(M){const _=M.config;ne(_.authDomain,M,"auth-domain-config-required");const I=_.emulator?We(_,yl):`https://${M.config.authDomain}/${Es}`,x={apiKey:_.apiKey,appName:M.name,v:Y.SDK_VERSION},te=qc.get(M.config.apiHost);te&&(x.eid=te);const Ee=M._getFrameworks();return Ee.length&&(x.fw=Ee.join(",")),`${I}?${(0,g.xO)(x).slice(1)}`}function yd(){return yd=(0,y.Z)(function*(M){const _=yield function li(M){return wa=wa||function Kc(M){return new Promise((_,I)=>{var x,te,Ee;function It(){wf(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{wf(),I(Ae(M,"network-request-failed"))},timeout:Kr.get()})}if(null!==(te=null===(x=Oi().gapi)||void 0===x?void 0:x.iframes)&&void 0!==te&&te.Iframe)_(gapi.iframes.getContext());else{if(null===(Ee=Oi().gapi)||void 0===Ee||!Ee.load){const Bt=rr("iframefcb");return Oi()[Bt]=()=>{gapi.load?It():I(Ae(M,"network-request-failed"))},Qr(`https://apis.google.com/js/api.js?onload=${Bt}`).catch(Mn=>I(Mn))}It()}}).catch(_=>{throw wa=null,_})}(M),wa}(M),I=Oi().gapi;return ne(I,M,"internal-error"),_.open({where:document.body,url:Bl(M),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gd,dontclear:!0},x=>new Promise(function(){var te=(0,y.Z)(function*(Ee,It){yield x.restyle({setHideOnLeave:!1});const Bt=Ae(M,"network-request-failed"),Mn=Oi().setTimeout(()=>{It(Bt)},hh.get());function Ln(){Oi().clearTimeout(Mn),Ee(x)}x.ping(Ln).then(Ln,()=>{It(Bt)})});return function(Ee,It){return te.apply(this,arguments)}}()))}),yd.apply(this,arguments)}const yi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Li=500,ao=600,Nc="_blank",fh="http://localhost";class _d{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const bf="__/auth/handler",vd="emulator/auth/handler",kg=encodeURIComponent("fac");function Yc(M,_,I,x,te,Ee){return ph.apply(this,arguments)}function ph(){return(ph=(0,y.Z)(function*(M,_,I,x,te,Ee){ne(M.config.authDomain,M,"auth-domain-config-required"),ne(M.config.apiKey,M,"invalid-api-key");const It={apiKey:M.config.apiKey,appName:M.name,authType:I,redirectUrl:x,v:Y.SDK_VERSION,eventId:te};if(_ instanceof zi){_.setDefaultLanguage(M.languageCode),It.providerId=_.providerId||"",(0,g.xb)(_.getCustomParameters())||(It.customParameters=JSON.stringify(_.getCustomParameters()));for(const[Wn,qr]of Object.entries(Ee||{}))It[Wn]=qr}if(_ instanceof Ps){const Wn=_.getScopes().filter(qr=>""!==qr);Wn.length>0&&(It.scopes=Wn.join(","))}M.tenantId&&(It.tid=M.tenantId);const Bt=It;for(const Wn of Object.keys(Bt))void 0===Bt[Wn]&&delete Bt[Wn];const Mn=yield M._getAppCheckToken(),Ln=Mn?`#${kg}=${encodeURIComponent(Mn)}`:"";return`${function gh({config:M}){return M.emulator?We(M,vd):`https://${M.authDomain}/${bf}`}(M)}?${(0,g.xO)(Bt).slice(1)}${Ln}`})).apply(this,arguments)}const vu="webStorageSupport",Ed=class Cf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bc,this._completeRedirectFn=xc,this._overrideRedirectResult=ln}_openPopup(_,I,x,te){var Ee=this;return(0,y.Z)(function*(){var It;Me(null===(It=Ee.eventManagers[_._key()])||void 0===It?void 0:It.manager,"_initialize() not called before _openPopup()");const Bt=yield Yc(_,I,x,et(),te);return function fo(M,_,I,x=Li,te=ao){const Ee=Math.max((window.screen.availHeight-te)/2,0).toString(),It=Math.max((window.screen.availWidth-x)/2,0).toString();let Bt="";const Mn=Object.assign(Object.assign({},yi),{width:x.toString(),height:te.toString(),top:Ee,left:It}),Ln=(0,g.z$)().toLowerCase();I&&(Bt=he(Ln)?Nc:I),fe(Ln)&&(_=_||fh,Mn.scrollbars="yes");const Wn=Object.entries(Mn).reduce((Bi,[Mi,lo])=>`${Bi}${Mi}=${lo},`,"");if(function Yt(M=(0,g.z$)()){var _;return rt(M)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(Ln)&&"_self"!==Bt)return function kc(M,_){const I=document.createElement("a");I.href=M,I.target=_;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(x)}(_||"",Bt),new _d(null);const qr=window.open(_||"",Bt,Wn);ne(qr,M,"popup-blocked");try{qr.focus()}catch{}return new _d(qr)}(_,Bt,Yo())})()}_openRedirect(_,I,x,te){var Ee=this;return(0,y.Z)(function*(){return yield Ee._originValidation(_),function ca(M){Oi().location.href=M}(yield Yc(_,I,x,et(),te)),new Promise(()=>{})})()}_initialize(_){const I=_._key();if(this.eventManagers[I]){const{manager:te,promise:Ee}=this.eventManagers[I];return te?Promise.resolve(te):(Me(Ee,"If manager is not set, promise should be"),Ee)}const x=this.initAndGetManager(_);return this.eventManagers[I]={promise:x},x.catch(()=>{delete this.eventManagers[I]}),x}initAndGetManager(_){var I=this;return(0,y.Z)(function*(){const x=yield function md(M){return yd.apply(this,arguments)}(_),te=new wp(_);return x.register("authEvent",Ee=>(ne(null==Ee?void 0:Ee.authEvent,_,"invalid-auth-event"),{status:te.onEvent(Ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[_._key()]={manager:te},I.iframes[_._key()]=x,te})()}_isIframeWebStorageSupported(_,I){this.iframes[_._key()].send(vu,{type:vu},te=>{var Ee;const It=null===(Ee=null==te?void 0:te[0])||void 0===Ee?void 0:Ee[vu];void 0!==It&&I(!!It),ze(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const I=_._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function dc(M){return Xo.apply(this,arguments)}(_)),this.originValidationPromises[I]}get _shouldInitProactively(){return fn()||ve()||rt()}};class Eu{constructor(_){this.factorId=_}_process(_,I,x){switch(I.type){case"enroll":return this._finalizeEnroll(_,I.credential,x);case"signin":return this._finalizeSignIn(_,I.credential);default:return nt("unexpected MultiFactorSessionType")}}}class Zc extends Eu{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Zc(_)}_finalizeEnroll(_,I,x){return function ts(M,_){return Ct(M,"POST","/v2/accounts/mfaEnrollment:finalize",mt(M,_))}(_,{idToken:I,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,I){return function ac(M,_){return Ct(M,"POST","/v2/accounts/mfaSignIn:finalize",mt(M,_))}(_,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qc=(()=>{class M{constructor(){}static assertion(I){return Zc._fromCredential(I)}}return M.FACTOR_ID="phone",M})();var Id="@firebase/auth";class Ks{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var I=this;return(0,y.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const I=this.auth.onIdTokenChanged(x=>{_((null==x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,I),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const I=this.internalListeners.get(_);I&&(this.internalListeners.delete(_),I(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,g.Pz)("authIdTokenMaxAge"),function $l(M){(0,Y._registerComponent)(new Pe.wA("auth",(_,{options:I})=>{const x=_.getProvider("app").getImmediate(),te=_.getProvider("heartbeat"),Ee=_.getProvider("app-check-internal"),{apiKey:It,authDomain:Bt}=x.options;ne(It&&!It.includes(":"),"invalid-api-key",{appName:x.name}),ne(!(null!=Bt&&Bt.includes(":")),"argument-error",{appName:x.name});const Mn={apiKey:It,authDomain:Bt,clientPlatform:M,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jr(M)},Ln=new ar(x,te,Ee,Mn);return function Xr(M,_){const I=(null==_?void 0:_.persistence)||[],x=(Array.isArray(I)?I:[I]).map(An);null!=_&&_.errorMap&&M._updateErrorMap(_.errorMap),M._initializeWithPersistence(x,null==_?void 0:_.popupRedirectResolver)}(Ln,I),Ln},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,I,x)=>{_.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new Pe.wA("auth-internal",_=>{const I=gr(_.getProvider("auth").getImmediate());return new Ks(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(Id,"0.23.0",function hc(M){switch(M){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(M)),(0,Y.registerVersion)(Id,"0.23.0","esm2017")}("Browser")},2090:(on,ot,k)=>{"use strict";k.d(ot,{$s:()=>An,BH:()=>q,DV:()=>Ut,Dv:()=>cr,G6:()=>We,GJ:()=>nn,L:()=>Ue,LL:()=>jt,Pz:()=>Ae,Sg:()=>pt,UG:()=>nt,UI:()=>Hn,US:()=>Pe,Wj:()=>xi,Wl:()=>Rt,Yr:()=>yt,ZB:()=>De,ZR:()=>Ct,aH:()=>ze,b$:()=>vt,cI:()=>ct,dS:()=>Zr,eu:()=>Ge,g5:()=>Y,gK:()=>si,gQ:()=>Ar,h$:()=>me,hl:()=>He,hu:()=>g,jU:()=>Me,lb:()=>Er,m9:()=>Pr,ne:()=>fr,p$:()=>pe,pd:()=>Gr,r3:()=>vn,ru:()=>et,tV:()=>Te,uI:()=>ne,ug:()=>er,vZ:()=>un,w1:()=>ut,w9:()=>gn,xO:()=>Ir,xb:()=>nr,z$:()=>Ke,zI:()=>_t,zd:()=>Ni});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},g=function(Ze,Ve){if(!Ze)throw Y(Ve)},Y=function(Ze){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Ze)},ae=function(Ze){const Ve=[];let fe=0;for(let ve=0;ve<Ze.length;ve++){let he=Ze.charCodeAt(ve);he<128?Ve[fe++]=he:he<2048?(Ve[fe++]=he>>6|192,Ve[fe++]=63&he|128):55296==(64512&he)&&ve+1<Ze.length&&56320==(64512&Ze.charCodeAt(ve+1))?(he=65536+((1023&he)<<10)+(1023&Ze.charCodeAt(++ve)),Ve[fe++]=he>>18|240,Ve[fe++]=he>>12&63|128,Ve[fe++]=he>>6&63|128,Ve[fe++]=63&he|128):(Ve[fe++]=he>>12|224,Ve[fe++]=he>>6&63|128,Ve[fe++]=63&he|128)}return Ve},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ze,Ve){if(!Array.isArray(Ze))throw Error("encodeByteArray takes an array as a parameter");this.init_();const fe=Ve?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let he=0;he<Ze.length;he+=3){const dt=Ze[he],Oe=he+1<Ze.length,$e=Oe?Ze[he+1]:0,we=he+2<Ze.length,rt=we?Ze[he+2]:0;let In=(15&$e)<<2|rt>>6,fn=63&rt;we||(fn=64,Oe||(In=64)),ve.push(fe[dt>>2],fe[(3&dt)<<4|$e>>4],fe[In],fe[fn])}return ve.join("")},encodeString(Ze,Ve){return this.HAS_NATIVE_SUPPORT&&!Ve?btoa(Ze):this.encodeByteArray(ae(Ze),Ve)},decodeString(Ze,Ve){return this.HAS_NATIVE_SUPPORT&&!Ve?atob(Ze):function(Ze){const Ve=[];let fe=0,ve=0;for(;fe<Ze.length;){const he=Ze[fe++];if(he<128)Ve[ve++]=String.fromCharCode(he);else if(he>191&&he<224){const dt=Ze[fe++];Ve[ve++]=String.fromCharCode((31&he)<<6|63&dt)}else if(he>239&&he<365){const we=((7&he)<<18|(63&Ze[fe++])<<12|(63&Ze[fe++])<<6|63&Ze[fe++])-65536;Ve[ve++]=String.fromCharCode(55296+(we>>10)),Ve[ve++]=String.fromCharCode(56320+(1023&we))}else{const dt=Ze[fe++],Oe=Ze[fe++];Ve[ve++]=String.fromCharCode((15&he)<<12|(63&dt)<<6|63&Oe)}}return Ve.join("")}(this.decodeStringToByteArray(Ze,Ve))},decodeStringToByteArray(Ze,Ve){this.init_();const fe=Ve?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let he=0;he<Ze.length;){const dt=fe[Ze.charAt(he++)],$e=he<Ze.length?fe[Ze.charAt(he)]:0;++he;const rt=he<Ze.length?fe[Ze.charAt(he)]:64;++he;const Yt=he<Ze.length?fe[Ze.charAt(he)]:64;if(++he,null==dt||null==$e||null==rt||null==Yt)throw new Ce;ve.push(dt<<2|$e>>4),64!==rt&&(ve.push($e<<4&240|rt>>2),64!==Yt&&ve.push(rt<<6&192|Yt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ze=0;Ze<this.ENCODED_VALS.length;Ze++)this.byteToCharMap_[Ze]=this.ENCODED_VALS.charAt(Ze),this.charToByteMap_[this.byteToCharMap_[Ze]]=Ze,this.byteToCharMapWebSafe_[Ze]=this.ENCODED_VALS_WEBSAFE.charAt(Ze),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ze]]=Ze,Ze>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ze)]=Ze,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ze)]=Ze)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const me=function(Ze){const Ve=ae(Ze);return Pe.encodeByteArray(Ve,!0)},Ue=function(Ze){return me(Ze).replace(/\./g,"")},Te=function(Ze){try{return Pe.decodeString(Ze,!0)}catch(Ve){console.error("base64Decode failed: ",Ve)}return null};function pe(Ze){return De(void 0,Ze)}function De(Ze,Ve){if(!(Ve instanceof Object))return Ve;switch(Ve.constructor){case Date:return new Date(Ve.getTime());case Object:void 0===Ze&&(Ze={});break;case Array:Ze=[];break;default:return Ve}for(const fe in Ve)!Ve.hasOwnProperty(fe)||!Fe(fe)||(Ze[fe]=De(Ze[fe],Ve[fe]));return Ze}function Fe(Ze){return"__proto__"!==Ze}const _e=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ze=process.env.__FIREBASE_DEFAULTS__;return Ze?JSON.parse(Ze):void 0})()||(()=>{if(typeof document>"u")return;let Ze;try{Ze=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ve=Ze&&Te(Ze[1]);return Ve&&JSON.parse(Ve)})()}catch(Ze){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ze}`)}},ze=()=>{var Ze;return null===(Ze=_e())||void 0===Ze?void 0:Ze.config},Ae=Ze=>{var Ve;return null===(Ve=_e())||void 0===Ve?void 0:Ve[`_${Ze}`]};class q{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ve,fe)=>{this.resolve=Ve,this.reject=fe})}wrapCallback(Ve){return(fe,ve)=>{fe?this.reject(fe):this.resolve(ve),"function"==typeof Ve&&(this.promise.catch(()=>{}),1===Ve.length?Ve(fe):Ve(fe,ve))}}}function pt(Ze,Ve){if(Ze.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=Ve||"demo-project",he=Ze.iat||0,dt=Ze.sub||Ze.user_id;if(!dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:he,exp:he+3600,auth_time:he,sub:dt,user_id:dt,firebase:{sign_in_provider:"custom",identities:{}}},Ze);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(Oe)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function nt(){var Ze;const Ve=null===(Ze=_e())||void 0===Ze?void 0:Ze.forceEnvironment;if("node"===Ve)return!0;if("browser"===Ve)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Me(){return"object"==typeof self&&self.self===self}function et(){const Ze="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ze&&void 0!==Ze.id}function vt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ut(){const Ze=Ke();return Ze.indexOf("MSIE ")>=0||Ze.indexOf("Trident/")>=0}function yt(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function We(){return!nt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"==typeof indexedDB}catch{return!1}}function Ge(){return new Promise((Ze,Ve)=>{try{let fe=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",he=self.indexedDB.open(ve);he.onsuccess=()=>{he.result.close(),fe||self.indexedDB.deleteDatabase(ve),Ze(!0)},he.onupgradeneeded=()=>{fe=!1},he.onerror=()=>{var dt;Ve((null===(dt=he.error)||void 0===dt?void 0:dt.message)||"")}}catch(fe){Ve(fe)}})}function _t(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ct extends Error{constructor(Ve,fe,ve){super(fe),this.code=Ve,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}}class jt{constructor(Ve,fe,ve){this.service=Ve,this.serviceName=fe,this.errors=ve}create(Ve,...fe){const ve=fe[0]||{},he=`${this.service}/${Ve}`,dt=this.errors[Ve],Oe=dt?function _n(Ze,Ve){return Ze.replace(Tt,(fe,ve)=>{const he=Ve[ve];return null!=he?String(he):`<${ve}?>`})}(dt,ve):"Error";return new Ct(he,`${this.serviceName}: ${Oe} (${he}).`,ve)}}const Tt=/\{\$([^}]+)}/g;function ct(Ze){return JSON.parse(Ze)}function Rt(Ze){return JSON.stringify(Ze)}const Jt=function(Ze){let Ve={},fe={},ve={},he="";try{const dt=Ze.split(".");Ve=ct(Te(dt[0])||""),fe=ct(Te(dt[1])||""),he=dt[2],ve=fe.d||{},delete fe.d}catch{}return{header:Ve,claims:fe,data:ve,signature:he}},gn=function(Ze){const fe=Jt(Ze).claims;return!!fe&&"object"==typeof fe&&fe.hasOwnProperty("iat")},nn=function(Ze){const Ve=Jt(Ze).claims;return"object"==typeof Ve&&!0===Ve.admin};function vn(Ze,Ve){return Object.prototype.hasOwnProperty.call(Ze,Ve)}function Ut(Ze,Ve){if(Object.prototype.hasOwnProperty.call(Ze,Ve))return Ze[Ve]}function nr(Ze){for(const Ve in Ze)if(Object.prototype.hasOwnProperty.call(Ze,Ve))return!1;return!0}function Hn(Ze,Ve,fe){const ve={};for(const he in Ze)Object.prototype.hasOwnProperty.call(Ze,he)&&(ve[he]=Ve.call(fe,Ze[he],he,Ze));return ve}function un(Ze,Ve){if(Ze===Ve)return!0;const fe=Object.keys(Ze),ve=Object.keys(Ve);for(const he of fe){if(!ve.includes(he))return!1;const dt=Ze[he],Oe=Ve[he];if(or(dt)&&or(Oe)){if(!un(dt,Oe))return!1}else if(dt!==Oe)return!1}for(const he of ve)if(!fe.includes(he))return!1;return!0}function or(Ze){return null!==Ze&&"object"==typeof Ze}function Ir(Ze){const Ve=[];for(const[fe,ve]of Object.entries(Ze))Array.isArray(ve)?ve.forEach(he=>{Ve.push(encodeURIComponent(fe)+"="+encodeURIComponent(he))}):Ve.push(encodeURIComponent(fe)+"="+encodeURIComponent(ve));return Ve.length?"&"+Ve.join("&"):""}function Ni(Ze){const Ve={};return Ze.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[he,dt]=ve.split("=");Ve[decodeURIComponent(he)]=decodeURIComponent(dt)}}),Ve}function Gr(Ze){const Ve=Ze.indexOf("?");if(!Ve)return"";const fe=Ze.indexOf("#",Ve);return Ze.substring(Ve,fe>0?fe:void 0)}class Ar{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ve=1;Ve<this.blockSize;++Ve)this.pad_[Ve]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ve,fe){fe||(fe=0);const ve=this.W_;if("string"==typeof Ve)for(let Yt=0;Yt<16;Yt++)ve[Yt]=Ve.charCodeAt(fe)<<24|Ve.charCodeAt(fe+1)<<16|Ve.charCodeAt(fe+2)<<8|Ve.charCodeAt(fe+3),fe+=4;else for(let Yt=0;Yt<16;Yt++)ve[Yt]=Ve[fe]<<24|Ve[fe+1]<<16|Ve[fe+2]<<8|Ve[fe+3],fe+=4;for(let Yt=16;Yt<80;Yt++){const In=ve[Yt-3]^ve[Yt-8]^ve[Yt-14]^ve[Yt-16];ve[Yt]=4294967295&(In<<1|In>>>31)}let rt,Mt,he=this.chain_[0],dt=this.chain_[1],Oe=this.chain_[2],$e=this.chain_[3],we=this.chain_[4];for(let Yt=0;Yt<80;Yt++){Yt<40?Yt<20?(rt=$e^dt&(Oe^$e),Mt=1518500249):(rt=dt^Oe^$e,Mt=1859775393):Yt<60?(rt=dt&Oe|$e&(dt|Oe),Mt=2400959708):(rt=dt^Oe^$e,Mt=3395469782);const In=(he<<5|he>>>27)+rt+we+Mt+ve[Yt]&4294967295;we=$e,$e=Oe,Oe=4294967295&(dt<<30|dt>>>2),dt=he,he=In}this.chain_[0]=this.chain_[0]+he&4294967295,this.chain_[1]=this.chain_[1]+dt&4294967295,this.chain_[2]=this.chain_[2]+Oe&4294967295,this.chain_[3]=this.chain_[3]+$e&4294967295,this.chain_[4]=this.chain_[4]+we&4294967295}update(Ve,fe){if(null==Ve)return;void 0===fe&&(fe=Ve.length);const ve=fe-this.blockSize;let he=0;const dt=this.buf_;let Oe=this.inbuf_;for(;he<fe;){if(0===Oe)for(;he<=ve;)this.compress_(Ve,he),he+=this.blockSize;if("string"==typeof Ve){for(;he<fe;)if(dt[Oe]=Ve.charCodeAt(he),++Oe,++he,Oe===this.blockSize){this.compress_(dt),Oe=0;break}}else for(;he<fe;)if(dt[Oe]=Ve[he],++Oe,++he,Oe===this.blockSize){this.compress_(dt),Oe=0;break}}this.inbuf_=Oe,this.total_+=fe}digest(){const Ve=[];let fe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let he=this.blockSize-1;he>=56;he--)this.buf_[he]=255&fe,fe/=256;this.compress_(this.buf_);let ve=0;for(let he=0;he<5;he++)for(let dt=24;dt>=0;dt-=8)Ve[ve]=this.chain_[he]>>dt&255,++ve;return Ve}}function fr(Ze,Ve){const fe=new Rn(Ze,Ve);return fe.subscribe.bind(fe)}class Rn{constructor(Ve,fe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=fe,this.task.then(()=>{Ve(this)}).catch(ve=>{this.error(ve)})}next(Ve){this.forEachObserver(fe=>{fe.next(Ve)})}error(Ve){this.forEachObserver(fe=>{fe.error(Ve)}),this.close(Ve)}complete(){this.forEachObserver(Ve=>{Ve.complete()}),this.close()}subscribe(Ve,fe,ve){let he;if(void 0===Ve&&void 0===fe&&void 0===ve)throw new Error("Missing Observer.");he=function xr(Ze,Ve){if("object"!=typeof Ze||null===Ze)return!1;for(const fe of Ve)if(fe in Ze&&"function"==typeof Ze[fe])return!0;return!1}(Ve,["next","error","complete"])?Ve:{next:Ve,error:fe,complete:ve},void 0===he.next&&(he.next=Lr),void 0===he.error&&(he.error=Lr),void 0===he.complete&&(he.complete=Lr);const dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?he.error(this.finalError):he.complete()}catch{}}),this.observers.push(he),dt}unsubscribeOne(Ve){void 0===this.observers||void 0===this.observers[Ve]||(delete this.observers[Ve],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ve){if(!this.finalized)for(let fe=0;fe<this.observers.length;fe++)this.sendOne(fe,Ve)}sendOne(Ve,fe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ve])try{fe(this.observers[Ve])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(Ve){this.finalized||(this.finalized=!0,void 0!==Ve&&(this.finalError=Ve),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lr(){}const cr=function(Ze,Ve,fe,ve){let he;if(ve<Ve?he="at least "+Ve:ve>fe&&(he=0===fe?"none":"no more than "+fe),he)throw new Error(Ze+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+he+".")};function si(Ze,Ve){return`${Ze} failed: ${Ve} argument `}function xi(Ze,Ve,fe,ve){if((!ve||fe)&&"function"!=typeof fe)throw new Error(si(Ze,Ve)+"must be a valid function.")}function Er(Ze,Ve,fe,ve){if((!ve||fe)&&("object"!=typeof fe||null===fe))throw new Error(si(Ze,Ve)+"must be a valid context object.")}const Zr=function(Ze){const Ve=[];let fe=0;for(let ve=0;ve<Ze.length;ve++){let he=Ze.charCodeAt(ve);if(he>=55296&&he<=56319){const dt=he-55296;ve++,g(ve<Ze.length,"Surrogate pair missing trail surrogate."),he=65536+(dt<<10)+(Ze.charCodeAt(ve)-56320)}he<128?Ve[fe++]=he:he<2048?(Ve[fe++]=he>>6|192,Ve[fe++]=63&he|128):he<65536?(Ve[fe++]=he>>12|224,Ve[fe++]=he>>6&63|128,Ve[fe++]=63&he|128):(Ve[fe++]=he>>18|240,Ve[fe++]=he>>12&63|128,Ve[fe++]=he>>6&63|128,Ve[fe++]=63&he|128)}return Ve},er=function(Ze){let Ve=0;for(let fe=0;fe<Ze.length;fe++){const ve=Ze.charCodeAt(fe);ve<128?Ve++:ve<2048?Ve+=2:ve>=55296&&ve<=56319?(Ve+=4,fe++):Ve+=3}return Ve},Xn=1e3,mn=2,Gt=144e5,En=.5;function An(Ze,Ve=Xn,fe=mn){const ve=Ve*Math.pow(fe,Ze),he=Math.round(En*ve*(Math.random()-.5)*2);return Math.min(Gt,ve+he)}function Pr(Ze){return Ze&&Ze._delegate?Ze._delegate:Ze}},9613:(on,ot,k)=>{"use strict";k.d(ot,{c:()=>Xe});var y=k(3577),g=k(3457);let Y;const xe=Se=>Se.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pe=Se=>(void 0===Y&&(Y=void 0===Se.style.animationName&&void 0!==Se.style.webkitAnimationName?"-webkit-":""),Y),Ce=(Se,_e,oe)=>{const lt=_e.startsWith("animation")?Pe(Se):"";Se.style.setProperty(lt+_e,oe)},me=(Se,_e)=>{const oe=_e.startsWith("animation")?Pe(Se):"";Se.style.removeProperty(oe+_e)},pe=[],Be=(Se=[],_e)=>{if(void 0!==_e){const oe=Array.isArray(_e)?_e:[_e];return[...Se,...oe]}return Se},Xe=Se=>{let _e,oe,lt,ze,Ae,q,Me,He,Ge,_t,mt,Tt,ct,pt=[],Ke=[],ne=[],nt=!1,et={},vt=[],Le=[],ut={},bt=0,yt=!1,We=!1,Ct=!0,jt=!1,_n=!0,Rt=!1;const Jt=Se,Cn=[],Fn=[],gn=[],nn=[],vn=[],Ut=[],nr=[],Hn=[],un=[],or=[],ci="function"==typeof AnimationEffect||void 0!==g.w&&"function"==typeof g.w.AnimationEffect,Ir="function"==typeof Element&&"function"==typeof Element.prototype.animate&&ci,Gr=()=>or,xr=(be,tt)=>((null!=tt&&tt.oneTimeCallback?Fn:Cn).push({c:be,o:tt}),ct),cr=()=>{if(Ir)or.forEach(be=>{be.cancel()}),or.length=0;else{const be=gn.slice();(0,y.r)(()=>{be.forEach(tt=>{me(tt,"animation-name"),me(tt,"animation-duration"),me(tt,"animation-timing-function"),me(tt,"animation-iteration-count"),me(tt,"animation-delay"),me(tt,"animation-play-state"),me(tt,"animation-fill-mode"),me(tt,"animation-direction")})})}},si=()=>{vn.forEach(be=>{null!=be&&be.parentNode&&be.parentNode.removeChild(be)}),vn.length=0},ur=()=>void 0!==Ae?Ae:Me?Me.getFill():"both",Pr=()=>void 0!==Ge?Ge:void 0!==q?q:Me?Me.getDirection():"normal",Ze=()=>yt?"linear":void 0!==lt?lt:Me?Me.getEasing():"linear",Ve=()=>We?0:void 0!==_t?_t:void 0!==oe?oe:Me?Me.getDuration():0,fe=()=>void 0!==ze?ze:Me?Me.getIterations():1,ve=()=>void 0!==mt?mt:void 0!==_e?_e:Me?Me.getDelay():0,Vi=()=>{0!==bt&&(bt--,0===bt&&((()=>{ar(),Hn.forEach($t=>$t()),un.forEach($t=>$t());const be=Ct?1:0,tt=vt,st=Le,kt=ut;gn.forEach($t=>{const Wt=$t.classList;tt.forEach(zt=>Wt.add(zt)),st.forEach(zt=>Wt.remove(zt));for(const zt in kt)kt.hasOwnProperty(zt)&&Ce($t,zt,kt[zt])}),Cn.forEach($t=>$t.c(be,ct)),Fn.forEach($t=>$t.c(be,ct)),Fn.length=0,_n=!0,Ct&&(jt=!0),Ct=!0})(),Me&&Me.animationFinish()))},Hi=(be=!0)=>{si();const tt=(Se=>(Se.forEach(_e=>{for(const oe in _e)if(_e.hasOwnProperty(oe)){const lt=_e[oe];if("easing"===oe)_e["animation-timing-function"]=lt,delete _e[oe];else{const ze=xe(oe);ze!==oe&&(_e[ze]=lt,delete _e[oe])}}}),Se))(pt);gn.forEach(st=>{if(tt.length>0){const kt=((Se=[])=>Se.map(_e=>{const oe=_e.offset,lt=[];for(const ze in _e)_e.hasOwnProperty(ze)&&"offset"!==ze&&lt.push(`${ze}: ${_e[ze]};`);return`${100*oe}% { ${lt.join(" ")} }`}).join(" "))(tt);Tt=void 0!==Se?Se:(Se=>{let _e=pe.indexOf(Se);return _e<0&&(_e=pe.push(Se)-1),`ion-animation-${_e}`})(kt);const $t=((Se,_e,oe)=>{var lt;const ze=(Se=>{const _e=void 0!==Se.getRootNode?Se.getRootNode():Se;return _e.head||_e})(oe),Ae=Pe(oe),q=ze.querySelector("#"+Se);if(q)return q;const pt=(null!==(lt=oe.ownerDocument)&&void 0!==lt?lt:document).createElement("style");return pt.id=Se,pt.textContent=`@${Ae}keyframes ${Se} { ${_e} } @${Ae}keyframes ${Se}-alt { ${_e} }`,ze.appendChild(pt),pt})(Tt,kt,st);vn.push($t),Ce(st,"animation-duration",`${Ve()}ms`),Ce(st,"animation-timing-function",Ze()),Ce(st,"animation-delay",`${ve()}ms`),Ce(st,"animation-fill-mode",ur()),Ce(st,"animation-direction",Pr());const Wt=fe()===1/0?"infinite":fe().toString();Ce(st,"animation-iteration-count",Wt),Ce(st,"animation-play-state","paused"),be&&Ce(st,"animation-name",`${$t.id}-alt`),(0,y.r)(()=>{Ce(st,"animation-name",$t.id||null)})}})},ws=(be=!0)=>{(()=>{Ut.forEach(kt=>kt()),nr.forEach(kt=>kt());const be=Ke,tt=ne,st=et;gn.forEach(kt=>{const $t=kt.classList;be.forEach(Wt=>$t.add(Wt)),tt.forEach(Wt=>$t.remove(Wt));for(const Wt in st)st.hasOwnProperty(Wt)&&Ce(kt,Wt,st[Wt])})})(),pt.length>0&&(Ir?(gn.forEach(be=>{const tt=be.animate(pt,{id:Jt,delay:ve(),duration:Ve(),easing:Ze(),iterations:fe(),fill:ur(),direction:Pr()});tt.pause(),or.push(tt)}),or.length>0&&(or[0].onfinish=()=>{Vi()})):Hi(be)),nt=!0},pr=be=>{if(be=Math.min(Math.max(be,0),.9999),Ir)or.forEach(tt=>{tt.currentTime=tt.effect.getComputedTiming().delay+Ve()*be,tt.pause()});else{const tt=`-${Ve()*be}ms`;gn.forEach(st=>{pt.length>0&&(Ce(st,"animation-delay",tt),Ce(st,"animation-play-state","paused"))})}},pi=be=>{or.forEach(tt=>{tt.effect.updateTiming({delay:ve(),duration:Ve(),easing:Ze(),iterations:fe(),fill:ur(),direction:Pr()})}),void 0!==be&&pr(be)},Qr=(be=!0,tt)=>{(0,y.r)(()=>{gn.forEach(st=>{Ce(st,"animation-name",Tt||null),Ce(st,"animation-duration",`${Ve()}ms`),Ce(st,"animation-timing-function",Ze()),Ce(st,"animation-delay",void 0!==tt?`-${tt*Ve()}ms`:`${ve()}ms`),Ce(st,"animation-fill-mode",ur()||null),Ce(st,"animation-direction",Pr()||null);const kt=fe()===1/0?"infinite":fe().toString();Ce(st,"animation-iteration-count",kt),be&&Ce(st,"animation-name",`${Tt}-alt`),(0,y.r)(()=>{Ce(st,"animation-name",Tt||null)})})})},rr=(be=!1,tt=!0,st)=>(be&&nn.forEach(kt=>{kt.update(be,tt,st)}),Ir?pi(st):Qr(tt,st),ct),Fi=()=>{nt&&(Ir?or.forEach(be=>{be.pause()}):gn.forEach(be=>{Ce(be,"animation-play-state","paused")}),Rt=!0)},bn=()=>{He=void 0,Vi()},ar=()=>{He&&clearTimeout(He)},Ci=be=>new Promise(tt=>{null!=be&&be.sync&&(We=!0,xr(()=>We=!1,{oneTimeCallback:!0})),nt||ws(),jt&&(Ir?(pr(0),pi()):Qr(),jt=!1),_n&&(bt=nn.length+1,_n=!1),xr(()=>tt(),{oneTimeCallback:!0}),nn.forEach(st=>{st.play()}),Ir?(or.forEach(be=>{be.play()}),(0===pt.length||0===gn.length)&&Vi()):(()=>{if(ar(),(0,y.r)(()=>{gn.forEach(be=>{pt.length>0&&Ce(be,"animation-play-state","running")})}),0===pt.length||0===gn.length)Vi();else{const be=ve()||0,tt=Ve()||0,st=fe()||1;isFinite(st)&&(He=setTimeout(bn,be+tt*st+100)),((Se,_e)=>{let oe;const lt={passive:!0},Ae=q=>{Se===q.target&&(oe&&oe(),ar(),(0,y.r)(()=>{gn.forEach(be=>{me(be,"animation-duration"),me(be,"animation-delay"),me(be,"animation-play-state")}),(0,y.r)(Vi)}))};Se&&(Se.addEventListener("webkitAnimationEnd",Ae,lt),Se.addEventListener("animationend",Ae,lt),oe=()=>{Se.removeEventListener("webkitAnimationEnd",Ae,lt),Se.removeEventListener("animationend",Ae,lt)})})(gn[0])}})(),Rt=!1}),de=(be,tt)=>{const st=pt[0];return void 0===st||void 0!==st.offset&&0!==st.offset?pt=[{offset:0,[be]:tt},...pt]:st[be]=tt,ct};return ct={parentAnimation:Me,elements:gn,childAnimations:nn,id:Jt,animationFinish:Vi,from:de,to:(be,tt)=>{const st=pt[pt.length-1];return void 0===st||void 0!==st.offset&&1!==st.offset?pt=[...pt,{offset:1,[be]:tt}]:st[be]=tt,ct},fromTo:(be,tt,st)=>de(be,tt).to(be,st),parent:be=>(Me=be,ct),play:Ci,pause:()=>(nn.forEach(be=>{be.pause()}),Fi(),ct),stop:()=>{nn.forEach(be=>{be.stop()}),nt&&(cr(),nt=!1),yt=!1,We=!1,_n=!0,Ge=void 0,_t=void 0,mt=void 0,bt=0,jt=!1,Ct=!0,Rt=!1},destroy:be=>(nn.forEach(tt=>{tt.destroy(be)}),(be=>{cr(),be&&si()})(be),gn.length=0,nn.length=0,pt.length=0,Cn.length=0,Fn.length=0,nt=!1,_n=!0,ct),keyframes:be=>{const tt=pt!==be;return pt=be,tt&&(be=>{Ir?Gr().forEach(tt=>{if(tt.effect.setKeyframes)tt.effect.setKeyframes(be);else{const st=new KeyframeEffect(tt.effect.target,be,tt.effect.getTiming());tt.effect=st}}):Hi()})(pt),ct},addAnimation:be=>{if(null!=be)if(Array.isArray(be))for(const tt of be)tt.parent(ct),nn.push(tt);else be.parent(ct),nn.push(be);return ct},addElement:be=>{if(null!=be)if(1===be.nodeType)gn.push(be);else if(be.length>=0)for(let tt=0;tt<be.length;tt++)gn.push(be[tt]);else console.error("Invalid addElement value");return ct},update:rr,fill:be=>(Ae=be,rr(!0),ct),direction:be=>(q=be,rr(!0),ct),iterations:be=>(ze=be,rr(!0),ct),duration:be=>(!Ir&&0===be&&(be=1),oe=be,rr(!0),ct),easing:be=>(lt=be,rr(!0),ct),delay:be=>(_e=be,rr(!0),ct),getWebAnimations:Gr,getKeyframes:()=>pt,getFill:ur,getDirection:Pr,getDelay:ve,getIterations:fe,getEasing:Ze,getDuration:Ve,afterAddRead:be=>(Hn.push(be),ct),afterAddWrite:be=>(un.push(be),ct),afterClearStyles:(be=[])=>{for(const tt of be)ut[tt]="";return ct},afterStyles:(be={})=>(ut=be,ct),afterRemoveClass:be=>(Le=Be(Le,be),ct),afterAddClass:be=>(vt=Be(vt,be),ct),beforeAddRead:be=>(Ut.push(be),ct),beforeAddWrite:be=>(nr.push(be),ct),beforeClearStyles:(be=[])=>{for(const tt of be)et[tt]="";return ct},beforeStyles:(be={})=>(et=be,ct),beforeRemoveClass:be=>(ne=Be(ne,be),ct),beforeAddClass:be=>(Ke=Be(Ke,be),ct),onFinish:xr,isRunning:()=>0!==bt&&!Rt,progressStart:(be=!1,tt)=>(nn.forEach(st=>{st.progressStart(be,tt)}),Fi(),yt=be,nt||ws(),rr(!1,!0,tt),ct),progressStep:be=>(nn.forEach(tt=>{tt.progressStep(be)}),pr(be),ct),progressEnd:(be,tt,st)=>(yt=!1,nn.forEach(kt=>{kt.progressEnd(be,tt,st)}),void 0!==st&&(_t=st),jt=!1,Ct=!0,0===be?(Ge="reverse"===Pr()?"normal":"reverse","reverse"===Ge&&(Ct=!1),Ir?(rr(),pr(1-tt)):(mt=(1-tt)*Ve()*-1,rr(!1,!1))):1===be&&(Ir?(rr(),pr(tt)):(mt=tt*Ve()*-1,rr(!1,!1))),void 0!==be&&(xr(()=>{_t=void 0,Ge=void 0,mt=void 0},{oneTimeCallback:!0}),Me||Ci()),ct)}}},3982:(on,ot,k)=>{"use strict";k.d(ot,{E:()=>Te,a:()=>y,s:()=>me});const y=pe=>{try{if(pe instanceof Ce)return pe.value;if(!ae()||"string"!=typeof pe||""===pe)return pe;if(pe.includes("onload="))return"";const De=document.createDocumentFragment(),Fe=document.createElement("div");De.appendChild(Fe),Fe.innerHTML=pe,Pe.forEach(Se=>{const _e=De.querySelectorAll(Se);for(let oe=_e.length-1;oe>=0;oe--){const lt=_e[oe];lt.parentNode?lt.parentNode.removeChild(lt):De.removeChild(lt);const ze=Y(lt);for(let Ae=0;Ae<ze.length;Ae++)g(ze[Ae])}});const je=Y(De);for(let Se=0;Se<je.length;Se++)g(je[Se]);const Be=document.createElement("div");Be.appendChild(De);const Xe=Be.querySelector("div");return null!==Xe?Xe.innerHTML:Be.innerHTML}catch(De){return console.error(De),""}},g=pe=>{if(pe.nodeType&&1!==pe.nodeType)return;if(typeof NamedNodeMap<"u"&&!(pe.attributes instanceof NamedNodeMap))return void pe.remove();for(let Fe=pe.attributes.length-1;Fe>=0;Fe--){const je=pe.attributes.item(Fe),Be=je.name;if(!xe.includes(Be.toLowerCase())){pe.removeAttribute(Be);continue}const Xe=je.value,Se=pe[Be];(null!=Xe&&Xe.toLowerCase().includes("javascript:")||null!=Se&&Se.toLowerCase().includes("javascript:"))&&pe.removeAttribute(Be)}const De=Y(pe);for(let Fe=0;Fe<De.length;Fe++)g(De[Fe])},Y=pe=>null!=pe.children?pe.children:pe.childNodes,ae=()=>{var pe;const De=window,Fe=null===(pe=null==De?void 0:De.Ionic)||void 0===pe?void 0:pe.config;return!Fe||(Fe.get?Fe.get("sanitizerEnabled",!0):!0===Fe.sanitizerEnabled||void 0===Fe.sanitizerEnabled)},xe=["class","id","href","src","name","slot"],Pe=["script","style","iframe","meta","link","object","embed"];class Ce{constructor(De){this.value=De}}const me=pe=>{const De=window,Fe=De.Ionic;if(!Fe||!Fe.config||"Object"===Fe.config.constructor.name)return De.Ionic=De.Ionic||{},De.Ionic.config=Object.assign(Object.assign({},De.Ionic.config),pe),De.Ionic.config},Te=!1},6782:(on,ot,k)=>{"use strict";k.d(ot,{C:()=>xe,a:()=>Y,d:()=>ae});var y=k(5861),g=k(3577);const Y=function(){var Pe=(0,y.Z)(function*(Ce,me,Ue,Te,pe,De){var Fe;if(Ce)return Ce.attachViewToDom(me,Ue,pe,Te);if(!(De||"string"==typeof Ue||Ue instanceof HTMLElement))throw new Error("framework delegate is missing");const je="string"==typeof Ue?null===(Fe=me.ownerDocument)||void 0===Fe?void 0:Fe.createElement(Ue):Ue;return Te&&Te.forEach(Be=>je.classList.add(Be)),pe&&Object.assign(je,pe),me.appendChild(je),yield new Promise(Be=>(0,g.c)(je,Be)),je});return function(me,Ue,Te,pe,De,Fe){return Pe.apply(this,arguments)}}(),ae=(Pe,Ce)=>{if(Ce){if(Pe)return Pe.removeViewFromDom(Ce.parentElement,Ce);Ce.remove()}return Promise.resolve()},xe=()=>{let Pe,Ce;return{attachViewToDom:function(){var Te=(0,y.Z)(function*(pe,De,Fe={},je=[]){var Be,Xe;if(Pe=pe,De){const _e="string"==typeof De?null===(Be=Pe.ownerDocument)||void 0===Be?void 0:Be.createElement(De):De;je.forEach(oe=>_e.classList.add(oe)),Object.assign(_e,Fe),Pe.appendChild(_e),yield new Promise(oe=>(0,g.c)(_e,oe))}else if(Pe.children.length>0&&("ION-MODAL"===Pe.tagName||"ION-POPOVER"===Pe.tagName)&&!Pe.children[0].classList.contains("ion-delegate-host")){const oe=null===(Xe=Pe.ownerDocument)||void 0===Xe?void 0:Xe.createElement("div");oe.classList.add("ion-delegate-host"),je.forEach(lt=>oe.classList.add(lt)),oe.append(...Pe.children),Pe.appendChild(oe)}const Se=document.querySelector("ion-app")||document.body;return Ce=document.createComment("ionic teleport"),Pe.parentNode.insertBefore(Ce,Pe),Se.appendChild(Pe),Pe});return function(De,Fe){return Te.apply(this,arguments)}}(),removeViewFromDom:()=>(Pe&&Ce&&(Ce.parentNode.insertBefore(Pe,Ce),Ce.remove()),Promise.resolve())}}},4349:(on,ot,k)=>{"use strict";k.d(ot,{G:()=>xe});class g{constructor(Ce,me,Ue,Te,pe){this.id=me,this.name=Ue,this.disableScroll=pe,this.priority=1e6*Te+me,this.ctrl=Ce}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ce=this.ctrl.capture(this.name,this.id,this.priority);return Ce&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ce}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Y{constructor(Ce,me,Ue,Te){this.id=me,this.disable=Ue,this.disableScroll=Te,this.ctrl=Ce}block(){if(this.ctrl){if(this.disable)for(const Ce of this.disable)this.ctrl.disableGesture(Ce,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ce of this.disable)this.ctrl.enableGesture(Ce,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ae="backdrop-no-scroll",xe=new class y{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ce){var me;return new g(this,this.newID(),Ce.name,null!==(me=Ce.priority)&&void 0!==me?me:0,!!Ce.disableScroll)}createBlocker(Ce={}){return new Y(this,this.newID(),Ce.disable,!!Ce.disableScroll)}start(Ce,me,Ue){return this.canStart(Ce)?(this.requestedStart.set(me,Ue),!0):(this.requestedStart.delete(me),!1)}capture(Ce,me,Ue){if(!this.start(Ce,me,Ue))return!1;const Te=this.requestedStart;let pe=-1e4;if(Te.forEach(De=>{pe=Math.max(pe,De)}),pe===Ue){this.capturedId=me,Te.clear();const De=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ce}});return document.dispatchEvent(De),!0}return Te.delete(me),!1}release(Ce){this.requestedStart.delete(Ce),this.capturedId===Ce&&(this.capturedId=void 0)}disableGesture(Ce,me){let Ue=this.disabledGestures.get(Ce);void 0===Ue&&(Ue=new Set,this.disabledGestures.set(Ce,Ue)),Ue.add(me)}enableGesture(Ce,me){const Ue=this.disabledGestures.get(Ce);void 0!==Ue&&Ue.delete(me)}disableScroll(Ce){this.disabledScroll.add(Ce),1===this.disabledScroll.size&&document.body.classList.add(ae)}enableScroll(Ce){this.disabledScroll.delete(Ce),0===this.disabledScroll.size&&document.body.classList.remove(ae)}canStart(Ce){return!(void 0!==this.capturedId||this.isDisabled(Ce))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ce){const me=this.disabledGestures.get(Ce);return!!(me&&me.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(on,ot,k)=>{"use strict";k.r(ot),k.d(ot,{MENU_BACK_BUTTON_PRIORITY:()=>xe,OVERLAY_BACK_BUTTON_PRIORITY:()=>ae,blockHardwareBackButton:()=>g,startHardwareBackButton:()=>Y});var y=k(5861);const g=()=>{document.addEventListener("backbutton",()=>{})},Y=()=>{const Pe=document;let Ce=!1;Pe.addEventListener("backbutton",()=>{if(Ce)return;let me=0,Ue=[];const Te=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Fe,je){Ue.push({priority:Fe,handler:je,id:me++})}}});Pe.dispatchEvent(Te);const pe=function(){var Fe=(0,y.Z)(function*(je){try{if(null!=je&&je.handler){const Be=je.handler(De);null!=Be&&(yield Be)}}catch(Be){console.error(Be)}});return function(Be){return Fe.apply(this,arguments)}}(),De=()=>{if(Ue.length>0){let Fe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ue.forEach(je=>{je.priority>=Fe.priority&&(Fe=je)}),Ce=!0,Ue=Ue.filter(je=>je.id!==Fe.id),pe(Fe).then(()=>Ce=!1)}};De()})},ae=100,xe=99},3577:(on,ot,k)=>{"use strict";k.d(ot,{a:()=>me,b:()=>Ue,c:()=>Y,d:()=>Xe,e:()=>Be,f:()=>je,g:()=>Te,h:()=>Fe,i:()=>Ce,j:()=>Ae,k:()=>xe,l:()=>Se,m:()=>ae,n:()=>De,o:()=>_e,p:()=>lt,q:()=>ze,r:()=>pe,s:()=>pt,t:()=>y,u:()=>q,v:()=>oe});const y=(Ke,ne=0)=>new Promise(nt=>{g(Ke,ne,nt)}),g=(Ke,ne=0,nt)=>{let Me,et;const vt={passive:!0},ut=()=>{Me&&Me()},bt=yt=>{(void 0===yt||Ke===yt.target)&&(ut(),nt(yt))};return Ke&&(Ke.addEventListener("webkitTransitionEnd",bt,vt),Ke.addEventListener("transitionend",bt,vt),et=setTimeout(bt,ne+500),Me=()=>{et&&(clearTimeout(et),et=void 0),Ke.removeEventListener("webkitTransitionEnd",bt,vt),Ke.removeEventListener("transitionend",bt,vt)}),ut},Y=(Ke,ne)=>{Ke.componentOnReady?Ke.componentOnReady().then(nt=>ne(nt)):pe(()=>ne(Ke))},ae=Ke=>void 0!==Ke.componentOnReady,xe=(Ke,ne=[])=>{const nt={};return ne.forEach(Me=>{Ke.hasAttribute(Me)&&(null!==Ke.getAttribute(Me)&&(nt[Me]=Ke.getAttribute(Me)),Ke.removeAttribute(Me))}),nt},Pe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ce=(Ke,ne)=>{let nt=Pe;return ne&&ne.length>0&&(nt=nt.filter(Me=>!ne.includes(Me))),xe(Ke,nt)},me=(Ke,ne,nt,Me)=>{var et;if(typeof window<"u"){const vt=window,Le=null===(et=null==vt?void 0:vt.Ionic)||void 0===et?void 0:et.config;if(Le){const ut=Le.get("_ael");if(ut)return ut(Ke,ne,nt,Me);if(Le._ael)return Le._ael(Ke,ne,nt,Me)}}return Ke.addEventListener(ne,nt,Me)},Ue=(Ke,ne,nt,Me)=>{var et;if(typeof window<"u"){const vt=window,Le=null===(et=null==vt?void 0:vt.Ionic)||void 0===et?void 0:et.config;if(Le){const ut=Le.get("_rel");if(ut)return ut(Ke,ne,nt,Me);if(Le._rel)return Le._rel(Ke,ne,nt,Me)}}return Ke.removeEventListener(ne,nt,Me)},Te=(Ke,ne=Ke)=>Ke.shadowRoot||ne,pe=Ke=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ke):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ke):setTimeout(Ke),De=Ke=>!!Ke.shadowRoot&&!!Ke.attachShadow,Fe=Ke=>{const ne=Ke.closest("ion-item");return ne?ne.querySelector("ion-label"):null},je=Ke=>{if(Ke.focus(),Ke.classList.contains("ion-focusable")){const ne=Ke.closest("ion-app");ne&&ne.setFocus([Ke])}},Be=(Ke,ne)=>{let nt;const Me=Ke.getAttribute("aria-labelledby"),et=Ke.id;let vt=null!==Me&&""!==Me.trim()?Me:ne+"-lbl",Le=null!==Me&&""!==Me.trim()?document.getElementById(Me):Fe(Ke);return Le?(null===Me&&(Le.id=vt),nt=Le.textContent,Le.setAttribute("aria-hidden","true")):""!==et.trim()&&(Le=document.querySelector(`label[for="${et}"]`),Le&&(""!==Le.id?vt=Le.id:Le.id=vt=`${et}-lbl`,nt=Le.textContent)),{label:Le,labelId:vt,labelText:nt}},Xe=(Ke,ne,nt,Me,et)=>{if(Ke||De(ne)){let vt=ne.querySelector("input.aux-input");vt||(vt=ne.ownerDocument.createElement("input"),vt.type="hidden",vt.classList.add("aux-input"),ne.appendChild(vt)),vt.disabled=et,vt.name=nt,vt.value=Me||""}},Se=(Ke,ne,nt)=>Math.max(Ke,Math.min(ne,nt)),_e=(Ke,ne)=>{if(!Ke){const nt="ASSERT: "+ne;throw console.error(nt),new Error(nt)}},oe=Ke=>Ke.timeStamp||Date.now(),lt=Ke=>{if(Ke){const ne=Ke.changedTouches;if(ne&&ne.length>0){const nt=ne[0];return{x:nt.clientX,y:nt.clientY}}if(void 0!==Ke.pageX)return{x:Ke.pageX,y:Ke.pageY}}return{x:0,y:0}},ze=Ke=>{const ne="rtl"===document.dir;switch(Ke){case"start":return ne;case"end":return!ne;default:throw new Error(`"${Ke}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ae=(Ke,ne)=>{const nt=Ke._original||Ke;return{_original:Ke,emit:q(nt.emit.bind(nt),ne)}},q=(Ke,ne=0)=>{let nt;return(...Me)=>{clearTimeout(nt),nt=setTimeout(Ke,ne,...Me)}},pt=(Ke,ne)=>{if(null!=Ke||(Ke={}),null!=ne||(ne={}),Ke===ne)return!0;const nt=Object.keys(Ke);if(nt.length!==Object.keys(ne).length)return!1;for(const Me of nt)if(!(Me in ne)||Ke[Me]!==ne[Me])return!1;return!0}},3354:(on,ot,k)=>{"use strict";k.d(ot,{m:()=>pe});var y=k(5861),g=k(7593),Y=k(3577),ae=k(6406),xe=k(9613);const Pe=De=>(0,xe.c)().duration(De?400:300),Ce=De=>{let Fe,je;const Be=De.width+8,Xe=(0,xe.c)(),Se=(0,xe.c)();De.isEndSide?(Fe=Be+"px",je="0px"):(Fe=-Be+"px",je="0px"),Xe.addElement(De.menuInnerEl).fromTo("transform",`translateX(${Fe})`,`translateX(${je})`);const oe="ios"===(0,ae.b)(De),lt=oe?.2:.25;return Se.addElement(De.backdropEl).fromTo("opacity",.01,lt),Pe(oe).addAnimation([Xe,Se])},me=De=>{let Fe,je;const Be=(0,ae.b)(De),Xe=De.width;De.isEndSide?(Fe=-Xe+"px",je=Xe+"px"):(Fe=Xe+"px",je=-Xe+"px");const Se=(0,xe.c)().addElement(De.menuInnerEl).fromTo("transform",`translateX(${je})`,"translateX(0px)"),_e=(0,xe.c)().addElement(De.contentEl).fromTo("transform","translateX(0px)",`translateX(${Fe})`),oe=(0,xe.c)().addElement(De.backdropEl).fromTo("opacity",.01,.32);return Pe("ios"===Be).addAnimation([Se,_e,oe])},Ue=De=>{const Fe=(0,ae.b)(De),je=De.width*(De.isEndSide?-1:1)+"px",Be=(0,xe.c)().addElement(De.contentEl).fromTo("transform","translateX(0px)",`translateX(${je})`);return Pe("ios"===Fe).addAnimation(Be)},pe=(()=>{const De=new Map,Fe=[],je=function(){var He=(0,y.Z)(function*(Ge){const _t=yield ze(Ge);return!!_t&&_t.open()});return function(_t){return He.apply(this,arguments)}}(),Be=function(){var He=(0,y.Z)(function*(Ge){const _t=yield void 0!==Ge?ze(Ge):Ae();return void 0!==_t&&_t.close()});return function(_t){return He.apply(this,arguments)}}(),Xe=function(){var He=(0,y.Z)(function*(Ge){const _t=yield ze(Ge);return!!_t&&_t.toggle()});return function(_t){return He.apply(this,arguments)}}(),Se=function(){var He=(0,y.Z)(function*(Ge,_t){const mt=yield ze(_t);return mt&&(mt.disabled=!Ge),mt});return function(_t,mt){return He.apply(this,arguments)}}(),_e=function(){var He=(0,y.Z)(function*(Ge,_t){const mt=yield ze(_t);return mt&&(mt.swipeGesture=Ge),mt});return function(_t,mt){return He.apply(this,arguments)}}(),oe=function(){var He=(0,y.Z)(function*(Ge){if(null!=Ge){const _t=yield ze(Ge);return void 0!==_t&&_t.isOpen()}return void 0!==(yield Ae())});return function(_t){return He.apply(this,arguments)}}(),lt=function(){var He=(0,y.Z)(function*(Ge){const _t=yield ze(Ge);return!!_t&&!_t.disabled});return function(_t){return He.apply(this,arguments)}}(),ze=function(){var He=(0,y.Z)(function*(Ge){return yield We(),"start"===Ge||"end"===Ge?yt(Ct=>Ct.side===Ge&&!Ct.disabled)||yt(Ct=>Ct.side===Ge):null!=Ge?yt(mt=>mt.menuId===Ge):yt(mt=>!mt.disabled)||(Fe.length>0?Fe[0].el:void 0)});return function(_t){return He.apply(this,arguments)}}(),Ae=function(){var He=(0,y.Z)(function*(){return yield We(),Le()});return function(){return He.apply(this,arguments)}}(),q=function(){var He=(0,y.Z)(function*(){return yield We(),ut()});return function(){return He.apply(this,arguments)}}(),pt=function(){var He=(0,y.Z)(function*(){return yield We(),bt()});return function(){return He.apply(this,arguments)}}(),Ke=(He,Ge)=>{De.set(He,Ge)},Me=He=>{const Ge=He.side;Fe.filter(_t=>_t.side===Ge&&_t!==He).forEach(_t=>_t.disabled=!0)},et=function(){var He=(0,y.Z)(function*(Ge,_t,mt){if(bt())return!1;if(_t){const Ct=yield Ae();Ct&&Ge.el!==Ct&&(yield Ct.setOpen(!1,!1))}return Ge._setOpen(_t,mt)});return function(_t,mt,Ct){return He.apply(this,arguments)}}(),Le=()=>yt(He=>He._isOpen),ut=()=>Fe.map(He=>He.el),bt=()=>Fe.some(He=>He.isAnimating),yt=He=>{const Ge=Fe.find(He);if(void 0!==Ge)return Ge.el},We=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(He=>new Promise(Ge=>(0,Y.c)(He,Ge))));return Ke("reveal",Ue),Ke("push",me),Ke("overlay",Ce),typeof document<"u"&&document.addEventListener("ionBackButton",He=>{const Ge=Le();Ge&&He.detail.register(g.MENU_BACK_BUTTON_PRIORITY,()=>Ge.close())}),{registerAnimation:Ke,get:ze,getMenus:q,getOpen:Ae,isEnabled:lt,swipeGesture:_e,isAnimating:pt,isOpen:oe,enable:Se,toggle:Xe,close:Be,open:je,_getOpenSync:Le,_createAnimation:(He,Ge)=>{const _t=De.get(He);if(!_t)throw new Error("animation not registered");return _t(Ge)},_register:He=>{Fe.indexOf(He)<0&&(He.disabled||Me(He),Fe.push(He))},_unregister:He=>{const Ge=Fe.indexOf(He);Ge>-1&&Fe.splice(Ge,1)},_setOpen:et,_setActiveMenu:Me}})()},3457:(on,ot,k)=>{"use strict";k.d(ot,{w:()=>y});const y=typeof window<"u"?window:void 0},1898:(on,ot,k)=>{"use strict";k.r(ot),k.d(ot,{GESTURE_CONTROLLER:()=>y.G,createGesture:()=>Ue});var y=k(4349);const g=(Fe,je,Be,Xe)=>{const Se=Y(Fe)?{capture:!!Xe.capture,passive:!!Xe.passive}:!!Xe.capture;let _e,oe;return Fe.__zone_symbol__addEventListener?(_e="__zone_symbol__addEventListener",oe="__zone_symbol__removeEventListener"):(_e="addEventListener",oe="removeEventListener"),Fe[_e](je,Be,Se),()=>{Fe[oe](je,Be,Se)}},Y=Fe=>{if(void 0===ae)try{const je=Object.defineProperty({},"passive",{get:()=>{ae=!0}});Fe.addEventListener("optsTest",()=>{},je)}catch{ae=!1}return!!ae};let ae;const Ce=Fe=>Fe instanceof Document?Fe:Fe.ownerDocument,Ue=Fe=>{let je=!1,Be=!1,Xe=!0,Se=!1;const _e=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Fe),oe=_e.canStart,lt=_e.onWillStart,ze=_e.onStart,Ae=_e.onEnd,q=_e.notCaptured,pt=_e.onMove,Ke=_e.threshold,ne=_e.passive,nt=_e.blurOnStart,Me={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},et=((Fe,je,Be)=>{const Xe=Be*(Math.PI/180),Se="x"===Fe,_e=Math.cos(Xe),oe=je*je;let lt=0,ze=0,Ae=!1,q=0;return{start(pt,Ke){lt=pt,ze=Ke,q=0,Ae=!0},detect(pt,Ke){if(!Ae)return!1;const ne=pt-lt,nt=Ke-ze,Me=ne*ne+nt*nt;if(Me<oe)return!1;const et=Math.sqrt(Me),vt=(Se?ne:nt)/et;return q=vt>_e?1:vt<-_e?-1:0,Ae=!1,!0},isGesture:()=>0!==q,getDirection:()=>q}})(_e.direction,_e.threshold,_e.maxAngle),vt=y.G.createGesture({name:Fe.gestureName,priority:Fe.gesturePriority,disableScroll:Fe.disableScroll}),bt=()=>{je&&(Se=!1,pt&&pt(Me))},yt=()=>!!vt.capture()&&(je=!0,Xe=!1,Me.startX=Me.currentX,Me.startY=Me.currentY,Me.startTime=Me.currentTime,lt?lt(Me).then(He):He(),!0),He=()=>{nt&&(()=>{if(typeof document<"u"){const jt=document.activeElement;null!=jt&&jt.blur&&jt.blur()}})(),ze&&ze(Me),Xe=!0},Ge=()=>{je=!1,Be=!1,Se=!1,Xe=!0,vt.release()},_t=jt=>{const _n=je,Tt=Xe;if(Ge(),Tt){if(Te(Me,jt),_n)return void(Ae&&Ae(Me));q&&q(Me)}},mt=((Fe,je,Be,Xe,Se)=>{let _e,oe,lt,ze,Ae,q,pt,Ke=0;const ne=We=>{Ke=Date.now()+2e3,je(We)&&(!oe&&Be&&(oe=g(Fe,"touchmove",Be,Se)),lt||(lt=g(We.target,"touchend",Me,Se)),ze||(ze=g(We.target,"touchcancel",Me,Se)))},nt=We=>{Ke>Date.now()||je(We)&&(!q&&Be&&(q=g(Ce(Fe),"mousemove",Be,Se)),pt||(pt=g(Ce(Fe),"mouseup",et,Se)))},Me=We=>{vt(),Xe&&Xe(We)},et=We=>{Le(),Xe&&Xe(We)},vt=()=>{oe&&oe(),lt&&lt(),ze&&ze(),oe=lt=ze=void 0},Le=()=>{q&&q(),pt&&pt(),q=pt=void 0},ut=()=>{vt(),Le()},bt=(We=!0)=>{We?(_e||(_e=g(Fe,"touchstart",ne,Se)),Ae||(Ae=g(Fe,"mousedown",nt,Se))):(_e&&_e(),Ae&&Ae(),_e=Ae=void 0,ut())};return{enable:bt,stop:ut,destroy:()=>{bt(!1),Xe=Be=je=void 0}}})(_e.el,jt=>{const _n=De(jt);return!(Be||!Xe||(pe(jt,Me),Me.startX=Me.currentX,Me.startY=Me.currentY,Me.startTime=Me.currentTime=_n,Me.velocityX=Me.velocityY=Me.deltaX=Me.deltaY=0,Me.event=jt,oe&&!1===oe(Me))||(vt.release(),!vt.start()))&&(Be=!0,0===Ke?yt():(et.start(Me.startX,Me.startY),!0))},jt=>{je?!Se&&Xe&&(Se=!0,Te(Me,jt),requestAnimationFrame(bt)):(Te(Me,jt),et.detect(Me.currentX,Me.currentY)&&(!et.isGesture()||!yt())&&Ct())},_t,{capture:!1,passive:ne}),Ct=()=>{Ge(),mt.stop(),q&&q(Me)};return{enable(jt=!0){jt||(je&&_t(void 0),Ge()),mt.enable(jt)},destroy(){vt.destroy(),mt.destroy()}}},Te=(Fe,je)=>{if(!je)return;const Be=Fe.currentX,Xe=Fe.currentY,Se=Fe.currentTime;pe(je,Fe);const _e=Fe.currentX,oe=Fe.currentY,ze=(Fe.currentTime=De(je))-Se;if(ze>0&&ze<100){const q=(oe-Xe)/ze;Fe.velocityX=(_e-Be)/ze*.7+.3*Fe.velocityX,Fe.velocityY=.7*q+.3*Fe.velocityY}Fe.deltaX=_e-Fe.startX,Fe.deltaY=oe-Fe.startY,Fe.event=je},pe=(Fe,je)=>{let Be=0,Xe=0;if(Fe){const Se=Fe.changedTouches;if(Se&&Se.length>0){const _e=Se[0];Be=_e.clientX,Xe=_e.clientY}else void 0!==Fe.pageX&&(Be=Fe.pageX,Xe=Fe.pageY)}je.currentX=Be,je.currentY=Xe},De=Fe=>Fe.timeStamp||Date.now()},9816:(on,ot,k)=>{"use strict";k.d(ot,{B:()=>pe,H:()=>ut,a:()=>Vs,b:()=>we,c:()=>jt,d:()=>Rt,e:()=>Ci,f:()=>ct,g:()=>_n,h:()=>vt,i:()=>En,j:()=>De,p:()=>Fi,r:()=>ki,w:()=>Br});var y=k(5861);let Y,ae,xe,Pe=!1,Ce=!1,me=!1,Ue=!1,Te=!1;const pe={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},De=de=>{const Re=new URL(de,Jn.$resourcesUrl$);return Re.origin!==Qr.location.origin?Re.href:Re.pathname},oe="s-id",lt="sty-id",q="http://www.w3.org/1999/xlink",pt={},Me=de=>"object"==(de=typeof de)||"function"===de;function et(de){var Re,Ye,be;return null!==(be=null===(Ye=null===(Re=de.head)||void 0===Re?void 0:Re.querySelector('meta[name="csp-nonce"]'))||void 0===Ye?void 0:Ye.getAttribute("content"))&&void 0!==be?be:void 0}const vt=(de,Re,...Ye)=>{let be=null,tt=null,st=null,kt=!1,$t=!1;const Wt=[],zt=qn=>{for(let Qn=0;Qn<qn.length;Qn++)be=qn[Qn],Array.isArray(be)?zt(be):null!=be&&"boolean"!=typeof be&&((kt="function"!=typeof de&&!Me(be))&&(be=String(be)),kt&&$t?Wt[Wt.length-1].$text$+=be:Wt.push(kt?Le(null,be):be),$t=kt)};if(zt(Ye),Re){Re.key&&(tt=Re.key),Re.name&&(st=Re.name);{const qn=Re.className||Re.class;qn&&(Re.class="object"!=typeof qn?qn:Object.keys(qn).filter(Qn=>qn[Qn]).join(" "))}}if("function"==typeof de)return de(null===Re?{}:Re,Wt,yt);const pn=Le(de,null);return pn.$attrs$=Re,Wt.length>0&&(pn.$children$=Wt),pn.$key$=tt,pn.$name$=st,pn},Le=(de,Re)=>({$flags$:0,$tag$:de,$text$:Re,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ut={},yt={forEach:(de,Re)=>de.map(We).forEach(Re),map:(de,Re)=>de.map(We).map(Re).map(He)},We=de=>({vattrs:de.$attrs$,vchildren:de.$children$,vkey:de.$key$,vname:de.$name$,vtag:de.$tag$,vtext:de.$text$}),He=de=>{if("function"==typeof de.vtag){const Ye=Object.assign({},de.vattrs);return de.vkey&&(Ye.key=de.vkey),de.vname&&(Ye.name=de.vname),vt(de.vtag,Ye,...de.vchildren||[])}const Re=Le(de.vtag,de.vtext);return Re.$attrs$=de.vattrs,Re.$children$=de.vchildren,Re.$key$=de.vkey,Re.$name$=de.vname,Re},_t=(de,Re,Ye,be,tt,st,kt)=>{let $t,Wt,zt,pn;if(1===st.nodeType){for($t=st.getAttribute("c-id"),$t&&(Wt=$t.split("."),(Wt[0]===kt||"0"===Wt[0])&&(zt={$flags$:0,$hostId$:Wt[0],$nodeId$:Wt[1],$depth$:Wt[2],$index$:Wt[3],$tag$:st.tagName.toLowerCase(),$elm$:st,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Re.push(zt),st.removeAttribute("c-id"),de.$children$||(de.$children$=[]),de.$children$[zt.$index$]=zt,de=zt,be&&"0"===zt.$depth$&&(be[zt.$index$]=zt.$elm$))),pn=st.childNodes.length-1;pn>=0;pn--)_t(de,Re,Ye,be,tt,st.childNodes[pn],kt);if(st.shadowRoot)for(pn=st.shadowRoot.childNodes.length-1;pn>=0;pn--)_t(de,Re,Ye,be,tt,st.shadowRoot.childNodes[pn],kt)}else if(8===st.nodeType)Wt=st.nodeValue.split("."),(Wt[1]===kt||"0"===Wt[1])&&($t=Wt[0],zt={$flags$:0,$hostId$:Wt[1],$nodeId$:Wt[2],$depth$:Wt[3],$index$:Wt[4],$elm$:st,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===$t?(zt.$elm$=st.nextSibling,zt.$elm$&&3===zt.$elm$.nodeType&&(zt.$text$=zt.$elm$.textContent,Re.push(zt),st.remove(),de.$children$||(de.$children$=[]),de.$children$[zt.$index$]=zt,be&&"0"===zt.$depth$&&(be[zt.$index$]=zt.$elm$))):zt.$hostId$===kt&&("s"===$t?(zt.$tag$="slot",st["s-sn"]=Wt[5]?zt.$name$=Wt[5]:"",st["s-sr"]=!0,be&&(zt.$elm$=rr.createElement(zt.$tag$),zt.$name$&&zt.$elm$.setAttribute("name",zt.$name$),st.parentNode.insertBefore(zt.$elm$,st),st.remove(),"0"===zt.$depth$&&(be[zt.$index$]=zt.$elm$)),Ye.push(zt),de.$children$||(de.$children$=[]),de.$children$[zt.$index$]=zt):"r"===$t&&(be?st.remove():(tt["s-cr"]=st,st["s-cn"]=!0))));else if(de&&"style"===de.$tag$){const qn=Le(null,st.textContent);qn.$elm$=st,qn.$index$="0",de.$children$=[qn]}},mt=(de,Re)=>{if(1===de.nodeType){let Ye=0;for(;Ye<de.childNodes.length;Ye++)mt(de.childNodes[Ye],Re);if(de.shadowRoot)for(Ye=0;Ye<de.shadowRoot.childNodes.length;Ye++)mt(de.shadowRoot.childNodes[Ye],Re)}else if(8===de.nodeType){const Ye=de.nodeValue.split(".");"o"===Ye[0]&&(Re.set(Ye[1]+"."+Ye[2],de),de.nodeValue="",de["s-en"]=Ye[3])}},jt=de=>pi.push(de),_n=de=>Jr(de).$modeName$,ct=de=>Jr(de).$hostElement$,Rt=(de,Re,Ye)=>{const be=ct(de);return{emit:tt=>Jt(be,Re,{bubbles:!!(4&Ye),composed:!!(2&Ye),cancelable:!!(1&Ye),detail:tt})}},Jt=(de,Re,Ye)=>{const be=Jn.ce(Re,Ye);return de.dispatchEvent(be),be},Cn=new WeakMap,Fn=(de,Re,Ye)=>{let be=pr.get(de);gi&&Ye?(be=be||new CSSStyleSheet,"string"==typeof be?be=Re:be.replaceSync(Re)):be=Re,pr.set(de,be)},gn=(de,Re,Ye,be)=>{var tt;let st=vn(Re,Ye);const kt=pr.get(st);if(de=11===de.nodeType?de:rr,kt)if("string"==typeof kt){let Wt,$t=Cn.get(de=de.head||de);if($t||Cn.set(de,$t=new Set),!$t.has(st)){if(de.host&&(Wt=de.querySelector(`[${lt}="${st}"]`)))Wt.innerHTML=kt;else{Wt=rr.createElement("style"),Wt.innerHTML=kt;const zt=null!==(tt=Jn.$nonce$)&&void 0!==tt?tt:et(rr);null!=zt&&Wt.setAttribute("nonce",zt),de.insertBefore(Wt,de.querySelector("link"))}$t&&$t.add(st)}}else de.adoptedStyleSheets.includes(kt)||(de.adoptedStyleSheets=[...de.adoptedStyleSheets,kt]);return st},vn=(de,Re)=>"sc-"+(Re&&32&de.$flags$?de.$tagName$+"-"+Re:de.$tagName$),Ut=de=>de.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),nr=(de,Re,Ye,be,tt,st)=>{if(Ye!==be){let kt=Vi(de,Re),$t=Re.toLowerCase();if("class"===Re){const Wt=de.classList,zt=un(Ye),pn=un(be);Wt.remove(...zt.filter(qn=>qn&&!pn.includes(qn))),Wt.add(...pn.filter(qn=>qn&&!zt.includes(qn)))}else if("style"===Re){for(const Wt in Ye)(!be||null==be[Wt])&&(Wt.includes("-")?de.style.removeProperty(Wt):de.style[Wt]="");for(const Wt in be)(!Ye||be[Wt]!==Ye[Wt])&&(Wt.includes("-")?de.style.setProperty(Wt,be[Wt]):de.style[Wt]=be[Wt])}else if("key"!==Re)if("ref"===Re)be&&be(de);else if(kt||"o"!==Re[0]||"n"!==Re[1]){const Wt=Me(be);if((kt||Wt&&null!==be)&&!tt)try{if(de.tagName.includes("-"))de[Re]=be;else{const pn=null==be?"":be;"list"===Re?kt=!1:(null==Ye||de[Re]!=pn)&&(de[Re]=pn)}}catch{}let zt=!1;$t!==($t=$t.replace(/^xlink\:?/,""))&&(Re=$t,zt=!0),null==be||!1===be?(!1!==be||""===de.getAttribute(Re))&&(zt?de.removeAttributeNS(q,Re):de.removeAttribute(Re)):(!kt||4&st||tt)&&!Wt&&(be=!0===be?"":be,zt?de.setAttributeNS(q,Re,be):de.setAttribute(Re,be))}else Re="-"===Re[2]?Re.slice(3):Vi(Qr,$t)?$t.slice(2):$t[2]+Re.slice(3),Ye&&Jn.rel(de,Re,Ye,!1),be&&Jn.ael(de,Re,be,!1)}},Hn=/\s/,un=de=>de?de.split(Hn):[],or=(de,Re,Ye,be)=>{const tt=11===Re.$elm$.nodeType&&Re.$elm$.host?Re.$elm$.host:Re.$elm$,st=de&&de.$attrs$||pt,kt=Re.$attrs$||pt;for(be in st)be in kt||nr(tt,be,st[be],void 0,Ye,Re.$flags$);for(be in kt)nr(tt,be,st[be],kt[be],Ye,Re.$flags$)},ci=(de,Re,Ye,be)=>{const tt=Re.$children$[Ye];let kt,$t,Wt,st=0;if(Pe||(me=!0,"slot"===tt.$tag$&&(Y&&be.classList.add(Y+"-s"),tt.$flags$|=tt.$children$?2:1)),null!==tt.$text$)kt=tt.$elm$=rr.createTextNode(tt.$text$);else if(1&tt.$flags$)kt=tt.$elm$=rr.createTextNode("");else{if(Ue||(Ue="svg"===tt.$tag$),kt=tt.$elm$=rr.createElementNS(Ue?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&tt.$flags$?"slot-fb":tt.$tag$),Ue&&"foreignObject"===tt.$tag$&&(Ue=!1),or(null,tt,Ue),(de=>null!=de)(Y)&&kt["s-si"]!==Y&&kt.classList.add(kt["s-si"]=Y),tt.$children$)for(st=0;st<tt.$children$.length;++st)$t=ci(de,tt,st,kt),$t&&kt.appendChild($t);"svg"===tt.$tag$?Ue=!1:"foreignObject"===kt.tagName&&(Ue=!0)}return kt["s-hn"]=xe,3&tt.$flags$&&(kt["s-sr"]=!0,kt["s-cr"]=ae,kt["s-sn"]=tt.$name$||"",Wt=de&&de.$children$&&de.$children$[Ye],Wt&&Wt.$tag$===tt.$tag$&&de.$elm$&&Ir(de.$elm$,!1)),kt},Ir=(de,Re)=>{Jn.$flags$|=1;const Ye=de.childNodes;for(let be=Ye.length-1;be>=0;be--){const tt=Ye[be];tt["s-hn"]!==xe&&tt["s-ol"]&&(rn(tt).insertBefore(tt,Rn(tt)),tt["s-ol"].remove(),tt["s-ol"]=void 0,me=!0),Re&&Ir(tt,Re)}Jn.$flags$&=-2},Ni=(de,Re,Ye,be,tt,st)=>{let $t,kt=de["s-cr"]&&de["s-cr"].parentNode||de;for(kt.shadowRoot&&kt.tagName===xe&&(kt=kt.shadowRoot);tt<=st;++tt)be[tt]&&($t=ci(null,Ye,tt,de),$t&&(be[tt].$elm$=$t,kt.insertBefore($t,Rn(Re))))},Gr=(de,Re,Ye,be,tt)=>{for(;Re<=Ye;++Re)(be=de[Re])&&(tt=be.$elm$,xi(be),Ce=!0,tt["s-ol"]?tt["s-ol"].remove():Ir(tt,!0),tt.remove())},fr=(de,Re)=>de.$tag$===Re.$tag$&&("slot"===de.$tag$?de.$name$===Re.$name$:de.$key$===Re.$key$),Rn=de=>de&&de["s-ol"]||de,rn=de=>(de["s-ol"]?de["s-ol"]:de).parentNode,xr=(de,Re)=>{const Ye=Re.$elm$=de.$elm$,be=de.$children$,tt=Re.$children$,st=Re.$tag$,kt=Re.$text$;let $t;null===kt?(Ue="svg"===st||"foreignObject"!==st&&Ue,"slot"===st||or(de,Re,Ue),null!==be&&null!==tt?((de,Re,Ye,be)=>{let at,wt,tt=0,st=0,kt=0,$t=0,Wt=Re.length-1,zt=Re[0],pn=Re[Wt],qn=be.length-1,Qn=be[0],Je=be[qn];for(;tt<=Wt&&st<=qn;)if(null==zt)zt=Re[++tt];else if(null==pn)pn=Re[--Wt];else if(null==Qn)Qn=be[++st];else if(null==Je)Je=be[--qn];else if(fr(zt,Qn))xr(zt,Qn),zt=Re[++tt],Qn=be[++st];else if(fr(pn,Je))xr(pn,Je),pn=Re[--Wt],Je=be[--qn];else if(fr(zt,Je))("slot"===zt.$tag$||"slot"===Je.$tag$)&&Ir(zt.$elm$.parentNode,!1),xr(zt,Je),de.insertBefore(zt.$elm$,pn.$elm$.nextSibling),zt=Re[++tt],Je=be[--qn];else if(fr(pn,Qn))("slot"===zt.$tag$||"slot"===Je.$tag$)&&Ir(pn.$elm$.parentNode,!1),xr(pn,Qn),de.insertBefore(pn.$elm$,zt.$elm$),pn=Re[--Wt],Qn=be[++st];else{for(kt=-1,$t=tt;$t<=Wt;++$t)if(Re[$t]&&null!==Re[$t].$key$&&Re[$t].$key$===Qn.$key$){kt=$t;break}kt>=0?(wt=Re[kt],wt.$tag$!==Qn.$tag$?at=ci(Re&&Re[st],Ye,kt,de):(xr(wt,Qn),Re[kt]=void 0,at=wt.$elm$),Qn=be[++st]):(at=ci(Re&&Re[st],Ye,st,de),Qn=be[++st]),at&&rn(zt.$elm$).insertBefore(at,Rn(zt.$elm$))}tt>Wt?Ni(de,null==be[qn+1]?null:be[qn+1].$elm$,Ye,be,st,qn):st>qn&&Gr(Re,tt,Wt)})(Ye,be,Re,tt):null!==tt?(null!==de.$text$&&(Ye.textContent=""),Ni(Ye,null,Re,tt,0,tt.length-1)):null!==be&&Gr(be,0,be.length-1),Ue&&"svg"===st&&(Ue=!1)):($t=Ye["s-cr"])?$t.parentNode.textContent=kt:de.$text$!==kt&&(Ye.data=kt)},Lr=de=>{const Re=de.childNodes;let Ye,be,tt,st,kt,$t;for(be=0,tt=Re.length;be<tt;be++)if(Ye=Re[be],1===Ye.nodeType){if(Ye["s-sr"])for(kt=Ye["s-sn"],Ye.hidden=!1,st=0;st<tt;st++)if($t=Re[st].nodeType,Re[st]["s-hn"]!==Ye["s-hn"]||""!==kt){if(1===$t&&kt===Re[st].getAttribute("slot")){Ye.hidden=!0;break}}else if(1===$t||3===$t&&""!==Re[st].textContent.trim()){Ye.hidden=!0;break}Lr(Ye)}},cr=[],si=de=>{let Re,Ye,be,tt,st,kt,$t=0;const Wt=de.childNodes,zt=Wt.length;for(;$t<zt;$t++){if(Re=Wt[$t],Re["s-sr"]&&(Ye=Re["s-cr"])&&Ye.parentNode)for(be=Ye.parentNode.childNodes,tt=Re["s-sn"],kt=be.length-1;kt>=0;kt--)Ye=be[kt],!Ye["s-cn"]&&!Ye["s-nr"]&&Ye["s-hn"]!==Re["s-hn"]&&(Vr(Ye,tt)?(st=cr.find(pn=>pn.$nodeToRelocate$===Ye),Ce=!0,Ye["s-sn"]=Ye["s-sn"]||tt,st?st.$slotRefNode$=Re:cr.push({$slotRefNode$:Re,$nodeToRelocate$:Ye}),Ye["s-sr"]&&cr.map(pn=>{Vr(pn.$nodeToRelocate$,Ye["s-sn"])&&(st=cr.find(qn=>qn.$nodeToRelocate$===Ye),st&&!pn.$slotRefNode$&&(pn.$slotRefNode$=st.$slotRefNode$))})):cr.some(pn=>pn.$nodeToRelocate$===Ye)||cr.push({$nodeToRelocate$:Ye}));1===Re.nodeType&&si(Re)}},Vr=(de,Re)=>1===de.nodeType?null===de.getAttribute("slot")&&""===Re||de.getAttribute("slot")===Re:de["s-sn"]===Re||""===Re,xi=de=>{de.$attrs$&&de.$attrs$.ref&&de.$attrs$.ref(null),de.$children$&&de.$children$.map(xi)},Zr=(de,Re)=>{Re&&!de.$onRenderResolve$&&Re["s-p"]&&Re["s-p"].push(new Promise(Ye=>de.$onRenderResolve$=Ye))},er=(de,Re)=>{if(de.$flags$|=16,!(4&de.$flags$))return Zr(de,de.$ancestorComponent$),Br(()=>bi(de,Re));de.$flags$|=512},bi=(de,Re)=>{const be=de.$lazyInstance$;let tt;return Re&&(de.$flags$|=256,de.$queuedListeners$&&(de.$queuedListeners$.map(([st,kt])=>zn(be,st,kt)),de.$queuedListeners$=null),tt=zn(be,"componentWillLoad")),tt=ur(tt,()=>zn(be,"componentWillRender")),ur(tt,()=>Xn(de,be,Re))},Xn=function(){var de=(0,y.Z)(function*(Re,Ye,be){const tt=Re.$hostElement$,kt=tt["s-rc"];be&&(de=>{const Re=de.$cmpMeta$,Ye=de.$hostElement$,be=Re.$flags$,st=gn(Ye.shadowRoot?Ye.shadowRoot:Ye.getRootNode(),Re,de.$modeName$);10&be&&(Ye["s-sc"]=st,Ye.classList.add(st+"-h"),2&be&&Ye.classList.add(st+"-s"))})(Re);mn(Re,Ye),kt&&(kt.map(Wt=>Wt()),tt["s-rc"]=void 0);{const Wt=tt["s-p"],zt=()=>Gt(Re);0===Wt.length?zt():(Promise.all(Wt).then(zt),Re.$flags$|=4,Wt.length=0)}});return function(Ye,be,tt){return de.apply(this,arguments)}}(),mn=(de,Re,Ye)=>{try{Re=Re.render&&Re.render(),de.$flags$&=-17,de.$flags$|=2,((de,Re)=>{const Ye=de.$hostElement$,be=de.$cmpMeta$,tt=de.$vnode$||Le(null,null),st=(de=>de&&de.$tag$===ut)(Re)?Re:vt(null,null,Re);if(xe=Ye.tagName,be.$attrsToReflect$&&(st.$attrs$=st.$attrs$||{},be.$attrsToReflect$.map(([kt,$t])=>st.$attrs$[$t]=Ye[kt])),st.$tag$=null,st.$flags$|=4,de.$vnode$=st,st.$elm$=tt.$elm$=Ye.shadowRoot||Ye,Y=Ye["s-sc"],ae=Ye["s-cr"],Pe=0!=(1&be.$flags$),Ce=!1,xr(tt,st),Jn.$flags$|=1,me){si(st.$elm$);let kt,$t,Wt,zt,pn,qn,Qn=0;for(;Qn<cr.length;Qn++)kt=cr[Qn],$t=kt.$nodeToRelocate$,$t["s-ol"]||(Wt=rr.createTextNode(""),Wt["s-nr"]=$t,$t.parentNode.insertBefore($t["s-ol"]=Wt,$t));for(Qn=0;Qn<cr.length;Qn++)if(kt=cr[Qn],$t=kt.$nodeToRelocate$,kt.$slotRefNode$){for(zt=kt.$slotRefNode$.parentNode,pn=kt.$slotRefNode$.nextSibling,Wt=$t["s-ol"];Wt=Wt.previousSibling;)if(qn=Wt["s-nr"],qn&&qn["s-sn"]===$t["s-sn"]&&zt===qn.parentNode&&(qn=qn.nextSibling,!qn||!qn["s-nr"])){pn=qn;break}(!pn&&zt!==$t.parentNode||$t.nextSibling!==pn)&&$t!==pn&&(!$t["s-hn"]&&$t["s-ol"]&&($t["s-hn"]=$t["s-ol"].parentNode.nodeName),zt.insertBefore($t,pn))}else 1===$t.nodeType&&($t.hidden=!0)}Ce&&Lr(st.$elm$),Jn.$flags$&=-2,cr.length=0})(de,Re)}catch(be){Hi(be,de.$hostElement$)}return null},Gt=de=>{const Ye=de.$hostElement$,tt=de.$lazyInstance$,st=de.$ancestorComponent$;zn(tt,"componentDidRender"),64&de.$flags$?zn(tt,"componentDidUpdate"):(de.$flags$|=64,Pr(Ye),zn(tt,"componentDidLoad"),de.$onReadyResolve$(Ye),st||An()),de.$onInstanceResolve$(Ye),de.$onRenderResolve$&&(de.$onRenderResolve$(),de.$onRenderResolve$=void 0),512&de.$flags$&&Xr(()=>er(de,!1)),de.$flags$&=-517},En=de=>{{const Re=Jr(de),Ye=Re.$hostElement$.isConnected;return Ye&&2==(18&Re.$flags$)&&er(Re,!1),Ye}},An=de=>{Pr(rr.documentElement),Xr(()=>Jt(Qr,"appload",{detail:{namespace:"ionic"}}))},zn=(de,Re,Ye)=>{if(de&&de[Re])try{return de[Re](Ye)}catch(be){Hi(be)}},ur=(de,Re)=>de&&de.then?de.then(Re):Re(),Pr=de=>de.classList.add("hydrated"),fe=(de,Re,Ye)=>{if(Re.$members$){de.watchers&&(Re.$watchers$=de.watchers);const be=Object.entries(Re.$members$),tt=de.prototype;if(be.map(([st,[kt]])=>{31&kt||2&Ye&&32&kt?Object.defineProperty(tt,st,{get(){return((de,Re)=>Jr(this).$instanceValues$.get(Re))(0,st)},set($t){((de,Re,Ye,be)=>{const tt=Jr(de),st=tt.$hostElement$,kt=tt.$instanceValues$.get(Re),$t=tt.$flags$,Wt=tt.$lazyInstance$;Ye=((de,Re)=>null==de||Me(de)?de:4&Re?"false"!==de&&(""===de||!!de):2&Re?parseFloat(de):1&Re?String(de):de)(Ye,be.$members$[Re][0]);const zt=Number.isNaN(kt)&&Number.isNaN(Ye);if((!(8&$t)||void 0===kt)&&Ye!==kt&&!zt&&(tt.$instanceValues$.set(Re,Ye),Wt)){if(be.$watchers$&&128&$t){const qn=be.$watchers$[Re];qn&&qn.map(Qn=>{try{Wt[Qn](Ye,kt,Re)}catch(Je){Hi(Je,st)}})}2==(18&$t)&&er(tt,!1)}})(this,st,$t,Re)},configurable:!0,enumerable:!0}):1&Ye&&64&kt&&Object.defineProperty(tt,st,{value(...$t){const Wt=Jr(this);return Wt.$onInstancePromise$.then(()=>Wt.$lazyInstance$[st](...$t))}})}),1&Ye){const st=new Map;tt.attributeChangedCallback=function(kt,$t,Wt){Jn.jmp(()=>{const zt=st.get(kt);if(this.hasOwnProperty(zt))Wt=this[zt],delete this[zt];else if(tt.hasOwnProperty(zt)&&"number"==typeof this[zt]&&this[zt]==Wt)return;this[zt]=(null!==Wt||"boolean"!=typeof this[zt])&&Wt})},de.observedAttributes=be.filter(([kt,$t])=>15&$t[0]).map(([kt,$t])=>{const Wt=$t[1]||kt;return st.set(Wt,kt),512&$t[0]&&Re.$attrsToReflect$.push([kt,Wt]),Wt})}}return de},ve=function(){var de=(0,y.Z)(function*(Re,Ye,be,tt,st){if(!(32&Ye.$flags$)){{if(Ye.$flags$|=32,(st=ws(be)).then){const zt=()=>{};st=yield st,zt()}st.isProxied||(be.$watchers$=st.watchers,fe(st,be,2),st.isProxied=!0);const Wt=()=>{};Ye.$flags$|=8;try{new st(Ye)}catch(zt){Hi(zt)}Ye.$flags$&=-9,Ye.$flags$|=128,Wt(),he(Ye.$lazyInstance$)}if(st.style){let Wt=st.style;"string"!=typeof Wt&&(Wt=Wt[Ye.$modeName$=(de=>pi.map(Re=>Re(de)).find(Re=>!!Re))(Re)]);const zt=vn(be,Ye.$modeName$);if(!pr.has(zt)){const pn=()=>{};Fn(zt,Wt,!!(1&be.$flags$)),pn()}}}const kt=Ye.$ancestorComponent$,$t=()=>er(Ye,!0);kt&&kt["s-rc"]?kt["s-rc"].push($t):$t()});return function(Ye,be,tt,st,kt){return de.apply(this,arguments)}}(),he=de=>{zn(de,"connectedCallback")},Oe=de=>{const Re=de["s-cr"]=rr.createComment("");Re["s-cn"]=!0,de.insertBefore(Re,de.firstChild)},we=(de,Re={})=>{var Ye;const tt=[],st=Re.exclude||[],kt=Qr.customElements,$t=rr.head,Wt=$t.querySelector("meta[charset]"),zt=rr.createElement("style"),pn=[],qn=rr.querySelectorAll(`[${lt}]`);let Qn,Je=!0,at=0;for(Object.assign(Jn,Re),Jn.$resourcesUrl$=new URL(Re.resourcesUrl||"./",rr.baseURI).href,Jn.$flags$|=2;at<qn.length;at++)Fn(qn[at].getAttribute(lt),Ut(qn[at].innerHTML),!0);de.map(wt=>{wt[1].map(Vt=>{const an={$flags$:Vt[0],$tagName$:Vt[1],$members$:Vt[2],$listeners$:Vt[3]};an.$members$=Vt[2],an.$listeners$=Vt[3],an.$attrsToReflect$=[],an.$watchers$={};const Bn=an.$tagName$,mr=class extends HTMLElement{constructor(ir){super(ir),rs(ir=this,an),1&an.$flags$&&ir.attachShadow({mode:"open",delegatesFocus:!!(16&an.$flags$)})}connectedCallback(){Qn&&(clearTimeout(Qn),Qn=null),Je?pn.push(this):Jn.jmp(()=>(de=>{if(!(1&Jn.$flags$)){const Re=Jr(de),Ye=Re.$cmpMeta$,be=()=>{};if(1&Re.$flags$)rt(de,Re,Ye.$listeners$),he(Re.$lazyInstance$);else{let tt;if(Re.$flags$|=1,tt=de.getAttribute(oe),tt){if(1&Ye.$flags$){const st=gn(de.shadowRoot,Ye,de.getAttribute("s-mode"));de.classList.remove(st+"-h",st+"-s")}((de,Re,Ye,be)=>{const st=de.shadowRoot,kt=[],Wt=st?[]:null,zt=be.$vnode$=Le(Re,null);Jn.$orgLocNodes$||mt(rr.body,Jn.$orgLocNodes$=new Map),de[oe]=Ye,de.removeAttribute(oe),_t(zt,kt,[],Wt,de,de,Ye),kt.map(pn=>{const qn=pn.$hostId$+"."+pn.$nodeId$,Qn=Jn.$orgLocNodes$.get(qn),Je=pn.$elm$;Qn&&oi&&""===Qn["s-en"]&&Qn.parentNode.insertBefore(Je,Qn.nextSibling),st||(Je["s-hn"]=Re,Qn&&(Je["s-ol"]=Qn,Je["s-ol"]["s-nr"]=Je)),Jn.$orgLocNodes$.delete(qn)}),st&&Wt.map(pn=>{pn&&st.appendChild(pn)})})(de,Ye.$tagName$,tt,Re)}tt||12&Ye.$flags$&&Oe(de);{let st=de;for(;st=st.parentNode||st.host;)if(1===st.nodeType&&st.hasAttribute("s-id")&&st["s-p"]||st["s-p"]){Zr(Re,Re.$ancestorComponent$=st);break}}Ye.$members$&&Object.entries(Ye.$members$).map(([st,[kt]])=>{if(31&kt&&de.hasOwnProperty(st)){const $t=de[st];delete de[st],de[st]=$t}}),ve(de,Re,Ye)}be()}})(this))}disconnectedCallback(){Jn.jmp(()=>(de=>{if(!(1&Jn.$flags$)){const Re=Jr(this),Ye=Re.$lazyInstance$;Re.$rmListeners$&&(Re.$rmListeners$.map(be=>be()),Re.$rmListeners$=void 0),zn(Ye,"disconnectedCallback")}})())}componentOnReady(){return Jr(this).$onReadyPromise$}};an.$lazyBundleId$=wt[0],!st.includes(Bn)&&!kt.get(Bn)&&(tt.push(Bn),kt.define(Bn,fe(mr,an,1)))})});{zt.innerHTML=tt+"{visibility:hidden}.hydrated{visibility:inherit}",zt.setAttribute("data-styles","");const wt=null!==(Ye=Jn.$nonce$)&&void 0!==Ye?Ye:et(rr);null!=wt&&zt.setAttribute("nonce",wt),$t.insertBefore(zt,Wt?Wt.nextSibling:$t.firstChild)}Je=!1,pn.length?pn.map(wt=>wt.connectedCallback()):Jn.jmp(()=>Qn=setTimeout(An,30))},rt=(de,Re,Ye,be)=>{Ye&&Ye.map(([tt,st,kt])=>{const $t=Yt(de,tt),Wt=Mt(Re,kt),zt=In(tt);Jn.ael($t,st,Wt,zt),(Re.$rmListeners$=Re.$rmListeners$||[]).push(()=>Jn.rel($t,st,Wt,zt))})},Mt=(de,Re)=>Ye=>{try{256&de.$flags$?de.$lazyInstance$[Re](Ye):(de.$queuedListeners$=de.$queuedListeners$||[]).push([Re,Ye])}catch(be){Hi(be)}},Yt=(de,Re)=>4&Re?rr:8&Re?Qr:16&Re?rr.body:de,In=de=>0!=(2&de),dr=new WeakMap,Jr=de=>dr.get(de),ki=(de,Re)=>dr.set(Re.$lazyInstance$=de,Re),rs=(de,Re)=>{const Ye={$flags$:0,$hostElement$:de,$cmpMeta$:Re,$instanceValues$:new Map};return Ye.$onInstancePromise$=new Promise(be=>Ye.$onInstanceResolve$=be),Ye.$onReadyPromise$=new Promise(be=>Ye.$onReadyResolve$=be),de["s-p"]=[],de["s-rc"]=[],rt(de,Ye,Re.$listeners$),dr.set(de,Ye)},Vi=(de,Re)=>Re in de,Hi=(de,Re)=>(0,console.error)(de,Re),is=new Map,ws=(de,Re,Ye)=>{const be=de.$tagName$.replace(/-/g,"_"),tt=de.$lazyBundleId$,st=is.get(tt);return st?st[be]:k(863)(`./${tt}.entry.js`).then(kt=>(is.set(tt,kt),kt[be]),Hi)},pr=new Map,pi=[],Qr=typeof window<"u"?window:{},rr=Qr.document||{head:{}},Jn={$flags$:0,$resourcesUrl$:"",jmp:de=>de(),raf:de=>requestAnimationFrame(de),ael:(de,Re,Ye,be)=>de.addEventListener(Re,Ye,be),rel:(de,Re,Ye,be)=>de.removeEventListener(Re,Ye,be),ce:(de,Re)=>new CustomEvent(de,Re)},Vs=de=>{Object.assign(Jn,de)},oi=!0,Fi=de=>Promise.resolve(de),gi=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),bn=[],ar=[],gr=(de,Re)=>Ye=>{de.push(Ye),Te||(Te=!0,Re&&4&Jn.$flags$?Xr(ei):Jn.raf(ei))},ui=de=>{for(let Re=0;Re<de.length;Re++)try{de[Re](performance.now())}catch(Ye){Hi(Ye)}de.length=0},ei=()=>{ui(bn),ui(ar),(Te=bn.length>0)&&Jn.raf(ei)},Xr=de=>Fi().then(de),Ci=gr(bn,!1),Br=gr(ar,!0)},1178:(on,ot,k)=>{"use strict";k.d(ot,{a:()=>g,b:()=>Y,p:()=>y});const y=(ae,...xe)=>console.warn(`[Ionic Warning]: ${ae}`,...xe),g=(ae,...xe)=>console.error(`[Ionic Error]: ${ae}`,...xe),Y=(ae,...xe)=>console.error(`<${ae.tagName.toLowerCase()}> must be used inside ${xe.join(" or ")}.`)},2998:(on,ot,k)=>{"use strict";k.d(ot,{L:()=>ae,a:()=>xe,b:()=>Pe,c:()=>Ce,d:()=>me,e:()=>pt,g:()=>nt,l:()=>q,s:()=>Ke,t:()=>pe});var y=k(5861),g=k(9816),Y=k(3577);const ae="ionViewWillEnter",xe="ionViewDidEnter",Pe="ionViewWillLeave",Ce="ionViewDidLeave",me="ionViewWillUnload",pe=Me=>new Promise((et,vt)=>{(0,g.w)(()=>{De(Me),Fe(Me).then(Le=>{Le.animation&&Le.animation.destroy(),je(Me),et(Le)},Le=>{je(Me),vt(Le)})})}),De=Me=>{const et=Me.enteringEl,vt=Me.leavingEl;ne(et,vt,Me.direction),Me.showGoBack?et.classList.add("can-go-back"):et.classList.remove("can-go-back"),Ke(et,!1),et.style.setProperty("pointer-events","none"),vt&&(Ke(vt,!1),vt.style.setProperty("pointer-events","none"))},Fe=function(){var Me=(0,y.Z)(function*(et){const vt=yield Be(et);return vt&&g.B.isBrowser?Xe(vt,et):Se(et)});return function(vt){return Me.apply(this,arguments)}}(),je=Me=>{const et=Me.enteringEl,vt=Me.leavingEl;et.classList.remove("ion-page-invisible"),et.style.removeProperty("pointer-events"),void 0!==vt&&(vt.classList.remove("ion-page-invisible"),vt.style.removeProperty("pointer-events"))},Be=function(){var Me=(0,y.Z)(function*(et){return et.leavingEl&&et.animated&&0!==et.duration?et.animationBuilder?et.animationBuilder:"ios"===et.mode?(yield Promise.resolve().then(k.bind(k,5158))).iosTransitionAnimation:(yield Promise.resolve().then(k.bind(k,3175))).mdTransitionAnimation:void 0});return function(vt){return Me.apply(this,arguments)}}(),Xe=function(){var Me=(0,y.Z)(function*(et,vt){yield _e(vt,!0);const Le=et(vt.baseEl,vt);ze(vt.enteringEl,vt.leavingEl);const ut=yield lt(Le,vt);return vt.progressCallback&&vt.progressCallback(void 0),ut&&Ae(vt.enteringEl,vt.leavingEl),{hasCompleted:ut,animation:Le}});return function(vt,Le){return Me.apply(this,arguments)}}(),Se=function(){var Me=(0,y.Z)(function*(et){const vt=et.enteringEl,Le=et.leavingEl;return yield _e(et,!1),ze(vt,Le),Ae(vt,Le),{hasCompleted:!0}});return function(vt){return Me.apply(this,arguments)}}(),_e=function(){var Me=(0,y.Z)(function*(et,vt){(void 0!==et.deepWait?et.deepWait:vt)&&(yield Promise.all([pt(et.enteringEl),pt(et.leavingEl)])),yield oe(et.viewIsReady,et.enteringEl)});return function(vt,Le){return Me.apply(this,arguments)}}(),oe=function(){var Me=(0,y.Z)(function*(et,vt){et&&(yield et(vt))});return function(vt,Le){return Me.apply(this,arguments)}}(),lt=(Me,et)=>{const vt=et.progressCallback,Le=new Promise(ut=>{Me.onFinish(bt=>ut(1===bt))});return vt?(Me.progressStart(!0),vt(Me)):Me.play(),Le},ze=(Me,et)=>{q(et,Pe),q(Me,ae)},Ae=(Me,et)=>{q(Me,xe),q(et,Ce)},q=(Me,et)=>{if(Me){const vt=new CustomEvent(et,{bubbles:!1,cancelable:!1});Me.dispatchEvent(vt)}},pt=function(){var Me=(0,y.Z)(function*(et){const vt=et;if(vt){if(null!=vt.componentOnReady){if(null!=(yield vt.componentOnReady()))return}else if(null!=vt.__registerHost)return void(yield new Promise(ut=>(0,Y.r)(ut)));yield Promise.all(Array.from(vt.children).map(pt))}});return function(vt){return Me.apply(this,arguments)}}(),Ke=(Me,et)=>{et?(Me.setAttribute("aria-hidden","true"),Me.classList.add("ion-page-hidden")):(Me.hidden=!1,Me.removeAttribute("aria-hidden"),Me.classList.remove("ion-page-hidden"))},ne=(Me,et,vt)=>{void 0!==Me&&(Me.style.zIndex="back"===vt?"99":"101"),void 0!==et&&(et.style.zIndex="100")},nt=Me=>Me.classList.contains("ion-page")?Me:Me.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Me},6406:(on,ot,k)=>{"use strict";k.d(ot,{a:()=>pe,b:()=>bt,c:()=>Y,g:()=>Te,i:()=>yt});var y=k(9816);class g{constructor(){this.m=new Map}reset(He){this.m=new Map(Object.entries(He))}get(He,Ge){const _t=this.m.get(He);return void 0!==_t?_t:Ge}getBoolean(He,Ge=!1){const _t=this.m.get(He);return void 0===_t?Ge:"string"==typeof _t?"true"===_t:!!_t}getNumber(He,Ge){const _t=parseFloat(this.m.get(He));return isNaN(_t)?void 0!==Ge?Ge:NaN:_t}set(He,Ge){this.m.set(He,Ge)}}const Y=new g,Ue="ionic-persist-config",Te=We=>De(We),pe=(We,He)=>("string"==typeof We&&(He=We,We=void 0),Te(We).includes(He)),De=(We=window)=>{if(typeof We>"u")return[];We.Ionic=We.Ionic||{};let He=We.Ionic.platforms;return null==He&&(He=We.Ionic.platforms=Fe(We),He.forEach(Ge=>We.document.documentElement.classList.add(`plt-${Ge}`))),He},Fe=We=>{const He=Y.get("platform");return Object.keys(Le).filter(Ge=>{const _t=null==He?void 0:He[Ge];return"function"==typeof _t?_t(We):Le[Ge](We)})},Be=We=>!!(et(We,/iPad/i)||et(We,/Macintosh/i)&&Ae(We)),_e=We=>et(We,/android|sink/i),Ae=We=>vt(We,"(any-pointer:coarse)"),pt=We=>Ke(We)||ne(We),Ke=We=>!!(We.cordova||We.phonegap||We.PhoneGap),ne=We=>{const He=We.Capacitor;return!(null==He||!He.isNative)},et=(We,He)=>He.test(We.navigator.userAgent),vt=(We,He)=>{var Ge;return null===(Ge=We.matchMedia)||void 0===Ge?void 0:Ge.call(We,He).matches},Le={ipad:Be,iphone:We=>et(We,/iPhone/i),ios:We=>et(We,/iPhone|iPod/i)||Be(We),android:_e,phablet:We=>{const He=We.innerWidth,Ge=We.innerHeight,_t=Math.min(He,Ge),mt=Math.max(He,Ge);return _t>390&&_t<520&&mt>620&&mt<800},tablet:We=>{const He=We.innerWidth,Ge=We.innerHeight,_t=Math.min(He,Ge),mt=Math.max(He,Ge);return Be(We)||(We=>_e(We)&&!et(We,/mobile/i))(We)||_t>460&&_t<820&&mt>780&&mt<1400},cordova:Ke,capacitor:ne,electron:We=>et(We,/electron/i),pwa:We=>{var He;return!!(null!==(He=We.matchMedia)&&void 0!==He&&He.call(We,"(display-mode: standalone)").matches||We.navigator.standalone)},mobile:Ae,mobileweb:We=>Ae(We)&&!pt(We),desktop:We=>!Ae(We),hybrid:pt};let ut;const bt=We=>We&&(0,y.g)(We)||ut,yt=(We={})=>{if(typeof window>"u")return;const He=window.document,Ge=window,_t=Ge.Ionic=Ge.Ionic||{},mt={};We._ael&&(mt.ael=We._ael),We._rel&&(mt.rel=We._rel),We._ce&&(mt.ce=We._ce),(0,y.a)(mt);const Ct=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(We=>{try{const He=We.sessionStorage.getItem(Ue);return null!==He?JSON.parse(He):{}}catch{return{}}})(Ge)),{persistConfig:!1}),_t.config),(We=>{const He={};return We.location.search.slice(1).split("&").map(Ge=>Ge.split("=")).map(([Ge,_t])=>[decodeURIComponent(Ge),decodeURIComponent(_t)]).filter(([Ge])=>((We,He)=>We.substr(0,He.length)===He)(Ge,"ionic:")).map(([Ge,_t])=>[Ge.slice("ionic:".length),_t]).forEach(([Ge,_t])=>{He[Ge]=_t}),He})(Ge)),We);Y.reset(Ct),Y.getBoolean("persistConfig")&&((We,He)=>{try{We.sessionStorage.setItem(Ue,JSON.stringify(He))}catch{return}})(Ge,Ct),De(Ge),_t.config=Y,_t.mode=ut=Y.get("mode",He.documentElement.getAttribute("mode")||(pe(Ge,"ios")?"ios":"md")),Y.set("mode",ut),He.documentElement.setAttribute("mode",ut),He.documentElement.classList.add(ut),Y.getBoolean("_testing")&&Y.set("animated",!1);const jt=Tt=>{var ct;return null===(ct=Tt.tagName)||void 0===ct?void 0:ct.startsWith("ION-")},_n=Tt=>["ios","md"].includes(Tt);(0,y.c)(Tt=>{for(;Tt;){const ct=Tt.mode||Tt.getAttribute("mode");if(ct){if(_n(ct))return ct;jt(Tt)&&console.warn('Invalid ionic mode: "'+ct+'", expected: "ios" or "md"')}Tt=Tt.parentElement}return ut})}},5158:(on,ot,k)=>{"use strict";k.r(ot),k.d(ot,{iosTransitionAnimation:()=>Fe,shadow:()=>Ce});var y=k(9613),g=k(2998);k(3457),k(9816);const Pe=je=>document.querySelector(`${je}.ion-cloned-element`),Ce=je=>je.shadowRoot||je,me=je=>{const Be="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs"),Xe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Be){const Se=Be.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Se?Se.querySelector(Xe):null}return je.querySelector(Xe)},Ue=(je,Be)=>{const Xe="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs");let Se=[];if(null!=Xe){const _e=Xe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=_e&&(Se=_e.querySelectorAll("ion-buttons"))}else Se=je.querySelectorAll("ion-buttons");for(const _e of Se){const oe=_e.closest("ion-header"),lt=oe&&!oe.classList.contains("header-collapse-condense-inactive"),ze=_e.querySelector("ion-back-button"),Ae=_e.classList.contains("buttons-collapse");if(null!==ze&&("start"===_e.slot||""===_e.slot)&&(Ae&&lt&&Be||!Ae))return ze}return null},pe=(je,Be,Xe,Se,_e,oe)=>{const lt=Be?`calc(100% - ${oe.right+4}px)`:oe.left-4+"px",ze=Be?"7px":"-7px",Ae=Be?"-4px":"4px",q=Be?"-4px":"4px",pt=Be?"right":"left",Ke=Be?"left":"right",Me=Xe?[{offset:0,opacity:1,transform:`translate3d(${Ae}, ${oe.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ze}, ${_e.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ze}, ${_e.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Ae}, ${oe.top-46}px, 0) scale(1)`}],Le=Xe?[{offset:0,opacity:1,transform:`translate3d(${q}, ${oe.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${q}, ${oe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${q}, ${oe.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${q}, ${oe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${q}, ${oe.top-46}px, 0) scale(1)`}],ut=(0,y.c)(),bt=(0,y.c)(),yt=Pe("ion-back-button"),We=Ce(yt).querySelector(".button-text"),He=Ce(yt).querySelector("ion-icon");yt.text=Se.text,yt.mode=Se.mode,yt.icon=Se.icon,yt.color=Se.color,yt.disabled=Se.disabled,yt.style.setProperty("display","block"),yt.style.setProperty("position","fixed"),bt.addElement(He),ut.addElement(We),ut.beforeStyles({"transform-origin":`${pt} center`}).beforeAddWrite(()=>{Se.style.setProperty("display","none"),yt.style.setProperty(pt,lt)}).afterAddWrite(()=>{Se.style.setProperty("display",""),yt.style.setProperty("display","none"),yt.style.removeProperty(pt)}).keyframes(Me),bt.beforeStyles({"transform-origin":`${Ke} center`}).keyframes(Le),je.addAnimation([ut,bt])},De=(je,Be,Xe,Se,_e,oe)=>{const lt=Be?`calc(100% - ${_e.right}px)`:`${_e.left}px`,ze=Be?"-18px":"18px",Ae=Be?"right":"left",Ke=Xe?[{offset:0,opacity:0,transform:`translate3d(${ze}, ${oe.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${_e.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${_e.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ze}, ${oe.top-4}px, 0) scale(0.5)`}],ne=Pe("ion-title"),nt=(0,y.c)();ne.innerText=Se.innerText,ne.size=Se.size,ne.color=Se.color,nt.addElement(ne),nt.beforeStyles({"transform-origin":`${Ae} center`,height:"46px",display:"",position:"relative",[Ae]:lt}).beforeAddWrite(()=>{Se.style.setProperty("display","none")}).afterAddWrite(()=>{Se.style.setProperty("display",""),ne.style.setProperty("display","none")}).keyframes(Ke),je.addAnimation(nt)},Fe=(je,Be)=>{var Xe;try{const Se="cubic-bezier(0.32,0.72,0,1)",_e="opacity",oe="transform",lt="0%",Ae="rtl"===je.ownerDocument.dir,q=Ae?"-99.5%":"99.5%",pt=Ae?"33%":"-33%",Ke=Be.enteringEl,ne=Be.leavingEl,nt="back"===Be.direction,Me=Ke.querySelector(":scope > ion-content"),et=Ke.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),vt=Ke.querySelectorAll(":scope > ion-header > ion-toolbar"),Le=(0,y.c)(),ut=(0,y.c)();if(Le.addElement(Ke).duration((null!==(Xe=Be.duration)&&void 0!==Xe?Xe:0)||540).easing(Be.easing||Se).fill("both").beforeRemoveClass("ion-page-invisible"),ne&&null!=je){const He=(0,y.c)();He.addElement(je),Le.addAnimation(He)}if(Me||0!==vt.length||0!==et.length?(ut.addElement(Me),ut.addElement(et)):ut.addElement(Ke.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Le.addAnimation(ut),nt?ut.beforeClearStyles([_e]).fromTo("transform",`translateX(${pt})`,`translateX(${lt})`).fromTo(_e,.8,1):ut.beforeClearStyles([_e]).fromTo("transform",`translateX(${q})`,`translateX(${lt})`),Me){const He=Ce(Me).querySelector(".transition-effect");if(He){const Ge=He.querySelector(".transition-cover"),_t=He.querySelector(".transition-shadow"),mt=(0,y.c)(),Ct=(0,y.c)(),jt=(0,y.c)();mt.addElement(He).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ct.addElement(Ge).beforeClearStyles([_e]).fromTo(_e,0,.1),jt.addElement(_t).beforeClearStyles([_e]).fromTo(_e,.03,.7),mt.addAnimation([Ct,jt]),ut.addAnimation([mt])}}const bt=Ke.querySelector("ion-header.header-collapse-condense"),{forward:yt,backward:We}=((je,Be,Xe,Se,_e)=>{const oe=Ue(Se,Xe),lt=me(_e),ze=me(Se),Ae=Ue(_e,Xe),q=null!==oe&&null!==lt&&!Xe,pt=null!==ze&&null!==Ae&&Xe;if(q){const Ke=lt.getBoundingClientRect(),ne=oe.getBoundingClientRect();De(je,Be,Xe,lt,Ke,ne),pe(je,Be,Xe,oe,Ke,ne)}else if(pt){const Ke=ze.getBoundingClientRect(),ne=Ae.getBoundingClientRect();De(je,Be,Xe,ze,Ke,ne),pe(je,Be,Xe,Ae,Ke,ne)}return{forward:q,backward:pt}})(Le,Ae,nt,Ke,ne);if(vt.forEach(He=>{const Ge=(0,y.c)();Ge.addElement(He),Le.addAnimation(Ge);const _t=(0,y.c)();_t.addElement(He.querySelector("ion-title"));const mt=(0,y.c)(),Ct=Array.from(He.querySelectorAll("ion-buttons,[menuToggle]")),jt=He.closest("ion-header"),_n=null==jt?void 0:jt.classList.contains("header-collapse-condense-inactive");let Tt;Tt=Ct.filter(nt?Fn=>{const gn=Fn.classList.contains("buttons-collapse");return gn&&!_n||!gn}:Fn=>!Fn.classList.contains("buttons-collapse")),mt.addElement(Tt);const ct=(0,y.c)();ct.addElement(He.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Rt=(0,y.c)();Rt.addElement(Ce(He).querySelector(".toolbar-background"));const Jt=(0,y.c)(),Cn=He.querySelector("ion-back-button");if(Cn&&Jt.addElement(Cn),Ge.addAnimation([_t,mt,ct,Rt,Jt]),mt.fromTo(_e,.01,1),ct.fromTo(_e,.01,1),nt)_n||_t.fromTo("transform",`translateX(${pt})`,`translateX(${lt})`).fromTo(_e,.01,1),ct.fromTo("transform",`translateX(${pt})`,`translateX(${lt})`),Jt.fromTo(_e,.01,1);else if(bt||_t.fromTo("transform",`translateX(${q})`,`translateX(${lt})`).fromTo(_e,.01,1),ct.fromTo("transform",`translateX(${q})`,`translateX(${lt})`),Rt.beforeClearStyles([_e,"transform"]),(null==jt?void 0:jt.translucent)?Rt.fromTo("transform",Ae?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Rt.fromTo(_e,.01,"var(--opacity)"),yt||Jt.fromTo(_e,.01,1),Cn&&!yt){const gn=(0,y.c)();gn.addElement(Ce(Cn).querySelector(".button-text")).fromTo("transform",Ae?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ge.addAnimation(gn)}}),ne){const He=(0,y.c)(),Ge=ne.querySelector(":scope > ion-content"),_t=ne.querySelectorAll(":scope > ion-header > ion-toolbar"),mt=ne.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ge||0!==_t.length||0!==mt.length?(He.addElement(Ge),He.addElement(mt)):He.addElement(ne.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Le.addAnimation(He),nt){He.beforeClearStyles([_e]).fromTo("transform",`translateX(${lt})`,Ae?"translateX(-100%)":"translateX(100%)");const Ct=(0,g.g)(ne);Le.afterAddWrite(()=>{"normal"===Le.getDirection()&&Ct.style.setProperty("display","none")})}else He.fromTo("transform",`translateX(${lt})`,`translateX(${pt})`).fromTo(_e,1,.8);if(Ge){const Ct=Ce(Ge).querySelector(".transition-effect");if(Ct){const jt=Ct.querySelector(".transition-cover"),_n=Ct.querySelector(".transition-shadow"),Tt=(0,y.c)(),ct=(0,y.c)(),Rt=(0,y.c)();Tt.addElement(Ct).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ct.addElement(jt).beforeClearStyles([_e]).fromTo(_e,.1,0),Rt.addElement(_n).beforeClearStyles([_e]).fromTo(_e,.7,.03),Tt.addAnimation([ct,Rt]),He.addAnimation([Tt])}}_t.forEach(Ct=>{const jt=(0,y.c)();jt.addElement(Ct);const _n=(0,y.c)();_n.addElement(Ct.querySelector("ion-title"));const Tt=(0,y.c)(),ct=Ct.querySelectorAll("ion-buttons,[menuToggle]"),Rt=Ct.closest("ion-header"),Jt=null==Rt?void 0:Rt.classList.contains("header-collapse-condense-inactive"),Cn=Array.from(ct).filter(nr=>{const Hn=nr.classList.contains("buttons-collapse");return Hn&&!Jt||!Hn});Tt.addElement(Cn);const Fn=(0,y.c)(),gn=Ct.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");gn.length>0&&Fn.addElement(gn);const nn=(0,y.c)();nn.addElement(Ce(Ct).querySelector(".toolbar-background"));const vn=(0,y.c)(),Ut=Ct.querySelector("ion-back-button");if(Ut&&vn.addElement(Ut),jt.addAnimation([_n,Tt,Fn,vn,nn]),Le.addAnimation(jt),vn.fromTo(_e,.99,0),Tt.fromTo(_e,.99,0),Fn.fromTo(_e,.99,0),nt){if(Jt||_n.fromTo("transform",`translateX(${lt})`,Ae?"translateX(-100%)":"translateX(100%)").fromTo(_e,.99,0),Fn.fromTo("transform",`translateX(${lt})`,Ae?"translateX(-100%)":"translateX(100%)"),nn.beforeClearStyles([_e,"transform"]),(null==Rt?void 0:Rt.translucent)?nn.fromTo("transform","translateX(0px)",Ae?"translateX(-100%)":"translateX(100%)"):nn.fromTo(_e,"var(--opacity)",0),Ut&&!We){const Hn=(0,y.c)();Hn.addElement(Ce(Ut).querySelector(".button-text")).fromTo("transform",`translateX(${lt})`,`translateX(${(Ae?-124:124)+"px"})`),jt.addAnimation(Hn)}}else Jt||_n.fromTo("transform",`translateX(${lt})`,`translateX(${pt})`).fromTo(_e,.99,0).afterClearStyles([oe,_e]),Fn.fromTo("transform",`translateX(${lt})`,`translateX(${pt})`).afterClearStyles([oe,_e]),vn.afterClearStyles([_e]),_n.afterClearStyles([_e]),Tt.afterClearStyles([_e])})}return Le}catch(Se){throw Se}}},3175:(on,ot,k)=>{"use strict";k.r(ot),k.d(ot,{mdTransitionAnimation:()=>xe});var y=k(9613),g=k(2998);k(3457),k(9816);const xe=(Pe,Ce)=>{var me,Ue,Te;const Fe="back"===Ce.direction,Be=Ce.leavingEl,Xe=(0,g.g)(Ce.enteringEl),Se=Xe.querySelector("ion-toolbar"),_e=(0,y.c)();if(_e.addElement(Xe).fill("both").beforeRemoveClass("ion-page-invisible"),Fe?_e.duration((null!==(me=Ce.duration)&&void 0!==me?me:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):_e.duration((null!==(Ue=Ce.duration)&&void 0!==Ue?Ue:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Se){const oe=(0,y.c)();oe.addElement(Se),_e.addAnimation(oe)}if(Be&&Fe){_e.duration((null!==(Te=Ce.duration)&&void 0!==Te?Te:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const oe=(0,y.c)();oe.addElement((0,g.g)(Be)).onFinish(lt=>{1===lt&&oe.elements.length>0&&oe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),_e.addAnimation(oe)}return _e}},1397:(on,ot,k)=>{"use strict";k.d(ot,{B:()=>mt,G:()=>Ct,a:()=>Te,b:()=>pe,c:()=>Be,d:()=>jt,e:()=>_n,f:()=>et,g:()=>Le,h:()=>yt,i:()=>He,j:()=>Se,k:()=>me,m:()=>Fe,n:()=>lt,o:()=>nt,s:()=>_t,t:()=>Xe});var y=k(5861),g=k(6406),Y=k(6782),ae=k(7593),xe=k(3577),Pe=k(1178);let Ce=0;const me=new WeakMap,Ue=Tt=>({create:ct=>_e(Tt,ct),dismiss:(ct,Rt,Jt)=>Ke(document,ct,Rt,Tt,Jt),getTop:()=>(0,y.Z)(function*(){return nt(document,Tt)})()}),Te=Ue("ion-alert"),pe=Ue("ion-action-sheet"),Fe=Ue("ion-modal"),Be=Ue("ion-popover"),Xe=Ue("ion-toast"),Se=Tt=>{typeof document<"u"&&pt(document);const ct=Ce++;Tt.overlayIndex=ct,Tt.hasAttribute("id")||(Tt.id=`ion-overlay-${ct}`)},_e=(Tt,ct)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Tt).then(()=>{const Rt=document.createElement(Tt);return Rt.classList.add("overlay-hidden"),Object.assign(Rt,Object.assign(Object.assign({},ct),{hasController:!0})),ut(document).appendChild(Rt),new Promise(Jt=>(0,xe.c)(Rt,Jt))}):Promise.resolve(),oe='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',lt=(Tt,ct)=>{let Rt=Tt.querySelector(oe);const Jt=null==Rt?void 0:Rt.shadowRoot;Jt&&(Rt=Jt.querySelector(oe)||Rt),Rt?(0,xe.f)(Rt):ct.focus()},Ae=(Tt,ct)=>{const Rt=Array.from(Tt.querySelectorAll(oe));let Jt=Rt.length>0?Rt[Rt.length-1]:null;const Cn=null==Jt?void 0:Jt.shadowRoot;Cn&&(Jt=Cn.querySelector(oe)||Jt),Jt?Jt.focus():ct.focus()},pt=Tt=>{0===Ce&&(Ce=1,Tt.addEventListener("focus",ct=>{((Tt,ct)=>{const Rt=nt(ct,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Jt=Tt.target;Rt&&Jt&&!Rt.classList.contains("ion-disable-focus-trap")&&(Rt.shadowRoot?(()=>{if(Rt.contains(Jt))Rt.lastFocus=Jt;else{const gn=Rt.lastFocus;lt(Rt,Rt),gn===ct.activeElement&&Ae(Rt,Rt),Rt.lastFocus=ct.activeElement}})():(()=>{if(Rt===Jt)Rt.lastFocus=void 0;else{const gn=(0,xe.g)(Rt);if(!gn.contains(Jt))return;const nn=gn.querySelector(".ion-overlay-wrapper");if(!nn)return;if(nn.contains(Jt))Rt.lastFocus=Jt;else{const vn=Rt.lastFocus;lt(nn,Rt),vn===ct.activeElement&&Ae(nn,Rt),Rt.lastFocus=ct.activeElement}}})())})(ct,Tt)},!0),Tt.addEventListener("ionBackButton",ct=>{const Rt=nt(Tt);null!=Rt&&Rt.backdropDismiss&&ct.detail.register(ae.OVERLAY_BACK_BUTTON_PRIORITY,()=>Rt.dismiss(void 0,mt))}),Tt.addEventListener("keydown",ct=>{if("Escape"===ct.key){const Rt=nt(Tt);null!=Rt&&Rt.backdropDismiss&&Rt.dismiss(void 0,mt)}}))},Ke=(Tt,ct,Rt,Jt,Cn)=>{const Fn=nt(Tt,Jt,Cn);return Fn?Fn.dismiss(ct,Rt):Promise.reject("overlay does not exist")},nt=(Tt,ct,Rt)=>{const Jt=((Tt,ct)=>(void 0===ct&&(ct="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Tt.querySelectorAll(ct)).filter(Rt=>Rt.overlayIndex>0)))(Tt,ct).filter(Cn=>!(Tt=>Tt.classList.contains("overlay-hidden"))(Cn));return void 0===Rt?Jt[Jt.length-1]:Jt.find(Cn=>Cn.id===Rt)},Me=(Tt=!1)=>{const Rt=ut(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Rt&&(Tt?Rt.setAttribute("aria-hidden","true"):Rt.removeAttribute("aria-hidden"))},et=function(){var Tt=(0,y.Z)(function*(ct,Rt,Jt,Cn,Fn){var gn,nn;if(ct.presented)return;Me(!0),ct.presented=!0,ct.willPresent.emit(),null===(gn=ct.willPresentShorthand)||void 0===gn||gn.emit();const vn=(0,g.b)(ct),Ut=ct.enterAnimation?ct.enterAnimation:g.c.get(Rt,"ios"===vn?Jt:Cn);(yield bt(ct,Ut,ct.el,Fn))&&(ct.didPresent.emit(),null===(nn=ct.didPresentShorthand)||void 0===nn||nn.emit()),"ION-TOAST"!==ct.el.tagName&&vt(ct.el),ct.keyboardClose&&(null===document.activeElement||!ct.el.contains(document.activeElement))&&ct.el.focus()});return function(Rt,Jt,Cn,Fn,gn){return Tt.apply(this,arguments)}}(),vt=function(){var Tt=(0,y.Z)(function*(ct){let Rt=document.activeElement;if(!Rt)return;const Jt=null==Rt?void 0:Rt.shadowRoot;Jt&&(Rt=Jt.querySelector(oe)||Rt),yield ct.onDidDismiss(),Rt.focus()});return function(Rt){return Tt.apply(this,arguments)}}(),Le=function(){var Tt=(0,y.Z)(function*(ct,Rt,Jt,Cn,Fn,gn,nn){var vn,Ut;if(!ct.presented)return!1;Me(!1),ct.presented=!1;try{ct.el.style.setProperty("pointer-events","none"),ct.willDismiss.emit({data:Rt,role:Jt}),null===(vn=ct.willDismissShorthand)||void 0===vn||vn.emit({data:Rt,role:Jt});const nr=(0,g.b)(ct),Hn=ct.leaveAnimation?ct.leaveAnimation:g.c.get(Cn,"ios"===nr?Fn:gn);Jt!==Ct&&(yield bt(ct,Hn,ct.el,nn)),ct.didDismiss.emit({data:Rt,role:Jt}),null===(Ut=ct.didDismissShorthand)||void 0===Ut||Ut.emit({data:Rt,role:Jt}),me.delete(ct),ct.el.classList.add("overlay-hidden"),ct.el.style.removeProperty("pointer-events"),void 0!==ct.el.lastFocus&&(ct.el.lastFocus=void 0)}catch(nr){console.error(nr)}return ct.el.remove(),!0});return function(Rt,Jt,Cn,Fn,gn,nn,vn){return Tt.apply(this,arguments)}}(),ut=Tt=>Tt.querySelector("ion-app")||Tt.body,bt=function(){var Tt=(0,y.Z)(function*(ct,Rt,Jt,Cn){Jt.classList.remove("overlay-hidden");const gn=Rt(ct.el,Cn);(!ct.animated||!g.c.getBoolean("animated",!0))&&gn.duration(0),ct.keyboardClose&&gn.beforeAddWrite(()=>{const vn=Jt.ownerDocument.activeElement;null!=vn&&vn.matches("input,ion-input, ion-textarea")&&vn.blur()});const nn=me.get(ct)||[];return me.set(ct,[...nn,gn]),yield gn.play(),!0});return function(Rt,Jt,Cn,Fn){return Tt.apply(this,arguments)}}(),yt=(Tt,ct)=>{let Rt;const Jt=new Promise(Cn=>Rt=Cn);return We(Tt,ct,Cn=>{Rt(Cn.detail)}),Jt},We=(Tt,ct,Rt)=>{const Jt=Cn=>{(0,xe.b)(Tt,ct,Jt),Rt(Cn)};(0,xe.a)(Tt,ct,Jt)},He=Tt=>"cancel"===Tt||Tt===mt,Ge=Tt=>Tt(),_t=(Tt,ct)=>{if("function"==typeof Tt)return g.c.get("_zoneGate",Ge)(()=>{try{return Tt(ct)}catch(Jt){throw Jt}})},mt="backdrop",Ct="gesture",jt=Tt=>{let Rt,ct=!1;const Jt=(0,Y.C)(),Cn=(nn=!1)=>{if(Rt&&!nn)return{delegate:Rt,inline:ct};const{el:vn,hasController:Ut,delegate:nr}=Tt;return ct=null!==vn.parentNode&&!Ut,Rt=ct?nr||Jt:nr,{inline:ct,delegate:Rt}};return{attachViewToDom:function(){var nn=(0,y.Z)(function*(vn){const{delegate:Ut}=Cn(!0);if(Ut)return yield Ut.attachViewToDom(Tt.el,vn);const{hasController:nr}=Tt;if(nr&&void 0!==vn)throw new Error("framework delegate is missing");return null});return function(Ut){return nn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:nn}=Cn();nn&&void 0!==Tt.el&&nn.removeViewFromDom(Tt.el.parentElement,Tt.el)}}},_n=()=>{let Tt;const ct=()=>{Tt&&(Tt(),Tt=void 0)};return{addClickListener:(Jt,Cn)=>{ct();const Fn=void 0!==Cn?document.getElementById(Cn):null;Fn?Tt=((nn,vn)=>{const Ut=()=>{vn.present()};return nn.addEventListener("click",Ut),()=>{nn.removeEventListener("click",Ut)}})(Fn,Jt):(0,Pe.p)(`A trigger element with the ID "${Cn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Jt)},removeClickListener:ct}}},3726:(on,ot,k)=>{"use strict";k.d(ot,{n:()=>y});class y{constructor(Y,ae,xe,Pe,Ce,me,Ue=!1,Te,pe="User"){this.uid=Te,this.email=Y,this.nombre=ae,this.apellido=xe,this.edad=Pe,this.dni=Ce,this.imagenes=me,this.isAdmin=Ue,this.typename=pe}static filterPrivate(Y){return Object.fromEntries(Object.entries(Y).filter(([ae])=>!["uid"].includes(ae)))}}},3651:(on,ot,k)=>{"use strict";k.d(ot,{e:()=>De});var y=k(5861),g=k(3726),Y=k(8277),me=(k(2090),k(9681),k(1877),k(4859),k(4650)),Ue=k(3101),Te=k(1205),pe=k(6159);let De=(()=>{class Fe{constructor(Be,Xe,Se,_e,oe){this.afs=Be,this.afAuth=Xe,this.router=Se,this.ngZone=_e,this._db=oe,this.afAuth.authState.subscribe(lt=>{var ze;lt?(this.userData=lt,localStorage.setItem("auth",JSON.stringify(this.userData)),this.sub=this._db.collection("users").doc(lt.uid).get().subscribe(Ae=>{localStorage.setItem("user",JSON.stringify(Ae.data())),console.log("sign in")})):(null===(ze=this.sub)||void 0===ze||ze.unsubscribe(),localStorage.setItem("auth","null"),localStorage.setItem("user","null"),console.log("sign out"))})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("auth"))}get isVerified(){const Be=JSON.parse(localStorage.getItem("auth"));return null!==Be&&Be.emailVerified}get isAdmin(){const Be=JSON.parse(localStorage.getItem("user"));return null!==Be&&Be.isAdmin}SignIn(Be,Xe){return this.afAuth.signInWithEmailAndPassword(Be,Xe)}SignUp(Be,Xe){var Se=this;return(0,y.Z)(function*(){try{let _e=yield Se.afAuth.createUserWithEmailAndPassword(Be.email,Xe);return Se.SendVerificationMail(),yield _e.user.updateProfile({displayName:Be.nombre,photoURL:Be.imagenes[0]}),Se.SetUserData(_e.user.uid,Be),Se.router.navigate(["home"]),new Promise((oe,lt)=>{oe("success")})}catch(_e){return new Promise((oe,lt)=>{oe(JSON.parse(JSON.stringify(_e)))})}})()}GoogleAuth(){return this.AuthLogin(new Y.V)}AuthLogin(Be){return this.afAuth.signInWithPopup(Be).then(Xe=>{var Se,_e;let oe=Xe.user;this.SetUserData(oe.uid,new g.n(oe.email,null!==(Se=oe.displayName)&&void 0!==Se?Se:"","",0,"",[null!==(_e=oe.photoURL)&&void 0!==_e?_e:""])),console.log(Xe.user)}).catch(Xe=>{window.alert("An error occured when attemping sign in")})}SetUserData(Be,Xe){const Se=this.afs.doc(`users/${Be}`);return Xe.uid=Be,console.log("user updated in db"),Se.set(JSON.parse(JSON.stringify(Xe)),{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("auth")})}SendVerificationMail(){return this.afAuth.currentUser.then(Be=>Be.sendEmailVerification()).then(()=>{console.log("correo de verificacion enviado")})}ForgotPassword(Be){return this.afAuth.sendPasswordResetEmail(Be).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Xe=>{window.alert(Xe)})}}return Fe.\u0275fac=function(Be){return new(Be||Fe)(me.LFG(Ue.ST),me.LFG(Te.zQ),me.LFG(pe.F0),me.LFG(me.R0b),me.LFG(Ue.ST))},Fe.\u0275prov=me.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})()},5626:(on,ot,k)=>{"use strict";var y=k(4650),g=k(1481),Y=k(6159),ae=k(2879),xe=k(3651);const me=[{path:"home",loadComponent:()=>Promise.all([k.e(4107),k.e(7696)]).then(k.bind(k,7696)).then(c=>c.HomePage),canActivate:[(c=!1)=>{const r=(0,y.f3M)(xe.e);return(0,y.f3M)(Y.F0),r.isLoggedIn}],canDeactivate:[()=>!(0,y.f3M)(xe.e).isLoggedIn]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>Promise.all([k.e(4107),k.e(2183)]).then(k.bind(k,2183)).then(c=>c.LogniPage)},{path:"register",loadComponent:()=>Promise.all([k.e(4107),k.e(7009)]).then(k.bind(k,7009)).then(c=>c.RegisterPage)},{path:"splash",loadComponent:()=>k.e(4399).then(k.bind(k,4399)).then(c=>c.SplashPage)}];let Ue=(()=>{class c{constructor(o){this._router=o,this._router.navigateByUrl("splash")}}return c.\u0275fac=function(o){return new(o||c)(y.Y36(Y.F0))},c.\u0275cmp=y.Xpm({type:c,selectors:[["app-root"]],standalone:!0,features:[y.jDz],decls:2,vars:0,template:function(o,u){1&o&&(y.TgZ(0,"ion-app"),y._UZ(1,"ion-router-outlet"),y.qZA())},dependencies:[ae.Pc,ae.dr,ae.jP]}),c})();var pe=k(2011),De=k(1205),Fe=k(9751),je=k(9646),Be=k(8996),Xe=k(8372),Se=k(4004),_e=k(3900),oe=k(2122),lt=k(3942),ze=k(5861),Ae=k(9681),q=k(2090),pt=k(4859);const Ke="firebasestorage.googleapis.com",ne="storageBucket";class vt extends q.ZR{constructor(r,o,u=0){super(ut(r),`Firebase Storage: ${o} (${ut(r)})`),this.status_=u,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vt.prototype)}get status(){return this.status_}set status(r){this.status_=r}_codeEquals(r){return ut(r)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(r){this.customData.serverResponse=r,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Le=(()=>{return(c=Le||(Le={})).UNKNOWN="unknown",c.OBJECT_NOT_FOUND="object-not-found",c.BUCKET_NOT_FOUND="bucket-not-found",c.PROJECT_NOT_FOUND="project-not-found",c.QUOTA_EXCEEDED="quota-exceeded",c.UNAUTHENTICATED="unauthenticated",c.UNAUTHORIZED="unauthorized",c.UNAUTHORIZED_APP="unauthorized-app",c.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",c.INVALID_CHECKSUM="invalid-checksum",c.CANCELED="canceled",c.INVALID_EVENT_NAME="invalid-event-name",c.INVALID_URL="invalid-url",c.INVALID_DEFAULT_BUCKET="invalid-default-bucket",c.NO_DEFAULT_BUCKET="no-default-bucket",c.CANNOT_SLICE_BLOB="cannot-slice-blob",c.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",c.NO_DOWNLOAD_URL="no-download-url",c.INVALID_ARGUMENT="invalid-argument",c.INVALID_ARGUMENT_COUNT="invalid-argument-count",c.APP_DELETED="app-deleted",c.INVALID_ROOT_OPERATION="invalid-root-operation",c.INVALID_FORMAT="invalid-format",c.INTERNAL_ERROR="internal-error",c.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Le;var c})();function ut(c){return"storage/"+c}function bt(){return new vt(Le.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function mt(){return new vt(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ct(){return new vt(Le.CANCELED,"User canceled the upload/download.")}function ct(){return new vt(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fn(c){return new vt(Le.INVALID_ARGUMENT,c)}function gn(){return new vt(Le.APP_DELETED,"The Firebase app was deleted.")}function nn(c){return new vt(Le.INVALID_ROOT_OPERATION,"The operation '"+c+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vn(c,r){return new vt(Le.INVALID_FORMAT,"String does not match format '"+c+"': "+r)}function Ut(c){throw new vt(Le.INTERNAL_ERROR,"Internal error: "+c)}class nr{constructor(r,o){this.bucket=r,this.path_=o}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const r=encodeURIComponent;return"/b/"+r(this.bucket)+"/o/"+r(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(r,o){let u;try{u=nr.makeFromUrl(r,o)}catch{return new nr(r,"")}if(""===u.path)return u;throw function _n(c){return new vt(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+c+"'.")}(r)}static makeFromUrl(r,o){let u=null;const p="([A-Za-z0-9.\\-_]+)",B=new RegExp("^gs://"+p+"(/(.*))?$","i");function ie(Si){Si.path_=decodeURIComponent(Si.path)}const ft=o.replace(/[.]/g,"\\."),vi=[{regex:B,indices:{bucket:1,path:3},postModify:function E(Si){"/"===Si.path.charAt(Si.path.length-1)&&(Si.path_=Si.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ft}/v[A-Za-z0-9_]+/b/${p}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ie},{regex:new RegExp(`^https?://${o===Ke?"(?:storage.googleapis.com|storage.cloud.google.com)":o}/${p}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ie}];for(let Si=0;Si<vi.length;Si++){const rl=vi[Si],pa=rl.regex.exec(r);if(pa){let Vo=pa[rl.indices.path];Vo||(Vo=""),u=new nr(pa[rl.indices.bucket],Vo),rl.postModify(u);break}}if(null==u)throw function jt(c){return new vt(Le.INVALID_URL,"Invalid URL '"+c+"'.")}(r);return u}}class Hn{constructor(r){this.promise_=Promise.reject(r)}getPromise(){return this.promise_}cancel(r=!1){}}function Gr(c){return"string"==typeof c||c instanceof String}function Ar(c){return fr()&&c instanceof Blob}function fr(){return typeof Blob<"u"&&!(0,q.UG)()}function Rn(c,r,o,u){if(u<r)throw Fn(`Invalid value for '${c}'. Expected ${r} or greater.`);if(u>o)throw Fn(`Invalid value for '${c}'. Expected ${o} or less.`)}function rn(c,r,o){let u=r;return null==o&&(u=`https://${r}`),`${o}://${u}/v0${c}`}function xr(c){const r=encodeURIComponent;let o="?";for(const u in c)c.hasOwnProperty(u)&&(o=o+(r(u)+"=")+r(c[u])+"&");return o=o.slice(0,-1),o}var Lr=(()=>{return(c=Lr||(Lr={}))[c.NO_ERROR=0]="NO_ERROR",c[c.NETWORK_ERROR=1]="NETWORK_ERROR",c[c.ABORT=2]="ABORT",Lr;var c})();function cr(c,r){const o=c>=500&&c<600,p=-1!==[408,429].indexOf(c),E=-1!==r.indexOf(c);return o||p||E}class si{constructor(r,o,u,p,E,A,B,Z,ie,Qe,ft,At=!0){this.url_=r,this.method_=o,this.headers_=u,this.body_=p,this.successCodes_=E,this.additionalRetryCodes_=A,this.callback_=B,this.errorCallback_=Z,this.timeout_=ie,this.progressCallback_=Qe,this.connectionFactory_=ft,this.retry=At,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((qt,Xt)=>{this.resolve_=qt,this.reject_=Xt,this.start_()})}start_(){const o=(u,p)=>{const E=this.resolve_,A=this.reject_,B=p.connection;if(p.wasSuccessCode)try{const Z=this.callback_(B,B.getResponse());!function ci(c){return void 0!==c}(Z)?E():E(Z)}catch(Z){A(Z)}else if(null!==B){const Z=bt();Z.serverResponse=B.getErrorText(),A(this.errorCallback_?this.errorCallback_(B,Z):Z)}else A(p.canceled?this.appDelete_?gn():Ct():mt())};this.canceled_?o(0,new Vr(!1,null,!0)):this.backoffId_=function un(c,r,o){let u=1,p=null,E=null,A=!1,B=0;function Z(){return 2===B}let ie=!1;function Qe(...sr){ie||(ie=!0,r.apply(null,sr))}function ft(sr){p=setTimeout(()=>{p=null,c(qt,Z())},sr)}function At(){E&&clearTimeout(E)}function qt(sr,...Hr){if(ie)return void At();if(sr)return At(),void Qe.call(null,sr,...Hr);if(Z()||A)return At(),void Qe.call(null,sr,...Hr);let vi;u<64&&(u*=2),1===B?(B=2,vi=0):vi=1e3*(u+Math.random()),ft(vi)}let Xt=!1;function Sn(sr){Xt||(Xt=!0,At(),!ie&&(null!==p?(sr||(B=2),clearTimeout(p),ft(0)):sr||(B=1)))}return ft(0),E=setTimeout(()=>{A=!0,Sn(!0)},o),Sn}((u,p)=>{if(p)return void u(!1,new Vr(!1,null,!0));const E=this.connectionFactory_();this.pendingConnection_=E;const A=B=>{null!==this.progressCallback_&&this.progressCallback_(B.loaded,B.lengthComputable?B.total:-1)};null!==this.progressCallback_&&E.addUploadProgressListener(A),E.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&E.removeUploadProgressListener(A),this.pendingConnection_=null;const B=E.getErrorCode()===Lr.NO_ERROR,Z=E.getStatus();if(!B||cr(Z,this.additionalRetryCodes_)&&this.retry){const Qe=E.getErrorCode()===Lr.ABORT;return void u(!1,new Vr(!1,null,Qe))}const ie=-1!==this.successCodes_.indexOf(Z);u(!0,new Vr(ie,E))})},o,this.timeout_)}getPromise(){return this.promise_}cancel(r){this.canceled_=!0,this.appDelete_=r||!1,null!==this.backoffId_&&function or(c){c(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Vr{constructor(r,o,u){this.wasSuccessCode=r,this.connection=o,this.canceled=!!u}}function mn(...c){const r=function Xn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==r){const o=new r;for(let u=0;u<c.length;u++)o.append(c[u]);return o.getBlob()}if(fr())return new Blob(c);throw new vt(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const An={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zn{constructor(r,o){this.data=r,this.contentType=o||null}}function ur(c,r){switch(c){case An.RAW:return new zn(Pr(r));case An.BASE64:case An.BASE64URL:return new zn(Ve(c,r));case An.DATA_URL:return new zn(function ve(c){const r=new fe(c);return r.base64?Ve(An.BASE64,r.rest):function Ze(c){let r;try{r=decodeURIComponent(c)}catch{throw vn(An.DATA_URL,"Malformed data URL.")}return Pr(r)}(r.rest)}(r),function he(c){return new fe(c).contentType}(r))}throw bt()}function Pr(c){const r=[];for(let o=0;o<c.length;o++){let u=c.charCodeAt(o);u<=127?r.push(u):u<=2047?r.push(192|u>>6,128|63&u):55296==(64512&u)?o<c.length-1&&56320==(64512&c.charCodeAt(o+1))?(u=65536|(1023&u)<<10|1023&c.charCodeAt(++o),r.push(240|u>>18,128|u>>12&63,128|u>>6&63,128|63&u)):r.push(239,191,189):56320==(64512&u)?r.push(239,191,189):r.push(224|u>>12,128|u>>6&63,128|63&u)}return new Uint8Array(r)}function Ve(c,r){switch(c){case An.BASE64:{const p=-1!==r.indexOf("-"),E=-1!==r.indexOf("_");if(p||E)throw vn(c,"Invalid character '"+(p?"-":"_")+"' found: is it base64url encoded?");break}case An.BASE64URL:{const p=-1!==r.indexOf("+"),E=-1!==r.indexOf("/");if(p||E)throw vn(c,"Invalid character '"+(p?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=function En(c){if(typeof atob>"u")throw function Cn(c){return new vt(Le.UNSUPPORTED_ENVIRONMENT,`${c} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(c)}(r)}catch(p){throw p.message.includes("polyfill")?p:vn(c,"Invalid character found")}const u=new Uint8Array(o.length);for(let p=0;p<o.length;p++)u[p]=o.charCodeAt(p);return u}class fe{constructor(r){this.base64=!1,this.contentType=null;const o=r.match(/^data:([^,]+)?,/);if(null===o)throw vn(An.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const u=o[1]||null;null!=u&&(this.base64=function dt(c,r){return c.length>=r.length&&c.substring(c.length-r.length)===r}(u,";base64"),this.contentType=this.base64?u.substring(0,u.length-7):u),this.rest=r.substring(r.indexOf(",")+1)}}class Oe{constructor(r,o){let u=0,p="";Ar(r)?(this.data_=r,u=r.size,p=r.type):r instanceof ArrayBuffer?(o?this.data_=new Uint8Array(r):(this.data_=new Uint8Array(r.byteLength),this.data_.set(new Uint8Array(r))),u=this.data_.length):r instanceof Uint8Array&&(o?this.data_=r:(this.data_=new Uint8Array(r.length),this.data_.set(r)),u=r.length),this.size_=u,this.type_=p}size(){return this.size_}type(){return this.type_}slice(r,o){if(Ar(this.data_)){const p=function Gt(c,r,o){return c.webkitSlice?c.webkitSlice(r,o):c.mozSlice?c.mozSlice(r,o):c.slice?c.slice(r,o):null}(this.data_,r,o);return null===p?null:new Oe(p)}{const u=new Uint8Array(this.data_.buffer,r,o-r);return new Oe(u,!0)}}static getBlob(...r){if(fr()){const o=r.map(u=>u instanceof Oe?u.data_:u);return new Oe(mn.apply(null,o))}{const o=r.map(A=>Gr(A)?ur(An.RAW,A).data:A.data_);let u=0;o.forEach(A=>{u+=A.byteLength});const p=new Uint8Array(u);let E=0;return o.forEach(A=>{for(let B=0;B<A.length;B++)p[E++]=A[B]}),new Oe(p,!0)}}uploadData(){return this.data_}}function $e(c){let r;try{r=JSON.parse(c)}catch{return null}return function Ni(c){return"object"==typeof c&&!Array.isArray(c)}(r)?r:null}function Mt(c){const r=c.lastIndexOf("/",c.length-2);return-1===r?c:c.slice(r+1)}function Yt(c,r){return r}class In{constructor(r,o,u,p){this.server=r,this.local=o||r,this.writable=!!u,this.xform=p||Yt}}let fn=null;function Jr(){if(fn)return fn;const c=[];c.push(new In("bucket")),c.push(new In("generation")),c.push(new In("metageneration")),c.push(new In("name","fullPath",!0));const o=new In("name");o.xform=function r(E,A){return function dr(c){return!Gr(c)||c.length<2?c:Mt(c)}(A)},c.push(o);const p=new In("size");return p.xform=function u(E,A){return void 0!==A?Number(A):A},c.push(p),c.push(new In("timeCreated")),c.push(new In("updated")),c.push(new In("md5Hash",null,!0)),c.push(new In("cacheControl",null,!0)),c.push(new In("contentDisposition",null,!0)),c.push(new In("contentEncoding",null,!0)),c.push(new In("contentLanguage",null,!0)),c.push(new In("contentType",null,!0)),c.push(new In("metadata","customMetadata",!0)),fn=c,fn}function Vi(c,r,o){const u=$e(r);return null===u?null:function rs(c,r,o){const u={type:"file"},p=o.length;for(let E=0;E<p;E++){const A=o[E];u[A.local]=A.xform(u,r[A.server])}return function ki(c,r){Object.defineProperty(c,"ref",{get:function o(){const E=new nr(c.bucket,c.fullPath);return r._makeStorageReference(E)}})}(u,c),u}(c,u,o)}function is(c,r){const o={},u=r.length;for(let p=0;p<u;p++){const E=r[p];E.writable&&(o[E.server]=c[E.local])}return JSON.stringify(o)}const ws="prefixes",pr="items";class rr{constructor(r,o,u,p){this.url=r,this.method=o,this.handler=u,this.timeout=p,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jn(c){if(!c)throw bt()}function Vs(c,r){return function o(u,p){const E=Vi(c,p,r);return Jn(null!==E),E}}function gi(c){return function r(o,u){let p;return p=401===o.getStatus()?o.getErrorText().includes("Firebase App Check token is invalid")?function Ge(){return new vt(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function He(){return new vt(Le.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===o.getStatus()?function We(c){return new vt(Le.QUOTA_EXCEEDED,"Quota for bucket '"+c+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(c.bucket):403===o.getStatus()?function _t(c){return new vt(Le.UNAUTHORIZED,"User does not have permission to access '"+c+"'.")}(c.path):u,p.status=o.getStatus(),p.serverResponse=u.serverResponse,p}}function bn(c){const r=gi(c);return function o(u,p){let E=r(u,p);return 404===u.getStatus()&&(E=function yt(c){return new vt(Le.OBJECT_NOT_FOUND,"Object '"+c+"' does not exist.")}(c.path)),E.serverResponse=p.serverResponse,E}}function ar(c,r,o){const p=rn(r.fullServerUrl(),c.host,c._protocol),A=c.maxOperationRetryTime,B=new rr(p,"GET",Vs(c,o),A);return B.errorHandler=bn(r),B}function gr(c,r,o,u,p){const E={};E.prefix=r.isRoot?"":r.path+"/",o&&o.length>0&&(E.delimiter=o),u&&(E.pageToken=u),p&&(E.maxResults=p);const B=rn(r.bucketOnlyServerUrl(),c.host,c._protocol),ie=c.maxOperationRetryTime,Qe=new rr(B,"GET",function oi(c,r){return function o(u,p){const E=function Qr(c,r,o){const u=$e(o);return null===u?null:function pi(c,r,o){const u={prefixes:[],items:[],nextPageToken:o.nextPageToken};if(o[ws])for(const p of o[ws]){const E=p.replace(/\/$/,""),A=c._makeStorageReference(new nr(r,E));u.prefixes.push(A)}if(o[pr])for(const p of o[pr]){const E=c._makeStorageReference(new nr(r,p.name));u.items.push(E)}return u}(c,r,u)}(c,r,p);return Jn(null!==E),E}}(c,r.bucket),ie);return Qe.urlParams=E,Qe.errorHandler=gi(r),Qe}function de(c,r,o){const u=Object.assign({},o);return u.fullPath=c.path,u.size=r.size(),u.contentType||(u.contentType=function Br(c,r){return c&&c.contentType||r&&r.type()||"application/octet-stream"}(null,r)),u}class Ye{constructor(r,o,u,p){this.current=r,this.total=o,this.finalized=!!u,this.metadata=p||null}}function be(c,r){let o=null;try{o=c.getResponseHeader("X-Goog-Upload-Status")}catch{Jn(!1)}return Jn(!!o&&-1!==(r||["active"]).indexOf(o)),o}const Wt={STATE_CHANGED:"state_changed"},zt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pn(c){switch(c){case"running":case"pausing":case"canceling":return zt.RUNNING;case"paused":return zt.PAUSED;case"success":return zt.SUCCESS;case"canceled":return zt.CANCELED;default:return zt.ERROR}}class qn{constructor(r,o,u){if(function Ir(c){return"function"==typeof c}(r)||null!=o||null!=u)this.next=r,this.error=null!=o?o:void 0,this.complete=null!=u?u:void 0;else{const E=r;this.next=E.next,this.error=E.error,this.complete=E.complete}}}function Qn(c){return(...r)=>{Promise.resolve().then(()=>c(...r))}}let Je=null;class at{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lr.NO_ERROR,this.sendPromise_=new Promise(r=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lr.ABORT,r()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lr.NETWORK_ERROR,r()}),this.xhr_.addEventListener("load",()=>{r()})})}send(r,o,u,p){if(this.sent_)throw Ut("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,r,!0),void 0!==p)for(const E in p)p.hasOwnProperty(E)&&this.xhr_.setRequestHeader(E,p[E].toString());return void 0!==u?this.xhr_.send(u):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ut("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ut("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ut("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ut("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(r){return this.xhr_.getResponseHeader(r)}addUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",r)}removeUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",r)}}class wt extends at{initXhr(){this.xhr_.responseType="text"}}function Vt(){return Je?Je():new wt}class kr{constructor(r,o,u=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=r,this._blob=o,this._metadata=u,this._mappings=Jr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=p=>{if(this._request=void 0,this._chunkMultiplier=1,p._codeEquals(Le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const E=this.isExponentialBackoffExpired();if(cr(p.status,[])){if(!E)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();p=mt()}this._error=p,this._transition("error")}},this._metadataErrorHandler=p=>{this._request=void 0,p._codeEquals(Le.CANCELED)?this.completeTransitions_():(this._error=p,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((p,E)=>{this._resolve=p,this._reject=E,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const r=this._transferred;return o=>this._updateProgress(r+o)}_shouldDoResumable(r){return r.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(r){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([o,u])=>{switch(this._state){case"running":r(o,u);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((r,o)=>{const u=function tt(c,r,o,u,p){const E=r.bucketOnlyServerUrl(),A=de(r,u,p),B={name:A.fullPath},Z=rn(E,c.host,c._protocol),Qe={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${u.size()}`,"X-Goog-Upload-Header-Content-Type":A.contentType,"Content-Type":"application/json; charset=utf-8"},ft=is(A,o),Xt=new rr(Z,"POST",function qt(Sn){let sr;be(Sn);try{sr=Sn.getResponseHeader("X-Goog-Upload-URL")}catch{Jn(!1)}return Jn(Gr(sr)),sr},c.maxUploadRetryTime);return Xt.urlParams=B,Xt.headers=Qe,Xt.body=ft,Xt.errorHandler=gi(r),Xt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),p=this._ref.storage._makeRequest(u,Vt,r,o);this._request=p,p.getPromise().then(E=>{this._request=void 0,this._uploadUrl=E,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const r=this._uploadUrl;this._resolveToken((o,u)=>{const p=function st(c,r,o,u){const Z=new rr(o,"POST",function E(ie){const Qe=be(ie,["active","final"]);let ft=null;try{ft=ie.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Jn(!1)}ft||Jn(!1);const At=Number(ft);return Jn(!isNaN(At)),new Ye(At,u.size(),"final"===Qe)},c.maxUploadRetryTime);return Z.headers={"X-Goog-Upload-Command":"query"},Z.errorHandler=gi(r),Z}(this._ref.storage,this._ref._location,r,this._blob),E=this._ref.storage._makeRequest(p,Vt,o,u);this._request=E,E.getPromise().then(A=>{this._request=void 0,this._updateProgress(A.current),this._needToFetchStatus=!1,A.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const r=262144*this._chunkMultiplier,o=new Ye(this._transferred,this._blob.size()),u=this._uploadUrl;this._resolveToken((p,E)=>{let A;try{A=function $t(c,r,o,u,p,E,A,B){const Z=new Ye(0,0);if(A?(Z.current=A.current,Z.total=A.total):(Z.current=0,Z.total=u.size()),u.size()!==Z.total)throw function Rt(){return new vt(Le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const ie=Z.total-Z.current;let Qe=ie;p>0&&(Qe=Math.min(Qe,p));const ft=Z.current;let qt="";qt=0===Qe?"finalize":ie===Qe?"upload, finalize":"upload";const Xt={"X-Goog-Upload-Command":qt,"X-Goog-Upload-Offset":`${Z.current}`},Sn=u.slice(ft,ft+Qe);if(null===Sn)throw ct();const vi=new rr(o,"POST",function sr(Si,rl){const pa=be(Si,["active","final"]),ra=Z.current+Qe,Vo=u.size();let Ml;return Ml="final"===pa?Vs(r,E)(Si,rl):null,new Ye(ra,Vo,"final"===pa,Ml)},r.maxUploadRetryTime);return vi.headers=Xt,vi.body=Sn.uploadData(),vi.progressCallback=B||null,vi.errorHandler=gi(c),vi}(this._ref._location,this._ref.storage,u,this._blob,r,this._mappings,o,this._makeProgressCallback())}catch(Z){return this._error=Z,void this._transition("error")}const B=this._ref.storage._makeRequest(A,Vt,p,E,!1);this._request=B,B.getPromise().then(Z=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Z.current),Z.finalized?(this._metadata=Z.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((r,o)=>{const u=ar(this._ref.storage,this._ref._location,this._mappings),p=this._ref.storage._makeRequest(u,Vt,r,o);this._request=p,p.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((r,o)=>{const u=function Re(c,r,o,u,p){const E=r.bucketOnlyServerUrl(),A={"X-Goog-Upload-Protocol":"multipart"},Z=function B(){let vi="";for(let Si=0;Si<2;Si++)vi+=Math.random().toString().slice(2);return vi}();A["Content-Type"]="multipart/related; boundary="+Z;const ie=de(r,u,p),Qe=is(ie,o),qt=Oe.getBlob("--"+Z+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Qe+"\r\n--"+Z+"\r\nContent-Type: "+ie.contentType+"\r\n\r\n",u,"\r\n--"+Z+"--");if(null===qt)throw ct();const Xt={name:ie.fullPath},Sn=rn(E,c.host,c._protocol),Hr=c.maxUploadRetryTime,_i=new rr(Sn,"POST",Vs(c,o),Hr);return _i.urlParams=Xt,_i.headers=A,_i.body=qt.uploadData(),_i.errorHandler=gi(r),_i}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),p=this._ref.storage._makeRequest(u,Vt,r,o);this._request=p,p.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(r){const o=this._transferred;this._transferred=r,this._transferred!==o&&this._notifyObservers()}_transition(r){if(this._state!==r)switch(r){case"canceling":case"pausing":this._state=r,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const o="paused"===this._state;this._state=r,o&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=r,this._notifyObservers();break;case"canceled":this._error=Ct(),this._state=r,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const r=pn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:r,metadata:this._metadata,task:this,ref:this._ref}}on(r,o,u,p){const E=new qn(o||void 0,u||void 0,p||void 0);return this._addObserver(E),()=>{this._removeObserver(E)}}then(r,o){return this._promise.then(r,o)}catch(r){return this.then(null,r)}_addObserver(r){this._observers.push(r),this._notifyObserver(r)}_removeObserver(r){const o=this._observers.indexOf(r);-1!==o&&this._observers.splice(o,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(o=>{this._notifyObserver(o)})}_finishPromise(){if(void 0!==this._resolve){let r=!0;switch(pn(this._state)){case zt.SUCCESS:Qn(this._resolve.bind(null,this.snapshot))();break;case zt.CANCELED:case zt.ERROR:Qn(this._reject.bind(null,this._error))();break;default:r=!1}r&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(r){switch(pn(this._state)){case zt.RUNNING:case zt.PAUSED:r.next&&Qn(r.next.bind(r,this.snapshot))();break;case zt.SUCCESS:r.complete&&Qn(r.complete.bind(r))();break;default:r.error&&Qn(r.error.bind(r,this._error))()}}resume(){const r="paused"===this._state||"pausing"===this._state;return r&&this._transition("running"),r}pause(){const r="running"===this._state;return r&&this._transition("pausing"),r}cancel(){const r="running"===this._state||"pausing"===this._state;return r&&this._transition("canceling"),r}}class $r{constructor(r,o){this._service=r,this._location=o instanceof nr?o:nr.makeFromUrl(o,r.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(r,o){return new $r(r,o)}get root(){const r=new nr(this._location.bucket,"");return this._newRef(this._service,r)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Mt(this._location.path)}get storage(){return this._service}get parent(){const r=function we(c){if(0===c.length)return null;const r=c.lastIndexOf("/");return-1===r?"":c.slice(0,r)}(this._location.path);if(null===r)return null;const o=new nr(this._location.bucket,r);return new $r(this._service,o)}_throwIfRoot(r){if(""===this._location.path)throw nn(r)}}function Go(c,r,o){return ss.apply(this,arguments)}function ss(){return(ss=(0,ze.Z)(function*(c,r,o){const p=yield Wo(c,{pageToken:o});r.prefixes.push(...p.prefixes),r.items.push(...p.items),null!=p.nextPageToken&&(yield Go(c,r,p.nextPageToken))})).apply(this,arguments)}function Wo(c,r){null!=r&&"number"==typeof r.maxResults&&Rn("options.maxResults",1,1e3,r.maxResults);const o=r||{},u=gr(c.storage,c._location,"/",o.pageToken,o.maxResults);return c.storage.makeRequestWithTokens(u,Vt)}function no(c){c._throwIfRoot("getDownloadURL");const r=function ei(c,r,o){const p=rn(r.fullServerUrl(),c.host,c._protocol),A=c.maxOperationRetryTime,B=new rr(p,"GET",function Fi(c,r){return function o(u,p){const E=Vi(c,p,r);return Jn(null!==E),function Hi(c,r,o,u){const p=$e(r);if(null===p||!Gr(p.downloadTokens))return null;const E=p.downloadTokens;if(0===E.length)return null;const A=encodeURIComponent;return E.split(",").map(ie=>{const ft=c.fullPath;return rn("/b/"+A(c.bucket)+"/o/"+A(ft),o,u)+xr({alt:"media",token:ie})})[0]}(E,p,c.host,c._protocol)}}(c,o),A);return B.errorHandler=bn(r),B}(c.storage,c._location,Jr());return c.storage.makeRequestWithTokens(r,Vt).then(o=>{if(null===o)throw function Jt(){return new vt(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return o})}function ro(c,r){const o=function rt(c,r){const o=r.split("/").filter(u=>u.length>0).join("/");return 0===c.length?o:c+"/"+o}(c._location.path,r),u=new nr(c._location.bucket,o);return new $r(c.storage,u)}function Zs(c,r){if(c instanceof vo){const o=c;if(null==o._bucket)throw function Tt(){return new vt(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ne+"' property when initializing the app?")}();const u=new $r(o,o._bucket);return null!=r?Zs(u,r):u}return void 0!==r?ro(c,r):c}function ds(c,r){if(r&&function Hs(c){return/^[A-Za-z]+:\/\//.test(c)}(r)){if(c instanceof vo)return function sa(c,r){return new $r(c,r)}(c,r);throw Fn("To use ref(service, url), the first argument must be a Storage instance.")}return Zs(c,r)}function _o(c,r){const o=null==r?void 0:r[ne];return null==o?null:nr.makeFromBucketSpec(o,c)}class vo{constructor(r,o,u,p,E){this.app=r,this._authProvider=o,this._appCheckProvider=u,this._url=p,this._firebaseVersion=E,this._bucket=null,this._host=Ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=p?nr.makeFromBucketSpec(p,this._host):_o(this._host,this.app.options)}get host(){return this._host}set host(r){this._host=r,this._bucket=null!=this._url?nr.makeFromBucketSpec(this._url,r):_o(r,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(r){Rn("time",0,Number.POSITIVE_INFINITY,r),this._maxUploadRetryTime=r}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(r){Rn("time",0,Number.POSITIVE_INFINITY,r),this._maxOperationRetryTime=r}_getAuthToken(){var r=this;return(0,ze.Z)(function*(){if(r._overrideAuthToken)return r._overrideAuthToken;const o=r._authProvider.getImmediate({optional:!0});if(o){const u=yield o.getToken();if(null!==u)return u.accessToken}return null})()}_getAppCheckToken(){var r=this;return(0,ze.Z)(function*(){const o=r._appCheckProvider.getImmediate({optional:!0});return o?(yield o.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(r=>r.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(r){return new $r(this,r)}_makeRequest(r,o,u,p,E=!0){if(this._deleted)return new Hn(gn());{const A=function bi(c,r,o,u,p,E,A=!0){const B=xr(c.urlParams),Z=c.url+B,ie=Object.assign({},c.headers);return function Zr(c,r){r&&(c["X-Firebase-GMPID"]=r)}(ie,r),function xi(c,r){null!==r&&r.length>0&&(c.Authorization="Firebase "+r)}(ie,o),function Er(c,r){c["X-Firebase-Storage-Version"]="webjs/"+(null!=r?r:"AppManager")}(ie,E),function er(c,r){null!==r&&(c["X-Firebase-AppCheck"]=r)}(ie,u),new si(Z,c.method,ie,c.body,c.successCodes,c.additionalRetryCodes,c.handler,c.errorHandler,c.timeout,c.progressCallback,p,A)}(r,this._appId,u,p,o,this._firebaseVersion,E);return this._requests.add(A),A.getPromise().then(()=>this._requests.delete(A),()=>this._requests.delete(A)),A}}makeRequestWithTokens(r,o){var u=this;return(0,ze.Z)(function*(){const[p,E]=yield Promise.all([u._getAuthToken(),u._getAppCheckToken()]);return u._makeRequest(r,o,p,E).getPromise()})()}}const xs="@firebase/storage";function Io(c,r){return ds(c=(0,q.m9)(c),r)}function Pi(c,{instanceIdentifier:r}){const o=c.getProvider("app").getImmediate(),u=c.getProvider("auth-internal"),p=c.getProvider("app-check-internal");return new vo(o,u,p,r,Ae.SDK_VERSION)}!function ys(){(0,Ae._registerComponent)(new pt.wA("storage",Pi,"PUBLIC").setMultipleInstances(!0)),(0,Ae.registerVersion)(xs,"0.11.2",""),(0,Ae.registerVersion)(xs,"0.11.2","esm2017")}();class co{constructor(r,o,u){this._delegate=r,this.task=o,this.ref=u}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class hs{constructor(r,o){this._delegate=r,this._ref=o,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new co(this._delegate.snapshot,this,this._ref)}then(r,o){return this._delegate.then(u=>{if(r)return r(new co(u,this,this._ref))},o)}on(r,o,u,p){let E;return o&&(E="function"==typeof o?A=>o(new co(A,this,this._ref)):{next:o.next?A=>o.next(new co(A,this,this._ref)):void 0,complete:o.complete||void 0,error:o.error||void 0}),this._delegate.on(r,E,u||void 0,p||void 0)}}class bo{constructor(r,o){this._delegate=r,this._service=o}get prefixes(){return this._delegate.prefixes.map(r=>new C(r,this._service))}get items(){return this._delegate.items.map(r=>new C(r,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class C{constructor(r,o){this._delegate=r,this.storage=o}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(r){const o=function wo(c,r){return ro(c,r)}(this._delegate,r);return new C(o,this.storage)}get root(){return new C(this._delegate.root,this.storage)}get parent(){const r=this._delegate.parent;return null==r?null:new C(r,this.storage)}put(r,o){return this._throwIfRoot("put"),new hs(function Os(c,r,o){return function Ys(c,r,o){return c._throwIfRoot("uploadBytesResumable"),new kr(c,new Oe(r),o)}(c=(0,q.m9)(c),r,o)}(this._delegate,r,o),this)}putString(r,o=An.RAW,u){this._throwIfRoot("putString");const p=ur(o,r),E=Object.assign({},u);return null==E.contentType&&null!=p.contentType&&(E.contentType=p.contentType),new hs(new kr(this._delegate,new Oe(p.data,!0),E),this)}listAll(){return function Aa(c){return function zo(c){const r={prefixes:[],items:[]};return Go(c,r).then(()=>r)}(c=(0,q.m9)(c))}(this._delegate).then(r=>new bo(r,this.storage))}list(r){return function oa(c,r){return Wo(c=(0,q.m9)(c),r)}(this._delegate,r||void 0).then(o=>new bo(o,this.storage))}getMetadata(){return function io(c){return function Ko(c){c._throwIfRoot("getMetadata");const r=ar(c.storage,c._location,Jr());return c.storage.makeRequestWithTokens(r,Vt)}(c=(0,q.m9)(c))}(this._delegate)}updateMetadata(r){return function so(c,r){return function yo(c,r){c._throwIfRoot("updateMetadata");const o=function Xr(c,r,o,u){const E=rn(r.fullServerUrl(),c.host,c._protocol),B=is(o,u),ie=c.maxOperationRetryTime,Qe=new rr(E,"PATCH",Vs(c,u),ie);return Qe.headers={"Content-Type":"application/json; charset=utf-8"},Qe.body=B,Qe.errorHandler=bn(r),Qe}(c.storage,c._location,r,Jr());return c.storage.makeRequestWithTokens(o,Vt)}(c=(0,q.m9)(c),r)}(this._delegate,r)}getDownloadURL(){return function Eo(c){return no(c=(0,q.m9)(c))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ma(c){return function ia(c){c._throwIfRoot("deleteObject");const r=function Ci(c,r){const u=rn(r.fullServerUrl(),c.host,c._protocol),B=new rr(u,"DELETE",function A(Z,ie){},c.maxOperationRetryTime);return B.successCodes=[200,204],B.errorHandler=bn(r),B}(c.storage,c._location);return c.storage.makeRequestWithTokens(r,Vt)}(c=(0,q.m9)(c))}(this._delegate)}_throwIfRoot(r){if(""===this._delegate._location.path)throw nn(r)}}class Q{constructor(r,o){this.app=r,this._delegate=o}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(r){if(D(r))throw Fn("ref() expected a child path but got a URL, use refFromURL instead.");return new C(Io(this._delegate,r),this)}refFromURL(r){if(!D(r))throw Fn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{nr.makeFromUrl(r,this._delegate.host)}catch{throw Fn("refFromUrl() expected a valid full URL but got an invalid one.")}return new C(Io(this._delegate,r),this)}setMaxUploadRetryTime(r){this._delegate.maxUploadRetryTime=r}setMaxOperationRetryTime(r){this._delegate.maxOperationRetryTime=r}useEmulator(r,o,u={}){!function Gi(c,r,o,u={}){!function ga(c,r,o,u={}){c.host=`${r}:${o}`,c._protocol="http";const{mockUserToken:p}=u;p&&(c._overrideAuthToken="string"==typeof p?p:(0,q.Sg)(p,c.app.options.projectId))}(c,r,o,u)}(this._delegate,r,o,u)}}function D(c){return/^[A-Za-z]+:\/\//.test(c)}function $n(c,{instanceIdentifier:r}){const o=c.getProvider("app-compat").getImmediate(),u=c.getProvider("storage").getImmediate({identifier:r});return new Q(o,u)}!function Gn(c){const r={TaskState:zt,TaskEvent:Wt,StringFormat:An,Storage:Q,Reference:C};c.INTERNAL.registerComponent(new pt.wA("storage-compat",$n,"PUBLIC").setServiceProps(r).setMultipleInstances(!0)),c.registerVersion("@firebase/storage-compat","0.3.2")}(lt.Z);var Dr=k(6217),Pn=k(9260);function z(c){const r=function Yi(c){return new Fe.y(r=>{const o=A=>r.next(A);o(c.snapshot);const E=c.on("state_changed",o);return c.then(A=>{o(A),r.complete()},A=>{o(c.snapshot),(A=>{r.error(A)})(A)}),function(){E()}}).pipe((0,Xe.b)(0))}(c);return{task:c,then:c.then.bind(c),catch:c.catch.bind(c),pause:c.pause.bind(c),cancel:c.cancel.bind(c),resume:c.resume.bind(c),snapshotChanges:()=>r,percentageChanges:()=>r.pipe((0,Se.U)(o=>o.bytesTransferred/o.totalBytes*100))}}function j(c){return{getDownloadURL:()=>(0,je.of)(void 0).pipe(oe.fc,(0,_e.w)(()=>c.getDownloadURL()),oe.iC),getMetadata:()=>(0,je.of)(void 0).pipe(oe.fc,(0,_e.w)(()=>c.getMetadata()),oe.iC),delete:()=>(0,Be.D)(c.delete()),child:r=>j(c.child(r)),updateMetadata:r=>(0,Be.D)(c.updateMetadata(r)),put:(r,o)=>z(c.put(r,o)),putString:(r,o,u)=>z(c.putString(r,o,u)),list:r=>(0,Be.D)(c.list(r)),listAll:()=>(0,Be.D)(c.listAll())}}const F=new y.OlP("angularfire2.storageBucket"),ue=new y.OlP("angularfire2.storage.maxUploadRetryTime"),Ot=new y.OlP("angularfire2.storage.maxOperationRetryTime"),Nn=new y.OlP("angularfire2.storage.use-emulator");let hi=(()=>{class c{constructor(o,u,p,E,A,B,Z,ie,Qe,ft){const At=(0,pe.on)(o,A,u);this.storage=(0,pe.cc)(`${At.name}.storage.${p}`,"AngularFireStorage",At.name,()=>{const qt=A.runOutsideAngular(()=>At.storage(p||void 0)),Xt=Qe;return Xt&&qt.useEmulator(...Xt),Z&&qt.setMaxUploadRetryTime(Z),ie&&qt.setMaxOperationRetryTime(ie),qt},[Z,ie])}ref(o){return j(this.storage.ref(o))}refFromURL(o){return j(this.storage.refFromURL(o))}upload(o,u,p){return j(this.storage.ref(o)).put(u,p)}}return c.\u0275fac=function(o){return new(o||c)(y.LFG(pe.Dh),y.LFG(pe.xv,8),y.LFG(F,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(oe.HU),y.LFG(ue,8),y.LFG(Ot,8),y.LFG(Nn,8),y.LFG(Dr.nm,8))},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Yn=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=y.oAB({type:c}),c.\u0275inj=y.cJS({}),c})(),ya=(()=>{class c{constructor(){Pn.Z.registerVersion("angularfire",oe.q4.full,"gcs-compat")}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=y.oAB({type:c}),c.\u0275inj=y.cJS({providers:[hi],imports:[Yn]}),c})();var Ma=k(3101),Ns=k(4986),Ha=k(6451),il=k(3099),Gs=k(5026),sl=k(1884),_a=k(4482),za=k(5403),uo=k(8421),ol=k(4671),os=k(5032),ks=k(3269);k(9568);var la=k(1877);const Ra="@firebase/database";let va="";function Ga(c){va=c}class Do{constructor(r){this.domStorage_=r,this.prefix_="firebase:"}set(r,o){null==o?this.domStorage_.removeItem(this.prefixedName_(r)):this.domStorage_.setItem(this.prefixedName_(r),(0,q.Wl)(o))}get(r){const o=this.domStorage_.getItem(this.prefixedName_(r));return null==o?null:(0,q.cI)(o)}remove(r){this.domStorage_.removeItem(this.prefixedName_(r))}prefixedName_(r){return this.prefix_+r}toString(){return this.domStorage_.toString()}}class ll{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(r,o){null==o?delete this.cache_[r]:this.cache_[r]=o}get(r){return(0,q.r3)(this.cache_,r)?this.cache_[r]:null}remove(r){delete this.cache_[r]}}const qo=function(c){try{if(typeof window<"u"&&typeof window[c]<"u"){const r=window[c];return r.setItem("firebase:sentinel","cache"),r.removeItem("firebase:sentinel"),new Do(r)}}catch{}return new ll},To=qo("localStorage"),So=qo("sessionStorage"),Ao=new la.Yd("@firebase/database"),xa=function(){let c=1;return function(){return c++}}(),wc=function(c){const r=(0,q.dS)(c),o=new q.gQ;o.update(r);const u=o.digest();return q.US.encodeByteArray(u)},Pa=function(...c){let r="";for(let o=0;o<c.length;o++){const u=c[o];Array.isArray(u)||u&&"object"==typeof u&&"number"==typeof u.length?r+=Pa.apply(null,u):r+="object"==typeof u?(0,q.Wl)(u):u,r+=" "}return r};let Ws=null,cl=!0;const sc=function(c,r){(0,q.hu)(!r||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(Ao.logLevel=la.in.VERBOSE,Ws=Ao.log.bind(Ao),r&&So.set("logging_enabled",!0)):"function"==typeof c?Ws=c:(Ws=null,So.remove("logging_enabled"))},as=function(...c){if(!0===cl&&(cl=!1,null===Ws&&!0===So.get("logging_enabled")&&sc(!0)),Ws){const r=Pa.apply(null,c);Ws(r)}},ls=function(c){return function(...r){as(c,...r)}},Xs=function(...c){const r="FIREBASE INTERNAL ERROR: "+Pa(...c);Ao.error(r)},Nr=function(...c){const r=`FIREBASE FATAL ERROR: ${Pa(...c)}`;throw Ao.error(r),new Error(r)},es=function(...c){const r="FIREBASE WARNING: "+Pa(...c);Ao.warn(r)},$i=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},fs="[MIN_NAME]",Mo="[MAX_NAME]",Ro=function(c,r){if(c===r)return 0;if(c===fs||r===Mo)return-1;if(r===fs||c===Mo)return 1;{const o=lr(c),u=lr(r);return null!==o?null!==u?o-u==0?c.length-r.length:o-u:-1:null!==u?1:c<r?-1:1}},Wc=function(c,r){return c===r?0:c<r?-1:1},Ea=function(c,r){if(r&&c in r)return r[c];throw new Error("Missing required key ("+c+") in object: "+(0,q.Wl)(r))},L=function(c){if("object"!=typeof c||null===c)return(0,q.Wl)(c);const r=[];for(const u in c)r.push(u);r.sort();let o="{";for(let u=0;u<r.length;u++)0!==u&&(o+=","),o+=(0,q.Wl)(r[u]),o+=":",o+=L(c[r[u]]);return o+="}",o},J=function(c,r){const o=c.length;if(o<=r)return[c];const u=[];for(let p=0;p<o;p+=r)u.push(c.substring(p,p+r>o?o:p+r));return u};function U(c,r){for(const o in c)c.hasOwnProperty(o)&&r(o,c[o])}const ce=function(c){(0,q.hu)(!$i(c),"Invalid JSON number");const u=1023;let p,E,A,B,Z;0===c?(E=0,A=0,p=1/c==-1/0?1:0):(p=c<0,(c=Math.abs(c))>=Math.pow(2,1-u)?(B=Math.min(Math.floor(Math.log(c)/Math.LN2),u),E=B+u,A=Math.round(c*Math.pow(2,52-B)-Math.pow(2,52))):(E=0,A=Math.round(c/Math.pow(2,-1074))));const ie=[];for(Z=52;Z;Z-=1)ie.push(A%2?1:0),A=Math.floor(A/2);for(Z=11;Z;Z-=1)ie.push(E%2?1:0),E=Math.floor(E/2);ie.push(p?1:0),ie.reverse();const Qe=ie.join("");let ft="";for(Z=0;Z<64;Z+=8){let At=parseInt(Qe.substr(Z,8),2).toString(16);1===At.length&&(At="0"+At),ft+=At}return ft.toLowerCase()},jn=new RegExp("^-?(0*)\\d{1,10}$"),lr=function(c){if(jn.test(c)){const r=Number(c);if(r>=-2147483648&&r<=2147483647)return r}return null},vr=function(c){try{c()}catch(r){setTimeout(()=>{throw es("Exception was thrown by user callback.",r.stack||""),r},Math.floor(0))}},ts=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},dn=function(c,r){const o=setTimeout(c,r);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class xn{constructor(r,o){this.appName_=r,this.appCheckProvider=o,this.appCheck=null==o?void 0:o.getImmediate({optional:!0}),this.appCheck||null==o||o.get().then(u=>this.appCheck=u)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((o,u)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(o,u):o(null)},0)})}addTokenChangeListener(r){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(u=>u.addTokenListener(r))}notifyForInvalidToken(){es(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xo{constructor(r,o,u){this.appName_=r,this.firebaseOptions_=o,this.authProvider_=u,this.auth_=null,this.auth_=u.getImmediate({optional:!0}),this.auth_||u.onInit(p=>this.auth_=p)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(o=>o&&"auth/token-not-initialized"===o.code?(as("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,u)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(o,u):o(null)},0)})}addTokenChangeListener(r){this.auth_?this.auth_.addAuthTokenListener(r):this.authProvider_.get().then(o=>o.addAuthTokenListener(r))}removeTokenChangeListener(r){this.authProvider_.get().then(o=>o.removeAuthTokenListener(r))}notifyForInvalidToken(){let r='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';r+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',es(r)}}let hn=(()=>{class c{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return c.OWNER="owner",c})();const Nl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ul="websocket",bc="long_polling";class Po{constructor(r,o,u,p,E=!1,A="",B=!1,Z=!1){this.secure=o,this.namespace=u,this.webSocketOnly=p,this.nodeAdmin=E,this.persistenceKey=A,this.includeNamespaceInQueryParams=B,this.isUsingEmulator=Z,this._host=r.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=To.get("host:"+r)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(r){r!==this.internalHost&&(this.internalHost=r,this.isCacheableHost()&&To.set("host:"+this._host,this.internalHost))}toString(){let r=this.toURLString();return this.persistenceKey&&(r+="<"+this.persistenceKey+">"),r}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Yo(c,r,o){let u;if((0,q.hu)("string"==typeof r,"typeof type must == string"),(0,q.hu)("object"==typeof o,"typeof params must == object"),r===ul)u=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(r!==bc)throw new Error("Unknown connection type: "+r);u=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function dd(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(o.ns=c.namespace);const p=[];return U(o,(E,A)=>{p.push(E+"="+A)}),u+p.join("&")}class hr{constructor(){this.counters_={}}incrementCounter(r,o=1){(0,q.r3)(this.counters_,r)||(this.counters_[r]=0),this.counters_[r]+=o}get(){return(0,q.p$)(this.counters_)}}const Oi={},ca={};function Ti(c){const r=c.toString();return Oi[r]||(Oi[r]=new hr),Oi[r]}class Oa{constructor(r){this.onMessage_=r,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(r,o){this.closeAfterResponse=r,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(r,o){for(this.pendingResponses[r]=o;this.pendingResponses[this.currentResponseNum];){const u=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let p=0;p<u.length;++p)u[p]&&vr(()=>{this.onMessage_(u[p])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class vs{constructor(r,o,u,p,E,A,B){this.connId=r,this.repoInfo=o,this.applicationId=u,this.appCheckToken=p,this.authToken=E,this.transportSessionId=A,this.lastSessionId=B,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ls(r),this.stats_=Ti(o),this.urlFn=Z=>(this.appCheckToken&&(Z.ac=this.appCheckToken),Yo(o,bc,Z))}open(r,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new Oa(r),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,q.Yr)()||"complete"===document.readyState)c();else{let r=!1;const o=function(){document.body?r||(r=!0,c()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ko((...E)=>{const[A,B,Z,ie,Qe]=E;if(this.incrementIncomingBytes_(E),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===A)this.id=B,this.password=Z;else{if("close"!==A)throw new Error("Unrecognized command received: "+A);B?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(B,()=>{this.onClosed_()})):this.onClosed_()}},(...E)=>{const[A,B]=E;this.incrementIncomingBytes_(E),this.myPacketOrderer.handleResponse(A,B)},()=>{this.onClosed_()},this.urlFn);const u={start:"t"};u.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(u.cb=this.scriptTagHolder.uniqueCallbackIdentifier),u.v="5",this.transportSessionId&&(u.s=this.transportSessionId),this.lastSessionId&&(u.ls=this.lastSessionId),this.applicationId&&(u.p=this.applicationId),this.appCheckToken&&(u.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Nl.test(location.hostname)&&(u.r="f");const p=this.urlFn(u);this.log_("Connecting via long-poll to "+p),this.scriptTagHolder.addTag(p,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vs.forceAllow_=!0}static forceDisallow(){vs.forceDisallow_=!0}static isAvailable(){return!((0,q.Yr)()||!vs.forceAllow_&&(vs.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(r){const o=(0,q.Wl)(r);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const u=(0,q.h$)(o),p=J(u,1840);for(let E=0;E<p.length;E++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,p.length,p[E]),this.curSegmentNum++}addDisconnectPingFrame(r,o){if((0,q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const u={dframe:"t"};u.id=r,u.pw=o,this.myDisconnFrame.src=this.urlFn(u),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(r){const o=(0,q.Wl)(r).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class ko{constructor(r,o,u,p){if(this.onDisconnect=u,this.urlFn=p,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,q.Yr)())this.commandCB=r,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=xa(),window["pLPCommand"+this.uniqueCallbackIdentifier]=r,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=ko.createIFrame_();let E="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(E='<script>document.domain="'+document.domain+'";<\/script>');const A="<html><body>"+E+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(A),this.myIFrame.doc.close()}catch(B){as("frame writing exception"),B.stack&&as(B.stack),as(B)}}}static createIFrame_(){const r=document.createElement("iframe");if(r.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(r);try{r.contentWindow.document||as("No IE domain setting required")}catch{const u=document.domain;r.src="javascript:void((function(){document.open();document.domain='"+u+"';document.close();})())"}return r.contentDocument?r.doc=r.contentDocument:r.contentWindow?r.doc=r.contentWindow.document:r.document&&(r.doc=r.document),r}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const r=this.onDisconnect;r&&(this.onDisconnect=null,r())}startLongPoll(r,o){for(this.myID=r,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const r={};r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial;let o=this.urlFn(r),u="",p=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+u.length<=1870;){const A=this.pendingSegs.shift();u=u+"&seg"+p+"="+A.seg+"&ts"+p+"="+A.ts+"&d"+p+"="+A.d,p++}return o+=u,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(r,o,u){this.pendingSegs.push({seg:r,ts:o,d:u}),this.alive&&this.newRequest_()}addLongPollTag_(r,o){this.outstandingRequests.add(o);const u=()=>{this.outstandingRequests.delete(o),this.newRequest_()},p=setTimeout(u,Math.floor(25e3));this.addTag(r,()=>{clearTimeout(p),u()})}addTag(r,o){(0,q.Yr)()?this.doNodeLongPoll(r,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const u=this.myIFrame.doc.createElement("script");u.type="text/javascript",u.async=!0,u.src=r,u.onload=u.onreadystatechange=function(){const p=u.readyState;(!p||"loaded"===p||"complete"===p)&&(u.onload=u.onreadystatechange=null,u.parentNode&&u.parentNode.removeChild(u),o())},u.onerror=()=>{as("Long-poll script failed to load: "+r),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(u)}catch{}},Math.floor(1))}}let As=null;typeof MozWebSocket<"u"?As=MozWebSocket:typeof WebSocket<"u"&&(As=WebSocket);let Sc=(()=>{class c{constructor(o,u,p,E,A,B,Z){this.connId=o,this.applicationId=p,this.appCheckToken=E,this.authToken=A,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ls(this.connId),this.stats_=Ti(u),this.connURL=c.connectionURL_(u,B,Z,E,p),this.nodeAdmin=u.nodeAdmin}static connectionURL_(o,u,p,E,A){const B={v:"5"};return!(0,q.Yr)()&&typeof location<"u"&&location.hostname&&Nl.test(location.hostname)&&(B.r="f"),u&&(B.s=u),p&&(B.ls=p),E&&(B.ac=E),A&&(B.p=A),Yo(o,ul,B)}open(o,u){this.onDisconnect=u,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,To.set("previous_websocket_failure",!0);try{let p;if((0,q.Yr)()){p={headers:{"User-Agent":`Firebase/5/${va}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(p.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(p.headers["X-Firebase-AppCheck"]=this.appCheckToken);const A=process.env,B=0===this.connURL.indexOf("wss://")?A.HTTPS_PROXY||A.https_proxy:A.HTTP_PROXY||A.http_proxy;B&&(p.proxy={origin:B})}this.mySock=new As(this.connURL,[],p)}catch(p){this.log_("Error instantiating WebSocket.");const E=p.message||p.data;return E&&this.log_(E),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=p=>{this.handleIncomingFrame(p)},this.mySock.onerror=p=>{this.log_("WebSocket error.  Closing connection.");const E=p.message||p.data;E&&this.log_(E),this.onClosed_()}}start(){}static forceDisallow(){c.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const p=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);p&&p.length>1&&parseFloat(p[1])<4.4&&(o=!0)}return!o&&null!==As&&!c.forceDisallow_}static previouslyFailed(){return To.isInMemoryStorage||!0===To.get("previous_websocket_failure")}markConnectionHealthy(){To.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const u=this.frames.join("");this.frames=null;const p=(0,q.cI)(u);this.onMessage(p)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,q.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const u=Number(o);if(!isNaN(u))return this.handleNewFrameCount_(u),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const u=o.data;if(this.bytesReceived+=u.length,this.stats_.incrementCounter("bytes_received",u.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(u);else{const p=this.extractFrameCount_(u);null!==p&&this.appendFrame_(p)}}send(o){this.resetKeepAlive();const u=(0,q.Wl)(o);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const p=J(u,16384);p.length>1&&this.sendString_(String(p.length));for(let E=0;E<p.length;E++)this.sendString_(p[E])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(u){this.log_("Exception thrown from WebSocket.send():",u.message||u.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c})(),Ac=(()=>{class c{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[vs,Sc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const u=Sc&&Sc.isAvailable();let p=u&&!Sc.previouslyFailed();if(o.webSocketOnly&&(u||es("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[Sc];else{const E=this.transports_=[];for(const A of c.ALL_TRANSPORTS)A&&A.isAvailable()&&E.push(A);c.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return c.globalTransportInitialized_=!1,c})();class Lo{constructor(r,o,u,p,E,A,B,Z,ie,Qe){this.id=r,this.repoInfo_=o,this.applicationId_=u,this.appCheckToken_=p,this.authToken_=E,this.onMessage_=A,this.onReady_=B,this.onDisconnect_=Z,this.onKill_=ie,this.lastSessionId=Qe,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ls("c:"+this.id+":"),this.transportManager_=new Ac(o),this.log_("Connection created"),this.start_()}start_(){const r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),u=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,u)},Math.floor(0));const p=r.healthyTimeout||0;p>0&&(this.healthyTimeout_=dn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(p)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(r){return o=>{r===this.conn_?this.onConnectionLost_(o):r===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(r){return o=>{2!==this.state_&&(r===this.rx_?this.onPrimaryMessageReceived_(o):r===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(r){this.sendData_({t:"d",d:r})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(r){if("t"in r){const o=r.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(r){const o=Ea("t",r),u=Ea("d",r);if("c"===o)this.onSecondaryControl_(u);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(u)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(r){const o=Ea("t",r),u=Ea("d",r);"c"===o?this.onControl_(u):"d"===o&&this.onDataMessage_(u)}onDataMessage_(r){this.onPrimaryResponse_(),this.onMessage_(r)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(r){const o=Ea("t",r);if("d"in r){const u=r.d;if("h"===o){const p=Object.assign({},u);this.repoInfo_.isUsingEmulator&&(p.h=this.repoInfo_.host),this.onHandshake_(p)}else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let p=0;p<this.pendingDataMessages.length;++p)this.onDataMessage_(this.pendingDataMessages[p]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(u):"r"===o?this.onReset_(u):"e"===o?Xs("Server Error: "+u):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xs("Unknown control packet command: "+o)}}onHandshake_(r){const o=r.ts,u=r.v,p=r.h;this.sessionId=r.s,this.repoInfo_.host=p,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==u&&es("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const r=this.transportManager_.upgradeTransport();r&&this.startUpgrade_(r)}startUpgrade_(r){this.secondaryConn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),u=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,u),dn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(r){this.log_("Reset packet received.  New host: "+r),this.repoInfo_.host=r,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(r,o){this.log_("Realtime connection established."),this.conn_=r,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const r=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===r||this.rx_===r)&&this.close()}onConnectionLost_(r){this.conn_=null,r||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(To.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(r){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(r),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(r){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(r)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Bo{put(r,o,u,p){}merge(r,o,u,p){}refreshAuthToken(r){}refreshAppCheckToken(r){}onDisconnectPut(r,o,u){}onDisconnectMerge(r,o,u){}onDisconnectCancel(r,o){}reportStats(r){}}class S{constructor(r){this.allowedEvents_=r,this.listeners_={},(0,q.hu)(Array.isArray(r)&&r.length>0,"Requires a non-empty array")}trigger(r,...o){if(Array.isArray(this.listeners_[r])){const u=[...this.listeners_[r]];for(let p=0;p<u.length;p++)u[p].callback.apply(u[p].context,o)}}on(r,o,u){this.validateEventType_(r),this.listeners_[r]=this.listeners_[r]||[],this.listeners_[r].push({callback:o,context:u});const p=this.getInitialEvent(r);p&&o.apply(u,p)}off(r,o,u){this.validateEventType_(r);const p=this.listeners_[r]||[];for(let E=0;E<p.length;E++)if(p[E].callback===o&&(!u||u===p[E].context))return void p.splice(E,1)}validateEventType_(r){(0,q.hu)(this.allowedEvents_.find(o=>o===r),"Unknown event: "+r)}}class R extends S{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new R}getInitialEvent(r){return(0,q.hu)("online"===r,"Unknown event type: "+r),[this.online_]}currentlyOnline(){return this.online_}}const b=32,N=768;class H{constructor(r,o){if(void 0===o){this.pieces_=r.split("/");let u=0;for(let p=0;p<this.pieces_.length;p++)this.pieces_[p].length>0&&(this.pieces_[u]=this.pieces_[p],u++);this.pieces_.length=u,this.pieceNum_=0}else this.pieces_=r,this.pieceNum_=o}toString(){let r="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(r+="/"+this.pieces_[o]);return r||"/"}}function re(){return new H("")}function le(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function ht(c){return c.pieces_.length-c.pieceNum_}function Dt(c){let r=c.pieceNum_;return r<c.pieces_.length&&r++,new H(c.pieces_,r)}function wn(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function Vn(c,r=0){return c.pieces_.slice(c.pieceNum_+r)}function ai(c){if(c.pieceNum_>=c.pieces_.length)return null;const r=[];for(let o=c.pieceNum_;o<c.pieces_.length-1;o++)r.push(c.pieces_[o]);return new H(r,0)}function jr(c,r){const o=[];for(let u=c.pieceNum_;u<c.pieces_.length;u++)o.push(c.pieces_[u]);if(r instanceof H)for(let u=r.pieceNum_;u<r.pieces_.length;u++)o.push(r.pieces_[u]);else{const u=r.split("/");for(let p=0;p<u.length;p++)u[p].length>0&&o.push(u[p])}return new H(o,0)}function Tr(c){return c.pieceNum_>=c.pieces_.length}function Zi(c,r){const o=le(c),u=le(r);if(null===o)return r;if(o===u)return Zi(Dt(c),Dt(r));throw new Error("INTERNAL ERROR: innerPath ("+r+") is not within outerPath ("+c+")")}function Fs(c,r){const o=Vn(c,0),u=Vn(r,0);for(let p=0;p<o.length&&p<u.length;p++){const E=Ro(o[p],u[p]);if(0!==E)return E}return o.length===u.length?0:o.length<u.length?-1:1}function Zo(c,r){if(ht(c)!==ht(r))return!1;for(let o=c.pieceNum_,u=r.pieceNum_;o<=c.pieces_.length;o++,u++)if(c.pieces_[o]!==r.pieces_[u])return!1;return!0}function ps(c,r){let o=c.pieceNum_,u=r.pieceNum_;if(ht(c)>ht(r))return!1;for(;o<c.pieces_.length;){if(c.pieces_[o]!==r.pieces_[u])return!1;++o,++u}return!0}class hl{constructor(r,o){this.errorPrefix_=o,this.parts_=Vn(r,0),this.byteLength_=Math.max(1,this.parts_.length);for(let u=0;u<this.parts_.length;u++)this.byteLength_+=(0,q.ug)(this.parts_[u]);Fl(this)}}function Fl(c){if(c.byteLength_>N)throw new Error(c.errorPrefix_+"has a key path longer than "+N+" bytes ("+c.byteLength_+").");if(c.parts_.length>b)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+b+") or object contains a cycle "+Qi(c))}function Qi(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}class pl extends S{constructor(){let r,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",r="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const u=!document[r];u!==this.visible_&&(this.visible_=u,this.trigger("visible",u))},!1)}static getInstance(){return new pl}getInitialEvent(r){return(0,q.hu)("visible"===r,"Unknown event type: "+r),[this.visible_]}}const V=1e3;let ni,kn=(()=>{class c extends Bo{constructor(o,u,p,E,A,B,Z,ie){if(super(),this.repoInfo_=o,this.applicationId_=u,this.onDataUpdate_=p,this.onConnectStatus_=E,this.onServerInfoUpdate_=A,this.authTokenProvider_=B,this.appCheckTokenProvider_=Z,this.authOverride_=ie,this.id=c.nextPersistentConnectionId_++,this.log_=ls("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=V,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ie&&!(0,q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pl.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&R.getInstance().on("online",this.onOnline_,this)}sendRequest(o,u,p){const E=++this.requestNumber_,A={r:E,a:o,b:u};this.log_((0,q.Wl)(A)),(0,q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(A),p&&(this.requestCBHash_[E]=p)}get(o){this.initConnection_();const u=new q.BH,E={action:"g",request:{p:o._path.toString(),q:o._queryObject},onComplete:B=>{const Z=B.d;"ok"===B.s?u.resolve(Z):u.reject(Z)}};return this.outstandingGets_.push(E),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),u.promise}listen(o,u,p,E){this.initConnection_();const A=o._queryIdentifier,B=o._path.toString();this.log_("Listen called for "+B+" "+A),this.listens.has(B)||this.listens.set(B,new Map),(0,q.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,q.hu)(!this.listens.get(B).has(A),"listen() called twice for same path/queryId.");const Z={onComplete:E,hashFn:u,query:o,tag:p};this.listens.get(B).set(A,Z),this.connected_&&this.sendListen_(Z)}sendGet_(o){const u=this.outstandingGets_[o];this.sendRequest("g",u.request,p=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),u.onComplete&&u.onComplete(p)})}sendListen_(o){const u=o.query,p=u._path.toString(),E=u._queryIdentifier;this.log_("Listen on "+p+" for "+E);const A={p};o.tag&&(A.q=u._queryObject,A.t=o.tag),A.h=o.hashFn(),this.sendRequest("q",A,Z=>{const ie=Z.d,Qe=Z.s;c.warnOnListenWarnings_(ie,u),(this.listens.get(p)&&this.listens.get(p).get(E))===o&&(this.log_("listen response",Z),"ok"!==Qe&&this.removeListen_(p,E),o.onComplete&&o.onComplete(Qe,ie))})}static warnOnListenWarnings_(o,u){if(o&&"object"==typeof o&&(0,q.r3)(o,"w")){const p=(0,q.DV)(o,"w");if(Array.isArray(p)&&~p.indexOf("no_index")){const E='".indexOn": "'+u._queryParams.getIndex().toString()+'"',A=u._path.toString();es(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${E} at ${A} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,q.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,u=(0,q.w9)(o)?"auth":"gauth",p={cred:o};null===this.authOverride_?p.noauth=!0:"object"==typeof this.authOverride_&&(p.authvar=this.authOverride_),this.sendRequest(u,p,E=>{const A=E.s,B=E.d||"error";this.authToken_===o&&("ok"===A?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(A,B))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const u=o.s,p=o.d||"error";"ok"===u?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(u,p)})}unlisten(o,u){const p=o._path.toString(),E=o._queryIdentifier;this.log_("Unlisten called for "+p+" "+E),(0,q.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(p,E)&&this.connected_&&this.sendUnlisten_(p,E,o._queryObject,u)}sendUnlisten_(o,u,p,E){this.log_("Unlisten on "+o+" for "+u);const A={p:o};E&&(A.q=p,A.t=E),this.sendRequest("n",A)}onDisconnectPut(o,u,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,u,p):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:u,onComplete:p})}onDisconnectMerge(o,u,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,u,p):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:u,onComplete:p})}onDisconnectCancel(o,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,u):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:u})}sendOnDisconnect_(o,u,p,E){const A={p:u,d:p};this.log_("onDisconnect "+o,A),this.sendRequest(o,A,B=>{E&&setTimeout(()=>{E(B.s,B.d)},Math.floor(0))})}put(o,u,p,E){this.putInternal("p",o,u,p,E)}merge(o,u,p,E){this.putInternal("m",o,u,p,E)}putInternal(o,u,p,E,A){this.initConnection_();const B={p:u,d:p};void 0!==A&&(B.h=A),this.outstandingPuts_.push({action:o,request:B,onComplete:E}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+u)}sendPut_(o){const u=this.outstandingPuts_[o].action,p=this.outstandingPuts_[o].request,E=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(u,p,A=>{this.log_(u+" response",A),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),E&&E(A.s,A.d)})}reportStats(o){if(this.connected_){const u={c:o};this.log_("reportStats",u),this.sendRequest("s",u,p=>{"ok"!==p.s&&this.log_("reportStats","Error sending stats: "+p.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,q.Wl)(o));const u=o.r,p=this.requestCBHash_[u];p&&(delete this.requestCBHash_[u],p(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,u){this.log_("handleServerMessage",o,u),"d"===o?this.onDataUpdate_(u.p,u.d,!1,u.t):"m"===o?this.onDataUpdate_(u.p,u.d,!0,u.t):"c"===o?this.onListenRevoked_(u.p,u.q):"ac"===o?this.onAuthRevoked_(u.s,u.d):"apc"===o?this.onAppCheckRevoked_(u.s,u.d):"sd"===o?this.onSecurityDebugPacket_(u):Xs("Unrecognized action received from server: "+(0,q.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,u){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=u,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=V,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=V,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=V),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let u=Math.max(0,this.reconnectDelay_-o);u=Math.random()*u,this.log_("Trying to reconnect in "+u+"ms"),this.scheduleConnect_(u),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,ze.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const u=o.onDataMessage_.bind(o),p=o.onReady_.bind(o),E=o.onRealtimeDisconnect_.bind(o),A=o.id+":"+c.nextConnectionId_++,B=o.lastSessionId;let Z=!1,ie=null;const Qe=function(){ie?ie.close():(Z=!0,E())};o.realtime_={close:Qe,sendRequest:function(qt){(0,q.hu)(ie,"sendRequest call when we're not connected not allowed."),ie.sendRequest(qt)}};const At=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[qt,Xt]=yield Promise.all([o.authTokenProvider_.getToken(At),o.appCheckTokenProvider_.getToken(At)]);Z?as("getToken() completed but was canceled"):(as("getToken() completed. Creating connection."),o.authToken_=qt&&qt.accessToken,o.appCheckToken_=Xt&&Xt.token,ie=new Lo(A,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,u,p,E,Sn=>{es(Sn+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},B))}catch(qt){o.log_("Failed to get token: "+qt),Z||(o.repoInfo_.nodeAdmin&&es(qt),Qe())}}})()}interrupt(o){as("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){as("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=V,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const u=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:u})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const u=this.outstandingPuts_[o];u&&"h"in u.request&&u.queued&&(u.onComplete&&u.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,u){let p;p=u?u.map(A=>L(A)).join("$"):"default";const E=this.removeListen_(o,p);E&&E.onComplete&&E.onComplete("permission_denied")}removeListen_(o,u){const p=new H(o).toString();let E;if(this.listens.has(p)){const A=this.listens.get(p);E=A.get(u),A.delete(u),0===A.size&&this.listens.delete(p)}else E=void 0;return E}onAuthRevoked_(o,u){as("Auth token revoked: "+o+"/"+u),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,u){as("App check token revoked: "+o+"/"+u),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const u of o.values())this.sendListen_(u);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let u="js";(0,q.Yr)()&&(u=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+u+"."+va.replace(/\./g,"-")]=1,(0,q.uI)()?o["framework.cordova"]=1:(0,q.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=R.getInstance().currentlyOnline();return(0,q.xb)(this.interruptReasons_)&&o}}return c.nextPersistentConnectionId_=0,c.nextConnectionId_=0,c})();class ln{constructor(r,o){this.name=r,this.node=o}static Wrap(r,o){return new ln(r,o)}}class wr{getCompare(){return this.compare.bind(this)}indexedValueChanged(r,o){const u=new ln(fs,r),p=new ln(fs,o);return 0!==this.compare(u,p)}minPost(){return ln.MIN}}class tr extends wr{static get __EMPTY_NODE(){return ni}static set __EMPTY_NODE(r){ni=r}compare(r,o){return Ro(r.name,o.name)}isDefinedOn(r){throw(0,q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(r,o){return!1}minPost(){return ln.MIN}maxPost(){return new ln(Mo,ni)}makePost(r,o){return(0,q.hu)("string"==typeof r,"KeyIndex indexValue must always be a string."),new ln(r,ni)}toString(){return".key"}}const Ms=new tr;class Ki{constructor(r,o,u,p,E=null){this.isReverse_=p,this.resultGenerator_=E,this.nodeStack_=[];let A=1;for(;!r.isEmpty();)if(A=o?u(r.key,o):1,p&&(A*=-1),A<0)r=this.isReverse_?r.left:r.right;else{if(0===A){this.nodeStack_.push(r);break}this.nodeStack_.push(r),r=this.isReverse_?r.right:r.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,r=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value},this.isReverse_)for(r=r.left;!r.isEmpty();)this.nodeStack_.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack_.push(r),r=r.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const r=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value}}}let Rc,Ii=(()=>{class c{constructor(o,u,p,E,A){this.key=o,this.value=u,this.color=null!=p?p:c.RED,this.left=null!=E?E:Cs.EMPTY_NODE,this.right=null!=A?A:Cs.EMPTY_NODE}copy(o,u,p,E,A){return new c(null!=o?o:this.key,null!=u?u:this.value,null!=p?p:this.color,null!=E?E:this.left,null!=A?A:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,u,p){let E=this;const A=p(o,E.key);return E=A<0?E.copy(null,null,null,E.left.insert(o,u,p),null):0===A?E.copy(null,u,null,null,null):E.copy(null,null,null,null,E.right.insert(o,u,p)),E.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cs.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,u){let p,E;if(p=this,u(o,p.key)<0)!p.left.isEmpty()&&!p.left.isRed_()&&!p.left.left.isRed_()&&(p=p.moveRedLeft_()),p=p.copy(null,null,null,p.left.remove(o,u),null);else{if(p.left.isRed_()&&(p=p.rotateRight_()),!p.right.isEmpty()&&!p.right.isRed_()&&!p.right.left.isRed_()&&(p=p.moveRedRight_()),0===u(o,p.key)){if(p.right.isEmpty())return Cs.EMPTY_NODE;E=p.right.min_(),p=p.copy(E.key,E.value,null,null,p.right.removeMin_())}p=p.copy(null,null,null,null,p.right.remove(o,u))}return p.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),u=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,u)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return c.RED=!0,c.BLACK=!1,c})();class Cs{constructor(r,o=Cs.EMPTY_NODE){this.comparator_=r,this.root_=o}insert(r,o){return new Cs(this.comparator_,this.root_.insert(r,o,this.comparator_).copy(null,null,Ii.BLACK,null,null))}remove(r){return new Cs(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,Ii.BLACK,null,null))}get(r){let o,u=this.root_;for(;!u.isEmpty();){if(o=this.comparator_(r,u.key),0===o)return u.value;o<0?u=u.left:o>0&&(u=u.right)}return null}getPredecessorKey(r){let o,u=this.root_,p=null;for(;!u.isEmpty();){if(o=this.comparator_(r,u.key),0===o){if(u.left.isEmpty())return p?p.key:null;for(u=u.left;!u.right.isEmpty();)u=u.right;return u.key}o<0?u=u.left:o>0&&(p=u,u=u.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(r){return this.root_.inorderTraversal(r)}reverseTraversal(r){return this.root_.reverseTraversal(r)}getIterator(r){return new Ki(this.root_,null,this.comparator_,!1,r)}getIteratorFrom(r,o){return new Ki(this.root_,r,this.comparator_,!1,o)}getReverseIteratorFrom(r,o){return new Ki(this.root_,r,this.comparator_,!0,o)}getReverseIterator(r){return new Ki(this.root_,null,this.comparator_,!0,r)}}function $o(c,r){return Ro(c.name,r.name)}function Uo(c,r){return Ro(c,r)}Cs.EMPTY_NODE=new class gl{copy(r,o,u,p,E){return this}insert(r,o,u){return new Ii(r,o,null)}remove(r,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ll=function(c){return"number"==typeof c?"number:"+ce(c):"string:"+c},xc=function(c){if(c.isLeafNode()){const r=c.val();(0,q.hu)("string"==typeof r||"number"==typeof r||"object"==typeof r&&(0,q.r3)(r,".sv"),"Priority must be a string or number.")}else(0,q.hu)(c===Rc||c.isEmpty(),"priority of unexpected type.");(0,q.hu)(c===Rc||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let uc,Pc,ml,Qo=(()=>{class c{constructor(o,u=c.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=u,this.lazyHash_=null,(0,q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xc(this.priorityNode_)}static set __childrenNodeConstructor(o){uc=o}static get __childrenNodeConstructor(){return uc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new c(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return Tr(o)?this:".priority"===le(o)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,u){return null}updateImmediateChild(o,u){return".priority"===o?this.updatePriority(u):u.isEmpty()&&".priority"!==o?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,u).updatePriority(this.priorityNode_)}updateChild(o,u){const p=le(o);return null===p?u:u.isEmpty()&&".priority"!==p?this:((0,q.hu)(".priority"!==p||1===ht(o),".priority must be the last token in a path"),this.updateImmediateChild(p,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(o),u)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,u){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+Ll(this.priorityNode_.val())+":");const u=typeof this.value_;o+=u+":",o+="number"===u?ce(this.value_):this.value_,this.lazyHash_=wc(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===c.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof c.__childrenNodeConstructor?-1:((0,q.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const u=typeof o.value_,p=typeof this.value_,E=c.VALUE_TYPE_ORDER.indexOf(u),A=c.VALUE_TYPE_ORDER.indexOf(p);return(0,q.hu)(E>=0,"Unknown leaf type: "+u),(0,q.hu)(A>=0,"Unknown leaf type: "+p),E===A?"object"===p?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:A-E}withIndex(){return this}isIndexed(){return!0}equals(o){return o===this||!!o.isLeafNode()&&(this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_))}}return c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c})();const ji=new class yu extends wr{compare(r,o){const u=r.node.getPriority(),p=o.node.getPriority(),E=u.compareTo(p);return 0===E?Ro(r.name,o.name):E}isDefinedOn(r){return!r.getPriority().isEmpty()}indexedValueChanged(r,o){return!r.getPriority().equals(o.getPriority())}minPost(){return ln.MIN}maxPost(){return new ln(Mo,new Qo("[PRIORITY-POST]",ml))}makePost(r,o){const u=Pc(r);return new ln(o,new Qo("[PRIORITY-POST]",u))}toString(){return".priority"}},Ef=Math.log(2);class _u{constructor(r){this.count=parseInt(Math.log(r+1)/Ef,10),this.current_=this.count-1;const p=(E=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=r+1&p}nextBitIsOne(){const r=!(this.bits_&1<<this.current_);return this.current_--,r}}const dh=function(c,r,o,u){c.sort(r);const p=function(Z,ie){const Qe=ie-Z;let ft,At;if(0===Qe)return null;if(1===Qe)return ft=c[Z],At=o?o(ft):ft,new Ii(At,ft.node,Ii.BLACK,null,null);{const qt=parseInt(Qe/2,10)+Z,Xt=p(Z,qt),Sn=p(qt+1,ie);return ft=c[qt],At=o?o(ft):ft,new Ii(At,ft.node,Ii.BLACK,Xt,Sn)}},B=function(Z){let ie=null,Qe=null,ft=c.length;const At=function(Xt,Sn){const sr=ft-Xt,Hr=ft;ft-=Xt;const _i=p(sr+1,Hr),vi=c[sr],Si=o?o(vi):vi;qt(new Ii(Si,vi.node,Sn,null,_i))},qt=function(Xt){ie?(ie.left=Xt,ie=Xt):(Qe=Xt,ie=Xt)};for(let Xt=0;Xt<Z.count;++Xt){const Sn=Z.nextBitIsOne(),sr=Math.pow(2,Z.count-(Xt+1));Sn?At(sr,Ii.BLACK):(At(sr,Ii.BLACK),At(sr,Ii.RED))}return Qe}(new _u(c.length));return new Cs(u||r,B)};let If;const dc={};class Xo{constructor(r,o){this.indexes_=r,this.indexSet_=o}static get Default(){return(0,q.hu)(dc&&ji,"ChildrenNode.ts has not been loaded"),If=If||new Xo({".priority":dc},{".priority":ji}),If}get(r){const o=(0,q.DV)(this.indexes_,r);if(!o)throw new Error("No index defined for "+r);return o instanceof Cs?o:null}hasIndex(r){return(0,q.r3)(this.indexSet_,r.toString())}addIndex(r,o){(0,q.hu)(r!==Ms,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const u=[];let p=!1;const E=o.getIterator(ln.Wrap);let B,A=E.getNext();for(;A;)p=p||r.isDefinedOn(A.node),u.push(A),A=E.getNext();B=p?dh(u,r.getCompare()):dc;const Z=r.toString(),ie=Object.assign({},this.indexSet_);ie[Z]=r;const Qe=Object.assign({},this.indexes_);return Qe[Z]=B,new Xo(Qe,ie)}addToIndexes(r,o){const u=(0,q.UI)(this.indexes_,(p,E)=>{const A=(0,q.DV)(this.indexSet_,E);if((0,q.hu)(A,"Missing index implementation for "+E),p===dc){if(A.isDefinedOn(r.node)){const B=[],Z=o.getIterator(ln.Wrap);let ie=Z.getNext();for(;ie;)ie.name!==r.name&&B.push(ie),ie=Z.getNext();return B.push(r),dh(B,A.getCompare())}return dc}{const B=o.get(r.name);let Z=p;return B&&(Z=Z.remove(new ln(r.name,B))),Z.insert(r,r.node)}});return new Xo(u,this.indexSet_)}removeFromIndexes(r,o){const u=(0,q.UI)(this.indexes_,p=>{if(p===dc)return p;{const E=o.get(r.name);return E?p.remove(new ln(r.name,E)):p}});return new Xo(u,this.indexSet_)}}let Oc,Kr=(()=>{class c{constructor(o,u,p){this.children_=o,this.priorityNode_=u,this.indexMap_=p,this.lazyHash_=null,this.priorityNode_&&xc(this.priorityNode_),this.children_.isEmpty()&&(0,q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Oc||(Oc=new c(new Cs(Uo),null,Xo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Oc}updatePriority(o){return this.children_.isEmpty()?this:new c(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const u=this.children_.get(o);return null===u?Oc:u}}getChild(o){const u=le(o);return null===u?this:this.getImmediateChild(u).getChild(Dt(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,u){if((0,q.hu)(u,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(u);{const p=new ln(o,u);let E,A;u.isEmpty()?(E=this.children_.remove(o),A=this.indexMap_.removeFromIndexes(p,this.children_)):(E=this.children_.insert(o,u),A=this.indexMap_.addToIndexes(p,this.children_));const B=E.isEmpty()?Oc:this.priorityNode_;return new c(E,B,A)}}updateChild(o,u){const p=le(o);if(null===p)return u;{(0,q.hu)(".priority"!==le(o)||1===ht(o),".priority must be the last token in a path");const E=this.getImmediateChild(p).updateChild(Dt(o),u);return this.updateImmediateChild(p,E)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const u={};let p=0,E=0,A=!0;if(this.forEachChild(ji,(B,Z)=>{u[B]=Z.val(o),p++,A&&c.INTEGER_REGEXP_.test(B)?E=Math.max(E,Number(B)):A=!1}),!o&&A&&E<2*p){const B=[];for(const Z in u)B[Z]=u[Z];return B}return o&&!this.getPriority().isEmpty()&&(u[".priority"]=this.getPriority().val()),u}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+Ll(this.getPriority().val())+":"),this.forEachChild(ji,(u,p)=>{const E=p.hash();""!==E&&(o+=":"+u+":"+E)}),this.lazyHash_=""===o?"":wc(o)}return this.lazyHash_}getPredecessorChildName(o,u,p){const E=this.resolveIndex_(p);if(E){const A=E.getPredecessorKey(new ln(o,u));return A?A.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const u=this.resolveIndex_(o);if(u){const p=u.minKey();return p&&p.name}return this.children_.minKey()}getFirstChild(o){const u=this.getFirstChildName(o);return u?new ln(u,this.children_.get(u)):null}getLastChildName(o){const u=this.resolveIndex_(o);if(u){const p=u.maxKey();return p&&p.name}return this.children_.maxKey()}getLastChild(o){const u=this.getLastChildName(o);return u?new ln(u,this.children_.get(u)):null}forEachChild(o,u){const p=this.resolveIndex_(o);return p?p.inorderTraversal(E=>u(E.name,E.node)):this.children_.inorderTraversal(u)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,u){const p=this.resolveIndex_(u);if(p)return p.getIteratorFrom(o,E=>E);{const E=this.children_.getIteratorFrom(o.name,ln.Wrap);let A=E.peek();for(;null!=A&&u.compare(A,o)<0;)E.getNext(),A=E.peek();return E}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,u){const p=this.resolveIndex_(u);if(p)return p.getReverseIteratorFrom(o,E=>E);{const E=this.children_.getReverseIteratorFrom(o.name,ln.Wrap);let A=E.peek();for(;null!=A&&u.compare(A,o)>0;)E.getNext(),A=E.peek();return E}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===Kc?-1:0}withIndex(o){if(o===Ms||this.indexMap_.hasIndex(o))return this;{const u=this.indexMap_.addIndex(o,this.children_);return new c(this.children_,this.priorityNode_,u)}}isIndexed(o){return o===Ms||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const u=o;if(this.getPriority().equals(u.getPriority())){if(this.children_.count()===u.children_.count()){const p=this.getIterator(ji),E=u.getIterator(ji);let A=p.getNext(),B=E.getNext();for(;A&&B;){if(A.name!==B.name||!A.node.equals(B.node))return!1;A=p.getNext(),B=E.getNext()}return null===A&&null===B}return!1}return!1}}resolveIndex_(o){return o===Ms?null:this.indexMap_.get(o.toString())}}return c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c})();const Kc=new class wf extends Kr{constructor(){super(new Cs(Uo),Kr.EMPTY_NODE,Xo.Default)}compareTo(r){return r===this?0:1}equals(r){return r===this}getPriority(){return this}getImmediateChild(r){return Kr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ln,{MIN:{value:new ln(fs,Kr.EMPTY_NODE)},MAX:{value:new ln(Mo,Kc)}}),tr.__EMPTY_NODE=Kr.EMPTY_NODE,Qo.__childrenNodeConstructor=Kr,function cc(c){Rc=c}(Kc),function mu(c){ml=c}(Kc);const wa=!0;function li(c,r=null){if(null===c)return Kr.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(r=c[".priority"]),(0,q.hu)(null===r||"string"==typeof r||"number"==typeof r||"object"==typeof r&&".sv"in r,"Invalid priority type found: "+typeof r),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new Qo(c,li(r));if(c instanceof Array||!wa){let o=Kr.EMPTY_NODE;return U(c,(u,p)=>{if((0,q.r3)(c,u)&&"."!==u.substring(0,1)){const E=li(p);(E.isLeafNode()||!E.isEmpty())&&(o=o.updateImmediateChild(u,E))}}),o.updatePriority(li(r))}{const o=[];let u=!1;if(U(c,(A,B)=>{if("."!==A.substring(0,1)){const Z=li(B);Z.isEmpty()||(u=u||!Z.getPriority().isEmpty(),o.push(new ln(A,Z)))}}),0===o.length)return Kr.EMPTY_NODE;const E=dh(o,$o,A=>A.name,Uo);if(u){const A=dh(o,ji.getCompare());return new Kr(E,li(r),new Xo({".priority":A},{".priority":ji}))}return new Kr(E,li(r),Xo.Default)}}!function wp(c){Pc=c}(li);class hh extends wr{constructor(r){super(),this.indexPath_=r,(0,q.hu)(!Tr(r)&&".priority"!==le(r),"Can't create PathIndex with empty path or .priority key")}extractChild(r){return r.getChild(this.indexPath_)}isDefinedOn(r){return!r.getChild(this.indexPath_).isEmpty()}compare(r,o){const u=this.extractChild(r.node),p=this.extractChild(o.node),E=u.compareTo(p);return 0===E?Ro(r.name,o.name):E}makePost(r,o){const u=li(r),p=Kr.EMPTY_NODE.updateChild(this.indexPath_,u);return new ln(o,p)}maxPost(){const r=Kr.EMPTY_NODE.updateChild(this.indexPath_,Kc);return new ln(Mo,r)}toString(){return Vn(this.indexPath_,0).join("/")}}const yl=new class Es extends wr{compare(r,o){const u=r.node.compareTo(o.node);return 0===u?Ro(r.name,o.name):u}isDefinedOn(r){return!0}indexedValueChanged(r,o){return!r.equals(o)}minPost(){return ln.MIN}maxPost(){return ln.MAX}makePost(r,o){const u=li(r);return new ln(o,u)}toString(){return".value"}};function gd(c){return{type:"value",snapshotNode:c}}function qc(c,r){return{type:"child_added",snapshotNode:r,childName:c}}function Bl(c,r){return{type:"child_removed",snapshotNode:r,childName:c}}function md(c,r,o){return{type:"child_changed",snapshotNode:r,childName:c,oldSnap:o}}class yi{constructor(r){this.index_=r}updateChild(r,o,u,p,E,A){(0,q.hu)(r.isIndexed(this.index_),"A node must be indexed if only a child is updated");const B=r.getImmediateChild(o);return B.getChild(p).equals(u.getChild(p))&&B.isEmpty()===u.isEmpty()||(null!=A&&(u.isEmpty()?r.hasChild(o)?A.trackChildChange(Bl(o,B)):(0,q.hu)(r.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):B.isEmpty()?A.trackChildChange(qc(o,u)):A.trackChildChange(md(o,u,B))),r.isLeafNode()&&u.isEmpty())?r:r.updateImmediateChild(o,u).withIndex(this.index_)}updateFullNode(r,o,u){return null!=u&&(r.isLeafNode()||r.forEachChild(ji,(p,E)=>{o.hasChild(p)||u.trackChildChange(Bl(p,E))}),o.isLeafNode()||o.forEachChild(ji,(p,E)=>{if(r.hasChild(p)){const A=r.getImmediateChild(p);A.equals(E)||u.trackChildChange(md(p,E,A))}else u.trackChildChange(qc(p,E))})),o.withIndex(this.index_)}updatePriority(r,o){return r.isEmpty()?Kr.EMPTY_NODE:r.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Li{constructor(r){this.indexedFilter_=new yi(r.getIndex()),this.index_=r.getIndex(),this.startPost_=Li.getStartPost_(r),this.endPost_=Li.getEndPost_(r),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(r){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),r)<=0:this.index_.compare(this.getStartPost(),r)<0,u=this.endIsInclusive_?this.index_.compare(r,this.getEndPost())<=0:this.index_.compare(r,this.getEndPost())<0;return o&&u}updateChild(r,o,u,p,E,A){return this.matches(new ln(o,u))||(u=Kr.EMPTY_NODE),this.indexedFilter_.updateChild(r,o,u,p,E,A)}updateFullNode(r,o,u){o.isLeafNode()&&(o=Kr.EMPTY_NODE);let p=o.withIndex(this.index_);p=p.updatePriority(Kr.EMPTY_NODE);const E=this;return o.forEachChild(ji,(A,B)=>{E.matches(new ln(A,B))||(p=p.updateImmediateChild(A,Kr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(r,p,u)}updatePriority(r,o){return r}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(r){if(r.hasStart()){const o=r.getIndexStartName();return r.getIndex().makePost(r.getIndexStartValue(),o)}return r.getIndex().minPost()}static getEndPost_(r){if(r.hasEnd()){const o=r.getIndexEndName();return r.getIndex().makePost(r.getIndexEndValue(),o)}return r.getIndex().maxPost()}}class ao{constructor(r){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const u=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?u<=0:u<0},this.withinEndPost=o=>{const u=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?u<=0:u<0},this.rangedFilter_=new Li(r),this.index_=r.getIndex(),this.limit_=r.getLimit(),this.reverse_=!r.isViewFromLeft(),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}updateChild(r,o,u,p,E,A){return this.rangedFilter_.matches(new ln(o,u))||(u=Kr.EMPTY_NODE),r.getImmediateChild(o).equals(u)?r:r.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(r,o,u,p,E,A):this.fullLimitUpdateChild_(r,o,u,E,A)}updateFullNode(r,o,u){let p;if(o.isLeafNode()||o.isEmpty())p=Kr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let E;p=Kr.EMPTY_NODE.withIndex(this.index_),E=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let A=0;for(;E.hasNext()&&A<this.limit_;){const B=E.getNext();if(this.withinDirectionalStart(B)){if(!this.withinDirectionalEnd(B))break;p=p.updateImmediateChild(B.name,B.node),A++}}}else{let E;p=o.withIndex(this.index_),p=p.updatePriority(Kr.EMPTY_NODE),E=this.reverse_?p.getReverseIterator(this.index_):p.getIterator(this.index_);let A=0;for(;E.hasNext();){const B=E.getNext();A<this.limit_&&this.withinDirectionalStart(B)&&this.withinDirectionalEnd(B)?A++:p=p.updateImmediateChild(B.name,Kr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(r,p,u)}updatePriority(r,o){return r}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(r,o,u,p,E){let A;if(this.reverse_){const ft=this.index_.getCompare();A=(At,qt)=>ft(qt,At)}else A=this.index_.getCompare();const B=r;(0,q.hu)(B.numChildren()===this.limit_,"");const Z=new ln(o,u),ie=this.reverse_?B.getFirstChild(this.index_):B.getLastChild(this.index_),Qe=this.rangedFilter_.matches(Z);if(B.hasChild(o)){const ft=B.getImmediateChild(o);let At=p.getChildAfterChild(this.index_,ie,this.reverse_);for(;null!=At&&(At.name===o||B.hasChild(At.name));)At=p.getChildAfterChild(this.index_,At,this.reverse_);const qt=null==At?1:A(At,Z);if(Qe&&!u.isEmpty()&&qt>=0)return null!=E&&E.trackChildChange(md(o,u,ft)),B.updateImmediateChild(o,u);{null!=E&&E.trackChildChange(Bl(o,ft));const Sn=B.updateImmediateChild(o,Kr.EMPTY_NODE);return null!=At&&this.rangedFilter_.matches(At)?(null!=E&&E.trackChildChange(qc(At.name,At.node)),Sn.updateImmediateChild(At.name,At.node)):Sn}}return u.isEmpty()?r:Qe&&A(ie,Z)>=0?(null!=E&&(E.trackChildChange(Bl(ie.name,ie.node)),E.trackChildChange(qc(o,u))),B.updateImmediateChild(o,u).updateImmediateChild(ie.name,Kr.EMPTY_NODE)):r}}class Nc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ji}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fs}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ji}copy(){const r=new Nc;return r.limitSet_=this.limitSet_,r.limit_=this.limit_,r.startSet_=this.startSet_,r.startAfterSet_=this.startAfterSet_,r.indexStartValue_=this.indexStartValue_,r.startNameSet_=this.startNameSet_,r.indexStartName_=this.indexStartName_,r.endSet_=this.endSet_,r.endBeforeSet_=this.endBeforeSet_,r.indexEndValue_=this.indexEndValue_,r.endNameSet_=this.endNameSet_,r.indexEndName_=this.indexEndName_,r.index_=this.index_,r.viewFrom_=this.viewFrom_,r}}function kc(c,r,o){const u=c.copy();return u.startSet_=!0,void 0===r&&(r=null),u.indexStartValue_=r,null!=o?(u.startNameSet_=!0,u.indexStartName_=o):(u.startNameSet_=!1,u.indexStartName_=""),u}function vd(c,r,o){const u=c.copy();return u.endSet_=!0,void 0===r&&(r=null),u.indexEndValue_=r,void 0!==o?(u.endNameSet_=!0,u.indexEndName_=o):(u.endNameSet_=!1,u.indexEndName_=""),u}function Yc(c,r){const o=c.copy();return o.index_=r,o}function ph(c){const r={};if(c.isDefault())return r;let o;if(c.index_===ji?o="$priority":c.index_===yl?o="$value":c.index_===Ms?o="$key":((0,q.hu)(c.index_ instanceof hh,"Unrecognized index type!"),o=c.index_.toString()),r.orderBy=(0,q.Wl)(o),c.startSet_){const u=c.startAfterSet_?"startAfter":"startAt";r[u]=(0,q.Wl)(c.indexStartValue_),c.startNameSet_&&(r[u]+=","+(0,q.Wl)(c.indexStartName_))}if(c.endSet_){const u=c.endBeforeSet_?"endBefore":"endAt";r[u]=(0,q.Wl)(c.indexEndValue_),c.endNameSet_&&(r[u]+=","+(0,q.Wl)(c.indexEndName_))}return c.limitSet_&&(c.isViewFromLeft()?r.limitToFirst=c.limit_:r.limitToLast=c.limit_),r}function gh(c){const r={};if(c.startSet_&&(r.sp=c.indexStartValue_,c.startNameSet_&&(r.sn=c.indexStartName_),r.sin=!c.startAfterSet_),c.endSet_&&(r.ep=c.indexEndValue_,c.endNameSet_&&(r.en=c.indexEndName_),r.ein=!c.endBeforeSet_),c.limitSet_){r.l=c.limit_;let o=c.viewFrom_;""===o&&(o=c.isViewFromLeft()?"l":"r"),r.vf=o}return c.index_!==ji&&(r.i=c.index_.toString()),r}class vu extends Bo{constructor(r,o,u,p){super(),this.repoInfo_=r,this.onDataUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=p,this.log_=ls("p:rest:"),this.listens_={}}reportStats(r){throw new Error("Method not implemented.")}static getListenId_(r,o){return void 0!==o?"tag$"+o:((0,q.hu)(r._queryParams.isDefault(),"should have a tag if it's not a default query."),r._path.toString())}listen(r,o,u,p){const E=r._path.toString();this.log_("Listen called for "+E+" "+r._queryIdentifier);const A=vu.getListenId_(r,u),B={};this.listens_[A]=B;const Z=ph(r._queryParams);this.restRequest_(E+".json",Z,(ie,Qe)=>{let ft=Qe;if(404===ie&&(ft=null,ie=null),null===ie&&this.onDataUpdate_(E,ft,!1,u),(0,q.DV)(this.listens_,A)===B){let At;At=ie?401===ie?"permission_denied":"rest_error:"+ie:"ok",p(At,null)}})}unlisten(r,o){const u=vu.getListenId_(r,o);delete this.listens_[u]}get(r){const o=ph(r._queryParams),u=r._path.toString(),p=new q.BH;return this.restRequest_(u+".json",o,(E,A)=>{let B=A;404===E&&(B=null,E=null),null===E?(this.onDataUpdate_(u,B,!1,null),p.resolve(B)):p.reject(new Error(B))}),p.promise}refreshAuthToken(r){}restRequest_(r,o={},u){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([p,E])=>{p&&p.accessToken&&(o.auth=p.accessToken),E&&E.token&&(o.ac=E.token);const A=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+r+"?ns="+this.repoInfo_.namespace+(0,q.xO)(o);this.log_("Sending REST request for "+A);const B=new XMLHttpRequest;B.onreadystatechange=()=>{if(u&&4===B.readyState){this.log_("REST Response for "+A+" received. status:",B.status,"response:",B.responseText);let Z=null;if(B.status>=200&&B.status<300){try{Z=(0,q.cI)(B.responseText)}catch{es("Failed to parse JSON response for "+A+": "+B.responseText)}u(null,Z)}else 401!==B.status&&404!==B.status&&es("Got unsuccessful REST response for "+A+" Status: "+B.status),u(B.status);u=null}},B.open("GET",A,!0),B.send()})}}class Cf{constructor(){this.rootNode_=Kr.EMPTY_NODE}getNode(r){return this.rootNode_.getChild(r)}updateSnapshot(r,o){this.rootNode_=this.rootNode_.updateChild(r,o)}}function Ed(){return{value:null,children:new Map}}function Eu(c,r,o){if(Tr(r))c.value=o,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(r,o);else{const u=le(r);c.children.has(u)||c.children.set(u,Ed()),Eu(c.children.get(u),r=Dt(r),o)}}function Zc(c,r){if(Tr(r))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;{const o=c.value;return c.value=null,o.forEachChild(ji,(u,p)=>{Eu(c,new H(u),p)}),Zc(c,r)}}if(c.children.size>0){const o=le(r);return r=Dt(r),c.children.has(o)&&Zc(c.children.get(o),r)&&c.children.delete(o),0===c.children.size}return!0}function Qc(c,r,o){null!==c.value?o(r,c.value):function Iu(c,r){c.children.forEach((o,u)=>{r(u,o)})}(c,(u,p)=>{Qc(p,new H(r.toString()+"/"+u),o)})}class _l{constructor(r){this.collection_=r,this.last_=null}get(){const r=this.collection_.get(),o=Object.assign({},r);return this.last_&&U(this.last_,(u,p)=>{o[u]=o[u]-p}),this.last_=r,o}}class wd{constructor(r,o){this.server_=o,this.statsToReport_={},this.statsListener_=new _l(r);const u=1e4+2e4*Math.random();dn(this.reportStats_.bind(this),Math.floor(u))}reportStats_(){const r=this.statsListener_.get(),o={};let u=!1;U(r,(p,E)=>{E>0&&(0,q.r3)(this.statsToReport_,p)&&(o[p]=E,u=!0)}),u&&this.server_.reportStats(o),dn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ks=(()=>{return(c=Ks||(Ks={}))[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ks;var c})();function bd(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}class bu{constructor(r,o,u){this.path=r,this.affectedTree=o,this.revert=u,this.type=Ks.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(r){if(Tr(this.path)){if(null!=this.affectedTree.value)return(0,q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new H(r));return new bu(re(),o,this.revert)}}return(0,q.hu)(le(this.path)===r,"operationForChild called for unrelated child."),new bu(Dt(this.path),this.affectedTree,this.revert)}}class vl{constructor(r,o){this.source=r,this.path=o,this.type=Ks.LISTEN_COMPLETE}operationForChild(r){return Tr(this.path)?new vl(this.source,re()):new vl(this.source,Dt(this.path))}}class fc{constructor(r,o,u){this.source=r,this.path=o,this.snap=u,this.type=Ks.OVERWRITE}operationForChild(r){return Tr(this.path)?new fc(this.source,re(),this.snap.getImmediateChild(r)):new fc(this.source,Dt(this.path),this.snap)}}class El{constructor(r,o,u){this.source=r,this.path=o,this.children=u,this.type=Ks.MERGE}operationForChild(r){if(Tr(this.path)){const o=this.children.subtree(new H(r));return o.isEmpty()?null:o.value?new fc(this.source,re(),o.value):new El(this.source,re(),o)}return(0,q.hu)(le(this.path)===r,"Can't get a merge for a child not on the path of the operation"),new El(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class M{constructor(r,o,u){this.node_=r,this.fullyInitialized_=o,this.filtered_=u}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(r){if(Tr(r))return this.isFullyInitialized()&&!this.filtered_;const o=le(r);return this.isCompleteForChild(o)}isCompleteForChild(r){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(r)}getNode(){return this.node_}}class _{constructor(r){this.query_=r,this.index_=this.query_._queryParams.getIndex()}}function x(c,r,o,u,p,E){const A=u.filter(B=>B.type===o);A.sort((B,Z)=>function Ee(c,r,o){if(null==r.childName||null==o.childName)throw(0,q.g5)("Should only compare child_ events.");const u=new ln(r.childName,r.snapshotNode),p=new ln(o.childName,o.snapshotNode);return c.index_.compare(u,p)}(c,B,Z)),A.forEach(B=>{const Z=function te(c,r,o){return"value"===r.type||"child_removed"===r.type||(r.prevName=o.getPredecessorChildName(r.childName,r.snapshotNode,c.index_)),r}(c,B,E);p.forEach(ie=>{ie.respondsTo(B.type)&&r.push(ie.createEvent(Z,c.query_))})})}function It(c,r){return{eventCache:c,serverCache:r}}function Bt(c,r,o,u){return It(new M(r,o,u),c.serverCache)}function Mn(c,r,o,u){return It(c.eventCache,new M(r,o,u))}function Ln(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function Wn(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}let qr;class Mi{constructor(r,o=(()=>(qr||(qr=new Cs(Wc)),qr))()){this.value=r,this.children=o}static fromObject(r){let o=new Mi(null);return U(r,(u,p)=>{o=o.set(new H(u),p)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(r,o){if(null!=this.value&&o(this.value))return{path:re(),value:this.value};if(Tr(r))return null;{const u=le(r),p=this.children.get(u);if(null!==p){const E=p.findRootMostMatchingPathAndValue(Dt(r),o);return null!=E?{path:jr(new H(u),E.path),value:E.value}:null}return null}}findRootMostValueAndPath(r){return this.findRootMostMatchingPathAndValue(r,()=>!0)}subtree(r){if(Tr(r))return this;{const o=le(r),u=this.children.get(o);return null!==u?u.subtree(Dt(r)):new Mi(null)}}set(r,o){if(Tr(r))return new Mi(o,this.children);{const u=le(r),E=(this.children.get(u)||new Mi(null)).set(Dt(r),o),A=this.children.insert(u,E);return new Mi(this.value,A)}}remove(r){if(Tr(r))return this.children.isEmpty()?new Mi(null):new Mi(null,this.children);{const o=le(r),u=this.children.get(o);if(u){const p=u.remove(Dt(r));let E;return E=p.isEmpty()?this.children.remove(o):this.children.insert(o,p),null===this.value&&E.isEmpty()?new Mi(null):new Mi(this.value,E)}return this}}get(r){if(Tr(r))return this.value;{const o=le(r),u=this.children.get(o);return u?u.get(Dt(r)):null}}setTree(r,o){if(Tr(r))return o;{const u=le(r),E=(this.children.get(u)||new Mi(null)).setTree(Dt(r),o);let A;return A=E.isEmpty()?this.children.remove(u):this.children.insert(u,E),new Mi(this.value,A)}}fold(r){return this.fold_(re(),r)}fold_(r,o){const u={};return this.children.inorderTraversal((p,E)=>{u[p]=E.fold_(jr(r,p),o)}),o(r,this.value,u)}findOnPath(r,o){return this.findOnPath_(r,re(),o)}findOnPath_(r,o,u){const p=!!this.value&&u(o,this.value);if(p)return p;if(Tr(r))return null;{const E=le(r),A=this.children.get(E);return A?A.findOnPath_(Dt(r),jr(o,E),u):null}}foreachOnPath(r,o){return this.foreachOnPath_(r,re(),o)}foreachOnPath_(r,o,u){if(Tr(r))return this;{this.value&&u(o,this.value);const p=le(r),E=this.children.get(p);return E?E.foreachOnPath_(Dt(r),jr(o,p),u):new Mi(null)}}foreach(r){this.foreach_(re(),r)}foreach_(r,o){this.children.inorderTraversal((u,p)=>{p.foreach_(jr(r,u),o)}),this.value&&o(r,this.value)}foreachChild(r){this.children.inorderTraversal((o,u)=>{u.value&&r(o,u.value)})}}class lo{constructor(r){this.writeTree_=r}static empty(){return new lo(new Mi(null))}}function Jc(c,r,o){if(Tr(r))return new lo(new Mi(o));{const u=c.writeTree_.findRootMostValueAndPath(r);if(null!=u){const p=u.path;let E=u.value;const A=Zi(p,r);return E=E.updateChild(A,o),new lo(c.writeTree_.set(p,E))}{const p=new Mi(o),E=c.writeTree_.setTree(r,p);return new lo(E)}}}function Fa(c,r,o){let u=c;return U(o,(p,E)=>{u=Jc(u,jr(r,p),E)}),u}function eu(c,r){if(Tr(r))return lo.empty();{const o=c.writeTree_.setTree(r,new Mi(null));return new lo(o)}}function Fc(c,r){return null!=Ul(c,r)}function Ul(c,r){const o=c.writeTree_.findRootMostValueAndPath(r);return null!=o?c.writeTree_.get(o.path).getChild(Zi(o.path,r)):null}function mh(c){const r=[],o=c.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(ji,(u,p)=>{r.push(new ln(u,p))}):c.writeTree_.children.inorderTraversal((u,p)=>{null!=p.value&&r.push(new ln(u,p.value))}),r}function Or(c,r){if(Tr(r))return c;{const o=Ul(c,r);return new lo(null!=o?new Mi(o):c.writeTree_.subtree(r))}}function tu(c){return c.writeTree_.isEmpty()}function Il(c,r){return Cu(re(),c.writeTree_,r)}function Cu(c,r,o){if(null!=r.value)return o.updateChild(c,r.value);{let u=null;return r.children.inorderTraversal((p,E)=>{".priority"===p?((0,q.hu)(null!==E.value,"Priority writes must always be leaf nodes"),u=E.value):o=Cu(jr(c,p),E,o)}),!o.getChild(c).isEmpty()&&null!==u&&(o=o.updateChild(jr(c,".priority"),u)),o}}function Vl(c,r){return Sf(r,c)}function _h(c,r){if(c.snap)return ps(c.path,r);for(const o in c.children)if(c.children.hasOwnProperty(o)&&ps(jr(c.path,o),r))return!0;return!1}function Du(c){return c.visible}function Bg(c,r,o){let u=lo.empty();for(let p=0;p<c.length;++p){const E=c[p];if(r(E)){const A=E.path;let B;if(E.snap)ps(o,A)?(B=Zi(o,A),u=Jc(u,B,E.snap)):ps(A,o)&&(B=Zi(A,o),u=Jc(u,re(),E.snap.getChild(B)));else{if(!E.children)throw(0,q.g5)("WriteRecord should have .snap or .children");if(ps(o,A))B=Zi(o,A),u=Fa(u,B,E.children);else if(ps(A,o))if(B=Zi(A,o),Tr(B))u=Fa(u,re(),E.children);else{const Z=(0,q.DV)(E.children,le(B));if(Z){const ie=Z.getChild(Dt(B));u=Jc(u,re(),ie)}}}}}return u}function Tu(c,r,o,u,p){if(u||p){const E=Or(c.visibleWrites,r);return!p&&tu(E)?o:p||null!=o||Fc(E,re())?Il(Bg(c.allWrites,function(ie){return(ie.visible||p)&&(!u||!~u.indexOf(ie.writeId))&&(ps(ie.path,r)||ps(r,ie.path))},r),o||Kr.EMPTY_NODE):null}{const E=Ul(c.visibleWrites,r);if(null!=E)return E;{const A=Or(c.visibleWrites,r);return tu(A)?o:null!=o||Fc(A,re())?Il(A,o||Kr.EMPTY_NODE):null}}}function bp(c,r,o,u){return Tu(c.writeTree,c.treePath,r,o,u)}function Ds(c,r){return function ey(c,r,o){let u=Kr.EMPTY_NODE;const p=Ul(c.visibleWrites,r);if(p)return p.isLeafNode()||p.forEachChild(ji,(E,A)=>{u=u.updateImmediateChild(E,A)}),u;if(o){const E=Or(c.visibleWrites,r);return o.forEachChild(ji,(A,B)=>{const Z=Il(Or(E,new H(A)),B);u=u.updateImmediateChild(A,Z)}),mh(E).forEach(A=>{u=u.updateImmediateChild(A.name,A.node)}),u}return mh(Or(c.visibleWrites,r)).forEach(A=>{u=u.updateImmediateChild(A.name,A.node)}),u}(c.writeTree,c.treePath,r)}function Cp(c,r,o,u){return function Cd(c,r,o,u,p){(0,q.hu)(u||p,"Either existingEventSnap or existingServerSnap must exist");const E=jr(r,o);if(Fc(c.visibleWrites,E))return null;{const A=Or(c.visibleWrites,E);return tu(A)?p.getChild(o):Il(A,p.getChild(o))}}(c.writeTree,c.treePath,r,o,u)}function Td(c,r){return function Tf(c,r){return Ul(c.visibleWrites,r)}(c.writeTree,jr(c.treePath,r))}function Ug(c,r,o){return function $g(c,r,o,u){const p=jr(r,o),E=Ul(c.visibleWrites,p);return null!=E?E:u.isCompleteForChild(o)?Il(Or(c.visibleWrites,p),u.getNode().getImmediateChild(o)):null}(c.writeTree,c.treePath,r,o)}function Sd(c,r){return Sf(jr(c.treePath,r),c.writeTree)}function Sf(c,r){return{treePath:c,writeTree:r}}class Tp{constructor(){this.changeMap=new Map}trackChildChange(r){const o=r.type,u=r.childName;(0,q.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,q.hu)(".priority"!==u,"Only non-priority child changes can be tracked.");const p=this.changeMap.get(u);if(p){const E=p.type;if("child_added"===o&&"child_removed"===E)this.changeMap.set(u,md(u,r.snapshotNode,p.snapshotNode));else if("child_removed"===o&&"child_added"===E)this.changeMap.delete(u);else if("child_removed"===o&&"child_changed"===E)this.changeMap.set(u,Bl(u,p.oldSnap));else if("child_changed"===o&&"child_added"===E)this.changeMap.set(u,qc(u,r.snapshotNode));else{if("child_changed"!==o||"child_changed"!==E)throw(0,q.g5)("Illegal combination of changes: "+r+" occurred after "+p);this.changeMap.set(u,md(u,r.snapshotNode,p.oldSnap))}}else this.changeMap.set(u,r)}getChanges(){return Array.from(this.changeMap.values())}}const pc=new class Ad{getCompleteChild(r){return null}getChildAfterChild(r,o,u){return null}};class Af{constructor(r,o,u=null){this.writes_=r,this.viewCache_=o,this.optCompleteServerCache_=u}getCompleteChild(r){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(r))return o.getNode().getImmediateChild(r);{const u=null!=this.optCompleteServerCache_?new M(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ug(this.writes_,r,u)}}getChildAfterChild(r,o,u){const p=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wn(this.viewCache_),E=function Dp(c,r,o,u,p,E){return function Dd(c,r,o,u,p,E,A){let B;const Z=Or(c.visibleWrites,r),ie=Ul(Z,re());if(null!=ie)B=ie;else{if(null==o)return[];B=Il(Z,o)}if(B=B.withIndex(A),B.isEmpty()||B.isLeafNode())return[];{const Qe=[],ft=A.getCompare(),At=E?B.getReverseIteratorFrom(u,A):B.getIteratorFrom(u,A);let qt=At.getNext();for(;qt&&Qe.length<p;)0!==ft(qt,u)&&Qe.push(qt),qt=At.getNext();return Qe}}(c.writeTree,c.treePath,r,o,u,p,E)}(this.writes_,p,o,1,u,r);return 0===E.length?null:E[0]}}function Sp(c,r,o,u,p,E){const A=r.eventCache;if(null!=Td(u,o))return r;{let B,Z;if(Tr(o))if((0,q.hu)(r.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),r.serverCache.isFiltered()){const ie=Wn(r),ft=Ds(u,ie instanceof Kr?ie:Kr.EMPTY_NODE);B=c.filter.updateFullNode(r.eventCache.getNode(),ft,E)}else{const ie=bp(u,Wn(r));B=c.filter.updateFullNode(r.eventCache.getNode(),ie,E)}else{const ie=le(o);if(".priority"===ie){(0,q.hu)(1===ht(o),"Can't have a priority with additional path components");const Qe=A.getNode();Z=r.serverCache.getNode();const ft=Cp(u,o,Qe,Z);B=null!=ft?c.filter.updatePriority(Qe,ft):A.getNode()}else{const Qe=Dt(o);let ft;if(A.isCompleteForChild(ie)){Z=r.serverCache.getNode();const At=Cp(u,o,A.getNode(),Z);ft=null!=At?A.getNode().getImmediateChild(ie).updateChild(Qe,At):A.getNode().getImmediateChild(ie)}else ft=Ug(u,ie,r.serverCache);B=null!=ft?c.filter.updateChild(A.getNode(),ie,ft,Qe,p,E):A.getNode()}}return Bt(r,B,A.isFullyInitialized()||Tr(o),c.filter.filtersNodes())}}function wh(c,r,o,u,p,E,A,B){const Z=r.serverCache;let ie;const Qe=A?c.filter:c.filter.getIndexedFilter();if(Tr(o))ie=Qe.updateFullNode(Z.getNode(),u,null);else if(Qe.filtersNodes()&&!Z.isFiltered()){const qt=Z.getNode().updateChild(o,u);ie=Qe.updateFullNode(Z.getNode(),qt,null)}else{const qt=le(o);if(!Z.isCompleteForPath(o)&&ht(o)>1)return r;const Xt=Dt(o),sr=Z.getNode().getImmediateChild(qt).updateChild(Xt,u);ie=".priority"===qt?Qe.updatePriority(Z.getNode(),sr):Qe.updateChild(Z.getNode(),qt,sr,Xt,pc,null)}const ft=Mn(r,ie,Z.isFullyInitialized()||Tr(o),Qe.filtersNodes());return Sp(c,ft,o,p,new Af(p,ft,E),B)}function wl(c,r,o,u,p,E,A){const B=r.eventCache;let Z,ie;const Qe=new Af(p,r,E);if(Tr(o))ie=c.filter.updateFullNode(r.eventCache.getNode(),u,A),Z=Bt(r,ie,!0,c.filter.filtersNodes());else{const ft=le(o);if(".priority"===ft)ie=c.filter.updatePriority(r.eventCache.getNode(),u),Z=Bt(r,ie,B.isFullyInitialized(),B.isFiltered());else{const At=Dt(o),qt=B.getNode().getImmediateChild(ft);let Xt;if(Tr(At))Xt=u;else{const Sn=Qe.getCompleteChild(ft);Xt=null!=Sn?".priority"===wn(At)&&Sn.getChild(ai(At)).isEmpty()?Sn:Sn.updateChild(At,u):Kr.EMPTY_NODE}Z=qt.equals(Xt)?r:Bt(r,c.filter.updateChild(B.getNode(),ft,Xt,At,Qe,A),B.isFullyInitialized(),c.filter.filtersNodes())}}return Z}function Md(c,r){return c.eventCache.isCompleteForChild(r)}function ny(c,r,o){return o.foreach((u,p)=>{r=r.updateChild(u,p)}),r}function Hg(c,r,o,u,p,E,A,B){if(r.serverCache.getNode().isEmpty()&&!r.serverCache.isFullyInitialized())return r;let ie,Z=r;ie=Tr(o)?u:new Mi(null).setTree(o,u);const Qe=r.serverCache.getNode();return ie.children.inorderTraversal((ft,At)=>{if(Qe.hasChild(ft)){const Xt=ny(0,r.serverCache.getNode().getImmediateChild(ft),At);Z=wh(c,Z,new H(ft),Xt,p,E,A,B)}}),ie.children.inorderTraversal((ft,At)=>{const qt=!r.serverCache.isCompleteForChild(ft)&&null===At.value;if(!Qe.hasChild(ft)&&!qt){const Sn=ny(0,r.serverCache.getNode().getImmediateChild(ft),At);Z=wh(c,Z,new H(ft),Sn,p,E,A,B)}}),Z}class zg{constructor(r,o){this.query_=r,this.eventRegistrations_=[];const u=this.query_._queryParams,p=new yi(u.getIndex()),E=function fh(c){return c.loadsAllData()?new yi(c.getIndex()):c.hasLimit()?new ao(c):new Li(c)}(u);this.processor_=function Su(c){return{filter:c}}(E);const A=o.serverCache,B=o.eventCache,Z=p.updateFullNode(Kr.EMPTY_NODE,A.getNode(),null),ie=E.updateFullNode(Kr.EMPTY_NODE,B.getNode(),null),Qe=new M(Z,A.isFullyInitialized(),p.filtersNodes()),ft=new M(ie,B.isFullyInitialized(),E.filtersNodes());this.viewCache_=It(ft,Qe),this.eventGenerator_=new _(this.query_)}get query(){return this.query_}}function Mf(c,r){const o=Wn(c.viewCache_);return o&&(c.query._queryParams.loadsAllData()||!Tr(r)&&!o.getImmediateChild(le(r)).isEmpty())?o.getChild(r):null}function bh(c){return 0===c.eventRegistrations_.length}function gc(c,r,o){const u=[];if(o){(0,q.hu)(null==r,"A cancel should cancel all event registrations.");const p=c.query._path;c.eventRegistrations_.forEach(E=>{const A=E.createCancelEvent(o,p);A&&u.push(A)})}if(r){let p=[];for(let E=0;E<c.eventRegistrations_.length;++E){const A=c.eventRegistrations_[E];if(A.matches(r)){if(r.hasAnyCallback()){p=p.concat(c.eventRegistrations_.slice(E+1));break}}else p.push(A)}c.eventRegistrations_=p}else c.eventRegistrations_=[];return u}function xd(c,r,o,u){r.type===Ks.MERGE&&null!==r.source.queryId&&((0,q.hu)(Wn(c.viewCache_),"We should always have a full cache before handling merges"),(0,q.hu)(Ln(c.viewCache_),"Missing event cache, even though we have a server cache"));const p=c.viewCache_,E=function Ih(c,r,o,u,p){const E=new Tp;let A,B;if(o.type===Ks.OVERWRITE){const ie=o;ie.source.fromUser?A=wl(c,r,ie.path,ie.snap,u,p,E):((0,q.hu)(ie.source.fromServer,"Unknown source."),B=ie.source.tagged||r.serverCache.isFiltered()&&!Tr(ie.path),A=wh(c,r,ie.path,ie.snap,u,p,B,E))}else if(o.type===Ks.MERGE){const ie=o;ie.source.fromUser?A=function jg(c,r,o,u,p,E,A){let B=r;return u.foreach((Z,ie)=>{const Qe=jr(o,Z);Md(r,le(Qe))&&(B=wl(c,B,Qe,ie,p,E,A))}),u.foreach((Z,ie)=>{const Qe=jr(o,Z);Md(r,le(Qe))||(B=wl(c,B,Qe,ie,p,E,A))}),B}(c,r,ie.path,ie.children,u,p,E):((0,q.hu)(ie.source.fromServer,"Unknown source."),B=ie.source.tagged||r.serverCache.isFiltered(),A=Hg(c,r,ie.path,ie.children,u,p,B,E))}else if(o.type===Ks.ACK_USER_WRITE){const ie=o;A=ie.revert?function ry(c,r,o,u,p,E){let A;if(null!=Td(u,o))return r;{const B=new Af(u,r,p),Z=r.eventCache.getNode();let ie;if(Tr(o)||".priority"===le(o)){let Qe;if(r.serverCache.isFullyInitialized())Qe=bp(u,Wn(r));else{const ft=r.serverCache.getNode();(0,q.hu)(ft instanceof Kr,"serverChildren would be complete if leaf node"),Qe=Ds(u,ft)}ie=c.filter.updateFullNode(Z,Qe,E)}else{const Qe=le(o);let ft=Ug(u,Qe,r.serverCache);null==ft&&r.serverCache.isCompleteForChild(Qe)&&(ft=Z.getImmediateChild(Qe)),ie=null!=ft?c.filter.updateChild(Z,Qe,ft,Dt(o),B,E):r.eventCache.getNode().hasChild(Qe)?c.filter.updateChild(Z,Qe,Kr.EMPTY_NODE,Dt(o),B,E):Z,ie.isEmpty()&&r.serverCache.isFullyInitialized()&&(A=bp(u,Wn(r)),A.isLeafNode()&&(ie=c.filter.updateFullNode(ie,A,E)))}return A=r.serverCache.isFullyInitialized()||null!=Td(u,re()),Bt(r,ie,A,c.filter.filtersNodes())}}(c,r,ie.path,u,p,E):function po(c,r,o,u,p,E,A){if(null!=Td(p,o))return r;const B=r.serverCache.isFiltered(),Z=r.serverCache;if(null!=u.value){if(Tr(o)&&Z.isFullyInitialized()||Z.isCompleteForPath(o))return wh(c,r,o,Z.getNode().getChild(o),p,E,B,A);if(Tr(o)){let ie=new Mi(null);return Z.getNode().forEachChild(Ms,(Qe,ft)=>{ie=ie.set(new H(Qe),ft)}),Hg(c,r,o,ie,p,E,B,A)}return r}{let ie=new Mi(null);return u.foreach((Qe,ft)=>{const At=jr(o,Qe);Z.isCompleteForPath(At)&&(ie=ie.set(Qe,Z.getNode().getChild(At)))}),Hg(c,r,o,ie,p,E,B,A)}}(c,r,ie.path,ie.affectedTree,u,p,E)}else{if(o.type!==Ks.LISTEN_COMPLETE)throw(0,q.g5)("Unknown operation type: "+o.type);A=function Ui(c,r,o,u,p){const E=r.serverCache;return Sp(c,Mn(r,E.getNode(),E.isFullyInitialized()||Tr(o),E.isFiltered()),o,u,pc,p)}(c,r,o.path,u,E)}const Z=E.getChanges();return function Vg(c,r,o){const u=r.eventCache;if(u.isFullyInitialized()){const p=u.getNode().isLeafNode()||u.getNode().isEmpty(),E=Ln(c);(o.length>0||!c.eventCache.isFullyInitialized()||p&&!u.getNode().equals(E)||!u.getNode().getPriority().equals(E.getPriority()))&&o.push(gd(Ln(r)))}}(r,A,Z),{viewCache:A,changes:Z}}(c.processor_,p,r,o,u);return function ty(c,r){(0,q.hu)(r.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,q.hu)(r.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,E.viewCache),(0,q.hu)(E.viewCache.serverCache.isFullyInitialized()||!p.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=E.viewCache,Kg(c,E.changes,E.viewCache.eventCache.getNode(),null)}function Kg(c,r,o,u){return function I(c,r,o,u){const p=[],E=[];return r.forEach(A=>{"child_changed"===A.type&&c.index_.indexedValueChanged(A.oldSnap,A.snapshotNode)&&E.push(function yd(c,r){return{type:"child_moved",snapshotNode:r,childName:c}}(A.childName,A.snapshotNode))}),x(c,p,"child_removed",r,u,o),x(c,p,"child_added",r,u,o),x(c,p,"child_moved",E,u,o),x(c,p,"child_changed",r,u,o),x(c,p,"value",r,u,o),p}(c.eventGenerator_,r,o,u?[u]:c.eventRegistrations_)}let Ch,Sh;class iy{constructor(){this.views=new Map}}function Rf(c,r,o,u){const p=r.source.queryId;if(null!==p){const E=c.views.get(p);return(0,q.hu)(null!=E,"SyncTree gave us an op for an invalid query."),xd(E,r,o,u)}{let E=[];for(const A of c.views.values())E=E.concat(xd(A,r,o,u));return E}}function Dh(c,r,o,u,p){const A=c.views.get(r._queryIdentifier);if(!A){let B=bp(o,p?u:null),Z=!1;B?Z=!0:u instanceof Kr?(B=Ds(o,u),Z=!1):(B=Kr.EMPTY_NODE,Z=!1);const ie=It(new M(B,Z,!1),new M(u,p,!1));return new zg(r,ie)}return A}function Js(c){const r=[];for(const o of c.views.values())o.query._queryParams.loadsAllData()||r.push(o);return r}function Lc(c,r){let o=null;for(const u of c.views.values())o=o||Mf(u,r);return o}function Yg(c,r){return r._queryParams.loadsAllData()?nu(c):c.views.get(r._queryIdentifier)}function Th(c,r){return null!=Yg(c,r)}function Jo(c){return null!=nu(c)}function nu(c){for(const r of c.views.values())if(r.query._queryParams.loadsAllData())return r;return null}let eo=1;class Zg{constructor(r){this.listenProvider_=r,this.syncPointTree_=new Mi(null),this.pendingWriteTree_=function Eh(){return{visibleWrites:lo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qg(c,r,o,u,p){return function Df(c,r,o,u,p){(0,q.hu)(u>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===p&&(p=!0),c.allWrites.push({path:r,snap:o,writeId:u,visible:p}),p&&(c.visibleWrites=Jc(c.visibleWrites,r,o)),c.lastWriteId=u}(c.pendingWriteTree_,r,o,u,p),p?Qa(c,new fc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,o)):[]}function bl(c,r,o=!1){const u=function Fg(c,r){for(let o=0;o<c.allWrites.length;o++){const u=c.allWrites[o];if(u.writeId===r)return u}return null}(c.pendingWriteTree_,r);if(function Lg(c,r){const o=c.allWrites.findIndex(B=>B.writeId===r);(0,q.hu)(o>=0,"removeWrite called with nonexistent writeId.");const u=c.allWrites[o];c.allWrites.splice(o,1);let p=u.visible,E=!1,A=c.allWrites.length-1;for(;p&&A>=0;){const B=c.allWrites[A];B.visible&&(A>=o&&_h(B,u.path)?p=!1:ps(u.path,B.path)&&(E=!0)),A--}return!!p&&(E?(function vh(c){c.visibleWrites=Bg(c.allWrites,Du,re()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(u.snap?c.visibleWrites=eu(c.visibleWrites,u.path):U(u.children,Z=>{c.visibleWrites=eu(c.visibleWrites,jr(u.path,Z))}),!0))}(c.pendingWriteTree_,r)){let E=new Mi(null);return null!=u.snap?E=E.set(re(),!0):U(u.children,A=>{E=E.set(new H(A),!0)}),Qa(c,new bu(u.path,E,o))}return[]}function Od(c,r,o){return Qa(c,new fc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,o))}function Ah(c,r,o,u,p=!1){const E=r._path,A=c.syncPointTree_.get(E);let B=[];if(A&&("default"===r._queryIdentifier||Th(A,r))){const Z=function sy(c,r,o,u){const p=r._queryIdentifier,E=[];let A=[];const B=Jo(c);if("default"===p)for(const[Z,ie]of c.views.entries())A=A.concat(gc(ie,o,u)),bh(ie)&&(c.views.delete(Z),ie.query._queryParams.loadsAllData()||E.push(ie.query));else{const Z=c.views.get(p);Z&&(A=A.concat(gc(Z,o,u)),bh(Z)&&(c.views.delete(p),Z.query._queryParams.loadsAllData()||E.push(Z.query)))}return B&&!Jo(c)&&E.push(new(function Ov(){return(0,q.hu)(Ch,"Reference.ts has not been loaded"),Ch}())(r._repo,r._path)),{removed:E,events:A}}(A,r,o,u);(function qg(c){return 0===c.views.size})(A)&&(c.syncPointTree_=c.syncPointTree_.remove(E));const ie=Z.removed;if(B=Z.events,!p){const Qe=-1!==ie.findIndex(At=>At._queryParams.loadsAllData()),ft=c.syncPointTree_.findOnPath(E,(At,qt)=>Jo(qt));if(Qe&&!ft){const At=c.syncPointTree_.subtree(E);if(!At.isEmpty()){const qt=function Mp(c){return c.fold((r,o,u)=>{if(o&&Jo(o))return[nu(o)];{let p=[];return o&&(p=Js(o)),U(u,(E,A)=>{p=p.concat(A)}),p}})}(At);for(let Xt=0;Xt<qt.length;++Xt){const Sn=qt[Xt],sr=Sn.query,Hr=em(c,Sn);c.listenProvider_.startListening(Cl(sr),kd(c,sr),Hr.hashFn,Hr.onComplete)}}}!ft&&ie.length>0&&!u&&(Qe?c.listenProvider_.stopListening(Cl(r),null):ie.forEach(At=>{const qt=c.queryToTagMap.get(jl(At));c.listenProvider_.stopListening(Cl(At),qt)}))}!function Mu(c,r){for(let o=0;o<r.length;++o){const u=r[o];if(!u._queryParams.loadsAllData()){const p=jl(u),E=c.queryToTagMap.get(p);c.queryToTagMap.delete(p),c.tagToQueryMap.delete(E)}}}(c,ie)}return B}function O_(c,r,o,u){const p=Rh(c,u);if(null!=p){const E=uy(p),A=E.path,B=E.queryId,Z=Zi(A,r);return xh(c,A,new fc(bd(B),Z,o))}return[]}function Nd(c,r,o,u=!1){const p=r._path;let E=null,A=!1;c.syncPointTree_.foreachOnPath(p,(At,qt)=>{const Xt=Zi(At,p);E=E||Lc(qt,Xt),A=A||Jo(qt)});let Z,B=c.syncPointTree_.get(p);B?(A=A||Jo(B),E=E||Lc(B,re())):(B=new iy,c.syncPointTree_=c.syncPointTree_.set(p,B)),null!=E?Z=!0:(Z=!1,E=Kr.EMPTY_NODE,c.syncPointTree_.subtree(p).foreachChild((qt,Xt)=>{const Sn=Lc(Xt,re());Sn&&(E=E.updateImmediateChild(qt,Sn))}));const ie=Th(B,r);if(!ie&&!r._queryParams.loadsAllData()){const At=jl(r);(0,q.hu)(!c.queryToTagMap.has(At),"View does not exist, but we have a tag");const qt=function Ru(){return eo++}();c.queryToTagMap.set(At,qt),c.tagToQueryMap.set(qt,At)}let ft=function x_(c,r,o,u,p,E){const A=Dh(c,r,u,p,E);return c.views.has(r._queryIdentifier)||c.views.set(r._queryIdentifier,A),function Rd(c,r){c.eventRegistrations_.push(r)}(A,o),function Wg(c,r){const o=c.viewCache_.eventCache,u=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(ji,(E,A)=>{u.push(qc(E,A))}),o.isFullyInitialized()&&u.push(gd(o.getNode())),Kg(c,u,o.getNode(),r)}(A,o)}(B,r,o,Vl(c.pendingWriteTree_,p),E,Z);if(!ie&&!A&&!u){const At=Yg(B,r);ft=ft.concat(function mc(c,r,o){const u=r._path,p=kd(c,r),E=em(c,o),A=c.listenProvider_.startListening(Cl(r),p,E.hashFn,E.onComplete),B=c.syncPointTree_.subtree(u);if(p)(0,q.hu)(!Jo(B.value),"If we're adding a query, it shouldn't be shadowed");else{const Z=B.fold((ie,Qe,ft)=>{if(!Tr(ie)&&Qe&&Jo(Qe))return[nu(Qe).query];{let At=[];return Qe&&(At=At.concat(Js(Qe).map(qt=>qt.query))),U(ft,(qt,Xt)=>{At=At.concat(Xt)}),At}});for(let ie=0;ie<Z.length;++ie){const Qe=Z[ie];c.listenProvider_.stopListening(Cl(Qe),kd(c,Qe))}}return A}(c,r,At))}return ft}function Mh(c,r,o){const p=c.pendingWriteTree_,E=c.syncPointTree_.findOnPath(r,(A,B)=>{const ie=Lc(B,Zi(A,r));if(ie)return ie});return Tu(p,r,E,o,!0)}function Qa(c,r){return Au(r,c.syncPointTree_,null,Vl(c.pendingWriteTree_,re()))}function Au(c,r,o,u){if(Tr(c.path))return Jg(c,r,o,u);{const p=r.get(re());null==o&&null!=p&&(o=Lc(p,re()));let E=[];const A=le(c.path),B=c.operationForChild(A),Z=r.children.get(A);if(Z&&B){const ie=o?o.getImmediateChild(A):null,Qe=Sd(u,A);E=E.concat(Au(B,Z,ie,Qe))}return p&&(E=E.concat(Rf(p,c,u,o))),E}}function Jg(c,r,o,u){const p=r.get(re());null==o&&null!=p&&(o=Lc(p,re()));let E=[];return r.children.inorderTraversal((A,B)=>{const Z=o?o.getImmediateChild(A):null,ie=Sd(u,A),Qe=c.operationForChild(A);Qe&&(E=E.concat(Jg(Qe,B,Z,ie)))}),p&&(E=E.concat(Rf(p,c,u,o))),E}function em(c,r){const o=r.query,u=kd(c,o);return{hashFn:()=>(function Gg(c){return c.viewCache_.serverCache.getNode()}(r)||Kr.EMPTY_NODE).hash(),onComplete:p=>{if("ok"===p)return u?function Xg(c,r,o){const u=Rh(c,o);if(u){const p=uy(u),E=p.path,A=p.queryId,B=Zi(E,r);return xh(c,E,new vl(bd(A),B))}return[]}(c,o._path,u):function ly(c,r){return Qa(c,new vl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r))}(c,o._path);{const E=function Zt(c,r){let o="Unknown Error";"too_big"===c?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?o="Client doesn't have permission to access the desired data.":"unavailable"===c&&(o="The service is unavailable");const u=new Error(c+" at "+r._path.toString()+": "+o);return u.code=c.toUpperCase(),u}(p,o);return Ah(c,o,null,E)}}}}function kd(c,r){const o=jl(r);return c.queryToTagMap.get(o)}function jl(c){return c._path.toString()+"$"+c._queryIdentifier}function Rh(c,r){return c.tagToQueryMap.get(r)}function uy(c){const r=c.indexOf("$");return(0,q.hu)(-1!==r&&r<c.length-1,"Bad queryKey."),{queryId:c.substr(r+1),path:new H(c.substr(0,r))}}function xh(c,r,o){const u=c.syncPointTree_.get(r);return(0,q.hu)(u,"Missing sync point for query tag that we're tracking"),Rf(u,o,Vl(c.pendingWriteTree_,r),null)}function Cl(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new(function oy(){return(0,q.hu)(Sh,"Reference.ts has not been loaded"),Sh}())(c._repo,c._path):c}class Rp{constructor(r){this.node_=r}getImmediateChild(r){const o=this.node_.getImmediateChild(r);return new Rp(o)}node(){return this.node_}}class Fd{constructor(r,o){this.syncTree_=r,this.path_=o}getImmediateChild(r){const o=jr(this.path_,r);return new Fd(this.syncTree_,o)}node(){return Mh(this.syncTree_,this.path_)}}const Ph=function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c},tm=function(c,r,o){return c&&"object"==typeof c?((0,q.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?xp(c[".sv"],r,o):"object"==typeof c[".sv"]?Pp(c[".sv"],r):void(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},xp=function(c,r,o){if("timestamp"===c)return o.timestamp;(0,q.hu)(!1,"Unexpected server value: "+c)},Pp=function(c,r,o){c.hasOwnProperty("increment")||(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));const u=c.increment;"number"!=typeof u&&(0,q.hu)(!1,"Unexpected increment value: "+u);const p=r.node();if((0,q.hu)(null!==p&&typeof p<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!p.isLeafNode())return u;const A=p.getValue();return"number"!=typeof A?u:A+u},ru=function(c,r,o,u){return xu(r,new Fd(o,c),u)},xf=function(c,r,o){return xu(c,new Rp(r),o)};function xu(c,r,o){const u=c.getPriority().val(),p=tm(u,r.getImmediateChild(".priority"),o);let E;if(c.isLeafNode()){const A=c,B=tm(A.getValue(),r,o);return B!==A.getValue()||p!==A.getPriority().val()?new Qo(B,li(p)):c}{const A=c;return E=A,p!==A.getPriority().val()&&(E=E.updatePriority(new Qo(p))),A.forEachChild(ji,(B,Z)=>{const ie=xu(Z,r.getImmediateChild(B),o);ie!==Z&&(E=E.updateImmediateChild(B,ie))}),E}}class Ld{constructor(r="",o=null,u={children:{},childCount:0}){this.name=r,this.parent=o,this.node=u}}function Bc(c,r){let o=r instanceof H?r:new H(r),u=c,p=le(o);for(;null!==p;){const E=(0,q.DV)(u.node.children,p)||{children:{},childCount:0};u=new Ld(p,u,E),o=Dt(o),p=le(o)}return u}function Pu(c){return c.node.value}function iu(c,r){c.node.value=r,Np(c)}function dy(c){return c.node.childCount>0}function Op(c,r){U(c.node.children,(o,u)=>{r(new Ld(o,c,u))})}function Ou(c,r,o,u){o&&!u&&r(c),Op(c,p=>{Ou(p,r,!0,u)}),o&&u&&r(c)}function Dl(c){return new H(null===c.parent?c.name:Dl(c.parent)+"/"+c.name)}function Np(c){null!==c.parent&&function hy(c,r,o){const u=function k_(c){return void 0===Pu(c)&&!dy(c)}(o),p=(0,q.r3)(c.node.children,r);u&&p?(delete c.node.children[r],c.node.childCount--,Np(c)):!u&&!p&&(c.node.children[r]=o.node,c.node.childCount++,Np(c))}(c.parent,c.name,c)}const F_=/[\[\].#$\/\u0000-\u001F\u007F]/,L_=/[\[\].#$\u0000-\u001F\u007F]/,su=10485760,Oh=function(c){return"string"==typeof c&&0!==c.length&&!F_.test(c)},Nu=function(c){return"string"==typeof c&&0!==c.length&&!L_.test(c)},Ud=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!$i(c)||c&&"object"==typeof c&&(0,q.r3)(c,".sv")},Hl=function(c,r,o,u){u&&void 0===r||ku((0,q.gK)(c,"value"),r,o)},ku=function(c,r,o){const u=o instanceof H?new hl(o,c):o;if(void 0===r)throw new Error(c+"contains undefined "+Qi(u));if("function"==typeof r)throw new Error(c+"contains a function "+Qi(u)+" with contents = "+r.toString());if($i(r))throw new Error(c+"contains "+r.toString()+" "+Qi(u));if("string"==typeof r&&r.length>su/3&&(0,q.ug)(r)>su)throw new Error(c+"contains a string greater than "+su+" utf8 bytes "+Qi(u)+" ('"+r.substring(0,50)+"...')");if(r&&"object"==typeof r){let p=!1,E=!1;if(U(r,(A,B)=>{if(".value"===A)p=!0;else if(".priority"!==A&&".sv"!==A&&(E=!0,!Oh(A)))throw new Error(c+" contains an invalid key ("+A+") "+Qi(u)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ho(c,r){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(r),c.byteLength_+=(0,q.ug)(r),Fl(c)})(u,A),ku(c,B,u),function fl(c){const r=c.parts_.pop();c.byteLength_-=(0,q.ug)(r),c.parts_.length>0&&(c.byteLength_-=1)}(u)}),p&&E)throw new Error(c+' contains ".value" child '+Qi(u)+" in addition to actual children.")}},kp=function(c,r,o,u){if(u&&void 0===r)return;const p=(0,q.gK)(c,"values");if(!r||"object"!=typeof r||Array.isArray(r))throw new Error(p+" must be an object containing the children to replace.");const E=[];U(r,(A,B)=>{const Z=new H(A);if(ku(p,B,jr(o,Z)),".priority"===wn(Z)&&!Ud(B))throw new Error(p+"contains an invalid value for '"+Z.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");E.push(Z)}),function(c,r){let o,u;for(o=0;o<r.length;o++){u=r[o];const E=Vn(u);for(let A=0;A<E.length;A++)if((".priority"!==E[A]||A!==E.length-1)&&!Oh(E[A]))throw new Error(c+"contains an invalid key ("+E[A]+") in path "+u.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}r.sort(Fs);let p=null;for(o=0;o<r.length;o++){if(u=r[o],null!==p&&ps(p,u))throw new Error(c+"contains a path "+p.toString()+" that is ancestor of another path "+u.toString());p=u}}(p,E)},Vd=function(c,r,o){if(!o||void 0!==r){if($i(r))throw new Error((0,q.gK)(c,"priority")+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ud(r))throw new Error((0,q.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Nh=function(c,r,o,u){if(!(u&&void 0===o||Oh(o)))throw new Error((0,q.gK)(c,r)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Fu=function(c,r,o,u){if(!(u&&void 0===o||Nu(o)))throw new Error((0,q.gK)(c,r)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},jd=function(c,r,o,u){o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Fu(c,r,o,u)},La=function(c,r){if(".info"===le(r))throw new Error(c+" failed = Can't modify data under /.info/")},Lu=function(c,r){const o=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!Oh(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==o.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Nu(c)}(o))throw new Error((0,q.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class kh{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Pf(c,r){let o=null;for(let u=0;u<r.length;u++){const p=r[u],E=p.getPath();null!==o&&!Zo(E,o.path)&&(c.eventLists_.push(o),o=null),null===o&&(o={events:[],path:E}),o.events.push(p)}o&&c.eventLists_.push(o)}function Ba(c,r,o){Pf(c,o),Of(c,u=>Zo(u,r))}function Xa(c,r,o){Pf(c,o),Of(c,u=>ps(u,r)||ps(r,u))}function Of(c,r){c.recursionDepth_++;let o=!0;for(let u=0;u<c.eventLists_.length;u++){const p=c.eventLists_[u];p&&(r(p.path)?(Fp(c.eventLists_[u]),c.eventLists_[u]=null):o=!1)}o&&(c.eventLists_=[]),c.recursionDepth_--}function Fp(c){for(let r=0;r<c.events.length;r++){const o=c.events[r];if(null!==o){c.events[r]=null;const u=o.getEventRunner();Ws&&as("event: "+o.toString()),vr(u)}}}const nm="repo_interrupt",Bu=25;class yc{constructor(r,o,u,p){this.repoInfo_=r,this.forceRestClient_=o,this.authTokenProvider_=u,this.appCheckProvider_=p,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ed(),this.transactionQueueTree_=new Ld,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $u(c){const o=c.infoData_.getNode(new H(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function Nf(c){return Ph({timestamp:$u(c)})}function Fh(c,r,o,u,p){c.dataUpdateCount++;const E=new H(r);o=c.interceptServerDataCallback_?c.interceptServerDataCallback_(r,o):o;let A=[];if(p)if(u){const Z=(0,q.UI)(o,ie=>li(ie));A=function N_(c,r,o,u){const p=Rh(c,u);if(p){const E=uy(p),A=E.path,B=E.queryId,Z=Zi(A,r),ie=Mi.fromObject(o);return xh(c,A,new El(bd(B),Z,ie))}return[]}(c.serverSyncTree_,E,Z,p)}else{const Z=li(o);A=O_(c.serverSyncTree_,E,Z,p)}else if(u){const Z=(0,q.UI)(o,ie=>li(ie));A=function P_(c,r,o){const u=Mi.fromObject(o);return Qa(c,new El({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,u))}(c.serverSyncTree_,E,Z)}else{const Z=li(o);A=Od(c.serverSyncTree_,E,Z)}let B=E;A.length>0&&(B=Ls(c,E)),Xa(c.eventQueue_,B,A)}function fy(c,r){rm(c,"connected",r),!1===r&&function Lp(c){Uu(c,"onDisconnectEvents");const r=Nf(c),o=Ed();Qc(c.onDisconnect_,re(),(p,E)=>{const A=ru(p,E,c.serverSyncTree_,r);Eu(o,p,A)});let u=[];Qc(o,re(),(p,E)=>{u=u.concat(Od(c.serverSyncTree_,p,E));const A=$p(c,p);Ls(c,A)}),c.onDisconnect_=Ed(),Xa(c.eventQueue_,re(),u)}(c)}function rm(c,r,o){const u=new H("/.info/"+r),p=li(o);c.infoData_.updateSnapshot(u,p);const E=Od(c.infoSyncTree_,u,p);Xa(c.eventQueue_,u,E)}function kf(c){return c.nextWriteId_++}function im(c,r,o,u,p){Uu(c,"set",{path:r.toString(),value:o,priority:u});const E=Nf(c),A=li(o,u),B=Mh(c.serverSyncTree_,r),Z=xf(A,B,E),ie=kf(c),Qe=Qg(c.serverSyncTree_,r,Z,ie,!0);Pf(c.eventQueue_,Qe),c.server_.put(r.toString(),A.val(!0),(At,qt)=>{const Xt="ok"===At;Xt||es("set at "+r+" failed: "+At);const Sn=bl(c.serverSyncTree_,ie,!Xt);Xa(c.eventQueue_,r,Sn),Vu(0,p,At,qt)});const ft=$p(c,r);Ls(c,ft),Xa(c.eventQueue_,ft,[])}function my(c,r,o){c.server_.onDisconnectCancel(r.toString(),(u,p)=>{"ok"===u&&Zc(c.onDisconnect_,r),Vu(0,o,u,p)})}function zl(c,r,o,u){const p=li(o);c.server_.onDisconnectPut(r.toString(),p.val(!0),(E,A)=>{"ok"===E&&Eu(c.onDisconnect_,r,p),Vu(0,u,E,A)})}function au(c,r,o){let u;u=".info"===le(r._path)?Ah(c.infoSyncTree_,r,o):Ah(c.serverSyncTree_,r,o),Ba(c.eventQueue_,r._path,u)}function Lh(c){c.persistentConnection_&&c.persistentConnection_.interrupt(nm)}function Uu(c,...r){let o="";c.persistentConnection_&&(o=c.persistentConnection_.id+":"),as(o,...r)}function Vu(c,r,o,u){r&&vr(()=>{if("ok"===o)r(null);else{const p=(o||"error").toUpperCase();let E=p;u&&(E+=": "+u);const A=new Error(E);A.code=p,r(A)}})}function sm(c,r,o){return Mh(c.serverSyncTree_,r,o)||Kr.EMPTY_NODE}function Wr(c,r=c.transactionQueueTree_){if(r||Ff(c,r),Pu(r)){const o=Cy(c,r);(0,q.hu)(o.length>0,"Sending zero length transaction queue"),o.every(p=>0===p.status)&&function Bp(c,r,o){const u=o.map(ie=>ie.currentWriteId),p=sm(c,r,u);let E=p;const A=p.hash();for(let ie=0;ie<o.length;ie++){const Qe=o[ie];(0,q.hu)(0===Qe.status,"tryToSendTransactionQueue_: items in queue should all be run."),Qe.status=1,Qe.retryCount++;const ft=Zi(r,Qe.path);E=E.updateChild(ft,Qe.currentOutputSnapshotRaw)}const B=E.val(!0),Z=r;c.server_.put(Z.toString(),B,ie=>{Uu(c,"transaction put response",{path:Z.toString(),status:ie});let Qe=[];if("ok"===ie){const ft=[];for(let At=0;At<o.length;At++)o[At].status=2,Qe=Qe.concat(bl(c.serverSyncTree_,o[At].currentWriteId)),o[At].onComplete&&ft.push(()=>o[At].onComplete(null,!0,o[At].currentOutputSnapshotResolved)),o[At].unwatcher();Ff(c,Bc(c.transactionQueueTree_,r)),Wr(c,c.transactionQueueTree_),Xa(c.eventQueue_,r,Qe);for(let At=0;At<ft.length;At++)vr(ft[At])}else{if("datastale"===ie)for(let ft=0;ft<o.length;ft++)o[ft].status=3===o[ft].status?4:0;else{es("transaction at "+Z.toString()+" failed: "+ie);for(let ft=0;ft<o.length;ft++)o[ft].status=4,o[ft].abortReason=ie}Ls(c,r)}},A)}(c,Dl(r),o)}else dy(r)&&Op(r,o=>{Wr(c,o)})}function Ls(c,r){const o=by(c,r),u=Dl(o);return function wy(c,r,o){if(0===r.length)return;const u=[];let p=[];const A=r.filter(B=>0===B.status).map(B=>B.currentWriteId);for(let B=0;B<r.length;B++){const Z=r[B],ie=Zi(o,Z.path);let ft,Qe=!1;if((0,q.hu)(null!==ie,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Z.status)Qe=!0,ft=Z.abortReason,p=p.concat(bl(c.serverSyncTree_,Z.currentWriteId,!0));else if(0===Z.status)if(Z.retryCount>=Bu)Qe=!0,ft="maxretry",p=p.concat(bl(c.serverSyncTree_,Z.currentWriteId,!0));else{const At=sm(c,Z.path,A);Z.currentInputSnapshot=At;const qt=r[B].update(At.val());if(void 0!==qt){ku("transaction failed: Data returned ",qt,Z.path);let Xt=li(qt);"object"==typeof qt&&null!=qt&&(0,q.r3)(qt,".priority")||(Xt=Xt.updatePriority(At.getPriority()));const sr=Z.currentWriteId,Hr=Nf(c),_i=xf(Xt,At,Hr);Z.currentOutputSnapshotRaw=Xt,Z.currentOutputSnapshotResolved=_i,Z.currentWriteId=kf(c),A.splice(A.indexOf(sr),1),p=p.concat(Qg(c.serverSyncTree_,Z.path,_i,Z.currentWriteId,Z.applyLocally)),p=p.concat(bl(c.serverSyncTree_,sr,!0))}else Qe=!0,ft="nodata",p=p.concat(bl(c.serverSyncTree_,Z.currentWriteId,!0))}Xa(c.eventQueue_,o,p),p=[],Qe&&(r[B].status=2,setTimeout(r[B].unwatcher,Math.floor(0)),r[B].onComplete&&u.push("nodata"===ft?()=>r[B].onComplete(null,!1,r[B].currentInputSnapshot):()=>r[B].onComplete(new Error(ft),!1,null)))}Ff(c,c.transactionQueueTree_);for(let B=0;B<u.length;B++)vr(u[B]);Wr(c,c.transactionQueueTree_)}(c,Cy(c,o),u),u}function by(c,r){let o,u=c.transactionQueueTree_;for(o=le(r);null!==o&&void 0===Pu(u);)u=Bc(u,o),o=le(r=Dt(r));return u}function Cy(c,r){const o=[];return om(c,r,o),o.sort((u,p)=>u.order-p.order),o}function om(c,r,o){const u=Pu(r);if(u)for(let p=0;p<u.length;p++)o.push(u[p]);Op(r,p=>{om(c,p,o)})}function Ff(c,r){const o=Pu(r);if(o){let u=0;for(let p=0;p<o.length;p++)2!==o[p].status&&(o[u]=o[p],u++);o.length=u,iu(r,o.length>0?o:void 0)}Op(r,u=>{Ff(c,u)})}function $p(c,r){const o=Dl(by(c,r)),u=Bc(c.transactionQueueTree_,r);return function Bd(c,r,o){let u=o?c:c.parent;for(;null!==u;){if(r(u))return!0;u=u.parent}}(u,p=>{Bh(c,p)}),Bh(c,u),Ou(u,p=>{Bh(c,p)}),o}function Bh(c,r){const o=Pu(r);if(o){const u=[];let p=[],E=-1;for(let A=0;A<o.length;A++)3===o[A].status||(1===o[A].status?((0,q.hu)(E===A-1,"All SENT items should be at beginning of queue."),E=A,o[A].status=3,o[A].abortReason="set"):((0,q.hu)(0===o[A].status,"Unexpected transaction status in abort"),o[A].unwatcher(),p=p.concat(bl(c.serverSyncTree_,o[A].currentWriteId,!0)),o[A].onComplete&&u.push(o[A].onComplete.bind(null,new Error("set"),!1,null))));-1===E?iu(r,void 0):o.length=E+1,Xa(c.eventQueue_,Dl(r),p);for(let A=0;A<u.length;A++)vr(u[A])}}const $h=function(c,r){const o=Up(c),u=o.namespace;return"firebase.com"===o.domain&&Nr(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!u||"undefined"===u)&&"localhost"!==o.domain&&Nr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&es("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Po(o.host,o.secure,u,"ws"===o.scheme||"wss"===o.scheme,r,"",u!==o.subdomain),path:new H(o.pathString)}},Up=function(c){let r="",o="",u="",p="",E="",A=!0,B="https",Z=443;if("string"==typeof c){let ie=c.indexOf("//");ie>=0&&(B=c.substring(0,ie-1),c=c.substring(ie+2));let Qe=c.indexOf("/");-1===Qe&&(Qe=c.length);let ft=c.indexOf("?");-1===ft&&(ft=c.length),r=c.substring(0,Math.min(Qe,ft)),Qe<ft&&(p=function $_(c){let r="";const o=c.split("/");for(let u=0;u<o.length;u++)if(o[u].length>0){let p=o[u];try{p=decodeURIComponent(p.replace(/\+/g," "))}catch{}r+="/"+p}return r}(c.substring(Qe,ft)));const At=function U_(c){const r={};"?"===c.charAt(0)&&(c=c.substring(1));for(const o of c.split("&")){if(0===o.length)continue;const u=o.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):es(`Invalid query segment '${o}' in query '${c}'`)}return r}(c.substring(Math.min(c.length,ft)));ie=r.indexOf(":"),ie>=0?(A="https"===B||"wss"===B,Z=parseInt(r.substring(ie+1),10)):ie=r.length;const qt=r.slice(0,ie);if("localhost"===qt.toLowerCase())o="localhost";else if(qt.split(".").length<=2)o=qt;else{const Xt=r.indexOf(".");u=r.substring(0,Xt).toLowerCase(),o=r.substring(Xt+1),E=u}"ns"in At&&(E=At.ns)}return{host:r,port:Z,domain:o,subdomain:u,secure:A,scheme:B,pathString:p,namespace:E}},Gl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Vp=function(){let c=0;const r=[];return function(o){const u=o===c;let p;c=o;const E=new Array(8);for(p=7;p>=0;p--)E[p]=Gl.charAt(o%64),o=Math.floor(o/64);(0,q.hu)(0===o,"Cannot push at time == 0");let A=E.join("");if(u){for(p=11;p>=0&&63===r[p];p--)r[p]=0;r[p]++}else for(p=0;p<12;p++)r[p]=Math.floor(64*Math.random());for(p=0;p<12;p++)A+=Gl.charAt(r[p]);return(0,q.hu)(20===A.length,"nextPushId: Length should be 20."),A}}();class Uh{constructor(r,o,u,p){this.eventType=r,this.eventRegistration=o,this.snapshot=u,this.prevName=p}getPath(){const r=this.snapshot.ref;return"value"===this.eventType?r._path:r.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,q.Wl)(this.snapshot.exportVal())}}class Vh{constructor(r,o,u){this.eventRegistration=r,this.error=o,this.path=u}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class jp{constructor(r,o){this.snapshotCallback=r,this.cancelCallback=o}onValue(r,o){this.snapshotCallback.call(null,r,o)}onCancel(r){return(0,q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,r)}get hasCancelCallback(){return!!this.cancelCallback}matches(r){return this.snapshotCallback===r.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===r.snapshotCallback.userCallback&&this.snapshotCallback.context===r.snapshotCallback.context}}class V_{constructor(r,o){this._repo=r,this._path=o}cancel(){const r=new q.BH;return my(this._repo,this._path,r.wrapCallback(()=>{})),r.promise}remove(){La("OnDisconnect.remove",this._path);const r=new q.BH;return zl(this._repo,this._path,null,r.wrapCallback(()=>{})),r.promise}set(r){La("OnDisconnect.set",this._path),Hl("OnDisconnect.set",r,this._path,!1);const o=new q.BH;return zl(this._repo,this._path,r,o.wrapCallback(()=>{})),o.promise}setWithPriority(r,o){La("OnDisconnect.setWithPriority",this._path),Hl("OnDisconnect.setWithPriority",r,this._path,!1),Vd("OnDisconnect.setWithPriority",o,!1);const u=new q.BH;return function yy(c,r,o,u,p){const E=li(o,u);c.server_.onDisconnectPut(r.toString(),E.val(!0),(A,B)=>{"ok"===A&&Eu(c.onDisconnect_,r,E),Vu(0,p,A,B)})}(this._repo,this._path,r,o,u.wrapCallback(()=>{})),u.promise}update(r){La("OnDisconnect.update",this._path),kp("OnDisconnect.update",r,this._path,!1);const o=new q.BH;return function _y(c,r,o,u){if((0,q.xb)(o))return as("onDisconnect().update() called with empty data.  Don't do anything."),void Vu(0,u,"ok",void 0);c.server_.onDisconnectMerge(r.toString(),o,(p,E)=>{"ok"===p&&U(o,(A,B)=>{const Z=li(B);Eu(c.onDisconnect_,jr(r,A),Z)}),Vu(0,u,p,E)})}(this._repo,this._path,r,o.wrapCallback(()=>{})),o.promise}}class Ja{constructor(r,o,u,p){this._repo=r,this._path=o,this._queryParams=u,this._orderByCalled=p}get key(){return Tr(this._path)?null:wn(this._path)}get ref(){return new Wl(this._repo,this._path)}get _queryIdentifier(){const r=gh(this._queryParams),o=L(r);return"{}"===o?"default":o}get _queryObject(){return gh(this._queryParams)}isEqual(r){if(!((r=(0,q.m9)(r))instanceof Ja))return!1;const o=this._repo===r._repo,u=Zo(this._path,r._path);return o&&u&&this._queryIdentifier===r._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Un(c){let r="";for(let o=c.pieceNum_;o<c.pieces_.length;o++)""!==c.pieces_[o]&&(r+="/"+encodeURIComponent(String(c.pieces_[o])));return r||"/"}(this._path)}}function Hp(c,r){if(!0===c._orderByCalled)throw new Error(r+": You can't combine multiple orderBy calls.")}function Uc(c){let r=null,o=null;if(c.hasStart()&&(r=c.getIndexStartValue()),c.hasEnd()&&(o=c.getIndexEndValue()),c.getIndex()===Ms){const u="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",p="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==fs)throw new Error(u);if("string"!=typeof r)throw new Error(p)}if(c.hasEnd()){if(c.getIndexEndName()!==Mo)throw new Error(u);if("string"!=typeof o)throw new Error(p)}}else if(c.getIndex()===ji){if(null!=r&&!Ud(r)||null!=o&&!Ud(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,q.hu)(c.getIndex()instanceof hh||c.getIndex()===yl,"unknown index type."),null!=r&&"object"==typeof r||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Lf(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Wl extends Ja{constructor(r,o){super(r,o,new Nc,!1)}get parent(){const r=ai(this._path);return null===r?null:new Wl(this._repo,r)}get root(){let r=this;for(;null!==r.parent;)r=r.parent;return r}}class Hd{constructor(r,o,u){this._node=r,this.ref=o,this._index=u}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(r){const o=new H(r),u=Tl(this.ref,r);return new Hd(this._node.getChild(o),u,ji)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(u,p)=>r(new Hd(p,Tl(this.ref,u),ji)))}hasChild(r){const o=new H(r);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ju(c,r){return(c=(0,q.m9)(c))._checkNotDeleted("ref"),void 0!==r?Tl(c._root,r):c._root}function Dy(c,r){(c=(0,q.m9)(c))._checkNotDeleted("refFromURL");const o=$h(r,c._repo.repoInfo_.nodeAdmin);Lu("refFromURL",o);const u=o.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&u.host!==c._repo.repoInfo_.host&&Nr("refFromURL: Host name does not match the current database: (found "+u.host+" but expected "+c._repo.repoInfo_.host+")"),ju(c,o.path.toString())}function Tl(c,r){return null===le((c=(0,q.m9)(c))._path)?jd("child","path",r,!1):Fu("child","path",r,!1),new Wl(c._repo,jr(c._path,r))}function zp(c,r){c=(0,q.m9)(c),La("set",c._path),Hl("set",r,c._path,!1);const o=new q.BH;return im(c._repo,c._path,r,null,o.wrapCallback(()=>{})),o.promise}function j_(c,r){kp("update",r,c._path,!1);const o=new q.BH;return function gy(c,r,o,u){Uu(c,"update",{path:r.toString(),value:o});let p=!0;const E=Nf(c),A={};if(U(o,(B,Z)=>{p=!1,A[B]=ru(jr(r,B),li(Z),c.serverSyncTree_,E)}),p)as("update() called with empty data.  Don't do anything."),Vu(0,u,"ok",void 0);else{const B=kf(c),Z=function ay(c,r,o,u){!function yh(c,r,o,u){(0,q.hu)(u>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:r,children:o,writeId:u,visible:!0}),c.visibleWrites=Fa(c.visibleWrites,r,o),c.lastWriteId=u}(c.pendingWriteTree_,r,o,u);const p=Mi.fromObject(o);return Qa(c,new El({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,p))}(c.serverSyncTree_,r,A,B);Pf(c.eventQueue_,Z),c.server_.merge(r.toString(),o,(ie,Qe)=>{const ft="ok"===ie;ft||es("update at "+r+" failed: "+ie);const At=bl(c.serverSyncTree_,B,!ft),qt=At.length>0?Ls(c,r):r;Xa(c.eventQueue_,qt,At),Vu(0,u,ie,Qe)}),U(o,ie=>{const Qe=$p(c,jr(r,ie));Ls(c,Qe)}),Xa(c.eventQueue_,r,[])}}(c._repo,c._path,r,o.wrapCallback(()=>{})),o.promise}function lm(c){c=(0,q.m9)(c);const r=new jp(()=>{}),o=new jh(r);return function py(c,r,o){const u=function cy(c,r){const o=r._path;let u=null;c.syncPointTree_.foreachOnPath(o,(ie,Qe)=>{const ft=Zi(ie,o);u=u||Lc(Qe,ft)});let p=c.syncPointTree_.get(o);p?u=u||Lc(p,re()):(p=new iy,c.syncPointTree_=c.syncPointTree_.set(o,p));const E=null!=u,A=E?new M(u,!0,!1):null;return function Ap(c){return Ln(c.viewCache_)}(Dh(p,r,Vl(c.pendingWriteTree_,r._path),E?A.getNode():Kr.EMPTY_NODE,E))}(c.serverSyncTree_,r);return null!=u?Promise.resolve(u):c.server_.get(r).then(p=>{const E=li(p).withIndex(r._queryParams.getIndex());let A;if(Nd(c.serverSyncTree_,r,o,!0),r._queryParams.loadsAllData())A=Od(c.serverSyncTree_,r._path,E);else{const B=kd(c.serverSyncTree_,r);A=O_(c.serverSyncTree_,r._path,E,B)}return Xa(c.eventQueue_,r._path,A),Ah(c.serverSyncTree_,r,o,null,!0),E},p=>(Uu(c,"get for query "+(0,q.Wl)(r)+" failed: "+p),Promise.reject(new Error(p))))}(c._repo,c,o).then(u=>new Hd(u,new Wl(c._repo,c._path),c._queryParams.getIndex()))}class jh{constructor(r){this.callbackContext=r}respondsTo(r){return"value"===r}createEvent(r,o){const u=o._queryParams.getIndex();return new Uh("value",this,new Hd(r.snapshotNode,new Wl(o._repo,o._path),u))}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,null)}createCancelEvent(r,o){return this.callbackContext.hasCancelCallback?new Vh(this,r,o):null}matches(r){return r instanceof jh&&(!r.callbackContext||!this.callbackContext||r.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Hh{constructor(r,o){this.eventType=r,this.callbackContext=o}respondsTo(r){let o="children_added"===r?"child_added":r;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(r,o){return this.callbackContext.hasCancelCallback?new Vh(this,r,o):null}createEvent(r,o){(0,q.hu)(null!=r.childName,"Child events should have a childName.");const u=Tl(new Wl(o._repo,o._path),r.childName),p=o._queryParams.getIndex();return new Uh(r.type,this,new Hd(r.snapshotNode,u,p),r.prevName)}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,r.prevName)}matches(r){return r instanceof Hh&&this.eventType===r.eventType&&(!this.callbackContext||!r.callbackContext||this.callbackContext.matches(r.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function zd(c,r,o,u,p){let E;if("object"==typeof u&&(E=void 0,p=u),"function"==typeof u&&(E=u),p&&p.onlyOnce){const Z=o,ie=(Qe,ft)=>{au(c._repo,c,B),Z(Qe,ft)};ie.userCallback=o.userCallback,ie.context=o.context,o=ie}const A=new jp(o,E||void 0),B="value"===r?new jh(A):new Hh(r,A);return function vy(c,r,o){let u;u=".info"===le(r._path)?Nd(c.infoSyncTree_,r,o):Nd(c.serverSyncTree_,r,o),Ba(c.eventQueue_,r._path,u)}(c._repo,c,B),()=>au(c._repo,c,B)}function $f(c,r,o,u){return zd(c,"value",r,o,u)}function zh(c,r,o,u){return zd(c,"child_added",r,o,u)}function Gp(c,r,o,u){return zd(c,"child_changed",r,o,u)}function zu(c,r,o,u){return zd(c,"child_moved",r,o,u)}function Uf(c,r,o,u){return zd(c,"child_removed",r,o,u)}function cm(c,r,o){let u=null;const p=o?new jp(o):null;"value"===r?u=new jh(p):r&&(u=new Hh(r,p)),au(c._repo,c,u)}class ea{}class Vf extends ea{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){Hl("endAt",this._value,r._path,!0);const o=vd(r._queryParams,this._value,this._key);if(Lf(o),Uc(o),r._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ja(r._repo,r._path,o,r._orderByCalled)}}class My extends ea{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){Hl("endBefore",this._value,r._path,!1);const o=function kg(c,r,o){let u;return u=vd(c,r,c.index_===Ms||o?o:fs),u.endBeforeSet_=!0,u}(r._queryParams,this._value,this._key);if(Lf(o),Uc(o),r._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ja(r._repo,r._path,o,r._orderByCalled)}}class jf extends ea{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){Hl("startAt",this._value,r._path,!0);const o=kc(r._queryParams,this._value,this._key);if(Lf(o),Uc(o),r._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ja(r._repo,r._path,o,r._orderByCalled)}}class Wh extends ea{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){Hl("startAfter",this._value,r._path,!1);const o=function bf(c,r,o){let u;return u=kc(c,r,c.index_===Ms||o?o:Mo),u.startAfterSet_=!0,u}(r._queryParams,this._value,this._key);if(Lf(o),Uc(o),r._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ja(r._repo,r._path,o,r._orderByCalled)}}class go extends ea{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ja(r._repo,r._path,function _d(c,r){const o=c.copy();return o.limitSet_=!0,o.limit_=r,o.viewFrom_="l",o}(r._queryParams,this._limit),r._orderByCalled)}}class Hf extends ea{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ja(r._repo,r._path,function fo(c,r){const o=c.copy();return o.limitSet_=!0,o.limit_=r,o.viewFrom_="r",o}(r._queryParams,this._limit),r._orderByCalled)}}class Gd extends ea{constructor(r){super(),this._path=r}_apply(r){Hp(r,"orderByChild");const o=new H(this._path);if(Tr(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const u=new hh(o),p=Yc(r._queryParams,u);return Uc(p),new Ja(r._repo,r._path,p,!0)}}class Wp extends ea{_apply(r){Hp(r,"orderByKey");const o=Yc(r._queryParams,Ms);return Uc(o),new Ja(r._repo,r._path,o,!0)}}class hm extends ea{_apply(r){Hp(r,"orderByPriority");const o=Yc(r._queryParams,ji);return Uc(o),new Ja(r._repo,r._path,o,!0)}}class z_ extends ea{_apply(r){Hp(r,"orderByValue");const o=Yc(r._queryParams,yl);return Uc(o),new Ja(r._repo,r._path,o,!0)}}class G_ extends ea{constructor(r,o){super(),this._value=r,this._key=o}_apply(r){if(Hl("equalTo",this._value,r._path,!1),r._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(r._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Vf(this._value,this._key)._apply(new jf(this._value,this._key)._apply(r))}}function ba(c,...r){let o=(0,q.m9)(c);for(const u of r)o=u._apply(o);return o}(function Pv(c){(0,q.hu)(!Ch,"__referenceConstructor has already been defined"),Ch=c})(Wl),function Pd(c){(0,q.hu)(!Sh,"__referenceConstructor has already been defined"),Sh=c}(Wl);const fm="FIREBASE_DATABASE_EMULATOR_HOST",Gu={};let Ca=!1;function Kh(c,r,o,u,p){let E=u||c.options.databaseURL;void 0===E&&(c.options.projectId||Nr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),as("Using default host for project ",c.options.projectId),E=`${c.options.projectId}-default-rtdb.firebaseio.com`);let Z,ie,A=$h(E,p),B=A.repoInfo;typeof process<"u"&&process.env&&(ie=process.env[fm]),ie?(Z=!0,E=`http://${ie}?ns=${B.namespace}`,A=$h(E,p),B=A.repoInfo):Z=!A.repoInfo.secure;const Qe=p&&Z?new hn(hn.OWNER):new xo(c.name,c.options,r);Lu("Invalid Firebase Database URL",A),Tr(A.path)||Nr("Database URL must point to the root of a Firebase Database (not including a child path).");const ft=function Yp(c,r,o,u){let p=Gu[r.name];p||(p={},Gu[r.name]=p);let E=p[c.toURLString()];return E&&Nr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),E=new yc(c,Ca,o,u),p[c.toURLString()]=E,E}(B,c,Qe,new xn(c.name,o));return new pm(ft,c)}class pm{constructor(r,o){this._repoInternal=r,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $c(c,r,o){if(c.stats_=Ti(c.repoInfo_),c.forceRestClient_||ts())c.server_=new vu(c.repoInfo_,(u,p,E,A)=>{Fh(c,u,p,E,A)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(()=>fy(c,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,q.Wl)(o)}catch(u){throw new Error("Invalid authOverride provided: "+u)}}c.persistentConnection_=new kn(c.repoInfo_,r,(u,p,E,A)=>{Fh(c,u,p,E,A)},u=>{fy(c,u)},u=>{!function ou(c,r){U(r,(o,u)=>{rm(c,o,u)})}(c,u)},c.authTokenProvider_,c.appCheckProvider_,o),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(u=>{c.server_.refreshAuthToken(u)}),c.appCheckProvider_.addTokenChangeListener(u=>{c.server_.refreshAppCheckToken(u.token)}),c.statsReporter_=function yr(c,r){const o=c.toString();return ca[o]||(ca[o]=r()),ca[o]}(c.repoInfo_,()=>new wd(c.stats_,c.server_)),c.infoData_=new Cf,c.infoSyncTree_=new Zg({startListening:(u,p,E,A)=>{let B=[];const Z=c.infoData_.getNode(u._path);return Z.isEmpty()||(B=Od(c.infoSyncTree_,u._path,Z),setTimeout(()=>{A("ok")},0)),B},stopListening:()=>{}}),rm(c,"connected",!1),c.serverSyncTree_=new Zg({startListening:(u,p,E,A)=>(c.server_.listen(u,E,p,(B,Z)=>{const ie=A(B,Z);Xa(c.eventQueue_,u._path,ie)}),[]),stopListening:(u,p)=>{c.server_.unlisten(u,p)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wl(this._repo,re())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Oy(c,r){const o=Gu[r];(!o||o[c.key]!==c)&&Nr(`Database ${r}(${c.repoInfo_}) has already been deleted.`),Lh(c),delete o[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(r){null===this._rootInternal&&Nr("Cannot call "+r+" on a deleted database.")}}function lu(){Ac.IS_TRANSPORT_INITIALIZED&&es("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ny(){lu(),vs.forceDisallow()}function ky(){lu(),Sc.forceDisallow(),vs.forceAllow()}function gm(c,r){sc(c,r)}const mm={".sv":"timestamp"};class Kf{constructor(r,o){this.committed=r,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}kn.prototype.simpleListen=function(c,r){this.sendRequest("q",{p:c},r)},kn.prototype.echo=function(c,r){this.sendRequest("echo",{d:c},r)},function Qp(c){Ga(Ae.SDK_VERSION),(0,Ae._registerComponent)(new pt.wA("database",(r,{instanceIdentifier:o})=>Kh(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"),r.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,Ae.registerVersion)(Ra,"0.14.4",c),(0,Ae.registerVersion)(Ra,"0.14.4","esm2017")}();const ym=new la.Yd("@firebase/database-compat"),Xp=function(c){ym.warn("FIREBASE WARNING: "+c)};class qh{constructor(r){this._delegate=r}cancel(r){(0,q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,q.Wj)("OnDisconnect.cancel","onComplete",r,!0);const o=this._delegate.cancel();return r&&o.then(()=>r(null),u=>r(u)),o}remove(r){(0,q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,q.Wj)("OnDisconnect.remove","onComplete",r,!0);const o=this._delegate.remove();return r&&o.then(()=>r(null),u=>r(u)),o}set(r,o){(0,q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,q.Wj)("OnDisconnect.set","onComplete",o,!0);const u=this._delegate.set(r);return o&&u.then(()=>o(null),p=>o(p)),u}setWithPriority(r,o,u){(0,q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,q.Wj)("OnDisconnect.setWithPriority","onComplete",u,!0);const p=this._delegate.setWithPriority(r,o);return u&&p.then(()=>u(null),E=>u(E)),p}update(r,o){if((0,q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(r)){const p={};for(let E=0;E<r.length;++E)p[""+E]=r[E];r=p,Xp("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,q.Wj)("OnDisconnect.update","onComplete",o,!0);const u=this._delegate.update(r);return o&&u.then(()=>o(null),p=>o(p)),u}}class Jp{constructor(r,o){this.committed=r,this.snapshot=o}toJSON(){return(0,q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sl{constructor(r,o){this._database=r,this._delegate=o}val(){return(0,q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(r){return(0,q.Dv)("DataSnapshot.child",0,1,arguments.length),r=String(r),Fu("DataSnapshot.child","path",r,!1),new Sl(this._database,this._delegate.child(r))}hasChild(r){return(0,q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Fu("DataSnapshot.hasChild","path",r,!1),this._delegate.hasChild(r)}getPriority(){return(0,q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(r){return(0,q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,q.Wj)("DataSnapshot.forEach","action",r,!1),this._delegate.forEach(o=>r(new Sl(this._database,o)))}hasChildren(){return(0,q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,q.Dv)("DataSnapshot.ref",0,0,arguments.length),new ha(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class da{constructor(r,o){this.database=r,this._delegate=o}on(r,o,u,p){var E;(0,q.Dv)("Query.on",2,4,arguments.length),(0,q.Wj)("Query.on","callback",o,!1);const A=da.getCancelAndContextArgs_("Query.on",u,p),B=(ie,Qe)=>{o.call(A.context,new Sl(this.database,ie),Qe)};B.userCallback=o,B.context=A.context;const Z=null===(E=A.cancel)||void 0===E?void 0:E.bind(A.context);switch(r){case"value":return $f(this._delegate,B,Z),o;case"child_added":return zh(this._delegate,B,Z),o;case"child_removed":return Uf(this._delegate,B,Z),o;case"child_changed":return Gp(this._delegate,B,Z),o;case"child_moved":return zu(this._delegate,B,Z),o;default:throw new Error((0,q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(r,o,u){if((0,q.Dv)("Query.off",0,3,arguments.length),function(c,r,o){if(void 0!==r)switch(r){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,r),(0,q.Wj)("Query.off","callback",o,!0),(0,q.lb)("Query.off","context",u,!0),o){const p=()=>{};p.userCallback=o,p.context=u,cm(this._delegate,r,p)}else cm(this._delegate,r)}get(){return lm(this._delegate).then(r=>new Sl(this.database,r))}once(r,o,u,p){(0,q.Dv)("Query.once",1,4,arguments.length),(0,q.Wj)("Query.once","callback",o,!0);const E=da.getCancelAndContextArgs_("Query.once",u,p),A=new q.BH,B=(ie,Qe)=>{const ft=new Sl(this.database,ie);o&&o.call(E.context,ft,Qe),A.resolve(ft)};B.userCallback=o,B.context=E.context;const Z=ie=>{E.cancel&&E.cancel.call(E.context,ie),A.reject(ie)};switch(r){case"value":$f(this._delegate,B,Z,{onlyOnce:!0});break;case"child_added":zh(this._delegate,B,Z,{onlyOnce:!0});break;case"child_removed":Uf(this._delegate,B,Z,{onlyOnce:!0});break;case"child_changed":Gp(this._delegate,B,Z,{onlyOnce:!0});break;case"child_moved":zu(this._delegate,B,Z,{onlyOnce:!0});break;default:throw new Error((0,q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return A.promise}limitToFirst(r){return(0,q.Dv)("Query.limitToFirst",1,1,arguments.length),new da(this.database,ba(this._delegate,function dm(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new go(c)}(r)))}limitToLast(r){return(0,q.Dv)("Query.limitToLast",1,1,arguments.length),new da(this.database,ba(this._delegate,function zf(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Hf(c)}(r)))}orderByChild(r){return(0,q.Dv)("Query.orderByChild",1,1,arguments.length),new da(this.database,ba(this._delegate,function Gf(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Fu("orderByChild","path",c,!1),new Gd(c)}(r)))}orderByKey(){return(0,q.Dv)("Query.orderByKey",0,0,arguments.length),new da(this.database,ba(this._delegate,function xy(){return new Wp}()))}orderByPriority(){return(0,q.Dv)("Query.orderByPriority",0,0,arguments.length),new da(this.database,ba(this._delegate,function H_(){return new hm}()))}orderByValue(){return(0,q.Dv)("Query.orderByValue",0,0,arguments.length),new da(this.database,ba(this._delegate,function Kp(){return new z_}()))}startAt(r=null,o){return(0,q.Dv)("Query.startAt",0,2,arguments.length),new da(this.database,ba(this._delegate,function Gh(c=null,r){return Nh("startAt","key",r,!0),new jf(c,r)}(r,o)))}startAfter(r=null,o){return(0,q.Dv)("Query.startAfter",0,2,arguments.length),new da(this.database,ba(this._delegate,function um(c,r){return Nh("startAfter","key",r,!0),new Wh(c,r)}(r,o)))}endAt(r=null,o){return(0,q.Dv)("Query.endAt",0,2,arguments.length),new da(this.database,ba(this._delegate,function Ay(c,r){return Nh("endAt","key",r,!0),new Vf(c,r)}(r,o)))}endBefore(r=null,o){return(0,q.Dv)("Query.endBefore",0,2,arguments.length),new da(this.database,ba(this._delegate,function Ry(c,r){return Nh("endBefore","key",r,!0),new My(c,r)}(r,o)))}equalTo(r,o){return(0,q.Dv)("Query.equalTo",1,2,arguments.length),new da(this.database,ba(this._delegate,function Py(c,r){return Nh("equalTo","key",r,!0),new G_(c,r)}(r,o)))}toString(){return(0,q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(r){if((0,q.Dv)("Query.isEqual",1,1,arguments.length),!(r instanceof da))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(r._delegate)}static getCancelAndContextArgs_(r,o,u){const p={cancel:void 0,context:void 0};if(o&&u)p.cancel=o,(0,q.Wj)(r,"cancel",p.cancel,!0),p.context=u,(0,q.lb)(r,"context",p.context,!0);else if(o)if("object"==typeof o&&null!==o)p.context=o;else{if("function"!=typeof o)throw new Error((0,q.gK)(r,"cancelOrContext")+" must either be a cancel callback or a context object.");p.cancel=o}return p}get ref(){return new ha(this.database,new Wl(this._delegate._repo,this._delegate._path))}}class ha extends da{constructor(r,o){super(r,new Ja(o._repo,o._path,new Nc,!1)),this.database=r,this._delegate=o}getKey(){return(0,q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(r){return(0,q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof r&&(r=String(r)),new ha(this.database,Tl(this._delegate,r))}getParent(){(0,q.Dv)("Reference.parent",0,0,arguments.length);const r=this._delegate.parent;return r?new ha(this.database,r):null}getRoot(){return(0,q.Dv)("Reference.root",0,0,arguments.length),new ha(this.database,this._delegate.root)}set(r,o){(0,q.Dv)("Reference.set",1,2,arguments.length),(0,q.Wj)("Reference.set","onComplete",o,!0);const u=zp(this._delegate,r);return o&&u.then(()=>o(null),p=>o(p)),u}update(r,o){if((0,q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(r)){const p={};for(let E=0;E<r.length;++E)p[""+E]=r[E];r=p,Xp("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}La("Reference.update",this._delegate._path),(0,q.Wj)("Reference.update","onComplete",o,!0);const u=j_(this._delegate,r);return o&&u.then(()=>o(null),p=>o(p)),u}setWithPriority(r,o,u){(0,q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,q.Wj)("Reference.setWithPriority","onComplete",u,!0);const p=function Sy(c,r,o){if(La("setWithPriority",c._path),Hl("setWithPriority",r,c._path,!1),Vd("setWithPriority",o,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";const u=new q.BH;return im(c._repo,c._path,r,o,u.wrapCallback(()=>{})),u.promise}(this._delegate,r,o);return u&&p.then(()=>u(null),E=>u(E)),p}remove(r){(0,q.Dv)("Reference.remove",0,1,arguments.length),(0,q.Wj)("Reference.remove","onComplete",r,!0);const o=function Bf(c){return La("remove",c._path),zp(c,null)}(this._delegate);return r&&o.then(()=>r(null),u=>r(u)),o}transaction(r,o,u){(0,q.Dv)("Reference.transaction",1,3,arguments.length),(0,q.Wj)("Reference.transaction","transactionUpdate",r,!1),(0,q.Wj)("Reference.transaction","onComplete",o,!0),function(c,r,o,u){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,u);const p=function K_(c,r,o){var u;if(c=(0,q.m9)(c),La("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";const p=null===(u=null==o?void 0:o.applyLocally)||void 0===u||u,E=new q.BH,B=$f(c,()=>{});return function Iy(c,r,o,u,p,E){Uu(c,"transaction on "+r);const A={path:r,update:o,onComplete:u,status:null,order:xa(),applyLocally:E,retryCount:0,unwatcher:p,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},B=sm(c,r,void 0);A.currentInputSnapshot=B;const Z=A.update(B.val());if(void 0===Z)A.unwatcher(),A.currentOutputSnapshotRaw=null,A.currentOutputSnapshotResolved=null,A.onComplete&&A.onComplete(null,!1,A.currentInputSnapshot);else{ku("transaction failed: Data returned ",Z,A.path),A.status=0;const ie=Bc(c.transactionQueueTree_,r),Qe=Pu(ie)||[];let ft;Qe.push(A),iu(ie,Qe),"object"==typeof Z&&null!==Z&&(0,q.r3)(Z,".priority")?(ft=(0,q.DV)(Z,".priority"),(0,q.hu)(Ud(ft),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ft=(Mh(c.serverSyncTree_,r)||Kr.EMPTY_NODE).getPriority().val();const At=Nf(c),qt=li(Z,ft),Xt=xf(qt,B,At);A.currentOutputSnapshotRaw=qt,A.currentOutputSnapshotResolved=Xt,A.currentWriteId=kf(c);const Sn=Qg(c.serverSyncTree_,r,Xt,A.currentWriteId,A.applyLocally);Xa(c.eventQueue_,r,Sn),Wr(c,c.transactionQueueTree_)}}(c._repo,c._path,r,(Z,ie,Qe)=>{let ft=null;Z?E.reject(Z):(ft=new Hd(Qe,new Wl(c._repo,c._path),ji),E.resolve(new Kf(ie,ft)))},B,p),E.promise}(this._delegate,r,{applyLocally:u}).then(E=>new Jp(E.committed,new Sl(this.database,E.snapshot)));return o&&p.then(E=>o(null,E.committed,E.snapshot),E=>o(E,!1,null)),p}setPriority(r,o){(0,q.Dv)("Reference.setPriority",1,2,arguments.length),(0,q.Wj)("Reference.setPriority","onComplete",o,!0);const u=function Ty(c,r){c=(0,q.m9)(c),La("setPriority",c._path),Vd("setPriority",r,!1);const o=new q.BH;return im(c._repo,jr(c._path,".priority"),r,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,r);return o&&u.then(()=>o(null),p=>o(p)),u}push(r,o){(0,q.Dv)("Reference.push",0,2,arguments.length),(0,q.Wj)("Reference.push","onComplete",o,!0);const u=function am(c,r){c=(0,q.m9)(c),La("push",c._path),Hl("push",r,c._path,!0);const o=$u(c._repo),u=Vp(o),p=Tl(c,u),E=Tl(c,u);let A;return A=null!=r?zp(E,r).then(()=>E):Promise.resolve(E),p.then=A.then.bind(A),p.catch=A.then.bind(A,void 0),p}(this._delegate,r),p=u.then(A=>new ha(this.database,A));o&&p.then(()=>o(null),A=>o(A));const E=new ha(this.database,u);return E.then=p.then.bind(p),E.catch=p.catch.bind(p,void 0),E}onDisconnect(){return La("Reference.onDisconnect",this._delegate._path),new qh(new V_(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Yh{constructor(r,o){this._delegate=r,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ny,forceLongPolling:ky}}useEmulator(r,o,u={}){!function Ly(c,r,o,u={}){(c=(0,q.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&Nr("Cannot call useEmulator() after instance has already been initialized.");const p=c._repoInternal;let E;if(p.repoInfo_.nodeAdmin)u.mockUserToken&&Nr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),E=new hn(hn.OWNER);else if(u.mockUserToken){const A="string"==typeof u.mockUserToken?u.mockUserToken:(0,q.Sg)(u.mockUserToken,c.app.options.projectId);E=new hn(A)}!function qp(c,r,o,u){c.repoInfo_=new Po(`${r}:${o}`,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams,!0),u&&(c.authTokenProvider_=u)}(p,r,o,E)}(this._delegate,r,o,u)}ref(r){if((0,q.Dv)("database.ref",0,1,arguments.length),r instanceof ha){const o=Dy(this._delegate,r.toString());return new ha(this,o)}{const o=ju(this._delegate,r);return new ha(this,o)}}refFromURL(r){(0,q.Dv)("database.refFromURL",1,1,arguments.length);const u=Dy(this._delegate,r);return new ha(this,u)}goOffline(){return(0,q.Dv)("database.goOffline",0,0,arguments.length),function Wf(c){(c=(0,q.m9)(c))._checkNotDeleted("goOffline"),Lh(c._repo)}(this._delegate)}goOnline(){return(0,q.Dv)("database.goOnline",0,0,arguments.length),function W_(c){(c=(0,q.m9)(c))._checkNotDeleted("goOnline"),function Ey(c){c.persistentConnection_&&c.persistentConnection_.resume(nm)}(c._repo)}(this._delegate)}}Yh.ServerValue={TIMESTAMP:function By(){return mm}(),increment:c=>function $a(c){return{".sv":{increment:c}}}(c)};var Wd=Object.freeze({__proto__:null,initStandalone:function eg({app:c,url:r,version:o,customAuthImpl:u,namespace:p,nodeAdmin:E=!1}){Ga(o);const A=new pt.zt("auth-internal",new pt.H0("database-standalone"));return A.setComponent(new pt.wA("auth-internal",()=>u,"PRIVATE")),{instance:new Yh(Kh(c,A,void 0,r,E),c),namespace:p}}});const cu=Yh.ServerValue;function Zh(c){return null==c}function Vc(c){return"function"==typeof c.set}function Qh(c,r){return Vc(r)?r:c.ref(r)}function Vy(c,r){if(function Wu(c){return"string"==typeof c}(c))return r.stringCase();if(Vc(c))return r.firebaseCase();if(function el(c){return"function"==typeof c.exportVal}(c))return r.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof c)}function Ku(c,r,o="on",u=Ns.z){return new Fe.y(p=>{let E=null;return E=c[o](r,(A,B)=>{u.schedule(()=>{p.next({snapshot:A,prevKey:B})}),"once"===o&&u.schedule(()=>p.complete())},A=>{u.schedule(()=>p.error(A))}),"on"===o?{unsubscribe(){null!=E&&c.off(r,E)}}:{unsubscribe(){}}}).pipe((0,Se.U)(p=>{const{snapshot:E,prevKey:A}=p;let B=null;return E.exists()&&(B=E.key),{type:r,payload:E,prevKey:A,key:B}}),(0,il.B)())}function rg(c,r){const o=c.length;for(let u=0;u<o;u++)if(c[u].payload.key===r)return u;return-1}function qf(c,r){const{payload:o,prevKey:u,key:p}=r,E=rg(c,p),A=function vm(c,r){if(Zh(r))return 0;{const o=rg(c,r);return-1===o?c.length:o+1}}(c,u);switch(r.type){case"value":if(r.payload&&r.payload.exists()){let B=null;r.payload.forEach(Z=>{const ie={payload:Z,type:"value",prevKey:B,key:Z.key};return B=Z.key,c=[...c,ie],!1})}return c;case"child_added":if(E>-1){const B=c[E-1];(B&&B.key||null)!==u&&(c=c.filter(Z=>Z.payload.key!==o.key)).splice(A,0,r)}else{if(null==u)return[r,...c];(c=c.slice()).splice(A,0,r)}return c;case"child_removed":return c.filter(B=>B.payload.key!==o.key);case"child_changed":return c.map(B=>B.payload.key===p?r:B);case"child_moved":if(E>-1){const B=c.splice(E,1)[0];return(c=c.slice()).splice(A,0,B),c}return c;default:return c}}function jy(c){return(Zh(c)||0===c.length)&&(c=["child_added","child_removed","child_changed","child_moved"]),c}function Em(c,r,o){return function ng(c,r,o){return Ku(c,"value","once",o).pipe((0,_e.w)(u=>{const p=[(0,je.of)(u)];return r.forEach(E=>p.push(Ku(c,E,"on",o))),(0,Ha.T)(...p).pipe((0,Gs.R)(qf,[]))}),(0,sl.x)())}(c,r=jy(r),o)}function ig(c,r,o){const u=(r=jy(r)).map(p=>Ku(c,p,"on",o));return(0,Ha.T)(...u)}function Im(c,r){return function(u,p){return Vy(u,{stringCase:()=>c.child(u)[r](p),firebaseCase:()=>u[r](p),snapshotCase:()=>u.ref[r](p)})}}function zy(c){return function(o){return o?Vy(o,{stringCase:()=>c.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):c.remove()}}function sg(c,r){return function(){return Ku(c,"value","on",r)}}!function tg(c){c.INTERNAL.registerComponent(new pt.wA("database-compat",(r,{instanceIdentifier:o})=>{const u=r.getProvider("app-compat").getImmediate(),p=r.getProvider("database").getImmediate({identifier:o});return new Yh(p,u)},"PUBLIC").setServiceProps({Reference:ha,Query:da,Database:Yh,DataSnapshot:Sl,enableLogging:gm,INTERNAL:Wd,ServerValue:cu}).setMultipleInstances(!0)),c.registerVersion("@firebase/database-compat","0.3.4")}(lt.Z);const X_=new y.OlP("angularfire2.realtimeDatabaseURL"),bm=new y.OlP("angularfire2.database.use-emulator");let J_=(()=>{class c{constructor(o,u,p,E,A,B,Z,ie,Qe,ft,At,qt,Xt,Sn,sr){this.schedulers=B;const Hr=Z,_i=(0,pe.on)(o,A,u);ie&&(0,De.nw)(_i,A,Qe,At,qt,Xt,ft,Sn),this.database=(0,pe.cc)(`${_i.name}.database.${p}`,"AngularFireDatabase",_i.name,()=>{const vi=A.runOutsideAngular(()=>_i.database(p||void 0));return Hr&&vi.useEmulator(...Hr),vi},[Hr])}list(o,u){const p=this.schedulers.ngZone.runOutsideAngular(()=>Qh(this.database,o));let E=p;return u&&(E=u(p)),function Gy(c,r){const o=r.schedulers.outsideAngular,u=r.schedulers.ngZone.run(()=>c.ref);return{query:c,update:Im(u,"update"),set:Im(u,"set"),push:p=>u.push(p),remove:zy(u),snapshotChanges:p=>Em(c,p,o).pipe(oe.iC),stateChanges:p=>ig(c,p,o).pipe(oe.iC),auditTrail:p=>function Z_(c,r,o){return function Q_(c,r,o){return function Hy(c,r){return Ku(c,"value","on",r).pipe((0,Se.U)(o=>{let u;return o.payload.forEach(p=>(u=p.key,!1)),{data:o,lastKeyToLoad:u}}))}(c,o).pipe(function Qs(...c){const r=(0,ks.jO)(c);return(0,_a.e)((o,u)=>{const p=c.length,E=new Array(p);let A=c.map(()=>!1),B=!1;for(let Z=0;Z<p;Z++)(0,uo.Xf)(c[Z]).subscribe((0,za.x)(u,ie=>{E[Z]=ie,!B&&!A[Z]&&(A[Z]=!0,(B=A.every(ol.y))&&(A=null))},os.Z));o.subscribe((0,za.x)(u,Z=>{if(B){const ie=[Z,...E];u.next(r?r(...ie):ie)}}))})}(r),(0,Se.U)(([p,E])=>{const A=p.lastKeyToLoad,B=E.map(Z=>Z.key);return{actions:E,lastKeyToLoad:A,loadedKeys:B}}),function Co(c){return(0,_a.e)((r,o)=>{let u=!1,p=0;r.subscribe((0,za.x)(o,E=>(u||(u=!c(E,p++)))&&o.next(E)))})}(p=>-1===p.loadedKeys.indexOf(p.lastKeyToLoad)),(0,Se.U)(p=>p.actions))}(c,ig(c,r).pipe((0,Gs.R)((p,E)=>[...p,E],[])),o)}(c,p,o).pipe(oe.iC),valueChanges:(p,E)=>Em(c,p,o).pipe((0,Se.U)(B=>B.map(Z=>E&&E.idField?Object.assign(Object.assign({},Z.payload.val()),{[E.idField]:Z.key}):Z.payload.val())),oe.iC)}}(E,this)}object(o){return function wm(c,r){return{query:c,snapshotChanges:()=>sg(c,r.schedulers.outsideAngular)().pipe(oe.iC),update:o=>c.ref.update(o),set:o=>c.ref.set(o),remove:()=>c.ref.remove(),valueChanges:()=>sg(c,r.schedulers.outsideAngular)().pipe(oe.iC,(0,Se.U)(u=>u.payload.exists()?u.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Qh(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return c.\u0275fac=function(o){return new(o||c)(y.LFG(pe.Dh),y.LFG(pe.xv,8),y.LFG(X_,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(oe.HU),y.LFG(bm,8),y.LFG(De.zQ,8),y.LFG(De.Qv,8),y.LFG(De.L6,8),y.LFG(De._Q,8),y.LFG(De.rT,8),y.LFG(De.lh,8),y.LFG(De.f7,8),y.LFG(Dr.nm,8))},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Cm=(()=>{class c{constructor(){Pn.Z.registerVersion("angularfire",oe.q4.full,"rtdb-compat")}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=y.oAB({type:c}),c.\u0275inj=y.cJS({providers:[J_]}),c})();var gs=k(7340);function Ky(c){return new y.vHH(3e3,!1)}function Pm(){return typeof window<"u"&&typeof window.document<"u"}function dg(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Xu(c){switch(c.length){case 0:return new gs.ZN;case 1:return c[0];default:return new gs.ZE(c)}}function hg(c,r,o,u,p=new Map,E=new Map){const A=[],B=[];let Z=-1,ie=null;if(u.forEach(Qe=>{const ft=Qe.get("offset"),At=ft==Z,qt=At&&ie||new Map;Qe.forEach((Xt,Sn)=>{let sr=Sn,Hr=Xt;if("offset"!==Sn)switch(sr=r.normalizePropertyName(sr,A),Hr){case gs.k1:Hr=p.get(Sn);break;case gs.l3:Hr=E.get(Sn);break;default:Hr=r.normalizeStyleValue(Sn,sr,Hr,A)}qt.set(sr,Hr)}),At||B.push(qt),ie=qt,Z=ft}),A.length)throw function Xh(c){return new y.vHH(3502,!1)}();return B}function fg(c,r,o,u){switch(r){case"start":c.onStart(()=>u(o&&Qf(o,"start",c)));break;case"done":c.onDone(()=>u(o&&Qf(o,"done",c)));break;case"destroy":c.onDestroy(()=>u(o&&Qf(o,"destroy",c)))}}function Qf(c,r,o){const u=o.totalTime,E=nf(c.element,c.triggerName,c.fromState,c.toState,r||c.phaseName,null==u?c.totalTime:u,!!o.disabled),A=c._data;return null!=A&&(E._data=A),E}function nf(c,r,o,u,p="",E=0,A){return{element:c,triggerName:r,fromState:o,toState:u,phaseName:p,totalTime:E,disabled:!!A}}function fa(c,r,o){let u=c.get(r);return u||c.set(r,u=o),u}function pg(c){const r=c.indexOf(":");return[c.substring(1,r),c.slice(r+1)]}let rf=(c,r)=>!1,qd=(c,r,o)=>[],sf=null;function jc(c){const r=c.parentNode||c.host;return r===sf?null:r}(dg()||typeof Element<"u")&&(Pm()?(sf=(()=>document.documentElement)(),rf=(c,r)=>{for(;r;){if(r===c)return!0;r=jc(r)}return!1}):rf=(c,r)=>c.contains(r),qd=(c,r,o)=>{if(o)return Array.from(c.querySelectorAll(r));const u=c.querySelector(r);return u?[u]:[]});let Hc=null,gg=!1;const Jf=rf,af=qd;let Nm=(()=>{class c{validateStyleProperty(o){return function Xy(c){Hc||(Hc=function Xf(){return typeof document<"u"?document.body:null}()||{},gg=!!Hc.style&&"WebkitAppearance"in Hc.style);let r=!0;return Hc.style&&!function Yd(c){return"ebkit"==c.substring(1,6)}(c)&&(r=c in Hc.style,!r&&gg&&(r="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in Hc.style)),r}(o)}matchesElement(o,u){return!1}containsElement(o,u){return Jf(o,u)}getParentElement(o){return jc(o)}query(o,u,p){return af(o,u,p)}computeStyle(o,u,p){return p||""}animate(o,u,p,E,A,B=[],Z){return new gs.ZN(p,E)}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac}),c})(),lf=(()=>{class c{}return c.NOOP=new Nm,c})();const mg=1e3,_g="ng-enter",Ju="ng-leave",uf="ng-trigger",Zd=".ng-trigger",ep="ng-animating",uu=".ng-animating";function Yl(c){if("number"==typeof c)return c;const r=c.match(/^(-?[\.\d]+)(m?s)/);return!r||r.length<2?0:vg(parseFloat(r[1]),r[2])}function vg(c,r){return"s"===r?c*mg:c}function tp(c,r,o){return c.hasOwnProperty("duration")?c:function e_(c,r,o){let p,E=0,A="";if("string"==typeof c){const B=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===B)return r.push(Ky()),{duration:0,delay:0,easing:""};p=vg(parseFloat(B[1]),B[2]);const Z=B[3];null!=Z&&(E=vg(parseFloat(Z),B[4]));const ie=B[5];ie&&(A=ie)}else p=c;if(!o){let B=!1,Z=r.length;p<0&&(r.push(function Dm(){return new y.vHH(3100,!1)}()),B=!0),E<0&&(r.push(function ev(){return new y.vHH(3101,!1)}()),B=!0),B&&r.splice(Z,0,Ky())}return{duration:p,delay:E,easing:A}}(c,r,o)}function Qd(c,r={}){return Object.keys(c).forEach(o=>{r[o]=c[o]}),r}function km(c){const r=new Map;return Object.keys(c).forEach(o=>{r.set(o,c[o])}),r}function Ua(c,r=new Map,o){if(o)for(let[u,p]of o)r.set(u,p);for(let[u,p]of c)r.set(u,p);return r}function t_(c,r,o){return o?r+":"+o+";":""}function n_(c){let r="";for(let o=0;o<c.style.length;o++){const u=c.style.item(o);r+=t_(0,u,c.style.getPropertyValue(u))}for(const o in c.style)c.style.hasOwnProperty(o)&&!o.startsWith("_")&&(r+=t_(0,s_(o),c.style[o]));c.setAttribute("style",r)}function Al(c,r,o){c.style&&(r.forEach((u,p)=>{const E=td(p);o&&!o.has(p)&&o.set(p,c.style[E]),c.style[E]=u}),dg()&&n_(c))}function Va(c,r){c.style&&(r.forEach((o,u)=>{const p=td(u);c.style[p]=""}),dg()&&n_(c))}function ed(c){return Array.isArray(c)?1==c.length?c[0]:(0,gs.vP)(c):c}const df=new RegExp("{{\\s*(.+?)\\s*}}","g");function Eg(c){let r=[];if("string"==typeof c){let o;for(;o=df.exec(c);)r.push(o[1]);df.lastIndex=0}return r}function wi(c,r,o){const u=c.toString(),p=u.replace(df,(E,A)=>{let B=r[A];return null==B&&(o.push(function Tm(c){return new y.vHH(3003,!1)}()),B=""),B.toString()});return p==u?c:p}function rp(c){const r=[];let o=c.next();for(;!o.done;)r.push(o.value),o=c.next();return r}const i_=/-+([a-z0-9])/g;function td(c){return c.replace(i_,(...r)=>r[1].toUpperCase())}function s_(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function to(c,r,o){switch(r.type){case 7:return c.visitTrigger(r,o);case 0:return c.visitState(r,o);case 1:return c.visitTransition(r,o);case 2:return c.visitSequence(r,o);case 3:return c.visitGroup(r,o);case 4:return c.visitAnimate(r,o);case 5:return c.visitKeyframes(r,o);case 6:return c.visitStyle(r,o);case 8:return c.visitReference(r,o);case 9:return c.visitAnimateChild(r,o);case 10:return c.visitAnimateRef(r,o);case 11:return c.visitQuery(r,o);case 12:return c.visitStagger(r,o);default:throw function Sm(c){return new y.vHH(3004,!1)}()}}function Lm(c,r){return window.getComputedStyle(c)[r]}const sp="*";function Rs(c,r){const o=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(u=>function iv(c,r,o){if(":"==c[0]){const Z=function Jv(c,r){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,u)=>parseFloat(u)>parseFloat(o);case":decrement":return(o,u)=>parseFloat(u)<parseFloat(o);default:return r.push(function Mm(c){return new y.vHH(3016,!1)}()),"* => *"}}(c,o);if("function"==typeof Z)return void r.push(Z);c=Z}const u=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==u||u.length<4)return o.push(function tl(c){return new y.vHH(3015,!1)}()),r;const p=u[1],E=u[2],A=u[3];r.push(Zl(p,A));"<"==E[0]&&!(p==sp&&A==sp)&&r.push(Zl(A,p))}(u,o,r)):o.push(c),o}const Ts=new Set(["true","1"]),Jd=new Set(["false","0"]);function Zl(c,r){const o=Ts.has(c)||Jd.has(c),u=Ts.has(r)||Jd.has(r);return(p,E)=>{let A=c==sp||c==p,B=r==sp||r==E;return!A&&o&&"boolean"==typeof p&&(A=p?Ts.has(c):Jd.has(c)),!B&&u&&"boolean"==typeof E&&(B=E?Ts.has(r):Jd.has(r)),A&&B}}const $m=new RegExp("s*:selfs*,?","g");function Ql(c,r,o,u){return new _c(c).build(r,o,u)}class _c{constructor(r){this._driver=r}build(r,o,u){const p=new ov(o);return this._resetContextStyleTimingState(p),to(this,ed(r),p)}_resetContextStyleTimingState(r){r.currentQuerySelector="",r.collectedStyles=new Map,r.collectedStyles.set("",new Map),r.currentTime=0}visitTrigger(r,o){let u=o.queryCount=0,p=o.depCount=0;const E=[],A=[];return"@"==r.name.charAt(0)&&o.errors.push(function qy(){return new y.vHH(3006,!1)}()),r.definitions.forEach(B=>{if(this._resetContextStyleTimingState(o),0==B.type){const Z=B,ie=Z.name;ie.toString().split(/\s*,\s*/).forEach(Qe=>{Z.name=Qe,E.push(this.visitState(Z,o))}),Z.name=ie}else if(1==B.type){const Z=this.visitTransition(B,o);u+=Z.queryCount,p+=Z.depCount,A.push(Z)}else o.errors.push(function Yy(){return new y.vHH(3007,!1)}())}),{type:7,name:r.name,states:E,transitions:A,queryCount:u,depCount:p,options:null}}visitState(r,o){const u=this.visitStyle(r.styles,o),p=r.options&&r.options.params||null;if(u.containsDynamicStyles){const E=new Set,A=p||{};u.styles.forEach(B=>{B instanceof Map&&B.forEach(Z=>{Eg(Z).forEach(ie=>{A.hasOwnProperty(ie)||E.add(ie)})})}),E.size&&(rp(E.values()),o.errors.push(function ag(c,r){return new y.vHH(3008,!1)}()))}return{type:0,name:r.name,style:u,options:p?{params:p}:null}}visitTransition(r,o){o.queryCount=0,o.depCount=0;const u=to(this,ed(r.animation),o);return{type:1,matchers:Rs(r.expr,o.errors),animation:u,queryCount:o.queryCount,depCount:o.depCount,options:vc(r.options)}}visitSequence(r,o){return{type:2,steps:r.steps.map(u=>to(this,u,o)),options:vc(r.options)}}visitGroup(r,o){const u=o.currentTime;let p=0;const E=r.steps.map(A=>{o.currentTime=u;const B=to(this,A,o);return p=Math.max(p,o.currentTime),B});return o.currentTime=p,{type:3,steps:E,options:vc(r.options)}}visitAnimate(r,o){const u=function c_(c,r){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return op(tp(c,r).duration,0,"");const o=c;if(o.split(/\s+/).some(E=>"{"==E.charAt(0)&&"{"==E.charAt(1))){const E=op(0,0,"");return E.dynamic=!0,E.strValue=o,E}const p=tp(o,r);return op(p.duration,p.delay,p.easing)}(r.timings,o.errors);o.currentAnimateTimings=u;let p,E=r.styles?r.styles:(0,gs.oB)({});if(5==E.type)p=this.visitKeyframes(E,o);else{let A=r.styles,B=!1;if(!A){B=!0;const ie={};u.easing&&(ie.easing=u.easing),A=(0,gs.oB)(ie)}o.currentTime+=u.duration+u.delay;const Z=this.visitStyle(A,o);Z.isEmptyStep=B,p=Z}return o.currentAnimateTimings=null,{type:4,timings:u,style:p,options:null}}visitStyle(r,o){const u=this._makeStyleAst(r,o);return this._validateStyleAst(u,o),u}_makeStyleAst(r,o){const u=[],p=Array.isArray(r.styles)?r.styles:[r.styles];for(let B of p)"string"==typeof B?B===gs.l3?u.push(B):o.errors.push(new y.vHH(3002,!1)):u.push(km(B));let E=!1,A=null;return u.forEach(B=>{if(B instanceof Map&&(B.has("easing")&&(A=B.get("easing"),B.delete("easing")),!E))for(let Z of B.values())if(Z.toString().indexOf("{{")>=0){E=!0;break}}),{type:6,styles:u,easing:A,offset:r.offset,containsDynamicStyles:E,options:null}}_validateStyleAst(r,o){const u=o.currentAnimateTimings;let p=o.currentTime,E=o.currentTime;u&&E>0&&(E-=u.duration+u.delay),r.styles.forEach(A=>{"string"!=typeof A&&A.forEach((B,Z)=>{const ie=o.collectedStyles.get(o.currentQuerySelector),Qe=ie.get(Z);let ft=!0;Qe&&(E!=p&&E>=Qe.startTime&&p<=Qe.endTime&&(o.errors.push(function Yf(c,r,o,u,p){return new y.vHH(3010,!1)}()),ft=!1),E=Qe.startTime),ft&&ie.set(Z,{startTime:E,endTime:p}),o.options&&function r_(c,r,o){const u=r.params||{},p=Eg(c);p.length&&p.forEach(E=>{u.hasOwnProperty(E)||o.push(function og(c){return new y.vHH(3001,!1)}())})}(B,o.options,o.errors)})})}visitKeyframes(r,o){const u={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function nv(){return new y.vHH(3011,!1)}()),u;let E=0;const A=[];let B=!1,Z=!1,ie=0;const Qe=r.steps.map(Hr=>{const _i=this._makeStyleAst(Hr,o);let vi=null!=_i.offset?_i.offset:function av(c){if("string"==typeof c)return null;let r=null;if(Array.isArray(c))c.forEach(o=>{if(o instanceof Map&&o.has("offset")){const u=o;r=parseFloat(u.get("offset")),u.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const o=c;r=parseFloat(o.get("offset")),o.delete("offset")}return r}(_i.styles),Si=0;return null!=vi&&(E++,Si=_i.offset=vi),Z=Z||Si<0||Si>1,B=B||Si<ie,ie=Si,A.push(Si),_i});Z&&o.errors.push(function Kl(){return new y.vHH(3012,!1)}()),B&&o.errors.push(function Kd(){return new y.vHH(3200,!1)}());const ft=r.steps.length;let At=0;E>0&&E<ft?o.errors.push(function ta(){return new y.vHH(3202,!1)}()):0==E&&(At=1/(ft-1));const qt=ft-1,Xt=o.currentTime,Sn=o.currentAnimateTimings,sr=Sn.duration;return Qe.forEach((Hr,_i)=>{const vi=At>0?_i==qt?1:At*_i:A[_i],Si=vi*sr;o.currentTime=Xt+Sn.delay+Si,Sn.duration=Si,this._validateStyleAst(Hr,o),Hr.offset=vi,u.styles.push(Hr)}),u}visitReference(r,o){return{type:8,animation:to(this,ed(r.animation),o),options:vc(r.options)}}visitAnimateChild(r,o){return o.depCount++,{type:9,options:vc(r.options)}}visitAnimateRef(r,o){return{type:10,animation:this.visitReference(r.animation,o),options:vc(r.options)}}visitQuery(r,o){const u=o.currentQuerySelector,p=r.options||{};o.queryCount++,o.currentQuery=r;const[E,A]=function l_(c){const r=!!c.split(/\s*,\s*/).find(o=>":self"==o);return r&&(c=c.replace($m,"")),c=c.replace(/@\*/g,Zd).replace(/@\w+/g,o=>Zd+"-"+o.slice(1)).replace(/:animating/g,uu),[c,r]}(r.selector);o.currentQuerySelector=u.length?u+" "+E:E,fa(o.collectedStyles,o.currentQuerySelector,new Map);const B=to(this,ed(r.animation),o);return o.currentQuery=null,o.currentQuerySelector=u,{type:11,selector:E,limit:p.limit||0,optional:!!p.optional,includeSelf:A,animation:B,originalSelector:r.selector,options:vc(r.options)}}visitStagger(r,o){o.currentQuery||o.errors.push(function ql(){return new y.vHH(3013,!1)}());const u="full"===r.timings?{duration:0,delay:0,easing:"full"}:tp(r.timings,o.errors,!0);return{type:12,animation:to(this,ed(r.animation),o),timings:u,options:null}}}class ov{constructor(r){this.errors=r,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vc(c){return c?(c=Qd(c)).params&&(c.params=function sv(c){return c?Qd(c):null}(c.params)):c={},c}function op(c,r,o){return{duration:c,delay:r,easing:o}}function Da(c,r,o,u,p,E,A=null,B=!1){return{type:1,element:c,keyframes:r,preStyleProps:o,postStyleProps:u,duration:p,delay:E,totalTime:p+E,easing:A,subTimeline:B}}class Jl{constructor(){this._map=new Map}get(r){return this._map.get(r)||[]}append(r,o){let u=this._map.get(r);u||this._map.set(r,u=[]),u.push(...o)}has(r){return this._map.has(r)}clear(){this._map.clear()}}const wg=new RegExp(":enter","g"),d_=new RegExp(":leave","g");function th(c,r,o,u,p,E=new Map,A=new Map,B,Z,ie=[]){return(new h_).buildKeyframes(c,r,o,u,p,E,A,B,Z,ie)}class h_{buildKeyframes(r,o,u,p,E,A,B,Z,ie,Qe=[]){ie=ie||new Jl;const ft=new bg(r,o,ie,p,E,Qe,[]);ft.options=Z;const At=Z.delay?Yl(Z.delay):0;ft.currentTimeline.delayNextStep(At),ft.currentTimeline.setStyles([A],null,ft.errors,Z),to(this,u,ft);const qt=ft.timelines.filter(Xt=>Xt.containsAnimation());if(qt.length&&B.size){let Xt;for(let Sn=qt.length-1;Sn>=0;Sn--){const sr=qt[Sn];if(sr.element===o){Xt=sr;break}}Xt&&!Xt.allowOnlyTimelineStyles()&&Xt.setStyles([B],null,ft.errors,Z)}return qt.length?qt.map(Xt=>Xt.buildKeyframes()):[Da(o,[],[],[],0,At,"",!1)]}visitTrigger(r,o){}visitState(r,o){}visitTransition(r,o){}visitAnimateChild(r,o){const u=o.subInstructions.get(o.element);if(u){const p=o.createSubContext(r.options),E=o.currentTimeline.currentTime,A=this._visitSubInstructions(u,p,p.options);E!=A&&o.transformIntoNewTimeline(A)}o.previousNode=r}visitAnimateRef(r,o){const u=o.createSubContext(r.options);u.transformIntoNewTimeline(),this._applyAnimationRefDelays([r.options,r.animation.options],o,u),this.visitReference(r.animation,u),o.transformIntoNewTimeline(u.currentTimeline.currentTime),o.previousNode=r}_applyAnimationRefDelays(r,o,u){for(const E of r){const A=null==E?void 0:E.delay;if(A){var p;const B="number"==typeof A?A:Yl(wi(A,null!==(p=null==E?void 0:E.params)&&void 0!==p?p:{},o.errors));u.delayNextStep(B)}}}_visitSubInstructions(r,o,u){let E=o.currentTimeline.currentTime;const A=null!=u.duration?Yl(u.duration):null,B=null!=u.delay?Yl(u.delay):null;return 0!==A&&r.forEach(Z=>{const ie=o.appendInstructionToTimeline(Z,A,B);E=Math.max(E,ie.duration+ie.delay)}),E}visitReference(r,o){o.updateOptions(r.options,!0),to(this,r.animation,o),o.previousNode=r}visitSequence(r,o){const u=o.subContextCount;let p=o;const E=r.options;if(E&&(E.params||E.delay)&&(p=o.createSubContext(E),p.transformIntoNewTimeline(),null!=E.delay)){6==p.previousNode.type&&(p.currentTimeline.snapshotCurrentStyles(),p.previousNode=nd);const A=Yl(E.delay);p.delayNextStep(A)}r.steps.length&&(r.steps.forEach(A=>to(this,A,p)),p.currentTimeline.applyStylesToKeyframe(),p.subContextCount>u&&p.transformIntoNewTimeline()),o.previousNode=r}visitGroup(r,o){const u=[];let p=o.currentTimeline.currentTime;const E=r.options&&r.options.delay?Yl(r.options.delay):0;r.steps.forEach(A=>{const B=o.createSubContext(r.options);E&&B.delayNextStep(E),to(this,A,B),p=Math.max(p,B.currentTimeline.currentTime),u.push(B.currentTimeline)}),u.forEach(A=>o.currentTimeline.mergeTimelineCollectedStyles(A)),o.transformIntoNewTimeline(p),o.previousNode=r}_visitTiming(r,o){if(r.dynamic){const u=r.strValue;return tp(o.params?wi(u,o.params,o.errors):u,o.errors)}return{duration:r.duration,delay:r.delay,easing:r.easing}}visitAnimate(r,o){const u=o.currentAnimateTimings=this._visitTiming(r.timings,o),p=o.currentTimeline;u.delay&&(o.incrementTime(u.delay),p.snapshotCurrentStyles());const E=r.style;5==E.type?this.visitKeyframes(E,o):(o.incrementTime(u.duration),this.visitStyle(E,o),p.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=r}visitStyle(r,o){const u=o.currentTimeline,p=o.currentAnimateTimings;!p&&u.hasCurrentStyleProperties()&&u.forwardFrame();const E=p&&p.easing||r.easing;r.isEmptyStep?u.applyEmptyStep(E):u.setStyles(r.styles,E,o.errors,o.options),o.previousNode=r}visitKeyframes(r,o){const u=o.currentAnimateTimings,p=o.currentTimeline.duration,E=u.duration,B=o.createSubContext().currentTimeline;B.easing=u.easing,r.styles.forEach(Z=>{B.forwardTime((Z.offset||0)*E),B.setStyles(Z.styles,Z.easing,o.errors,o.options),B.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(B),o.transformIntoNewTimeline(p+E),o.previousNode=r}visitQuery(r,o){const u=o.currentTimeline.currentTime,p=r.options||{},E=p.delay?Yl(p.delay):0;E&&(6===o.previousNode.type||0==u&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=nd);let A=u;const B=o.invokeQuery(r.selector,r.originalSelector,r.limit,r.includeSelf,!!p.optional,o.errors);o.currentQueryTotal=B.length;let Z=null;B.forEach((ie,Qe)=>{o.currentQueryIndex=Qe;const ft=o.createSubContext(r.options,ie);E&&ft.delayNextStep(E),ie===o.element&&(Z=ft.currentTimeline),to(this,r.animation,ft),ft.currentTimeline.applyStylesToKeyframe(),A=Math.max(A,ft.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(A),Z&&(o.currentTimeline.mergeTimelineCollectedStyles(Z),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=r}visitStagger(r,o){const u=o.parentContext,p=o.currentTimeline,E=r.timings,A=Math.abs(E.duration),B=A*(o.currentQueryTotal-1);let Z=A*o.currentQueryIndex;switch(E.duration<0?"reverse":E.easing){case"reverse":Z=B-Z;break;case"full":Z=u.currentStaggerTime}const Qe=o.currentTimeline;Z&&Qe.delayNextStep(Z);const ft=Qe.currentTime;to(this,r.animation,o),o.previousNode=r,u.currentStaggerTime=p.currentTime-ft+(p.startTime-u.currentTimeline.startTime)}}const nd={};class bg{constructor(r,o,u,p,E,A,B,Z){this._driver=r,this.element=o,this.subInstructions=u,this._enterClassName=p,this._leaveClassName=E,this.errors=A,this.timelines=B,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Z||new ec(this._driver,o,0),B.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(r,o){if(!r)return;const u=r;let p=this.options;null!=u.duration&&(p.duration=Yl(u.duration)),null!=u.delay&&(p.delay=Yl(u.delay));const E=u.params;if(E){let A=p.params;A||(A=this.options.params={}),Object.keys(E).forEach(B=>{(!o||!A.hasOwnProperty(B))&&(A[B]=wi(E[B],A,this.errors))})}}_copyOptions(){const r={};if(this.options){const o=this.options.params;if(o){const u=r.params={};Object.keys(o).forEach(p=>{u[p]=o[p]})}}return r}createSubContext(r=null,o,u){const p=o||this.element,E=new bg(this._driver,p,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(p,u||0));return E.previousNode=this.previousNode,E.currentAnimateTimings=this.currentAnimateTimings,E.options=this._copyOptions(),E.updateOptions(r),E.currentQueryIndex=this.currentQueryIndex,E.currentQueryTotal=this.currentQueryTotal,E.parentContext=this,this.subContextCount++,E}transformIntoNewTimeline(r){return this.previousNode=nd,this.currentTimeline=this.currentTimeline.fork(this.element,r),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(r,o,u){const p={duration:null!=o?o:r.duration,delay:this.currentTimeline.currentTime+(null!=u?u:0)+r.delay,easing:""},E=new nh(this._driver,r.element,r.keyframes,r.preStyleProps,r.postStyleProps,p,r.stretchStartingKeyframe);return this.timelines.push(E),p}incrementTime(r){this.currentTimeline.forwardTime(this.currentTimeline.duration+r)}delayNextStep(r){r>0&&this.currentTimeline.delayNextStep(r)}invokeQuery(r,o,u,p,E,A){let B=[];if(p&&B.push(this.element),r.length>0){r=(r=r.replace(wg,"."+this._enterClassName)).replace(d_,"."+this._leaveClassName);let ie=this._driver.query(this.element,r,1!=u);0!==u&&(ie=u<0?ie.slice(ie.length+u,ie.length):ie.slice(0,u)),B.push(...ie)}return!E&&0==B.length&&A.push(function Zf(c){return new y.vHH(3014,!1)}()),B}}class ec{constructor(r,o,u,p){this._driver=r,this.element=o,this.startTime=u,this._elementTimelineStylesLookup=p,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(r){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+r),o&&this.snapshotCurrentStyles()):this.startTime+=r}fork(r,o){return this.applyStylesToKeyframe(),new ec(this._driver,r,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(r){this.applyStylesToKeyframe(),this.duration=r,this._loadKeyframe()}_updateStyle(r,o){this._localTimelineStyles.set(r,o),this._globalTimelineStyles.set(r,o),this._styleSummary.set(r,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(r){r&&this._previousKeyframe.set("easing",r);for(let[o,u]of this._globalTimelineStyles)this._backFill.set(o,u||gs.l3),this._currentKeyframe.set(o,gs.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(r,o,u,p){o&&this._previousKeyframe.set("easing",o);const E=p&&p.params||{},A=function Um(c,r){const o=new Map;let u;return c.forEach(p=>{if("*"===p){u=u||r.keys();for(let E of u)o.set(E,gs.l3)}else Ua(p,o)}),o}(r,this._globalTimelineStyles);for(let[Z,ie]of A){const Qe=wi(ie,E,u);var B;this._pendingStyles.set(Z,Qe),this._localTimelineStyles.has(Z)||this._backFill.set(Z,null!==(B=this._globalTimelineStyles.get(Z))&&void 0!==B?B:gs.l3),this._updateStyle(Z,Qe)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((r,o)=>{this._currentKeyframe.set(o,r)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((r,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,r)}))}snapshotCurrentStyles(){for(let[r,o]of this._localTimelineStyles)this._pendingStyles.set(r,o),this._updateStyle(r,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const r=[];for(let o in this._currentKeyframe)r.push(o);return r}mergeTimelineCollectedStyles(r){r._styleSummary.forEach((o,u)=>{const p=this._styleSummary.get(u);(!p||o.time>p.time)&&this._updateStyle(u,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const r=new Set,o=new Set,u=1===this._keyframes.size&&0===this.duration;let p=[];this._keyframes.forEach((B,Z)=>{const ie=Ua(B,new Map,this._backFill);ie.forEach((Qe,ft)=>{Qe===gs.k1?r.add(ft):Qe===gs.l3&&o.add(ft)}),u||ie.set("offset",Z/this.duration),p.push(ie)});const E=r.size?rp(r.values()):[],A=o.size?rp(o.values()):[];if(u){const B=p[0],Z=new Map(B);B.set("offset",0),Z.set("offset",1),p=[B,Z]}return Da(this.element,p,E,A,this.duration,this.startTime,this.easing,!1)}}class nh extends ec{constructor(r,o,u,p,E,A,B=!1){super(r,o,A.delay),this.keyframes=u,this.preStyleProps=p,this.postStyleProps=E,this._stretchStartingKeyframe=B,this.timings={duration:A.duration,delay:A.delay,easing:A.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let r=this.keyframes,{delay:o,duration:u,easing:p}=this.timings;if(this._stretchStartingKeyframe&&o){const E=[],A=u+o,B=o/A,Z=Ua(r[0]);Z.set("offset",0),E.push(Z);const ie=Ua(r[0]);ie.set("offset",rh(B)),E.push(ie);const Qe=r.length-1;for(let ft=1;ft<=Qe;ft++){let At=Ua(r[ft]);const qt=At.get("offset");At.set("offset",rh((o+qt*u)/A)),E.push(At)}u=A,o=0,p="",r=E}return Da(this.element,r,this.preStyleProps,this.postStyleProps,u,o,p,!0)}}function rh(c,r=3){const o=Math.pow(10,r-1);return Math.round(c*o)/o}class Cg{}const f_=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Dg extends Cg{normalizePropertyName(r,o){return td(r)}normalizeStyleValue(r,o,u,p){let E="";const A=u.toString().trim();if(f_.has(o)&&0!==u&&"0"!==u)if("number"==typeof u)E="px";else{const B=u.match(/^[+-]?[\d\.]+([a-z]*)$/);B&&0==B[1].length&&p.push(function tv(c,r){return new y.vHH(3005,!1)}())}return A+E}}function ap(c,r,o,u,p,E,A,B,Z,ie,Qe,ft,At){return{type:0,element:c,triggerName:r,isRemovalTransition:p,fromState:o,fromStyles:E,toState:u,toStyles:A,timelines:B,queriedElements:Z,preStyleProps:ie,postStyleProps:Qe,totalTime:ft,errors:At}}const Tg={};class rd{constructor(r,o,u){this._triggerName=r,this.ast=o,this._stateStyles=u}match(r,o,u,p){return function p_(c,r,o,u,p){return c.some(E=>E(r,o,u,p))}(this.ast.matchers,r,o,u,p)}buildStyles(r,o,u){let p=this._stateStyles.get("*");return void 0!==r&&(p=this._stateStyles.get(null==r?void 0:r.toString())||p),p?p.buildStyles(o,u):new Map}build(r,o,u,p,E,A,B,Z,ie,Qe){var ft;const At=[],qt=this.ast.options&&this.ast.options.params||Tg,Sn=this.buildStyles(u,B&&B.params||Tg,At),sr=Z&&Z.params||Tg,Hr=this.buildStyles(p,sr,At),_i=new Set,vi=new Map,Si=new Map,rl="void"===p,pa={params:jm(sr,qt),delay:null===(ft=this.ast.options)||void 0===ft?void 0:ft.delay},ra=Qe?[]:th(r,o,this.ast.animation,E,A,Sn,Hr,pa,ie,At);let Vo=0;if(ra.forEach(Rl=>{Vo=Math.max(Rl.duration+Rl.delay,Vo)}),At.length)return ap(o,this._triggerName,u,p,rl,Sn,Hr,[],[],vi,Si,Vo,At);ra.forEach(Rl=>{const _p=Rl.element,hu=fa(vi,_p,new Set);Rl.preStyleProps.forEach(zc=>hu.add(zc));const gf=fa(Si,_p,new Set);Rl.postStyleProps.forEach(zc=>gf.add(zc)),_p!==o&&_i.add(_p)});const Ml=rp(_i.values());return ap(o,this._triggerName,u,p,rl,Sn,Hr,ra,Ml,vi,Si,Vo)}}function jm(c,r){const o=Qd(r);for(const u in c)c.hasOwnProperty(u)&&null!=c[u]&&(o[u]=c[u]);return o}class lp{constructor(r,o,u){this.styles=r,this.defaultParams=o,this.normalizer=u}buildStyles(r,o){const u=new Map,p=Qd(this.defaultParams);return Object.keys(r).forEach(E=>{const A=r[E];null!==A&&(p[E]=A)}),this.styles.styles.forEach(E=>{"string"!=typeof E&&E.forEach((A,B)=>{A&&(A=wi(A,p,o));const Z=this.normalizer.normalizePropertyName(B,o);A=this.normalizer.normalizeStyleValue(B,Z,A,o),u.set(B,A)})}),u}}class Sg{constructor(r,o,u){this.name=r,this.ast=o,this._normalizer=u,this.transitionFactories=[],this.states=new Map,o.states.forEach(p=>{this.states.set(p.name,new lp(p.style,p.options&&p.options.params||{},u))}),Hm(this.states,"true","1"),Hm(this.states,"false","0"),o.transitions.forEach(p=>{this.transitionFactories.push(new rd(r,p,this.states))}),this.fallbackTransition=function Ag(c,r,o){return new rd(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(A,B)=>!0],options:null,queryCount:0,depCount:0},r)}(r,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(r,o,u,p){return this.transitionFactories.find(A=>A.match(r,o,u,p))||null}matchStyles(r,o,u){return this.fallbackTransition.buildStyles(r,o,u)}}function Hm(c,r,o){c.has(r)?c.has(o)||c.set(o,c.get(r)):c.has(o)&&c.set(r,c.get(o))}const cp=new Jl;class hv{constructor(r,o,u){this.bodyNode=r,this._driver=o,this._normalizer=u,this._animations=new Map,this._playersById=new Map,this.players=[]}register(r,o){const u=[],p=[],E=Ql(this._driver,o,u,p);if(u.length)throw function Zu(c){return new y.vHH(3503,!1)}();this._animations.set(r,E)}_buildPlayer(r,o,u){const p=r.element,E=hg(0,this._normalizer,0,r.keyframes,o,u);return this._driver.animate(p,E,r.duration,r.delay,r.easing,[],!0)}create(r,o,u={}){const p=[],E=this._animations.get(r);let A;const B=new Map;if(E?(A=th(this._driver,o,E,_g,Ju,new Map,new Map,u,cp,p),A.forEach(Qe=>{const ft=fa(B,Qe.element,new Map);Qe.postStyleProps.forEach(At=>ft.set(At,null))})):(p.push(function Jh(){return new y.vHH(3300,!1)}()),A=[]),p.length)throw function ef(c){return new y.vHH(3504,!1)}();B.forEach((Qe,ft)=>{Qe.forEach((At,qt)=>{Qe.set(qt,this._driver.computeStyle(ft,qt,gs.l3))})});const ie=Xu(A.map(Qe=>{const ft=B.get(Qe.element);return this._buildPlayer(Qe,new Map,ft)}));return this._playersById.set(r,ie),ie.onDestroy(()=>this.destroy(r)),this.players.push(ie),ie}destroy(r){const o=this._getPlayer(r);o.destroy(),this._playersById.delete(r);const u=this.players.indexOf(o);u>=0&&this.players.splice(u,1)}_getPlayer(r){const o=this._playersById.get(r);if(!o)throw function Qu(c){return new y.vHH(3301,!1)}();return o}listen(r,o,u,p){const E=nf(o,"","","");return fg(this._getPlayer(r),u,E,p),()=>{}}command(r,o,u,p){if("register"==u)return void this.register(r,p[0]);if("create"==u)return void this.create(r,o,p[0]||{});const E=this._getPlayer(r);switch(u){case"play":E.play();break;case"pause":E.pause();break;case"reset":E.reset();break;case"restart":E.restart();break;case"finish":E.finish();break;case"init":E.init();break;case"setPosition":E.setPosition(parseFloat(p[0]));break;case"destroy":this.destroy(r)}}}const up="ng-animate-queued",dp="ng-animate-disabled",m_=[],sd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fv={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},tc="__ng_removed";class ff{get params(){return this.options.params}constructor(r,o=""){this.namespaceId=o;const u=r&&r.hasOwnProperty("value");if(this.value=function sh(c){return null!=c?c:null}(u?r.value:r),u){const E=Qd(r);delete E.value,this.options=E}else this.options={};this.options.params||(this.options.params={})}absorbOptions(r){const o=r.params;if(o){const u=this.options.params;Object.keys(o).forEach(p=>{null==u[p]&&(u[p]=o[p])})}}}const pf="void",ih=new ff(pf);class y_{constructor(r,o,u){this.id=r,this.hostElement=o,this._engine=u,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+r,nc(o,this._hostClassName)}listen(r,o,u,p){if(!this._triggers.has(o))throw function tf(c,r){return new y.vHH(3302,!1)}();if(null==u||0==u.length)throw function lg(c){return new y.vHH(3303,!1)}();if(!function pv(c){return"start"==c||"done"==c}(u))throw function Zy(c,r){return new y.vHH(3400,!1)}();const E=fa(this._elementListeners,r,[]),A={name:o,phase:u,callback:p};E.push(A);const B=fa(this._engine.statesByElement,r,new Map);return B.has(o)||(nc(r,uf),nc(r,uf+"-"+o),B.set(o,ih)),()=>{this._engine.afterFlush(()=>{const Z=E.indexOf(A);Z>=0&&E.splice(Z,1),this._triggers.has(o)||B.delete(o)})}}register(r,o){return!this._triggers.has(r)&&(this._triggers.set(r,o),!0)}_getTrigger(r){const o=this._triggers.get(r);if(!o)throw function cg(c){return new y.vHH(3401,!1)}();return o}trigger(r,o,u,p=!0){const E=this._getTrigger(o),A=new od(this.id,o,r);let B=this._engine.statesByElement.get(r);B||(nc(r,uf),nc(r,uf+"-"+o),this._engine.statesByElement.set(r,B=new Map));let Z=B.get(o);const ie=new ff(u,this.id);if(!(u&&u.hasOwnProperty("value"))&&Z&&ie.absorbOptions(Z.options),B.set(o,ie),Z||(Z=ih),ie.value!==pf&&Z.value===ie.value){if(!function Mg(c,r){const o=Object.keys(c),u=Object.keys(r);if(o.length!=u.length)return!1;for(let p=0;p<o.length;p++){const E=o[p];if(!r.hasOwnProperty(E)||c[E]!==r[E])return!1}return!0}(Z.params,ie.params)){const Sn=[],sr=E.matchStyles(Z.value,Z.params,Sn),Hr=E.matchStyles(ie.value,ie.params,Sn);Sn.length?this._engine.reportError(Sn):this._engine.afterFlush(()=>{Va(r,sr),Al(r,Hr)})}return}const At=fa(this._engine.playersByElement,r,[]);At.forEach(Sn=>{Sn.namespaceId==this.id&&Sn.triggerName==o&&Sn.queued&&Sn.destroy()});let qt=E.matchTransition(Z.value,ie.value,r,ie.params),Xt=!1;if(!qt){if(!p)return;qt=E.fallbackTransition,Xt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:o,transition:qt,fromState:Z,toState:ie,player:A,isFallbackTransition:Xt}),Xt||(nc(r,up),A.onStart(()=>{ad(r,up)})),A.onDone(()=>{let Sn=this.players.indexOf(A);Sn>=0&&this.players.splice(Sn,1);const sr=this._engine.playersByElement.get(r);if(sr){let Hr=sr.indexOf(A);Hr>=0&&sr.splice(Hr,1)}}),this.players.push(A),At.push(A),A}deregister(r){this._triggers.delete(r),this._engine.statesByElement.forEach(o=>o.delete(r)),this._elementListeners.forEach((o,u)=>{this._elementListeners.set(u,o.filter(p=>p.name!=r))})}clearElementCache(r){this._engine.statesByElement.delete(r),this._elementListeners.delete(r);const o=this._engine.playersByElement.get(r);o&&(o.forEach(u=>u.destroy()),this._engine.playersByElement.delete(r))}_signalRemovalForInnerTriggers(r,o){const u=this._engine.driver.query(r,Zd,!0);u.forEach(p=>{if(p[tc])return;const E=this._engine.fetchNamespacesByElement(p);E.size?E.forEach(A=>A.triggerLeaveAnimation(p,o,!1,!0)):this.clearElementCache(p)}),this._engine.afterFlushAnimationsDone(()=>u.forEach(p=>this.clearElementCache(p)))}triggerLeaveAnimation(r,o,u,p){const E=this._engine.statesByElement.get(r),A=new Map;if(E){const B=[];if(E.forEach((Z,ie)=>{if(A.set(ie,Z.value),this._triggers.has(ie)){const Qe=this.trigger(r,ie,pf,p);Qe&&B.push(Qe)}}),B.length)return this._engine.markElementAsRemoved(this.id,r,!0,o,A),u&&Xu(B).onDone(()=>this._engine.processLeaveNode(r)),!0}return!1}prepareLeaveAnimationListeners(r){const o=this._elementListeners.get(r),u=this._engine.statesByElement.get(r);if(o&&u){const p=new Set;o.forEach(E=>{const A=E.name;if(p.has(A))return;p.add(A);const Z=this._triggers.get(A).fallbackTransition,ie=u.get(A)||ih,Qe=new ff(pf),ft=new od(this.id,A,r);this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:A,transition:Z,fromState:ie,toState:Qe,player:ft,isFallbackTransition:!0})})}}removeNode(r,o){const u=this._engine;if(r.childElementCount&&this._signalRemovalForInnerTriggers(r,o),this.triggerLeaveAnimation(r,o,!0))return;let p=!1;if(u.totalAnimations){const E=u.players.length?u.playersByQueriedElement.get(r):[];if(E&&E.length)p=!0;else{let A=r;for(;A=A.parentNode;)if(u.statesByElement.get(A)){p=!0;break}}}if(this.prepareLeaveAnimationListeners(r),p)u.markElementAsRemoved(this.id,r,!1,o);else{const E=r[tc];(!E||E===sd)&&(u.afterFlush(()=>this.clearElementCache(r)),u.destroyInnerAnimations(r),u._onRemovalComplete(r,o))}}insertNode(r,o){nc(r,this._hostClassName)}drainQueuedTransitions(r){const o=[];return this._queue.forEach(u=>{const p=u.player;if(p.destroyed)return;const E=u.element,A=this._elementListeners.get(E);A&&A.forEach(B=>{if(B.name==u.triggerName){const Z=nf(E,u.triggerName,u.fromState.value,u.toState.value);Z._data=r,fg(u.player,B.phase,Z,B.callback)}}),p.markedForDestroy?this._engine.afterFlush(()=>{p.destroy()}):o.push(u)}),this._queue=[],o.sort((u,p)=>{const E=u.transition.ast.depCount,A=p.transition.ast.depCount;return 0==E||0==A?E-A:this._engine.driver.containsElement(u.element,p.element)?1:-1})}destroy(r){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,r)}elementContainsData(r){let o=!1;return this._elementListeners.has(r)&&(o=!0),o=!!this._queue.find(u=>u.element===r)||o,o}}class __{_onRemovalComplete(r,o){this.onRemovalComplete(r,o)}constructor(r,o,u){this.bodyNode=r,this.driver=o,this._normalizer=u,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(p,E)=>{}}get queuedPlayers(){const r=[];return this._namespaceList.forEach(o=>{o.players.forEach(u=>{u.queued&&r.push(u)})}),r}createNamespace(r,o){const u=new y_(r,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(u,o):(this.newHostElements.set(o,u),this.collectEnterElement(o)),this._namespaceLookup[r]=u}_balanceNamespaceList(r,o){const u=this._namespaceList,p=this.namespacesByHostElement;if(u.length-1>=0){let A=!1,B=this.driver.getParentElement(o);for(;B;){const Z=p.get(B);if(Z){const ie=u.indexOf(Z);u.splice(ie+1,0,r),A=!0;break}B=this.driver.getParentElement(B)}A||u.unshift(r)}else u.push(r);return p.set(o,r),r}register(r,o){let u=this._namespaceLookup[r];return u||(u=this.createNamespace(r,o)),u}registerTrigger(r,o,u){let p=this._namespaceLookup[r];p&&p.register(o,u)&&this.totalAnimations++}destroy(r,o){if(!r)return;const u=this._fetchNamespace(r);this.afterFlush(()=>{this.namespacesByHostElement.delete(u.hostElement),delete this._namespaceLookup[r];const p=this._namespaceList.indexOf(u);p>=0&&this._namespaceList.splice(p,1)}),this.afterFlushAnimationsDone(()=>u.destroy(o))}_fetchNamespace(r){return this._namespaceLookup[r]}fetchNamespacesByElement(r){const o=new Set,u=this.statesByElement.get(r);if(u)for(let p of u.values())if(p.namespaceId){const E=this._fetchNamespace(p.namespaceId);E&&o.add(E)}return o}trigger(r,o,u,p){if(oh(o)){const E=this._fetchNamespace(r);if(E)return E.trigger(o,u,p),!0}return!1}insertNode(r,o,u,p){if(!oh(o))return;const E=o[tc];if(E&&E.setForRemoval){E.setForRemoval=!1,E.setForMove=!0;const A=this.collectedLeaveElements.indexOf(o);A>=0&&this.collectedLeaveElements.splice(A,1)}if(r){const A=this._fetchNamespace(r);A&&A.insertNode(o,u)}p&&this.collectEnterElement(o)}collectEnterElement(r){this.collectedEnterElements.push(r)}markElementAsDisabled(r,o){o?this.disabledNodes.has(r)||(this.disabledNodes.add(r),nc(r,dp)):this.disabledNodes.has(r)&&(this.disabledNodes.delete(r),ad(r,dp))}removeNode(r,o,u,p){if(oh(o)){const E=r?this._fetchNamespace(r):null;if(E?E.removeNode(o,p):this.markElementAsRemoved(r,o,!1,p),u){const A=this.namespacesByHostElement.get(o);A&&A.id!==r&&A.removeNode(o,p)}}else this._onRemovalComplete(o,p)}markElementAsRemoved(r,o,u,p,E){this.collectedLeaveElements.push(o),o[tc]={namespaceId:r,setForRemoval:p,hasAnimation:u,removedBeforeQueried:!1,previousTriggersValues:E}}listen(r,o,u,p,E){return oh(o)?this._fetchNamespace(r).listen(o,u,p,E):()=>{}}_buildInstruction(r,o,u,p,E){return r.transition.build(this.driver,r.element,r.fromState.value,r.toState.value,u,p,r.fromState.options,r.toState.options,o,E)}destroyInnerAnimations(r){let o=this.driver.query(r,Zd,!0);o.forEach(u=>this.destroyActiveAnimationsForElement(u)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(r,uu,!0),o.forEach(u=>this.finishActiveQueriedAnimationOnElement(u)))}destroyActiveAnimationsForElement(r){const o=this.playersByElement.get(r);o&&o.forEach(u=>{u.queued?u.markedForDestroy=!0:u.destroy()})}finishActiveQueriedAnimationOnElement(r){const o=this.playersByQueriedElement.get(r);o&&o.forEach(u=>u.finish())}whenRenderingDone(){return new Promise(r=>{if(this.players.length)return Xu(this.players).onDone(()=>r());r()})}processLeaveNode(r){var o;const u=r[tc];if(u&&u.setForRemoval){if(r[tc]=sd,u.namespaceId){this.destroyInnerAnimations(r);const p=this._fetchNamespace(u.namespaceId);p&&p.clearElementCache(r)}this._onRemovalComplete(r,u.setForRemoval)}null!==(o=r.classList)&&void 0!==o&&o.contains(dp)&&this.markElementAsDisabled(r,!1),this.driver.query(r,".ng-animate-disabled",!0).forEach(p=>{this.markElementAsDisabled(p,!1)})}flush(r=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((u,p)=>this._balanceNamespaceList(u,p)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let u=0;u<this.collectedEnterElements.length;u++)nc(this.collectedEnterElements[u],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const u=[];try{o=this._flushAnimations(u,r)}finally{for(let p=0;p<u.length;p++)u[p]()}}else for(let u=0;u<this.collectedLeaveElements.length;u++)this.processLeaveNode(this.collectedLeaveElements[u]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(u=>u()),this._flushFns=[],this._whenQuietFns.length){const u=this._whenQuietFns;this._whenQuietFns=[],o.length?Xu(o).onDone(()=>{u.forEach(p=>p())}):u.forEach(p=>p())}}reportError(r){throw function Qy(c){return new y.vHH(3402,!1)}()}_flushAnimations(r,o){const u=new Jl,p=[],E=new Map,A=[],B=new Map,Z=new Map,ie=new Map,Qe=new Set;this.disabledNodes.forEach(_r=>{Qe.add(_r);const Mr=this.driver.query(_r,".ng-animate-queued",!0);for(let Sr=0;Sr<Mr.length;Sr++)Qe.add(Mr[Sr])});const ft=this.bodyNode,At=Array.from(this.statesByElement.keys()),qt=pp(At,this.collectedEnterElements),Xt=new Map;let Sn=0;qt.forEach((_r,Mr)=>{const Sr=_g+Sn++;Xt.set(Mr,Sr),_r.forEach(zr=>nc(zr,Sr))});const sr=[],Hr=new Set,_i=new Set;for(let _r=0;_r<this.collectedLeaveElements.length;_r++){const Mr=this.collectedLeaveElements[_r],Sr=Mr[tc];Sr&&Sr.setForRemoval&&(sr.push(Mr),Hr.add(Mr),Sr.hasAnimation?this.driver.query(Mr,".ng-star-inserted",!0).forEach(zr=>Hr.add(zr)):_i.add(Mr))}const vi=new Map,Si=pp(At,Array.from(Hr));Si.forEach((_r,Mr)=>{const Sr=Ju+Sn++;vi.set(Mr,Sr),_r.forEach(zr=>nc(zr,Sr))}),r.push(()=>{qt.forEach((_r,Mr)=>{const Sr=Xt.get(Mr);_r.forEach(zr=>ad(zr,Sr))}),Si.forEach((_r,Mr)=>{const Sr=vi.get(Mr);_r.forEach(zr=>ad(zr,Sr))}),sr.forEach(_r=>{this.processLeaveNode(_r)})});const rl=[],pa=[];for(let _r=this._namespaceList.length-1;_r>=0;_r--)this._namespaceList[_r].drainQueuedTransitions(o).forEach(Sr=>{const zr=Sr.player,Ai=Sr.element;if(rl.push(zr),this.collectedEnterElements.length){const mo=Ai[tc];if(mo&&mo.setForMove){if(mo.previousTriggersValues&&mo.previousTriggersValues.has(Sr.triggerName)){const ic=mo.previousTriggersValues.get(Sr.triggerName),jo=this.statesByElement.get(Sr.element);if(jo&&jo.has(Sr.triggerName)){const mf=jo.get(Sr.triggerName);mf.value=ic,jo.set(Sr.triggerName,mf)}}return void zr.destroy()}}const Ec=!ft||!this.driver.containsElement(ft,Ai),ja=vi.get(Ai),xl=Xt.get(Ai),Is=this._buildInstruction(Sr,u,xl,ja,Ec);if(Is.errors&&Is.errors.length)return void pa.push(Is);if(Ec)return zr.onStart(()=>Va(Ai,Is.fromStyles)),zr.onDestroy(()=>Al(Ai,Is.toStyles)),void p.push(zr);if(Sr.isFallbackTransition)return zr.onStart(()=>Va(Ai,Is.fromStyles)),zr.onDestroy(()=>Al(Ai,Is.toStyles)),void p.push(zr);const Ta=[];Is.timelines.forEach(mo=>{mo.stretchStartingKeyframe=!0,this.disabledNodes.has(mo.element)||Ta.push(mo)}),Is.timelines=Ta,u.append(Ai,Is.timelines),A.push({instruction:Is,player:zr,element:Ai}),Is.queriedElements.forEach(mo=>fa(B,mo,[]).push(zr)),Is.preStyleProps.forEach((mo,ic)=>{if(mo.size){let jo=Z.get(ic);jo||Z.set(ic,jo=new Set),mo.forEach((mf,fu)=>jo.add(fu))}}),Is.postStyleProps.forEach((mo,ic)=>{let jo=ie.get(ic);jo||ie.set(ic,jo=new Set),mo.forEach((mf,fu)=>jo.add(fu))})});if(pa.length){const _r=[];pa.forEach(Mr=>{_r.push(function xm(c,r){return new y.vHH(3505,!1)}())}),rl.forEach(Mr=>Mr.destroy()),this.reportError(_r)}const ra=new Map,Vo=new Map;A.forEach(_r=>{const Mr=_r.element;u.has(Mr)&&(Vo.set(Mr,Mr),this._beforeAnimationBuild(_r.player.namespaceId,_r.instruction,ra))}),p.forEach(_r=>{const Mr=_r.element;this._getPreviousPlayers(Mr,!1,_r.namespaceId,_r.triggerName,null).forEach(zr=>{fa(ra,Mr,[]).push(zr),zr.destroy()})});const Ml=sr.filter(_r=>I_(_r,Z,ie)),Rl=new Map;E_(Rl,this.driver,_i,ie,gs.l3).forEach(_r=>{I_(_r,Z,ie)&&Ml.push(_r)});const hu=new Map;qt.forEach((_r,Mr)=>{E_(hu,this.driver,new Set(_r),Z,gs.k1)}),Ml.forEach(_r=>{var Mr,Sr;const zr=Rl.get(_r),Ai=hu.get(_r);Rl.set(_r,new Map([...Array.from(null!==(Mr=null==zr?void 0:zr.entries())&&void 0!==Mr?Mr:[]),...Array.from(null!==(Sr=null==Ai?void 0:Ai.entries())&&void 0!==Sr?Sr:[])]))});const gf=[],zc=[],D_={};A.forEach(_r=>{const{element:Mr,player:Sr,instruction:zr}=_r;if(u.has(Mr)){if(Qe.has(Mr))return Sr.onDestroy(()=>Al(Mr,zr.toStyles)),Sr.disabled=!0,Sr.overrideTotalTime(zr.totalTime),void p.push(Sr);let Ai=D_;if(Vo.size>1){let ja=Mr;const xl=[];for(;ja=ja.parentNode;){const Is=Vo.get(ja);if(Is){Ai=Is;break}xl.push(ja)}xl.forEach(Is=>Vo.set(Is,Ai))}const Ec=this._buildAnimation(Sr.namespaceId,zr,ra,E,hu,Rl);if(Sr.setRealPlayer(Ec),Ai===D_)gf.push(Sr);else{const ja=this.playersByElement.get(Ai);ja&&ja.length&&(Sr.parentPlayer=Xu(ja)),p.push(Sr)}}else Va(Mr,zr.fromStyles),Sr.onDestroy(()=>Al(Mr,zr.toStyles)),zc.push(Sr),Qe.has(Mr)&&p.push(Sr)}),zc.forEach(_r=>{const Mr=E.get(_r.element);if(Mr&&Mr.length){const Sr=Xu(Mr);_r.setRealPlayer(Sr)}}),p.forEach(_r=>{_r.parentPlayer?_r.syncPlayerEvents(_r.parentPlayer):_r.destroy()});for(let _r=0;_r<sr.length;_r++){const Mr=sr[_r],Sr=Mr[tc];if(ad(Mr,Ju),Sr&&Sr.hasAnimation)continue;let zr=[];if(B.size){let Ec=B.get(Mr);Ec&&Ec.length&&zr.push(...Ec);let ja=this.driver.query(Mr,uu,!0);for(let xl=0;xl<ja.length;xl++){let Is=B.get(ja[xl]);Is&&Is.length&&zr.push(...Is)}}const Ai=zr.filter(Ec=>!Ec.destroyed);Ai.length?zm(this,Mr,Ai):this.processLeaveNode(Mr)}return sr.length=0,gf.forEach(_r=>{this.players.push(_r),_r.onDone(()=>{_r.destroy();const Mr=this.players.indexOf(_r);this.players.splice(Mr,1)}),_r.play()}),gf}elementContainsData(r,o){let u=!1;const p=o[tc];return p&&p.setForRemoval&&(u=!0),this.playersByElement.has(o)&&(u=!0),this.playersByQueriedElement.has(o)&&(u=!0),this.statesByElement.has(o)&&(u=!0),this._fetchNamespace(r).elementContainsData(o)||u}afterFlush(r){this._flushFns.push(r)}afterFlushAnimationsDone(r){this._whenQuietFns.push(r)}_getPreviousPlayers(r,o,u,p,E){let A=[];if(o){const B=this.playersByQueriedElement.get(r);B&&(A=B)}else{const B=this.playersByElement.get(r);if(B){const Z=!E||E==pf;B.forEach(ie=>{ie.queued||!Z&&ie.triggerName!=p||A.push(ie)})}}return(u||p)&&(A=A.filter(B=>!(u&&u!=B.namespaceId||p&&p!=B.triggerName))),A}_beforeAnimationBuild(r,o,u){const E=o.element,A=o.isRemovalTransition?void 0:r,B=o.isRemovalTransition?void 0:o.triggerName;for(const Z of o.timelines){const ie=Z.element,Qe=ie!==E,ft=fa(u,ie,[]);this._getPreviousPlayers(ie,Qe,A,B,o.toState).forEach(qt=>{const Xt=qt.getRealPlayer();Xt.beforeDestroy&&Xt.beforeDestroy(),qt.destroy(),ft.push(qt)})}Va(E,o.fromStyles)}_buildAnimation(r,o,u,p,E,A){const B=o.triggerName,Z=o.element,ie=[],Qe=new Set,ft=new Set,At=o.timelines.map(Xt=>{const Sn=Xt.element;Qe.add(Sn);const sr=Sn[tc];if(sr&&sr.removedBeforeQueried)return new gs.ZN(Xt.duration,Xt.delay);const Hr=Sn!==Z,_i=function gv(c){const r=[];return Rr(c,r),r}((u.get(Sn)||m_).map(ra=>ra.getRealPlayer())).filter(ra=>!!ra.element&&ra.element===Sn),vi=E.get(Sn),Si=A.get(Sn),rl=hg(0,this._normalizer,0,Xt.keyframes,vi,Si),pa=this._buildPlayer(Xt,rl,_i);if(Xt.subTimeline&&p&&ft.add(Sn),Hr){const ra=new od(r,B,Sn);ra.setRealPlayer(pa),ie.push(ra)}return pa});ie.forEach(Xt=>{fa(this.playersByQueriedElement,Xt.element,[]).push(Xt),Xt.onDone(()=>function v_(c,r,o){let u=c.get(r);if(u){if(u.length){const p=u.indexOf(o);u.splice(p,1)}0==u.length&&c.delete(r)}return u}(this.playersByQueriedElement,Xt.element,Xt))}),Qe.forEach(Xt=>nc(Xt,ep));const qt=Xu(At);return qt.onDestroy(()=>{Qe.forEach(Xt=>ad(Xt,ep)),Al(Z,o.toStyles)}),ft.forEach(Xt=>{fa(p,Xt,[]).push(qt)}),qt}_buildPlayer(r,o,u){return o.length>0?this.driver.animate(r.element,o,r.duration,r.delay,r.easing,u):new gs.ZN(r.duration,r.delay)}}class od{constructor(r,o,u){this.namespaceId=r,this.triggerName=o,this.element=u,this._player=new gs.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(r){this._containsRealPlayer||(this._player=r,this._queuedCallbacks.forEach((o,u)=>{o.forEach(p=>fg(r,u,void 0,p))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(r.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(r){this.totalTime=r}syncPlayerEvents(r){const o=this._player;o.triggerCallback&&r.onStart(()=>o.triggerCallback("start")),r.onDone(()=>this.finish()),r.onDestroy(()=>this.destroy())}_queueEvent(r,o){fa(this._queuedCallbacks,r,[]).push(o)}onDone(r){this.queued&&this._queueEvent("done",r),this._player.onDone(r)}onStart(r){this.queued&&this._queueEvent("start",r),this._player.onStart(r)}onDestroy(r){this.queued&&this._queueEvent("destroy",r),this._player.onDestroy(r)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(r){this.queued||this._player.setPosition(r)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(r){const o=this._player;o.triggerCallback&&o.triggerCallback(r)}}function oh(c){return c&&1===c.nodeType}function ah(c,r){const o=c.style.display;return c.style.display=null!=r?r:"none",o}function E_(c,r,o,u,p){const E=[];o.forEach(Z=>E.push(ah(Z)));const A=[];u.forEach((Z,ie)=>{const Qe=new Map;Z.forEach(ft=>{const At=r.computeStyle(ie,ft,p);Qe.set(ft,At),(!At||0==At.length)&&(ie[tc]=fv,A.push(ie))}),c.set(ie,Qe)});let B=0;return o.forEach(Z=>ah(Z,E[B++])),A}function pp(c,r){const o=new Map;if(c.forEach(B=>o.set(B,[])),0==r.length)return o;const u=1,p=new Set(r),E=new Map;function A(B){if(!B)return u;let Z=E.get(B);if(Z)return Z;const ie=B.parentNode;return Z=o.has(ie)?ie:p.has(ie)?u:A(ie),E.set(B,Z),Z}return r.forEach(B=>{const Z=A(B);Z!==u&&o.get(Z).push(B)}),o}function nc(c,r){var o;null===(o=c.classList)||void 0===o||o.add(r)}function ad(c,r){var o;null===(o=c.classList)||void 0===o||o.remove(r)}function zm(c,r,o){Xu(o).onDone(()=>c.processLeaveNode(r))}function Rr(c,r){for(let o=0;o<c.length;o++){const u=c[o];u instanceof gs.ZE?Rr(u.players,r):r.push(u)}}function I_(c,r,o){const u=o.get(c);if(!u)return!1;let p=r.get(c);return p?u.forEach(E=>p.add(E)):r.set(c,u),o.delete(c),!0}class Gm{constructor(r,o,u){this.bodyNode=r,this._driver=o,this._normalizer=u,this._triggerCache={},this.onRemovalComplete=(p,E)=>{},this._transitionEngine=new __(r,o,u),this._timelineEngine=new hv(r,o,u),this._transitionEngine.onRemovalComplete=(p,E)=>this.onRemovalComplete(p,E)}registerTrigger(r,o,u,p,E){const A=r+"-"+p;let B=this._triggerCache[A];if(!B){const Z=[],ie=[],Qe=Ql(this._driver,E,Z,ie);if(Z.length)throw function Yu(c,r){return new y.vHH(3404,!1)}();B=function dv(c,r,o){return new Sg(c,r,o)}(p,Qe,this._normalizer),this._triggerCache[A]=B}this._transitionEngine.registerTrigger(o,p,B)}register(r,o){this._transitionEngine.register(r,o)}destroy(r,o){this._transitionEngine.destroy(r,o)}onInsert(r,o,u,p){this._transitionEngine.insertNode(r,o,u,p)}onRemove(r,o,u,p){this._transitionEngine.removeNode(r,o,p||!1,u)}disableAnimations(r,o){this._transitionEngine.markElementAsDisabled(r,o)}process(r,o,u,p){if("@"==u.charAt(0)){const[E,A]=pg(u);this._timelineEngine.command(E,o,A,p)}else this._transitionEngine.trigger(r,o,u,p)}listen(r,o,u,p,E){if("@"==u.charAt(0)){const[A,B]=pg(u);return this._timelineEngine.listen(A,o,B,E)}return this._transitionEngine.listen(r,o,u,p,E)}flush(r=-1){this._transitionEngine.flush(r)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let mv=(()=>{class c{constructor(o,u,p){this._element=o,this._startStyles=u,this._endStyles=p,this._state=0;let E=c.initialStylesByElement.get(o);E||c.initialStylesByElement.set(o,E=new Map),this._initialStyles=E}start(){this._state<1&&(this._startStyles&&Al(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Al(this._element,this._initialStyles),this._endStyles&&(Al(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(Va(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Va(this._element,this._endStyles),this._endStyles=null),Al(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function mp(c){let r=null;return c.forEach((o,u)=>{(function Wm(c){return"display"===c||"position"===c})(u)&&(r=r||new Map,r.set(u,o))}),r}class cs{constructor(r,o,u,p){this.element=r,this.keyframes=o,this.options=u,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=u.duration,this._delay=u.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(r){const o=[];return r.forEach(u=>{o.push(Object.fromEntries(u))}),o}_triggerWebAnimation(r,o,u){return r.animate(this._convertKeyframesToObject(o),u)}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(r=>r()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}setPosition(r){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=r*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const r=new Map;this.hasStarted()&&this._finalKeyframe.forEach((u,p)=>{"offset"!==p&&r.set(p,this._finished?u:Lm(this.element,p))}),this.currentSnapshot=r}triggerCallback(r){const o="start"===r?this._onStartFns:this._onDoneFns;o.forEach(u=>u()),o.length=0}}class ld{validateStyleProperty(r){return!0}validateAnimatableStyleProperty(r){return!0}matchesElement(r,o){return!1}containsElement(r,o){return Jf(r,o)}getParentElement(r){return jc(r)}query(r,o,u){return af(r,o,u)}computeStyle(r,o,u){return window.getComputedStyle(r)[o]}animate(r,o,u,p,E,A=[]){const Z={duration:u,delay:p,fill:0==p?"both":"forwards"};E&&(Z.easing=E);const ie=new Map,Qe=A.filter(qt=>qt instanceof cs);(function ri(c,r){return 0===c||0===r})(u,p)&&Qe.forEach(qt=>{qt.currentSnapshot.forEach((Xt,Sn)=>ie.set(Sn,Xt))});let ft=function Fm(c){return c.length?c[0]instanceof Map?c:c.map(r=>km(r)):[]}(o).map(qt=>Ua(qt));ft=function na(c,r,o){if(o.size&&r.length){let u=r[0],p=[];if(o.forEach((E,A)=>{u.has(A)||p.push(A),u.set(A,E)}),p.length)for(let E=1;E<r.length;E++){let A=r[E];p.forEach(B=>A.set(B,Lm(c,B)))}}return r}(r,ft,ie);const At=function gp(c,r){let o=null,u=null;return Array.isArray(r)&&r.length?(o=mp(r[0]),r.length>1&&(u=mp(r[r.length-1]))):r instanceof Map&&(o=mp(r)),o||u?new mv(c,o,u):null}(r,ft);return new cs(r,ft,Z,At)}}var lh=k(6895);let du=(()=>{class c extends gs._j{constructor(o,u){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(u.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(o){const u=this._nextAnimationId.toString();this._nextAnimationId++;const p=Array.isArray(o)?(0,gs.vP)(o):o;return qm(this._renderer,null,u,"register",[p]),new yv(u,this._renderer)}}return c.\u0275fac=function(o){return new(o||c)(y.LFG(y.FYo),y.LFG(lh.K0))},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac}),c})();class yv extends gs.LC{constructor(r,o){super(),this._id=r,this._renderer=o}create(r,o){return new Km(this._id,r,o||{},this._renderer)}}class Km{constructor(r,o,u,p){this.id=r,this.element=o,this._renderer=p,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",u)}_listen(r,o){return this._renderer.listen(this.element,`@@${this.id}:${r}`,o)}_command(r,...o){return qm(this._renderer,this.element,this.id,r,o)}onDone(r){this._listen("done",r)}onStart(r){this._listen("start",r)}onDestroy(r){this._listen("destroy",r)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(r){this._command("setPosition",r)}getPosition(){var r,o;return null!==(r=null===(o=this._renderer.engine.players[+this.id])||void 0===o?void 0:o.getPosition())&&void 0!==r?r:0}}function qm(c,r,o,u,p){return c.setProperty(r,`@@${o}:${u}`,p)}const Ym="@.disabled";let _v=(()=>{class c{constructor(o,u,p){this.delegate=o,this.engine=u,this._zone=p,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),u.onRemovalComplete=(E,A)=>{const B=null==A?void 0:A.parentNode(E);B&&A.removeChild(B,E)}}createRenderer(o,u){const E=this.delegate.createRenderer(o,u);if(!(o&&u&&u.data&&u.data.animation)){let Qe=this._rendererCache.get(E);return Qe||(Qe=new w_("",E,this.engine,()=>this._rendererCache.delete(E)),this._rendererCache.set(E,Qe)),Qe}const A=u.id,B=u.id+"-"+this._currentId;this._currentId++,this.engine.register(B,o);const Z=Qe=>{Array.isArray(Qe)?Qe.forEach(Z):this.engine.registerTrigger(A,B,o,Qe.name,Qe)};return u.data.animation.forEach(Z),new vv(this,B,E,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,u,p){o>=0&&o<this._microtaskId?this._zone.run(()=>u(p)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(E=>{const[A,B]=E;A(B)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([u,p]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(o){return new(o||c)(y.LFG(y.FYo),y.LFG(Gm),y.LFG(y.R0b))},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac}),c})();class w_{constructor(r,o,u,p){this.namespaceId=r,this.delegate=o,this.engine=u,this._onDestroy=p,this.destroyNode=this.delegate.destroyNode?E=>o.destroyNode(E):null}get data(){return this.delegate.data}destroy(){var r;this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),null===(r=this._onDestroy)||void 0===r||r.call(this)}createElement(r,o){return this.delegate.createElement(r,o)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}appendChild(r,o){this.delegate.appendChild(r,o),this.engine.onInsert(this.namespaceId,o,r,!1)}insertBefore(r,o,u,p=!0){this.delegate.insertBefore(r,o,u),this.engine.onInsert(this.namespaceId,o,r,p)}removeChild(r,o,u){this.engine.onRemove(this.namespaceId,o,this.delegate,u)}selectRootElement(r,o){return this.delegate.selectRootElement(r,o)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,o,u,p){this.delegate.setAttribute(r,o,u,p)}removeAttribute(r,o,u){this.delegate.removeAttribute(r,o,u)}addClass(r,o){this.delegate.addClass(r,o)}removeClass(r,o){this.delegate.removeClass(r,o)}setStyle(r,o,u,p){this.delegate.setStyle(r,o,u,p)}removeStyle(r,o,u){this.delegate.removeStyle(r,o,u)}setProperty(r,o,u){"@"==o.charAt(0)&&o==Ym?this.disableAnimations(r,!!u):this.delegate.setProperty(r,o,u)}setValue(r,o){this.delegate.setValue(r,o)}listen(r,o,u){return this.delegate.listen(r,o,u)}disableAnimations(r,o){this.engine.disableAnimations(r,o)}}class vv extends w_{constructor(r,o,u,p,E){super(o,u,p,E),this.factory=r,this.namespaceId=o}setProperty(r,o,u){"@"==o.charAt(0)?"."==o.charAt(1)&&o==Ym?this.disableAnimations(r,u=void 0===u||!!u):this.engine.process(this.namespaceId,r,o.slice(1),u):this.delegate.setProperty(r,o,u)}listen(r,o,u){if("@"==o.charAt(0)){const p=function yp(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(r);let E=o.slice(1),A="";return"@"!=E.charAt(0)&&([E,A]=function b_(c){const r=c.indexOf(".");return[c.substring(0,r),c.slice(r+1)]}(E)),this.engine.listen(this.namespaceId,p,E,A,B=>{this.factory.scheduleListenerCallback(B._data||-1,u,B)})}return this.delegate.listen(r,o,u)}}const xg=[{provide:gs._j,useClass:du},{provide:Cg,useFactory:function Ev(){return new Dg}},{provide:Gm,useClass:(()=>{class c extends Gm{constructor(o,u,p,E){super(o.body,u,p)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(o){return new(o||c)(y.LFG(lh.K0),y.LFG(lf),y.LFG(Cg),y.LFG(y.z2F))},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac}),c})()},{provide:y.FYo,useFactory:function Rg(c,r,o){return new _v(c,r,o)},deps:[g.se,Gm,y.R0b]}],Pg=[{provide:lf,useFactory:()=>new ld},{provide:y.QbO,useValue:"BrowserAnimations"},...xg],cd=[{provide:lf,useClass:Nm},{provide:y.QbO,useValue:"NoopAnimations"},...xg];let Zm=(()=>{class c{static withConfig(o){return{ngModule:c,providers:o.disableAnimations?cd:Pg}}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=y.oAB({type:c}),c.\u0275inj=y.cJS({providers:Pg,imports:[g.b2]}),c})();(0,y.G48)(),(0,g.Cg)(Ue,{providers:[{provide:Y.wN,useClass:ae.r4},(0,y.RIp)(ae.Pc.forRoot({}),Zm),(0,y.RIp)(pe.hO.initializeApp({apiKey:"AIzaSyCdRRnBbX8R0qg3xauDHItMVmvdDAdzlxk",authDomain:"ionic-login-a9669.firebaseapp.com",projectId:"ionic-login-a9669",storageBucket:"ionic-login-a9669.appspot.com",messagingSenderId:"698057746644",appId:"1:698057746644:web:7558813a2e58ae92c73341",locationId:"us-central"})),(0,y.RIp)(De.ww),(0,y.RIp)(Ma.yb),(0,y.RIp)(ya),(0,y.RIp)(Cm),(0,Y.bU)(me)]})},1135:(on,ot,k)=>{"use strict";k.d(ot,{X:()=>g});var y=k(7579);class g extends y.x{constructor(ae){super(),this._value=ae}get value(){return this.getValue()}_subscribe(ae){const xe=super._subscribe(ae);return!xe.closed&&ae.next(this._value),xe}getValue(){const{hasError:ae,thrownError:xe,_value:Pe}=this;if(ae)throw xe;return this._throwIfClosed(),Pe}next(ae){super.next(this._value=ae)}}},9751:(on,ot,k)=>{"use strict";k.d(ot,{y:()=>me});var y=k(930),g=k(727),Y=k(8822),ae=k(9635),xe=k(2416),Pe=k(576),Ce=k(2806);let me=(()=>{class De{constructor(je){je&&(this._subscribe=je)}lift(je){const Be=new De;return Be.source=this,Be.operator=je,Be}subscribe(je,Be,Xe){const Se=function pe(De){return De&&De instanceof y.Lv||function Te(De){return De&&(0,Pe.m)(De.next)&&(0,Pe.m)(De.error)&&(0,Pe.m)(De.complete)}(De)&&(0,g.Nn)(De)}(je)?je:new y.Hp(je,Be,Xe);return(0,Ce.x)(()=>{const{operator:_e,source:oe}=this;Se.add(_e?_e.call(Se,oe):oe?this._subscribe(Se):this._trySubscribe(Se))}),Se}_trySubscribe(je){try{return this._subscribe(je)}catch(Be){je.error(Be)}}forEach(je,Be){return new(Be=Ue(Be))((Xe,Se)=>{const _e=new y.Hp({next:oe=>{try{je(oe)}catch(lt){Se(lt),_e.unsubscribe()}},error:Se,complete:Xe});this.subscribe(_e)})}_subscribe(je){var Be;return null===(Be=this.source)||void 0===Be?void 0:Be.subscribe(je)}[Y.L](){return this}pipe(...je){return(0,ae.U)(je)(this)}toPromise(je){return new(je=Ue(je))((Be,Xe)=>{let Se;this.subscribe(_e=>Se=_e,_e=>Xe(_e),()=>Be(Se))})}}return De.create=Fe=>new De(Fe),De})();function Ue(De){var Fe;return null!==(Fe=null!=De?De:xe.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(on,ot,k)=>{"use strict";k.d(ot,{x:()=>Ce});var y=k(9751),g=k(727);const ae=(0,k(3888).d)(Ue=>function(){Ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=k(8737),Pe=k(2806);let Ce=(()=>{class Ue extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const De=new me(this,this);return De.operator=pe,De}_throwIfClosed(){if(this.closed)throw new ae}next(pe){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(pe)}})}error(pe){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:De}=this;for(;De.length;)De.shift().error(pe)}})}complete(){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:De,isStopped:Fe,observers:je}=this;return De||Fe?g.Lc:(this.currentObservers=null,je.push(pe),new g.w0(()=>{this.currentObservers=null,(0,xe.P)(je,pe)}))}_checkFinalizedStatuses(pe){const{hasError:De,thrownError:Fe,isStopped:je}=this;De?pe.error(Fe):je&&pe.complete()}asObservable(){const pe=new y.y;return pe.source=this,pe}}return Ue.create=(Te,pe)=>new me(Te,pe),Ue})();class me extends Ce{constructor(Te,pe){super(),this.destination=Te,this.source=pe}next(Te){var pe,De;null===(De=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===De||De.call(pe,Te)}error(Te){var pe,De;null===(De=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===De||De.call(pe,Te)}complete(){var Te,pe;null===(pe=null===(Te=this.destination)||void 0===Te?void 0:Te.complete)||void 0===pe||pe.call(Te)}_subscribe(Te){var pe,De;return null!==(De=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Te))&&void 0!==De?De:g.Lc}}},930:(on,ot,k)=>{"use strict";k.d(ot,{Hp:()=>Xe,Lv:()=>De});var y=k(576),g=k(727),Y=k(2416),ae=k(7849),xe=k(5032);const Pe=Ue("C",void 0,void 0);function Ue(ze,Ae,q){return{kind:ze,value:Ae,error:q}}var Te=k(3410),pe=k(2806);class De extends g.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,g.Nn)(Ae)&&Ae.add(this)):this.destination=lt}static create(Ae,q,pt){return new Xe(Ae,q,pt)}next(Ae){this.isStopped?oe(function me(ze){return Ue("N",ze,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?oe(function Ce(ze){return Ue("E",void 0,ze)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?oe(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function je(ze,Ae){return Fe.call(ze,Ae)}class Be{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:q}=this;if(q.next)try{q.next(Ae)}catch(pt){Se(pt)}}error(Ae){const{partialObserver:q}=this;if(q.error)try{q.error(Ae)}catch(pt){Se(pt)}else Se(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(q){Se(q)}}}class Xe extends De{constructor(Ae,q,pt){let Ke;if(super(),(0,y.m)(Ae)||!Ae)Ke={next:null!=Ae?Ae:void 0,error:null!=q?q:void 0,complete:null!=pt?pt:void 0};else{let ne;this&&Y.v.useDeprecatedNextContext?(ne=Object.create(Ae),ne.unsubscribe=()=>this.unsubscribe(),Ke={next:Ae.next&&je(Ae.next,ne),error:Ae.error&&je(Ae.error,ne),complete:Ae.complete&&je(Ae.complete,ne)}):Ke=Ae}this.destination=new Be(Ke)}}function Se(ze){Y.v.useDeprecatedSynchronousErrorHandling?(0,pe.O)(ze):(0,ae.h)(ze)}function oe(ze,Ae){const{onStoppedNotification:q}=Y.v;q&&Te.z.setTimeout(()=>q(ze,Ae))}const lt={closed:!0,next:xe.Z,error:function _e(ze){throw ze},complete:xe.Z}},727:(on,ot,k)=>{"use strict";k.d(ot,{Lc:()=>Pe,w0:()=>xe,Nn:()=>Ce});var y=k(576);const Y=(0,k(3888).d)(Ue=>function(pe){Ue(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((De,Fe)=>`${Fe+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var ae=k(8737);class xe{constructor(Te){this.initialTeardown=Te,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Te;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const je of pe)je.remove(this);else pe.remove(this);const{initialTeardown:De}=this;if((0,y.m)(De))try{De()}catch(je){Te=je instanceof Y?je.errors:[je]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const je of Fe)try{me(je)}catch(Be){Te=null!=Te?Te:[],Be instanceof Y?Te=[...Te,...Be.errors]:Te.push(Be)}}if(Te)throw new Y(Te)}}add(Te){var pe;if(Te&&Te!==this)if(this.closed)me(Te);else{if(Te instanceof xe){if(Te.closed||Te._hasParent(this))return;Te._addParent(this)}(this._finalizers=null!==(pe=this._finalizers)&&void 0!==pe?pe:[]).push(Te)}}_hasParent(Te){const{_parentage:pe}=this;return pe===Te||Array.isArray(pe)&&pe.includes(Te)}_addParent(Te){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(Te),pe):pe?[pe,Te]:Te}_removeParent(Te){const{_parentage:pe}=this;pe===Te?this._parentage=null:Array.isArray(pe)&&(0,ae.P)(pe,Te)}remove(Te){const{_finalizers:pe}=this;pe&&(0,ae.P)(pe,Te),Te instanceof xe&&Te._removeParent(this)}}xe.EMPTY=(()=>{const Ue=new xe;return Ue.closed=!0,Ue})();const Pe=xe.EMPTY;function Ce(Ue){return Ue instanceof xe||Ue&&"closed"in Ue&&(0,y.m)(Ue.remove)&&(0,y.m)(Ue.add)&&(0,y.m)(Ue.unsubscribe)}function me(Ue){(0,y.m)(Ue)?Ue():Ue.unsubscribe()}},2416:(on,ot,k)=>{"use strict";k.d(ot,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(on,ot,k)=>{"use strict";k.d(ot,{c:()=>Pe});var y=k(9751),g=k(727),Y=k(8343),ae=k(5403),xe=k(4482);class Pe extends y.y{constructor(me,Ue){super(),this.source=me,this.subjectFactory=Ue,this._subject=null,this._refCount=0,this._connection=null,(0,xe.A)(me)&&(this.lift=me.lift)}_subscribe(me){return this.getSubject().subscribe(me)}getSubject(){const me=this._subject;return(!me||me.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:me}=this;this._subject=this._connection=null,null==me||me.unsubscribe()}connect(){let me=this._connection;if(!me){me=this._connection=new g.w0;const Ue=this.getSubject();me.add(this.source.subscribe((0,ae.x)(Ue,void 0,()=>{this._teardown(),Ue.complete()},Te=>{this._teardown(),Ue.error(Te)},()=>this._teardown()))),me.closed&&(this._connection=null,me=g.w0.EMPTY)}return me}refCount(){return(0,Y.x)()(this)}}},9841:(on,ot,k)=>{"use strict";k.d(ot,{a:()=>Te});var y=k(9751),g=k(4742),Y=k(8996),ae=k(4671),xe=k(3268),Pe=k(3269),Ce=k(1810),me=k(5403),Ue=k(9672);function Te(...Fe){const je=(0,Pe.yG)(Fe),Be=(0,Pe.jO)(Fe),{args:Xe,keys:Se}=(0,g.D)(Fe);if(0===Xe.length)return(0,Y.D)([],je);const _e=new y.y(function pe(Fe,je,Be=ae.y){return Xe=>{De(je,()=>{const{length:Se}=Fe,_e=new Array(Se);let oe=Se,lt=Se;for(let ze=0;ze<Se;ze++)De(je,()=>{const Ae=(0,Y.D)(Fe[ze],je);let q=!1;Ae.subscribe((0,me.x)(Xe,pt=>{_e[ze]=pt,q||(q=!0,lt--),lt||Xe.next(Be(_e.slice()))},()=>{--oe||Xe.complete()}))},Xe)},Xe)}}(Xe,je,Se?oe=>(0,Ce.n)(Se,oe):ae.y));return Be?_e.pipe((0,xe.Z)(Be)):_e}function De(Fe,je,Be){Fe?(0,Ue.f)(Be,Fe,je):je()}},7272:(on,ot,k)=>{"use strict";k.d(ot,{z:()=>xe});var y=k(8189),Y=k(3269),ae=k(8996);function xe(...Pe){return function g(){return(0,y.J)(1)}()((0,ae.D)(Pe,(0,Y.yG)(Pe)))}},9770:(on,ot,k)=>{"use strict";k.d(ot,{P:()=>Y});var y=k(9751),g=k(8421);function Y(ae){return new y.y(xe=>{(0,g.Xf)(ae()).subscribe(xe)})}},515:(on,ot,k)=>{"use strict";k.d(ot,{E:()=>g});const g=new(k(9751).y)(xe=>xe.complete())},4128:(on,ot,k)=>{"use strict";k.d(ot,{D:()=>me});var y=k(9751),g=k(4742),Y=k(8421),ae=k(3269),xe=k(5403),Pe=k(3268),Ce=k(1810);function me(...Ue){const Te=(0,ae.jO)(Ue),{args:pe,keys:De}=(0,g.D)(Ue),Fe=new y.y(je=>{const{length:Be}=pe;if(!Be)return void je.complete();const Xe=new Array(Be);let Se=Be,_e=Be;for(let oe=0;oe<Be;oe++){let lt=!1;(0,Y.Xf)(pe[oe]).subscribe((0,xe.x)(je,ze=>{lt||(lt=!0,_e--),Xe[oe]=ze},()=>Se--,void 0,()=>{(!Se||!lt)&&(_e||je.next(De?(0,Ce.n)(De,Xe):Xe),je.complete())}))}});return Te?Fe.pipe((0,Pe.Z)(Te)):Fe}},8996:(on,ot,k)=>{"use strict";k.d(ot,{D:()=>Ae});var y=k(8421),g=k(5363),Y=k(9468),Pe=k(9751),me=k(2202),Ue=k(576),Te=k(9672);function De(q,pt){if(!q)throw new Error("Iterable cannot be null");return new Pe.y(Ke=>{(0,Te.f)(Ke,pt,()=>{const ne=q[Symbol.asyncIterator]();(0,Te.f)(Ke,pt,()=>{ne.next().then(nt=>{nt.done?Ke.complete():Ke.next(nt.value)})},0,!0)})})}var Fe=k(3670),je=k(8239),Be=k(1144),Xe=k(6495),Se=k(2206),_e=k(4532),oe=k(3260);function Ae(q,pt){return pt?function ze(q,pt){if(null!=q){if((0,Fe.c)(q))return function ae(q,pt){return(0,y.Xf)(q).pipe((0,Y.R)(pt),(0,g.Q)(pt))}(q,pt);if((0,Be.z)(q))return function Ce(q,pt){return new Pe.y(Ke=>{let ne=0;return pt.schedule(function(){ne===q.length?Ke.complete():(Ke.next(q[ne++]),Ke.closed||this.schedule())})})}(q,pt);if((0,je.t)(q))return function xe(q,pt){return(0,y.Xf)(q).pipe((0,Y.R)(pt),(0,g.Q)(pt))}(q,pt);if((0,Se.D)(q))return De(q,pt);if((0,Xe.T)(q))return function pe(q,pt){return new Pe.y(Ke=>{let ne;return(0,Te.f)(Ke,pt,()=>{ne=q[me.h](),(0,Te.f)(Ke,pt,()=>{let nt,Me;try{({value:nt,done:Me}=ne.next())}catch(et){return void Ke.error(et)}Me?Ke.complete():Ke.next(nt)},0,!0)}),()=>(0,Ue.m)(null==ne?void 0:ne.return)&&ne.return()})}(q,pt);if((0,oe.L)(q))return function lt(q,pt){return De((0,oe.Q)(q),pt)}(q,pt)}throw(0,_e.z)(q)}(q,pt):(0,y.Xf)(q)}},4968:(on,ot,k)=>{"use strict";k.d(ot,{R:()=>Te});var y=k(8421),g=k(9751),Y=k(5577),ae=k(1144),xe=k(576),Pe=k(3268);const Ce=["addListener","removeListener"],me=["addEventListener","removeEventListener"],Ue=["on","off"];function Te(Be,Xe,Se,_e){if((0,xe.m)(Se)&&(_e=Se,Se=void 0),_e)return Te(Be,Xe,Se).pipe((0,Pe.Z)(_e));const[oe,lt]=function je(Be){return(0,xe.m)(Be.addEventListener)&&(0,xe.m)(Be.removeEventListener)}(Be)?me.map(ze=>Ae=>Be[ze](Xe,Ae,Se)):function De(Be){return(0,xe.m)(Be.addListener)&&(0,xe.m)(Be.removeListener)}(Be)?Ce.map(pe(Be,Xe)):function Fe(Be){return(0,xe.m)(Be.on)&&(0,xe.m)(Be.off)}(Be)?Ue.map(pe(Be,Xe)):[];if(!oe&&(0,ae.z)(Be))return(0,Y.z)(ze=>Te(ze,Xe,Se))((0,y.Xf)(Be));if(!oe)throw new TypeError("Invalid event target");return new g.y(ze=>{const Ae=(...q)=>ze.next(1<q.length?q:q[0]);return oe(Ae),()=>lt(Ae)})}function pe(Be,Xe){return Se=>_e=>Be[Se](Xe,_e)}},8421:(on,ot,k)=>{"use strict";k.d(ot,{Xf:()=>Fe});var y=k(655),g=k(1144),Y=k(8239),ae=k(9751),xe=k(3670),Pe=k(2206),Ce=k(4532),me=k(6495),Ue=k(3260),Te=k(576),pe=k(7849),De=k(8822);function Fe(ze){if(ze instanceof ae.y)return ze;if(null!=ze){if((0,xe.c)(ze))return function je(ze){return new ae.y(Ae=>{const q=ze[De.L]();if((0,Te.m)(q.subscribe))return q.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,g.z)(ze))return function Be(ze){return new ae.y(Ae=>{for(let q=0;q<ze.length&&!Ae.closed;q++)Ae.next(ze[q]);Ae.complete()})}(ze);if((0,Y.t)(ze))return function Xe(ze){return new ae.y(Ae=>{ze.then(q=>{Ae.closed||(Ae.next(q),Ae.complete())},q=>Ae.error(q)).then(null,pe.h)})}(ze);if((0,Pe.D)(ze))return _e(ze);if((0,me.T)(ze))return function Se(ze){return new ae.y(Ae=>{for(const q of ze)if(Ae.next(q),Ae.closed)return;Ae.complete()})}(ze);if((0,Ue.L)(ze))return function oe(ze){return _e((0,Ue.Q)(ze))}(ze)}throw(0,Ce.z)(ze)}function _e(ze){return new ae.y(Ae=>{(function lt(ze,Ae){var q,pt,Ke,ne;return(0,y.mG)(this,void 0,void 0,function*(){try{for(q=(0,y.KL)(ze);!(pt=yield q.next()).done;)if(Ae.next(pt.value),Ae.closed)return}catch(nt){Ke={error:nt}}finally{try{pt&&!pt.done&&(ne=q.return)&&(yield ne.call(q))}finally{if(Ke)throw Ke.error}}Ae.complete()})})(ze,Ae).catch(q=>Ae.error(q))})}},6451:(on,ot,k)=>{"use strict";k.d(ot,{T:()=>Pe});var y=k(8189),g=k(8421),Y=k(515),ae=k(3269),xe=k(8996);function Pe(...Ce){const me=(0,ae.yG)(Ce),Ue=(0,ae._6)(Ce,1/0),Te=Ce;return Te.length?1===Te.length?(0,g.Xf)(Te[0]):(0,y.J)(Ue)((0,xe.D)(Te,me)):Y.E}},9646:(on,ot,k)=>{"use strict";k.d(ot,{of:()=>Y});var y=k(3269),g=k(8996);function Y(...ae){const xe=(0,y.yG)(ae);return(0,g.D)(ae,xe)}},2843:(on,ot,k)=>{"use strict";k.d(ot,{_:()=>Y});var y=k(9751),g=k(576);function Y(ae,xe){const Pe=(0,g.m)(ae)?ae:()=>ae,Ce=me=>me.error(Pe());return new y.y(xe?me=>xe.schedule(Ce,0,me):Ce)}},5403:(on,ot,k)=>{"use strict";k.d(ot,{x:()=>g});var y=k(930);function g(ae,xe,Pe,Ce,me){return new Y(ae,xe,Pe,Ce,me)}class Y extends y.Lv{constructor(xe,Pe,Ce,me,Ue,Te){super(xe),this.onFinalize=Ue,this.shouldUnsubscribe=Te,this._next=Pe?function(pe){try{Pe(pe)}catch(De){xe.error(De)}}:super._next,this._error=me?function(pe){try{me(pe)}catch(De){xe.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(pe){xe.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var xe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(xe=this.onFinalize)||void 0===xe||xe.call(this))}}}},262:(on,ot,k)=>{"use strict";k.d(ot,{K:()=>ae});var y=k(8421),g=k(5403),Y=k(4482);function ae(xe){return(0,Y.e)((Pe,Ce)=>{let Te,me=null,Ue=!1;me=Pe.subscribe((0,g.x)(Ce,void 0,void 0,pe=>{Te=(0,y.Xf)(xe(pe,ae(xe)(Pe))),me?(me.unsubscribe(),me=null,Te.subscribe(Ce)):Ue=!0})),Ue&&(me.unsubscribe(),me=null,Te.subscribe(Ce))})}},4351:(on,ot,k)=>{"use strict";k.d(ot,{b:()=>Y});var y=k(5577),g=k(576);function Y(ae,xe){return(0,g.m)(xe)?(0,y.z)(ae,xe,1):(0,y.z)(ae,1)}},8372:(on,ot,k)=>{"use strict";k.d(ot,{b:()=>ae});var y=k(4986),g=k(4482),Y=k(5403);function ae(xe,Pe=y.z){return(0,g.e)((Ce,me)=>{let Ue=null,Te=null,pe=null;const De=()=>{if(Ue){Ue.unsubscribe(),Ue=null;const je=Te;Te=null,me.next(je)}};function Fe(){const je=pe+xe,Be=Pe.now();if(Be<je)return Ue=this.schedule(void 0,je-Be),void me.add(Ue);De()}Ce.subscribe((0,Y.x)(me,je=>{Te=je,pe=Pe.now(),Ue||(Ue=Pe.schedule(Fe,xe),me.add(Ue))},()=>{De(),me.complete()},void 0,()=>{Te=Ue=null}))})}},6590:(on,ot,k)=>{"use strict";k.d(ot,{d:()=>Y});var y=k(4482),g=k(5403);function Y(ae){return(0,y.e)((xe,Pe)=>{let Ce=!1;xe.subscribe((0,g.x)(Pe,me=>{Ce=!0,Pe.next(me)},()=>{Ce||Pe.next(ae),Pe.complete()}))})}},1884:(on,ot,k)=>{"use strict";k.d(ot,{x:()=>ae});var y=k(4671),g=k(4482),Y=k(5403);function ae(Pe,Ce=y.y){return Pe=null!=Pe?Pe:xe,(0,g.e)((me,Ue)=>{let Te,pe=!0;me.subscribe((0,Y.x)(Ue,De=>{const Fe=Ce(De);(pe||!Pe(Te,Fe))&&(pe=!1,Te=Fe,Ue.next(De))}))})}function xe(Pe,Ce){return Pe===Ce}},9300:(on,ot,k)=>{"use strict";k.d(ot,{h:()=>Y});var y=k(4482),g=k(5403);function Y(ae,xe){return(0,y.e)((Pe,Ce)=>{let me=0;Pe.subscribe((0,g.x)(Ce,Ue=>ae.call(xe,Ue,me++)&&Ce.next(Ue)))})}},8746:(on,ot,k)=>{"use strict";k.d(ot,{x:()=>g});var y=k(4482);function g(Y){return(0,y.e)((ae,xe)=>{try{ae.subscribe(xe)}finally{xe.add(Y)}})}},590:(on,ot,k)=>{"use strict";k.d(ot,{P:()=>Ce});var y=k(6805),g=k(9300),Y=k(5698),ae=k(6590),xe=k(8068),Pe=k(4671);function Ce(me,Ue){const Te=arguments.length>=2;return pe=>pe.pipe(me?(0,g.h)((De,Fe)=>me(De,Fe,pe)):Pe.y,(0,Y.q)(1),Te?(0,ae.d)(Ue):(0,xe.T)(()=>new y.K))}},4004:(on,ot,k)=>{"use strict";k.d(ot,{U:()=>Y});var y=k(4482),g=k(5403);function Y(ae,xe){return(0,y.e)((Pe,Ce)=>{let me=0;Pe.subscribe((0,g.x)(Ce,Ue=>{Ce.next(ae.call(xe,Ue,me++))}))})}},9718:(on,ot,k)=>{"use strict";k.d(ot,{h:()=>g});var y=k(4004);function g(Y){return(0,y.U)(()=>Y)}},8189:(on,ot,k)=>{"use strict";k.d(ot,{J:()=>Y});var y=k(5577),g=k(4671);function Y(ae=1/0){return(0,y.z)(g.y,ae)}},5577:(on,ot,k)=>{"use strict";k.d(ot,{z:()=>me});var y=k(4004),g=k(8421),Y=k(4482),ae=k(9672),xe=k(5403),Ce=k(576);function me(Ue,Te,pe=1/0){return(0,Ce.m)(Te)?me((De,Fe)=>(0,y.U)((je,Be)=>Te(De,je,Fe,Be))((0,g.Xf)(Ue(De,Fe))),pe):("number"==typeof Te&&(pe=Te),(0,Y.e)((De,Fe)=>function Pe(Ue,Te,pe,De,Fe,je,Be,Xe){const Se=[];let _e=0,oe=0,lt=!1;const ze=()=>{lt&&!Se.length&&!_e&&Te.complete()},Ae=pt=>_e<De?q(pt):Se.push(pt),q=pt=>{je&&Te.next(pt),_e++;let Ke=!1;(0,g.Xf)(pe(pt,oe++)).subscribe((0,xe.x)(Te,ne=>{null==Fe||Fe(ne),je?Ae(ne):Te.next(ne)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(_e--;Se.length&&_e<De;){const ne=Se.shift();Be?(0,ae.f)(Te,Be,()=>q(ne)):q(ne)}ze()}catch(ne){Te.error(ne)}}))};return Ue.subscribe((0,xe.x)(Te,Ae,()=>{lt=!0,ze()})),()=>{null==Xe||Xe()}}(De,Fe,Ue,pe)))}},5363:(on,ot,k)=>{"use strict";k.d(ot,{Q:()=>ae});var y=k(9672),g=k(4482),Y=k(5403);function ae(xe,Pe=0){return(0,g.e)((Ce,me)=>{Ce.subscribe((0,Y.x)(me,Ue=>(0,y.f)(me,xe,()=>me.next(Ue),Pe),()=>(0,y.f)(me,xe,()=>me.complete(),Pe),Ue=>(0,y.f)(me,xe,()=>me.error(Ue),Pe)))})}},8343:(on,ot,k)=>{"use strict";k.d(ot,{x:()=>Y});var y=k(4482),g=k(5403);function Y(){return(0,y.e)((ae,xe)=>{let Pe=null;ae._refCount++;const Ce=(0,g.x)(xe,void 0,void 0,void 0,()=>{if(!ae||ae._refCount<=0||0<--ae._refCount)return void(Pe=null);const me=ae._connection,Ue=Pe;Pe=null,me&&(!Ue||me===Ue)&&me.unsubscribe(),xe.unsubscribe()});ae.subscribe(Ce),Ce.closed||(Pe=ae.connect())})}},5026:(on,ot,k)=>{"use strict";k.d(ot,{R:()=>ae});var y=k(4482),g=k(5403);function ae(xe,Pe){return(0,y.e)(function Y(xe,Pe,Ce,me,Ue){return(Te,pe)=>{let De=Ce,Fe=Pe,je=0;Te.subscribe((0,g.x)(pe,Be=>{const Xe=je++;Fe=De?xe(Fe,Be,Xe):(De=!0,Be),me&&pe.next(Fe)},Ue&&(()=>{De&&pe.next(Fe),pe.complete()})))}}(xe,Pe,arguments.length>=2,!0))}},3099:(on,ot,k)=>{"use strict";k.d(ot,{B:()=>xe});var y=k(8421),g=k(7579),Y=k(930),ae=k(4482);function xe(Ce={}){const{connector:me=(()=>new g.x),resetOnError:Ue=!0,resetOnComplete:Te=!0,resetOnRefCountZero:pe=!0}=Ce;return De=>{let Fe,je,Be,Xe=0,Se=!1,_e=!1;const oe=()=>{null==je||je.unsubscribe(),je=void 0},lt=()=>{oe(),Fe=Be=void 0,Se=_e=!1},ze=()=>{const Ae=Fe;lt(),null==Ae||Ae.unsubscribe()};return(0,ae.e)((Ae,q)=>{Xe++,!_e&&!Se&&oe();const pt=Be=null!=Be?Be:me();q.add(()=>{Xe--,0===Xe&&!_e&&!Se&&(je=Pe(ze,pe))}),pt.subscribe(q),!Fe&&Xe>0&&(Fe=new Y.Hp({next:Ke=>pt.next(Ke),error:Ke=>{_e=!0,oe(),je=Pe(lt,Ue,Ke),pt.error(Ke)},complete:()=>{Se=!0,oe(),je=Pe(lt,Te),pt.complete()}}),(0,y.Xf)(Ae).subscribe(Fe))})(De)}}function Pe(Ce,me,...Ue){if(!0===me)return void Ce();if(!1===me)return;const Te=new Y.Hp({next:()=>{Te.unsubscribe(),Ce()}});return(0,y.Xf)(me(...Ue)).subscribe(Te)}},8675:(on,ot,k)=>{"use strict";k.d(ot,{O:()=>ae});var y=k(7272),g=k(3269),Y=k(4482);function ae(...xe){const Pe=(0,g.yG)(xe);return(0,Y.e)((Ce,me)=>{(Pe?(0,y.z)(xe,Ce,Pe):(0,y.z)(xe,Ce)).subscribe(me)})}},9468:(on,ot,k)=>{"use strict";k.d(ot,{R:()=>g});var y=k(4482);function g(Y,ae=0){return(0,y.e)((xe,Pe)=>{Pe.add(Y.schedule(()=>xe.subscribe(Pe),ae))})}},3900:(on,ot,k)=>{"use strict";k.d(ot,{w:()=>ae});var y=k(8421),g=k(4482),Y=k(5403);function ae(xe,Pe){return(0,g.e)((Ce,me)=>{let Ue=null,Te=0,pe=!1;const De=()=>pe&&!Ue&&me.complete();Ce.subscribe((0,Y.x)(me,Fe=>{null==Ue||Ue.unsubscribe();let je=0;const Be=Te++;(0,y.Xf)(xe(Fe,Be)).subscribe(Ue=(0,Y.x)(me,Xe=>me.next(Pe?Pe(Fe,Xe,Be,je++):Xe),()=>{Ue=null,De()}))},()=>{pe=!0,De()}))})}},5698:(on,ot,k)=>{"use strict";k.d(ot,{q:()=>ae});var y=k(515),g=k(4482),Y=k(5403);function ae(xe){return xe<=0?()=>y.E:(0,g.e)((Pe,Ce)=>{let me=0;Pe.subscribe((0,Y.x)(Ce,Ue=>{++me<=xe&&(Ce.next(Ue),xe<=me&&Ce.complete())}))})}},8505:(on,ot,k)=>{"use strict";k.d(ot,{b:()=>xe});var y=k(576),g=k(4482),Y=k(5403),ae=k(4671);function xe(Pe,Ce,me){const Ue=(0,y.m)(Pe)||Ce||me?{next:Pe,error:Ce,complete:me}:Pe;return Ue?(0,g.e)((Te,pe)=>{var De;null===(De=Ue.subscribe)||void 0===De||De.call(Ue);let Fe=!0;Te.subscribe((0,Y.x)(pe,je=>{var Be;null===(Be=Ue.next)||void 0===Be||Be.call(Ue,je),pe.next(je)},()=>{var je;Fe=!1,null===(je=Ue.complete)||void 0===je||je.call(Ue),pe.complete()},je=>{var Be;Fe=!1,null===(Be=Ue.error)||void 0===Be||Be.call(Ue,je),pe.error(je)},()=>{var je,Be;Fe&&(null===(je=Ue.unsubscribe)||void 0===je||je.call(Ue)),null===(Be=Ue.finalize)||void 0===Be||Be.call(Ue)}))}):ae.y}},8068:(on,ot,k)=>{"use strict";k.d(ot,{T:()=>ae});var y=k(6805),g=k(4482),Y=k(5403);function ae(Pe=xe){return(0,g.e)((Ce,me)=>{let Ue=!1;Ce.subscribe((0,Y.x)(me,Te=>{Ue=!0,me.next(Te)},()=>Ue?me.complete():me.error(Pe())))})}function xe(){return new y.K}},4408:(on,ot,k)=>{"use strict";k.d(ot,{o:()=>xe});var y=k(727);class g extends y.w0{constructor(Ce,me){super()}schedule(Ce,me=0){return this}}const Y={setInterval(Pe,Ce,...me){const{delegate:Ue}=Y;return null!=Ue&&Ue.setInterval?Ue.setInterval(Pe,Ce,...me):setInterval(Pe,Ce,...me)},clearInterval(Pe){const{delegate:Ce}=Y;return((null==Ce?void 0:Ce.clearInterval)||clearInterval)(Pe)},delegate:void 0};var ae=k(8737);class xe extends g{constructor(Ce,me){super(Ce,me),this.scheduler=Ce,this.work=me,this.pending=!1}schedule(Ce,me=0){var Ue;if(this.closed)return this;this.state=Ce;const Te=this.id,pe=this.scheduler;return null!=Te&&(this.id=this.recycleAsyncId(pe,Te,me)),this.pending=!0,this.delay=me,this.id=null!==(Ue=this.id)&&void 0!==Ue?Ue:this.requestAsyncId(pe,this.id,me),this}requestAsyncId(Ce,me,Ue=0){return Y.setInterval(Ce.flush.bind(Ce,this),Ue)}recycleAsyncId(Ce,me,Ue=0){if(null!=Ue&&this.delay===Ue&&!1===this.pending)return me;null!=me&&Y.clearInterval(me)}execute(Ce,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ue=this._execute(Ce,me);if(Ue)return Ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,me){let Te,Ue=!1;try{this.work(Ce)}catch(pe){Ue=!0,Te=pe||new Error("Scheduled action threw falsy error")}if(Ue)return this.unsubscribe(),Te}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:me}=this,{actions:Ue}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(Ue,this),null!=Ce&&(this.id=this.recycleAsyncId(me,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(on,ot,k)=>{"use strict";k.d(ot,{v:()=>Y});var y=k(6063);class g{constructor(xe,Pe=g.now){this.schedulerActionCtor=xe,this.now=Pe}schedule(xe,Pe=0,Ce){return new this.schedulerActionCtor(this,xe).schedule(Ce,Pe)}}g.now=y.l.now;class Y extends g{constructor(xe,Pe=g.now){super(xe,Pe),this.actions=[],this._active=!1}flush(xe){const{actions:Pe}=this;if(this._active)return void Pe.push(xe);let Ce;this._active=!0;do{if(Ce=xe.execute(xe.state,xe.delay))break}while(xe=Pe.shift());if(this._active=!1,Ce){for(;xe=Pe.shift();)xe.unsubscribe();throw Ce}}}},4986:(on,ot,k)=>{"use strict";k.d(ot,{P:()=>ae,z:()=>Y});var y=k(4408);const Y=new(k(7565).v)(y.o),ae=Y},6063:(on,ot,k)=>{"use strict";k.d(ot,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(on,ot,k)=>{"use strict";k.d(ot,{z:()=>y});const y={setTimeout(g,Y,...ae){const{delegate:xe}=y;return null!=xe&&xe.setTimeout?xe.setTimeout(g,Y,...ae):setTimeout(g,Y,...ae)},clearTimeout(g){const{delegate:Y}=y;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(g)},delegate:void 0}},2202:(on,ot,k)=>{"use strict";k.d(ot,{h:()=>g});const g=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(on,ot,k)=>{"use strict";k.d(ot,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(on,ot,k)=>{"use strict";k.d(ot,{K:()=>g});const g=(0,k(3888).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(on,ot,k)=>{"use strict";k.d(ot,{_6:()=>Pe,jO:()=>ae,yG:()=>xe});var y=k(576),g=k(3532);function Y(Ce){return Ce[Ce.length-1]}function ae(Ce){return(0,y.m)(Y(Ce))?Ce.pop():void 0}function xe(Ce){return(0,g.K)(Y(Ce))?Ce.pop():void 0}function Pe(Ce,me){return"number"==typeof Y(Ce)?Ce.pop():me}},4742:(on,ot,k)=>{"use strict";k.d(ot,{D:()=>xe});const{isArray:y}=Array,{getPrototypeOf:g,prototype:Y,keys:ae}=Object;function xe(Ce){if(1===Ce.length){const me=Ce[0];if(y(me))return{args:me,keys:null};if(function Pe(Ce){return Ce&&"object"==typeof Ce&&g(Ce)===Y}(me)){const Ue=ae(me);return{args:Ue.map(Te=>me[Te]),keys:Ue}}}return{args:Ce,keys:null}}},8737:(on,ot,k)=>{"use strict";function y(g,Y){if(g){const ae=g.indexOf(Y);0<=ae&&g.splice(ae,1)}}k.d(ot,{P:()=>y})},3888:(on,ot,k)=>{"use strict";function y(g){const ae=g(xe=>{Error.call(xe),xe.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(ot,{d:()=>y})},1810:(on,ot,k)=>{"use strict";function y(g,Y){return g.reduce((ae,xe,Pe)=>(ae[xe]=Y[Pe],ae),{})}k.d(ot,{n:()=>y})},2806:(on,ot,k)=>{"use strict";k.d(ot,{O:()=>ae,x:()=>Y});var y=k(2416);let g=null;function Y(xe){if(y.v.useDeprecatedSynchronousErrorHandling){const Pe=!g;if(Pe&&(g={errorThrown:!1,error:null}),xe(),Pe){const{errorThrown:Ce,error:me}=g;if(g=null,Ce)throw me}}else xe()}function ae(xe){y.v.useDeprecatedSynchronousErrorHandling&&g&&(g.errorThrown=!0,g.error=xe)}},9672:(on,ot,k)=>{"use strict";function y(g,Y,ae,xe=0,Pe=!1){const Ce=Y.schedule(function(){ae(),Pe?g.add(this.schedule(null,xe)):this.unsubscribe()},xe);if(g.add(Ce),!Pe)return Ce}k.d(ot,{f:()=>y})},4671:(on,ot,k)=>{"use strict";function y(g){return g}k.d(ot,{y:()=>y})},1144:(on,ot,k)=>{"use strict";k.d(ot,{z:()=>y});const y=g=>g&&"number"==typeof g.length&&"function"!=typeof g},2206:(on,ot,k)=>{"use strict";k.d(ot,{D:()=>g});var y=k(576);function g(Y){return Symbol.asyncIterator&&(0,y.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},576:(on,ot,k)=>{"use strict";function y(g){return"function"==typeof g}k.d(ot,{m:()=>y})},3670:(on,ot,k)=>{"use strict";k.d(ot,{c:()=>Y});var y=k(8822),g=k(576);function Y(ae){return(0,g.m)(ae[y.L])}},6495:(on,ot,k)=>{"use strict";k.d(ot,{T:()=>Y});var y=k(2202),g=k(576);function Y(ae){return(0,g.m)(null==ae?void 0:ae[y.h])}},8239:(on,ot,k)=>{"use strict";k.d(ot,{t:()=>g});var y=k(576);function g(Y){return(0,y.m)(null==Y?void 0:Y.then)}},3260:(on,ot,k)=>{"use strict";k.d(ot,{L:()=>ae,Q:()=>Y});var y=k(655),g=k(576);function Y(xe){return(0,y.FC)(this,arguments,function*(){const Ce=xe.getReader();try{for(;;){const{value:me,done:Ue}=yield(0,y.qq)(Ce.read());if(Ue)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(me)}}finally{Ce.releaseLock()}})}function ae(xe){return(0,g.m)(null==xe?void 0:xe.getReader)}},3532:(on,ot,k)=>{"use strict";k.d(ot,{K:()=>g});var y=k(576);function g(Y){return Y&&(0,y.m)(Y.schedule)}},4482:(on,ot,k)=>{"use strict";k.d(ot,{A:()=>g,e:()=>Y});var y=k(576);function g(ae){return(0,y.m)(null==ae?void 0:ae.lift)}function Y(ae){return xe=>{if(g(xe))return xe.lift(function(Pe){try{return ae(Pe,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(on,ot,k)=>{"use strict";k.d(ot,{Z:()=>ae});var y=k(4004);const{isArray:g}=Array;function ae(xe){return(0,y.U)(Pe=>function Y(xe,Pe){return g(Pe)?xe(...Pe):xe(Pe)}(xe,Pe))}},5032:(on,ot,k)=>{"use strict";function y(){}k.d(ot,{Z:()=>y})},9635:(on,ot,k)=>{"use strict";k.d(ot,{U:()=>Y,z:()=>g});var y=k(4671);function g(...ae){return Y(ae)}function Y(ae){return 0===ae.length?y.y:1===ae.length?ae[0]:function(Pe){return ae.reduce((Ce,me)=>me(Ce),Pe)}}},7849:(on,ot,k)=>{"use strict";k.d(ot,{h:()=>Y});var y=k(2416),g=k(3410);function Y(ae){g.z.setTimeout(()=>{const{onUnhandledError:xe}=y.v;if(!xe)throw ae;xe(ae)})}},4532:(on,ot,k)=>{"use strict";function y(g){return new TypeError(`You provided ${null!==g&&"object"==typeof g?"an invalid object":`'${g}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(ot,{z:()=>y})},863:(on,ot,k)=>{var y={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7879,9230],"./ion-datetime_3.entry.js":[4959,7879,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function g(Y){if(!k.o(y,Y))return Promise.resolve().then(()=>{var Pe=new Error("Cannot find module '"+Y+"'");throw Pe.code="MODULE_NOT_FOUND",Pe});var ae=y[Y],xe=ae[0];return Promise.all(ae.slice(1).map(k.e)).then(()=>k(xe))}g.keys=()=>Object.keys(y),g.id=863,on.exports=g},655:(on,ot,k)=>{"use strict";function ae(ut,bt){var yt={};for(var We in ut)Object.prototype.hasOwnProperty.call(ut,We)&&bt.indexOf(We)<0&&(yt[We]=ut[We]);if(null!=ut&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(We=Object.getOwnPropertySymbols(ut);He<We.length;He++)bt.indexOf(We[He])<0&&Object.prototype.propertyIsEnumerable.call(ut,We[He])&&(yt[We[He]]=ut[We[He]])}return yt}function xe(ut,bt,yt,We){var _t,He=arguments.length,Ge=He<3?bt:null===We?We=Object.getOwnPropertyDescriptor(bt,yt):We;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ge=Reflect.decorate(ut,bt,yt,We);else for(var mt=ut.length-1;mt>=0;mt--)(_t=ut[mt])&&(Ge=(He<3?_t(Ge):He>3?_t(bt,yt,Ge):_t(bt,yt))||Ge);return He>3&&Ge&&Object.defineProperty(bt,yt,Ge),Ge}function De(ut,bt,yt,We){return new(yt||(yt=Promise))(function(Ge,_t){function mt(_n){try{jt(We.next(_n))}catch(Tt){_t(Tt)}}function Ct(_n){try{jt(We.throw(_n))}catch(Tt){_t(Tt)}}function jt(_n){_n.done?Ge(_n.value):function He(Ge){return Ge instanceof yt?Ge:new yt(function(_t){_t(Ge)})}(_n.value).then(mt,Ct)}jt((We=We.apply(ut,bt||[])).next())})}function ze(ut){return this instanceof ze?(this.v=ut,this):new ze(ut)}function Ae(ut,bt,yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,We=yt.apply(ut,bt||[]),Ge=[];return He={},_t("next"),_t("throw"),_t("return"),He[Symbol.asyncIterator]=function(){return this},He;function _t(ct){We[ct]&&(He[ct]=function(Rt){return new Promise(function(Jt,Cn){Ge.push([ct,Rt,Jt,Cn])>1||mt(ct,Rt)})})}function mt(ct,Rt){try{!function Ct(ct){ct.value instanceof ze?Promise.resolve(ct.value.v).then(jt,_n):Tt(Ge[0][2],ct)}(We[ct](Rt))}catch(Jt){Tt(Ge[0][3],Jt)}}function jt(ct){mt("next",ct)}function _n(ct){mt("throw",ct)}function Tt(ct,Rt){ct(Rt),Ge.shift(),Ge.length&&mt(Ge[0][0],Ge[0][1])}}function pt(ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,bt=ut[Symbol.asyncIterator];return bt?bt.call(ut):(ut=function Xe(ut){var bt="function"==typeof Symbol&&Symbol.iterator,yt=bt&&ut[bt],We=0;if(yt)return yt.call(ut);if(ut&&"number"==typeof ut.length)return{next:function(){return ut&&We>=ut.length&&(ut=void 0),{value:ut&&ut[We++],done:!ut}}};throw new TypeError(bt?"Object is not iterable.":"Symbol.iterator is not defined.")}(ut),yt={},We("next"),We("throw"),We("return"),yt[Symbol.asyncIterator]=function(){return this},yt);function We(Ge){yt[Ge]=ut[Ge]&&function(_t){return new Promise(function(mt,Ct){!function He(Ge,_t,mt,Ct){Promise.resolve(Ct).then(function(jt){Ge({value:jt,done:mt})},_t)}(mt,Ct,(_t=ut[Ge](_t)).done,_t.value)})}}}k.d(ot,{FC:()=>Ae,KL:()=>pt,_T:()=>ae,gn:()=>xe,mG:()=>De,qq:()=>ze})},7340:(on,ot,k)=>{"use strict";k.d(ot,{F4:()=>Te,IO:()=>Be,LC:()=>g,SB:()=>Ue,X$:()=>ae,ZE:()=>oe,ZN:()=>_e,_j:()=>y,eR:()=>pe,jt:()=>xe,k1:()=>lt,l3:()=>Y,oB:()=>me,pV:()=>Fe,ru:()=>Pe,vP:()=>Ce});class y{}class g{}const Y="*";function ae(ze,Ae){return{type:7,name:ze,definitions:Ae,options:{}}}function xe(ze,Ae=null){return{type:4,styles:Ae,timings:ze}}function Pe(ze,Ae=null){return{type:3,steps:ze,options:Ae}}function Ce(ze,Ae=null){return{type:2,steps:ze,options:Ae}}function me(ze){return{type:6,styles:ze,offset:null}}function Ue(ze,Ae,q){return{type:0,name:ze,styles:Ae,options:q}}function Te(ze){return{type:5,steps:ze}}function pe(ze,Ae,q=null){return{type:1,expr:ze,animation:Ae,options:q}}function Fe(ze=null){return{type:9,options:ze}}function Be(ze,Ae,q=null){return{type:11,selector:ze,animation:Ae,options:q}}function Se(ze){Promise.resolve().then(ze)}class _e{constructor(Ae=0,q=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ae+q}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}onStart(Ae){this._originalOnStartFns.push(Ae),this._onStartFns.push(Ae)}onDone(Ae){this._originalOnDoneFns.push(Ae),this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Se(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ae){this._position=this.totalTime?Ae*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ae){const q="start"==Ae?this._onStartFns:this._onDoneFns;q.forEach(pt=>pt()),q.length=0}}class oe{constructor(Ae){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ae;let q=0,pt=0,Ke=0;const ne=this.players.length;0==ne?Se(()=>this._onFinish()):this.players.forEach(nt=>{nt.onDone(()=>{++q==ne&&this._onFinish()}),nt.onDestroy(()=>{++pt==ne&&this._onDestroy()}),nt.onStart(()=>{++Ke==ne&&this._onStart()})}),this.totalTime=this.players.reduce((nt,Me)=>Math.max(nt,Me.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}init(){this.players.forEach(Ae=>Ae.init())}onStart(Ae){this._onStartFns.push(Ae)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[])}onDone(Ae){this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ae=>Ae.play())}pause(){this.players.forEach(Ae=>Ae.pause())}restart(){this.players.forEach(Ae=>Ae.restart())}finish(){this._onFinish(),this.players.forEach(Ae=>Ae.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ae=>Ae.destroy()),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this.players.forEach(Ae=>Ae.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ae){const q=Ae*this.totalTime;this.players.forEach(pt=>{const Ke=pt.totalTime?Math.min(1,q/pt.totalTime):1;pt.setPosition(Ke)})}getPosition(){const Ae=this.players.reduce((q,pt)=>null===q||pt.totalTime>q.totalTime?pt:q,null);return null!=Ae?Ae.getPosition():0}beforeDestroy(){this.players.forEach(Ae=>{Ae.beforeDestroy&&Ae.beforeDestroy()})}triggerCallback(Ae){const q="start"==Ae?this._onStartFns:this._onDoneFns;q.forEach(pt=>pt()),q.length=0}}const lt="!"},6895:(on,ot,k)=>{"use strict";k.d(ot,{Do:()=>oe,EM:()=>so,HT:()=>ae,JF:()=>Io,K0:()=>Pe,Mx:()=>Fi,NF:()=>Ps,O5:()=>Re,PM:()=>zs,RF:()=>st,S$:()=>Xe,V_:()=>Ue,Ye:()=>lt,b0:()=>_e,bD:()=>vo,ez:()=>ga,mk:()=>ar,n9:()=>kt,q:()=>Y,sg:()=>Ci,tP:()=>Qn,w_:()=>xe});var y=k(4650);let g=null;function Y(){return g}function ae(L){g||(g=L)}class xe{}const Pe=new y.OlP("DocumentToken");let Ce=(()=>{class L{historyGo(U){throw new Error("Not implemented")}}return L.\u0275fac=function(U){return new(U||L)},L.\u0275prov=y.Yz7({token:L,factory:function(){return function me(){return(0,y.LFG)(Te)}()},providedIn:"platform"}),L})();const Ue=new y.OlP("Location Initialized");let Te=(()=>{class L extends Ce{constructor(U){super(),this._doc=U,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(U){const ce=Y().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("popstate",U,!1),()=>ce.removeEventListener("popstate",U)}onHashChange(U){const ce=Y().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("hashchange",U,!1),()=>ce.removeEventListener("hashchange",U)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(U){this._location.pathname=U}pushState(U,ce,Ne){pe()?this._history.pushState(U,ce,Ne):this._location.hash=Ne}replaceState(U,ce,Ne){pe()?this._history.replaceState(U,ce,Ne):this._location.hash=Ne}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return L.\u0275fac=function(U){return new(U||L)(y.LFG(Pe))},L.\u0275prov=y.Yz7({token:L,factory:function(){return function De(){return new Te((0,y.LFG)(Pe))}()},providedIn:"platform"}),L})();function pe(){return!!window.history.pushState}function Fe(L,J){if(0==L.length)return J;if(0==J.length)return L;let U=0;return L.endsWith("/")&&U++,J.startsWith("/")&&U++,2==U?L+J.substring(1):1==U?L+J:L+"/"+J}function je(L){const J=L.match(/#|\?|$/),U=J&&J.index||L.length;return L.slice(0,U-("/"===L[U-1]?1:0))+L.slice(U)}function Be(L){return L&&"?"!==L[0]?"?"+L:L}let Xe=(()=>{class L{historyGo(U){throw new Error("Not implemented")}}return L.\u0275fac=function(U){return new(U||L)},L.\u0275prov=y.Yz7({token:L,factory:function(){return(0,y.f3M)(_e)},providedIn:"root"}),L})();const Se=new y.OlP("appBaseHref");let _e=(()=>{class L extends Xe{constructor(U,ce){var Ne,Ft,Zt;super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=null!==(Ne=null!==(Ft=null!=ce?ce:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Ft?Ft:null===(Zt=(0,y.f3M)(Pe).location)||void 0===Zt?void 0:Zt.origin)&&void 0!==Ne?Ne:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return Fe(this._baseHref,U)}path(U=!1){const ce=this._platformLocation.pathname+Be(this._platformLocation.search),Ne=this._platformLocation.hash;return Ne&&U?`${ce}${Ne}`:ce}pushState(U,ce,Ne,Ft){const Zt=this.prepareExternalUrl(Ne+Be(Ft));this._platformLocation.pushState(U,ce,Zt)}replaceState(U,ce,Ne,Ft){const Zt=this.prepareExternalUrl(Ne+Be(Ft));this._platformLocation.replaceState(U,ce,Zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){var ce,Ne;null===(ce=(Ne=this._platformLocation).historyGo)||void 0===ce||ce.call(Ne,U)}}return L.\u0275fac=function(U){return new(U||L)(y.LFG(Ce),y.LFG(Se,8))},L.\u0275prov=y.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),oe=(()=>{class L extends Xe{constructor(U,ce){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=ce&&(this._baseHref=ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let ce=this._platformLocation.hash;return null==ce&&(ce="#"),ce.length>0?ce.substring(1):ce}prepareExternalUrl(U){const ce=Fe(this._baseHref,U);return ce.length>0?"#"+ce:ce}pushState(U,ce,Ne,Ft){let Zt=this.prepareExternalUrl(Ne+Be(Ft));0==Zt.length&&(Zt=this._platformLocation.pathname),this._platformLocation.pushState(U,ce,Zt)}replaceState(U,ce,Ne,Ft){let Zt=this.prepareExternalUrl(Ne+Be(Ft));0==Zt.length&&(Zt=this._platformLocation.pathname),this._platformLocation.replaceState(U,ce,Zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){var ce,Ne;null===(ce=(Ne=this._platformLocation).historyGo)||void 0===ce||ce.call(Ne,U)}}return L.\u0275fac=function(U){return new(U||L)(y.LFG(Ce),y.LFG(Se,8))},L.\u0275prov=y.Yz7({token:L,factory:L.\u0275fac}),L})(),lt=(()=>{class L{constructor(U){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const ce=this._locationStrategy.getBaseHref();this._basePath=function pt(L){if(new RegExp("^(https?:)?//").test(L)){const[,U]=L.split(/\/\/[^\/]+/);return U}return L}(je(q(ce))),this._locationStrategy.onPopState(Ne=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ne.state,type:Ne.type})})}ngOnDestroy(){var U;null===(U=this._urlChangeSubscription)||void 0===U||U.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,ce=""){return this.path()==this.normalize(U+Be(ce))}normalize(U){return L.stripTrailingSlash(function Ae(L,J){if(!L||!J.startsWith(L))return J;const U=J.substring(L.length);return""===U||["/",";","?","#"].includes(U[0])?U:J}(this._basePath,q(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,ce="",Ne=null){this._locationStrategy.pushState(Ne,"",U,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Be(ce)),Ne)}replaceState(U,ce="",Ne=null){this._locationStrategy.replaceState(Ne,"",U,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Be(ce)),Ne)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){var ce,Ne;null===(ce=(Ne=this._locationStrategy).historyGo)||void 0===ce||ce.call(Ne,U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ce=>{this._notifyUrlChangeListeners(ce.url,ce.state)})),()=>{const ce=this._urlChangeListeners.indexOf(U);var Ne;this._urlChangeListeners.splice(ce,1),0===this._urlChangeListeners.length&&(null===(Ne=this._urlChangeSubscription)||void 0===Ne||Ne.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",ce){this._urlChangeListeners.forEach(Ne=>Ne(U,ce))}subscribe(U,ce,Ne){return this._subject.subscribe({next:U,error:ce,complete:Ne})}}return L.normalizeQueryParams=Be,L.joinWithSlash=Fe,L.stripTrailingSlash=je,L.\u0275fac=function(U){return new(U||L)(y.LFG(Xe))},L.\u0275prov=y.Yz7({token:L,factory:function(){return function ze(){return new lt((0,y.LFG)(Xe))}()},providedIn:"root"}),L})();function q(L){return L.replace(/\/index.html$/,"")}function Fi(L,J){J=encodeURIComponent(J);for(const U of L.split(";")){const ce=U.indexOf("="),[Ne,Ft]=-1==ce?[U,""]:[U.slice(0,ce),U.slice(ce+1)];if(Ne.trim()===J)return decodeURIComponent(Ft)}return null}const gi=/\s+/,bn=[];let ar=(()=>{class L{constructor(U,ce,Ne,Ft){this._iterableDiffers=U,this._keyValueDiffers=ce,this._ngEl=Ne,this._renderer=Ft,this.initialClasses=bn,this.stateMap=new Map}set klass(U){this.initialClasses=null!=U?U.trim().split(gi):bn}set ngClass(U){this.rawClass="string"==typeof U?U.trim().split(gi):U}ngDoCheck(){for(const ce of this.initialClasses)this._updateState(ce,!0);const U=this.rawClass;if(Array.isArray(U)||U instanceof Set)for(const ce of U)this._updateState(ce,!0);else if(null!=U)for(const ce of Object.keys(U))this._updateState(ce,Boolean(U[ce]));this._applyStateDiff()}_updateState(U,ce){const Ne=this.stateMap.get(U);void 0!==Ne?(Ne.enabled!==ce&&(Ne.changed=!0,Ne.enabled=ce),Ne.touched=!0):this.stateMap.set(U,{enabled:ce,changed:!0,touched:!0})}_applyStateDiff(){for(const U of this.stateMap){const ce=U[0],Ne=U[1];Ne.changed?(this._toggleClass(ce,Ne.enabled),Ne.changed=!1):Ne.touched||(Ne.enabled&&this._toggleClass(ce,!1),this.stateMap.delete(ce)),Ne.touched=!1}}_toggleClass(U,ce){(U=U.trim()).length>0&&U.split(gi).forEach(Ne=>{ce?this._renderer.addClass(this._ngEl.nativeElement,Ne):this._renderer.removeClass(this._ngEl.nativeElement,Ne)})}}return L.\u0275fac=function(U){return new(U||L)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),L})();class Xr{constructor(J,U,ce,Ne){this.$implicit=J,this.ngForOf=U,this.index=ce,this.count=Ne}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ci=(()=>{class L{set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}constructor(U,ce,Ne){this._viewContainer=U,this._template=ce,this._differs=Ne,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const ce=this._viewContainer;U.forEachOperation((Ne,Ft,Zt)=>{if(null==Ne.previousIndex)ce.createEmbeddedView(this._template,new Xr(Ne.item,this._ngForOf,-1,-1),null===Zt?void 0:Zt);else if(null==Zt)ce.remove(null===Ft?void 0:Ft);else if(null!==Ft){const jn=ce.get(Ft);ce.move(jn,Zt),Br(jn,Ne)}});for(let Ne=0,Ft=ce.length;Ne<Ft;Ne++){const jn=ce.get(Ne).context;jn.index=Ne,jn.count=Ft,jn.ngForOf=this._ngForOf}U.forEachIdentityChange(Ne=>{Br(ce.get(Ne.currentIndex),Ne)})}static ngTemplateContextGuard(U,ce){return!0}}return L.\u0275fac=function(U){return new(U||L)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),L})();function Br(L,J){L.context.$implicit=J.item}let Re=(()=>{class L{constructor(U,ce){this._viewContainer=U,this._context=new Ye,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ce}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){be("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){be("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,ce){return!0}}return L.\u0275fac=function(U){return new(U||L)(y.Y36(y.s_b),y.Y36(y.Rgc))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),L})();class Ye{constructor(){this.$implicit=null,this.ngIf=null}}function be(L,J){if(J&&!J.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,y.AaK)(J)}'.`)}class tt{constructor(J,U){this._viewContainerRef=J,this._templateRef=U,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(J){J&&!this._created?this.create():!J&&this._created&&this.destroy()}}let st=(()=>{class L{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(U){this._ngSwitch=U,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(U){this._defaultViews.push(U)}_matchCase(U){const ce=U==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ce,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ce}_updateDefaultCases(U){if(this._defaultViews.length>0&&U!==this._defaultUsed){this._defaultUsed=U;for(const ce of this._defaultViews)ce.enforceState(U)}}}return L.\u0275fac=function(U){return new(U||L)},L.\u0275dir=y.lG2({type:L,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),L})(),kt=(()=>{class L{constructor(U,ce,Ne){this.ngSwitch=Ne,Ne._addCase(),this._view=new tt(U,ce)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return L.\u0275fac=function(U){return new(U||L)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(st,9))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),L})(),Qn=(()=>{class L{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const ce=this._viewContainerRef;if(this._viewRef&&ce.remove(ce.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ne,ngTemplateOutletContext:Ft,ngTemplateOutletInjector:Zt}=this;this._viewRef=ce.createEmbeddedView(Ne,Ft,Zt?{injector:Zt}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return L.\u0275fac=function(U){return new(U||L)(y.Y36(y.s_b))},L.\u0275dir=y.lG2({type:L,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[y.TTD]}),L})(),ga=(()=>{class L{}return L.\u0275fac=function(U){return new(U||L)},L.\u0275mod=y.oAB({type:L}),L.\u0275inj=y.cJS({}),L})();const vo="browser",xs="server";function Ps(L){return L===vo}function zs(L){return L===xs}let so=(()=>{class L{}return L.\u0275prov=(0,y.Yz7)({token:L,providedIn:"root",factory:()=>new oa((0,y.LFG)(Pe),window)}),L})();class oa{constructor(J,U){this.document=J,this.window=U,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const U=function Eo(L,J){const U=L.getElementById(J)||L.getElementsByName(J)[0];if(U)return U;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const ce=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let Ne=ce.currentNode;for(;Ne;){const Ft=Ne.shadowRoot;if(Ft){const Zt=Ft.getElementById(J)||Ft.querySelector(`[name="${J}"]`);if(Zt)return Zt}Ne=ce.nextNode()}}return null}(this.document,J);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=J)}}scrollToElement(J){const U=J.getBoundingClientRect(),ce=U.left+this.window.pageXOffset,Ne=U.top+this.window.pageYOffset,Ft=this.offset();this.window.scrollTo(ce-Ft[0],Ne-Ft[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=Aa(this.window.history)||Aa(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Aa(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Io{}},4650:(on,ot,k)=>{"use strict";k.d(ot,{$8M:()=>Tc,$WT:()=>rr,$Z:()=>Vf,AFp:()=>_E,AaK:()=>me,Akn:()=>Zl,BQk:()=>Hc,CHM:()=>ya,CRH:()=>Y0,CZH:()=>Kv,CqO:()=>Jf,D6c:()=>Rw,EJc:()=>GI,EiD:()=>Sh,EpF:()=>Xy,F$t:()=>Ju,F4k:()=>Xf,FYo:()=>Hl,FiY:()=>Fl,G48:()=>fw,Gf:()=>K0,GfV:()=>Vd,GkF:()=>gg,Gpc:()=>pe,Hsn:()=>uf,Ikx:()=>od,JOm:()=>wa,JVY:()=>ny,JZr:()=>Xe,KtG:()=>Ma,L6k:()=>Hg,LAX:()=>Ui,LFG:()=>Xn,LMc:()=>Pw,Lbi:()=>VI,Lck:()=>u0,MAs:()=>nf,MMx:()=>h,MR2:()=>Jg,NdJ:()=>af,O4$:()=>es,OlP:()=>fi,Oqu:()=>ec,P3R:()=>Ah,PXZ:()=>ow,Q6J:()=>fa,QGY:()=>Jy,QbO:()=>jI,Qsj:()=>ku,R0b:()=>ud,RDi:()=>Ug,RIp:()=>em,Rgc:()=>Rv,SBq:()=>$d,Sil:()=>KI,Suo:()=>q0,TTD:()=>io,TgZ:()=>qd,Tol:()=>$m,Udp:()=>Ts,W1O:()=>J0,X6Q:()=>hw,XFs:()=>un,Xpm:()=>fn,Xts:()=>Mh,Y36:()=>ea,YKP:()=>Sv,YNc:()=>fg,Yjl:()=>ws,Yz7:()=>Tt,Z0I:()=>Cn,ZZ4:()=>N0,_Bn:()=>Vv,_UZ:()=>jc,_Vd:()=>su,_uU:()=>bg,aQg:()=>k0,c2e:()=>HI,cJS:()=>Rt,cg1:()=>pp,dDg:()=>nw,dqk:()=>Ar,eBb:()=>po,eJc:()=>_0,ekj:()=>Jd,eoX:()=>SE,f3M:()=>Gt,g9A:()=>EE,h0i:()=>vp,hGG:()=>Mw,hij:()=>nh,iGM:()=>W0,iPO:()=>cw,ifc:()=>ve,ip1:()=>yE,jDz:()=>w,kL8:()=>ad,kcU:()=>$i,lG2:()=>is,lqb:()=>ru,lri:()=>DE,mCW:()=>Rd,n5z:()=>Na,n_E:()=>jv,oAB:()=>rs,oxw:()=>yg,pB0:()=>ry,q3G:()=>eo,q4F:()=>Nh,qLn:()=>kh,qOj:()=>wm,qZA:()=>sf,qzn:()=>Md,rWj:()=>TE,sBO:()=>pw,s_b:()=>zv,soG:()=>qv,tBr:()=>fl,tb:()=>ME,tp0:()=>pl,uIk:()=>Mm,vHH:()=>Se,vpe:()=>vf,wAp:()=>Rr,xp6:()=>Bp,ynx:()=>Yd,z2F:()=>Yv,z3N:()=>wl,zSh:()=>Fd,zs3:()=>Gl});var y=k(7579),g=k(727),Y=k(9751),ae=k(6451),xe=k(3099);function Pe(n){for(let i in n)if(n[i]===Pe)return i;throw Error("Could not find renamed property on target object.")}function Ce(n,i){for(const l in i)i.hasOwnProperty(l)&&!n.hasOwnProperty(l)&&(n[l]=i[l])}function me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const l=i.indexOf("\n");return-1===l?i:i.substring(0,l)}function Ue(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Te=Pe({__forward_ref__:Pe});function pe(n){return n.__forward_ref__=pe,n.toString=function(){return me(this())},n}function De(n){return Fe(n)?n():n}function Fe(n){return"function"==typeof n&&n.hasOwnProperty(Te)&&n.__forward_ref__===pe}function je(n){return n&&!!n.\u0275providers}const Xe="https://g.co/ng/security#xss";class Se extends Error{constructor(i,l){super(_e(i,l)),this.code=i}}function _e(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function oe(n){return"string"==typeof n?n:null==n?"":String(n)}function lt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():oe(n)}function pt(n,i){throw new Se(-201,!1)}function _t(n,i){null==n&&function mt(n,i,l,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${l} ${d} ${i} <=Actual]`))}(i,n,null,"!=")}function Tt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jt(n){return Fn(n,vn)||Fn(n,nr)}function Cn(n){return null!==Jt(n)}function Fn(n,i){return n.hasOwnProperty(i)?n[i]:null}function nn(n){return n&&(n.hasOwnProperty(Ut)||n.hasOwnProperty(Hn))?n[Ut]:null}const vn=Pe({\u0275prov:Pe}),Ut=Pe({\u0275inj:Pe}),nr=Pe({ngInjectableDef:Pe}),Hn=Pe({ngInjectorDef:Pe});var un=(()=>((un=un||{})[un.Default=0]="Default",un[un.Host=1]="Host",un[un.Self=2]="Self",un[un.SkipSelf=4]="SkipSelf",un[un.Optional=8]="Optional",un))();let or;function Ir(n){const i=or;return or=n,i}function Ni(n,i,l){const d=Jt(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&un.Optional?null:void 0!==i?i:void pt(me(n))}const Ar=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),xr={},Lr="__NG_DI_FLAG__",cr="ngTempTokenPath",si="ngTokenPath",Vr=/\n/gm,xi="\u0275",Er="__source";let Zr;function er(n){const i=Zr;return Zr=n,i}function bi(n,i=un.Default){if(void 0===Zr)throw new Se(-203,!1);return null===Zr?Ni(n,void 0,i):Zr.get(n,i&un.Optional?null:void 0,i)}function Xn(n,i=un.Default){return(function ci(){return or}()||bi)(De(n),i)}function Gt(n,i=un.Default){return Xn(n,En(i))}function En(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function An(n){const i=[];for(let l=0;l<n.length;l++){const d=De(n[l]);if(Array.isArray(d)){if(0===d.length)throw new Se(900,!1);let f,v=un.Default;for(let T=0;T<d.length;T++){const P=d[T],$=ur(P);"number"==typeof $?-1===$?f=P.token:v|=$:f=P}i.push(Xn(f,v))}else i.push(Xn(d))}return i}function zn(n,i){return n[Lr]=i,n.prototype[Lr]=i,n}function ur(n){return n[Lr]}function Ve(n){return{toString:n}.toString()}var fe=(()=>((fe=fe||{})[fe.OnPush=0]="OnPush",fe[fe.Default=1]="Default",fe))(),ve=(()=>{return(n=ve||(ve={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ve;var n})();const he={},dt=[],Oe=Pe({\u0275cmp:Pe}),$e=Pe({\u0275dir:Pe}),we=Pe({\u0275pipe:Pe}),rt=Pe({\u0275mod:Pe}),Mt=Pe({\u0275fac:Pe}),Yt=Pe({__NG_ELEMENT_ID__:Pe});let In=0;function fn(n){return Ve(()=>{const i=Vs(n),l={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ve.Emulated,id:"c"+In++,styles:n.styles||dt,_:null,schemas:n.schemas||null,tView:null};oi(l);const d=n.dependencies;return l.directiveDefs=Fi(d,!1),l.pipeDefs=Fi(d,!0),l})}function Jr(n){return pr(n)||pi(n)}function ki(n){return null!==n}function rs(n){return Ve(()=>({type:n.type,bootstrap:n.bootstrap||dt,declarations:n.declarations||dt,imports:n.imports||dt,exports:n.exports||dt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Hi(n,i){if(null==n)return he;const l={};for(const d in n)if(n.hasOwnProperty(d)){let f=n[d],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),l[f]=d,i&&(i[f]=v)}return l}function is(n){return Ve(()=>{const i=Vs(n);return oi(i),i})}function ws(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function pr(n){return n[Oe]||null}function pi(n){return n[$e]||null}function Qr(n){return n[we]||null}function rr(n){const i=pr(n)||pi(n)||Qr(n);return null!==i&&i.standalone}function Jn(n,i){const l=n[rt]||null;if(!l&&!0===i)throw new Error(`Type ${me(n)} does not have '\u0275mod' property.`);return l}function Vs(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||dt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Hi(n.inputs,i),outputs:Hi(n.outputs)}}function oi(n){var i;null===(i=n.features)||void 0===i||i.forEach(l=>l(n))}function Fi(n,i){if(!n)return null;const l=i?Qr:Jr;return()=>("function"==typeof n?n():n).map(d=>l(d)).filter(ki)}const gi=0,bn=1,ar=2,gr=3,ui=4,ei=5,Xr=6,Ci=7,Br=8,de=9,Re=10,Ye=11,be=12,tt=13,st=14,kt=15,$t=16,Wt=17,zt=18,pn=19,qn=20,Qn=21,Je=22,wt=1,Vt=2,an=7,Bn=8,mr=9,ir=10;function $r(n){return Array.isArray(n)&&"object"==typeof n[wt]}function Ei(n){return Array.isArray(n)&&!0===n[wt]}function us(n){return 0!=(4&n.flags)}function js(n){return n.componentOffset>-1}function Ys(n){return 1==(1&n.flags)}function Yr(n){return!!n.template}function zo(n){return 0!=(256&n[ar])}function di(n,i){return n.hasOwnProperty(Mt)?n[Mt]:null}class Os{constructor(i,l,d){this.previousValue=i,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function io(){return so}function so(n){return n.type.prototype.ngOnChanges&&(n.setInput=Aa),oa}function oa(){const n=ma(this),i=null==n?void 0:n.current;if(i){const l=n.previous;if(l===he)n.previous=i;else for(let d in i)l[d]=i[d];n.current=null,this.ngOnChanges(i)}}function Aa(n,i,l,d){const f=this.declaredInputs[l],v=ma(n)||function Io(n,i){return n[Eo]=i}(n,{previous:he,current:null}),T=v.current||(v.current={}),P=v.previous,$=P[f];T[f]=new Os($&&$.currentValue,i,P===he),n[d]=i}io.ngInherit=!0;const Eo="__ngSimpleChanges__";function ma(n){return n[Eo]||null}const Gi=function(n,i,l){},qi="svg";function Pi(n){for(;Array.isArray(n);)n=n[gi];return n}function co(n,i){return Pi(i[n])}function hs(n,i){return Pi(i[n.index])}function C(n,i){return n.data[i]}function D(n,i){const l=i[n];return $r(l)?l:l[gi]}function Ie(n){return 64==(64&n[ar])}function $n(n,i){return null==i?null:n[i]}function Gn(n){n[zt]=0}function Dr(n,i){n[ei]+=i;let l=n,d=n[gr];for(;null!==d&&(1===i&&1===l[ei]||-1===i&&0===l[ei]);)d[ei]+=i,l=d,d=d[gr]}const Pn={lFrame:wc(null),bindingsEnabled:!0};function Ot(){return Pn.bindingsEnabled}function Ht(){return Pn.lFrame.lView}function Yn(){return Pn.lFrame.tView}function ya(n){return Pn.lFrame.contextLView=n,n[Br]}function Ma(n){return Pn.lFrame.contextLView=null,n}function Ns(){let n=Ha();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ha(){return Pn.lFrame.currentTNode}function Gs(n,i){const l=Pn.lFrame;l.currentTNode=n,l.isParent=i}function sl(){return Pn.lFrame.isParent}function _a(){Pn.lFrame.isParent=!1}function Co(){return Pn.lFrame.bindingIndex++}function aa(n){const i=Pn.lFrame,l=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,l}function al(n,i){const l=Pn.lFrame;l.bindingIndex=l.bindingRootIndex=n,Ga(i)}function Ga(n){Pn.lFrame.currentDirectiveIndex=n}function ll(){return Pn.lFrame.currentQueryIndex}function qo(n){Pn.lFrame.currentQueryIndex=n}function To(n){const i=n[bn];return 2===i.type?i.declTNode:1===i.type?n[Xr]:null}function So(n,i,l){if(l&un.SkipSelf){let f=i,v=n;for(;!(f=f.parent,null!==f||l&un.Host||(f=To(v),null===f||(v=v[kt],10&f.type))););if(null===f)return!1;i=f,n=v}const d=Pn.lFrame=xa();return d.currentTNode=i,d.lView=n,!0}function Ao(n){const i=xa(),l=n[bn];Pn.lFrame=i,i.currentTNode=l.firstChild,i.lView=n,i.tView=l,i.contextLView=n,i.bindingIndex=l.bindingStartIndex,i.inI18n=!1}function xa(){const n=Pn.lFrame,i=null===n?null:n.child;return null===i?wc(n):i}function wc(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Pa(){const n=Pn.lFrame;return Pn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ws=Pa;function cl(){const n=Pa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ls(){return Pn.lFrame.selectedIndex}function Xs(n){Pn.lFrame.selectedIndex=n}function Nr(){const n=Pn.lFrame;return C(n.tView,n.selectedIndex)}function es(){Pn.lFrame.currentNamespace=qi}function $i(){!function Gc(){Pn.lFrame.currentNamespace=null}()}function Ro(n,i){for(let X=i.directiveStart,ge=i.directiveEnd;X<ge;X++){const gt=n.data[X].type.prototype,{ngAfterContentInit:Pt,ngAfterContentChecked:sn,ngAfterViewInit:Tn,ngAfterViewChecked:Kn,ngOnDestroy:Cr}=gt;var l,d,f,v,T,P,$;Pt&&(null!==(l=n.contentHooks)&&void 0!==l?l:n.contentHooks=[]).push(-X,Pt),sn&&((null!==(d=n.contentHooks)&&void 0!==d?d:n.contentHooks=[]).push(X,sn),(null!==(f=n.contentCheckHooks)&&void 0!==f?f:n.contentCheckHooks=[]).push(X,sn)),Tn&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-X,Tn),Kn&&((null!==(T=n.viewHooks)&&void 0!==T?T:n.viewHooks=[]).push(X,Kn),(null!==(P=n.viewCheckHooks)&&void 0!==P?P:n.viewCheckHooks=[]).push(X,Kn)),null!=Cr&&(null!==($=n.destroyHooks)&&void 0!==$?$:n.destroyHooks=[]).push(X,Cr)}}function Wc(n,i,l){J(n,i,3,l)}function Ea(n,i,l,d){(3&n[ar])===l&&J(n,i,l,d)}function L(n,i){let l=n[ar];(3&l)===i&&(l&=2047,l+=1,n[ar]=l)}function J(n,i,l,d){const v=null!=d?d:-1,T=i.length-1;let P=0;for(let $=void 0!==d?65535&n[zt]:0;$<T;$++)if("number"==typeof i[$+1]){if(P=i[$],null!=d&&P>=d)break}else i[$]<0&&(n[zt]+=65536),(P<v||-1==v)&&(U(n,l,i,$),n[zt]=(4294901760&n[zt])+$+2),$++}function U(n,i,l,d){const f=l[d]<0,v=l[d+1],P=n[f?-l[d]:l[d]];if(f){if(n[ar]>>11<n[zt]>>16&&(3&n[ar])===i){n[ar]+=2048,Gi(4,P,v);try{v.call(P)}finally{Gi(5,P,v)}}}else{Gi(4,P,v);try{v.call(P)}finally{Gi(5,P,v)}}}const ce=-1;class Ne{constructor(i,l,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function dn(n,i,l){let d=0;for(;d<l.length;){const f=l[d];if("number"==typeof f){if(0!==f)break;d++;const v=l[d++],T=l[d++],P=l[d++];n.setAttribute(i,T,P,v)}else{const v=f,T=l[++d];xo(v)?n.setProperty(i,v,T):n.setAttribute(i,v,T),d++}}return d}function xn(n){return 3===n||4===n||6===n}function xo(n){return 64===n.charCodeAt(0)}function hn(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let l=-1;for(let d=0;d<i.length;d++){const f=i[d];"number"==typeof f?l=f:0===l||Nt(n,l,f,null,-1===l||2===l?i[++d]:null)}}return n}function Nt(n,i,l,d,f){let v=0,T=n.length;if(-1===i)T=-1;else for(;v<n.length;){const P=n[v++];if("number"==typeof P){if(P===i){T=-1;break}if(P>i){T=v-1;break}}}for(;v<n.length;){const P=n[v];if("number"==typeof P)break;if(P===l){if(null===d)return void(null!==f&&(n[v+1]=f));if(d===n[v+1])return void(n[v+2]=f)}v++,null!==d&&v++,null!==f&&v++}-1!==T&&(n.splice(T,0,i),v=T+1),n.splice(v++,0,l),null!==d&&n.splice(v++,0,d),null!==f&&n.splice(v++,0,f)}function tn(n){return n!==ce}function Di(n){return 32767&n}function Ka(n,i){let l=function Wa(n){return n>>16}(n),d=i;for(;l>0;)d=d[kt],l--;return d}let Nl=!0;function qa(n){const i=Nl;return Nl=n,i}const oc=255,ul=5;let bc=0;const Po={};function Yo(n,i){const l=Oi(n,i);if(-1!==l)return l;const d=i[bn];d.firstCreatePass&&(n.injectorIndex=i.length,hr(d.data,n),hr(i,null),hr(d.blueprint,null));const f=ca(n,i),v=n.injectorIndex;if(tn(f)){const T=Di(f),P=Ka(f,i),$=P[bn].data;for(let X=0;X<8;X++)i[v+X]=P[T+X]|$[T+X]}return i[v+8]=f,v}function hr(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Oi(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function ca(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let l=0,d=null,f=i;for(;null!==f;){if(d=Dc(f),null===d)return ce;if(l++,f=f[kt],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return ce}function Ti(n,i,l){!function dd(n,i,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Yt)&&(d=l[Yt]),null==d&&(d=l[Yt]=bc++);const f=d&oc;i.data[n+(f>>ul)]|=1<<f}(n,i,l)}function Oa(n,i,l){if(l&un.Optional||void 0!==n)return n;pt()}function ti(n,i,l,d){if(l&un.Optional&&void 0===d&&(d=null),!(l&(un.Self|un.Host))){const f=n[de],v=Ir(void 0);try{return f?f.get(i,d,l&un.Optional):Ni(i,d,l&un.Optional)}finally{Ir(v)}}return Oa(d,0,l)}function hd(n,i,l,d=un.Default,f){if(null!==n){if(1024&i[ar]){const T=function oo(n,i,l,d,f){let v=n,T=i;for(;null!==v&&null!==T&&1024&T[ar]&&!(256&T[ar]);){const P=Wi(v,T,l,d|un.Self,Po);if(P!==Po)return P;let $=v.parent;if(!$){const X=T[Qn];if(X){const ge=X.get(l,Po,d);if(ge!==Po)return ge}$=Dc(T),T=T[kt]}v=$}return f}(n,i,l,d,Po);if(T!==Po)return T}const v=Wi(n,i,l,d,Po);if(v!==Po)return v}return ti(i,l,d,f)}function Wi(n,i,l,d,f){const v=function Oo(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Yt)?n[Yt]:void 0;return"number"==typeof i?i>=0?i&oc:_s:i}(l);if("function"==typeof v){if(!So(i,n,d))return d&un.Host?Oa(f,0,d):ti(i,l,d,f);try{const T=v(d);if(null!=T||d&un.Optional)return T;pt()}finally{Ws()}}else if("number"==typeof v){let T=null,P=Oi(n,i),$=ce,X=d&un.Host?i[$t][Xr]:null;for((-1===P||d&un.SkipSelf)&&($=-1===P?ca(n,i):i[P+8],$!==ce&&kl(d,!1)?(T=i[bn],P=Di($),i=Ka($,i)):P=-1);-1!==P;){const ge=i[bn];if(No(v,P,ge.data)){const ke=On(P,i,l,T,d,X);if(ke!==Po)return ke}$=i[P+8],$!==ce&&kl(d,i[bn].data[P+8]===X)&&No(v,P,i)?(T=ge,P=Di($),i=Ka($,i)):P=-1}}return f}function On(n,i,l,d,f,v){const T=i[bn],P=T.data[n+8],ge=bs(P,T,l,null==d?js(P)&&Nl:d!=T&&0!=(3&P.type),f&un.Host&&v===P);return null!==ge?ns(i,T,ge,P):Po}function bs(n,i,l,d,f){const v=n.providerIndexes,T=i.data,P=1048575&v,$=n.directiveStart,ge=v>>20,gt=f?P+ge:n.directiveEnd;for(let Pt=d?P:P+ge;Pt<gt;Pt++){const sn=T[Pt];if(Pt<$&&l===sn||Pt>=$&&sn.type===l)return Pt}if(f){const Pt=T[$];if(Pt&&Yr(Pt)&&Pt.type===l)return $}return null}function ns(n,i,l,d){let f=n[l];const v=i.data;if(function Ft(n){return n instanceof Ne}(f)){const T=f;T.resolving&&function ze(n,i){const l=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Se(-200,`Circular dependency in DI detected for ${n}${l}`)}(lt(v[l]));const P=qa(T.canSeeViewProviders);T.resolving=!0;const $=T.injectImpl?Ir(T.injectImpl):null;So(n,d,un.Default);try{f=n[l]=T.factory(void 0,v,n,d),i.firstCreatePass&&l>=d.directiveStart&&function Mo(n,i,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:v}=i.type.prototype;if(d){var T,P;const ke=so(i);(null!==(T=l.preOrderHooks)&&void 0!==T?T:l.preOrderHooks=[]).push(n,ke),(null!==(P=l.preOrderCheckHooks)&&void 0!==P?P:l.preOrderCheckHooks=[]).push(n,ke)}var $,X,ge;f&&(null!==($=l.preOrderHooks)&&void 0!==$?$:l.preOrderHooks=[]).push(0-n,f),v&&((null!==(X=l.preOrderHooks)&&void 0!==X?X:l.preOrderHooks=[]).push(n,v),(null!==(ge=l.preOrderCheckHooks)&&void 0!==ge?ge:l.preOrderCheckHooks=[]).push(n,v))}(l,v[l],i)}finally{null!==$&&Ir($),qa(P),T.resolving=!1,Ws()}}return f}function No(n,i,l){return!!(l[i+(n>>ul)]&1<<n)}function kl(n,i){return!(n&un.Self||n&un.Host&&i)}class Ia{constructor(i,l){this._tNode=i,this._lView=l}get(i,l,d){return hd(this._tNode,this._lView,i,En(d),l)}}function _s(){return new Ia(Ns(),Ht())}function Na(n){return Ve(()=>{const i=n.prototype.constructor,l=i[Mt]||Cc(i),d=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==d;){const v=f[Mt]||Cc(f);if(v&&v!==l)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function Cc(n){return Fe(n)?()=>{const i=Cc(De(n));return i&&i()}:di(n)}function Dc(n){const i=n[bn],l=i.type;return 2===l?i.declTNode:1===l?n[Xr]:null}function Tc(n){return function yr(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const l=n.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const v=l[f];if(xn(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(v===i)return l[f+1];f+=2}}}return null}(Ns(),n)}const vs="__parameters__";function As(n,i,l){return Ve(()=>{const d=function ac(n){return function(...l){if(n){const d=n(...l);for(const f in d)this[f]=d[f]}}}(i);function f(...v){if(this instanceof f)return d.apply(this,v),this;const T=new f(...v);return P.annotation=T,P;function P($,X,ge){const ke=$.hasOwnProperty(vs)?$[vs]:Object.defineProperty($,vs,{value:[]})[vs];for(;ke.length<=ge;)ke.push(null);return(ke[ge]=ke[ge]||[]).push(T),$}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class fi{constructor(i,l){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Tt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function S(n,i){n.forEach(l=>Array.isArray(l)?S(l,i):i(l))}function R(n,i,l){i>=n.length?n.push(l):n.splice(i,0,l)}function b(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function N(n,i){const l=[];for(let d=0;d<n;d++)l.push(i);return l}function Dt(n,i,l){let d=Un(n,i);return d>=0?n[1|d]=l:(d=~d,function le(n,i,l,d){let f=n.length;if(f==i)n.push(l,d);else if(1===f)n.push(d,n[0]),n[0]=l;else{for(f--,n.push(n[f-1],n[f]);f>i;)n[f]=n[f-2],f--;n[i]=l,n[i+1]=d}}(n,d,i,l)),d}function wn(n,i){const l=Un(n,i);if(l>=0)return n[1|l]}function Un(n,i){return function ai(n,i,l){let d=0,f=n.length>>l;for(;f!==d;){const v=d+(f-d>>1),T=n[v<<l];if(i===T)return v<<l;T>i?f=v:d=v+1}return~(f<<l)}(n,i,1)}const fl=zn(As("Inject",n=>({token:n})),-1),Fl=zn(As("Optional"),8),pl=zn(As("SkipSelf"),4);var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();const gd=new Map;let qc=0;const _d="__ngContext__";function fo(n,i){$r(i)?(n[_d]=i[qn],function md(n){gd.set(n[qn],n)}(i)):n[_d]=i}let Zc;function Qc(n,i){return Zc(n,i)}function _l(n){const i=n[gr];return Ei(i)?i[gr]:i}function Id(n){return Ks(n[tt])}function wd(n){return Ks(n[ui])}function Ks(n){for(;null!==n&&!Ei(n);)n=n[ui];return n}function hc(n,i,l,d,f){if(null!=d){let v,T=!1;Ei(d)?v=d:$r(d)&&(T=!0,d=d[gi]);const P=Pi(d);0===n&&null!==l?null==f?Mi(i,l,P):Bi(i,l,P,f||null,!0):1===n&&null!==l?Bi(i,l,P,f||null,!0):2===n?function Fg(n,i,l){const d=eu(n,i);d&&function Jc(n,i,l,d){n.removeChild(i,l,d)}(n,d,i,l)}(i,P,T):3===n&&i.destroyNode(P),null!=v&&function Bg(n,i,l,d,f){const v=l[an];v!==Pi(l)&&hc(i,n,d,v,f);for(let P=ir;P<l.length;P++){const $=l[P];_h($[bn],$,n,i,d,v)}}(i,n,v,l,f)}}function vl(n,i,l){return n.createElement(i,l)}function te(n,i){const l=n[mr],d=l.indexOf(i),f=i[gr];512&i[ar]&&(i[ar]&=-513,Dr(f,-1)),l.splice(d,1)}function Ee(n,i){if(n.length<=ir)return;const l=ir+i,d=n[l];if(d){const f=d[Wt];null!==f&&f!==n&&te(f,d),i>0&&(n[l-1][ui]=d[ui]);const v=b(n,ir+i);!function fc(n,i){_h(n,i,i[Ye],2,null,null),i[gi]=null,i[Xr]=null}(d[bn],d);const T=v[pn];null!==T&&T.detachView(v[bn]),d[gr]=null,d[ui]=null,d[ar]&=-65}return d}function It(n,i){if(!(128&i[ar])){const l=i[Ye];l.destroyNode&&_h(n,i,l,3,null,null),function _(n){let i=n[tt];if(!i)return Bt(n[bn],n);for(;i;){let l=null;if($r(i))l=i[tt];else{const d=i[ir];d&&(l=d)}if(!l){for(;i&&!i[ui]&&i!==n;)$r(i)&&Bt(i[bn],i),i=i[gr];null===i&&(i=n),$r(i)&&Bt(i[bn],i),l=i&&i[ui]}i=l}}(i)}}function Bt(n,i){if(!(128&i[ar])){i[ar]&=-65,i[ar]|=128,function Ln(n,i){let l;if(null!=n&&null!=(l=n.destroyHooks))for(let d=0;d<l.length;d+=2){const f=i[l[d]];if(!(f instanceof Ne)){const v=l[d+1];if(Array.isArray(v))for(let T=0;T<v.length;T+=2){const P=f[v[T]],$=v[T+1];Gi(4,P,$);try{$.call(P)}finally{Gi(5,P,$)}}else{Gi(4,f,v);try{v.call(f)}finally{Gi(5,f,v)}}}}}(n,i),function Mn(n,i){const l=n.cleanup,d=i[Ci];let f=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const T=l[v+3];T>=0?d[f=T]():d[f=-T].unsubscribe(),v+=2}else{const T=d[f=l[v+1]];l[v].call(T)}if(null!==d){for(let v=f+1;v<d.length;v++)(0,d[v])();i[Ci]=null}}(n,i),1===i[bn].type&&i[Ye].destroy();const l=i[Wt];if(null!==l&&Ei(i[gr])){l!==i[gr]&&te(l,i);const d=i[pn];null!==d&&d.detachView(n)}!function yi(n){gd.delete(n[qn])}(i)}}function Wn(n,i,l){return function qr(n,i,l){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return l[gi];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:v}=n.data[d.directiveStart+f];if(v===ve.None||v===ve.Emulated)return null}return hs(d,l)}}(n,i.parent,l)}function Bi(n,i,l,d,f){n.insertBefore(i,l,d,f)}function Mi(n,i,l){n.appendChild(i,l)}function lo(n,i,l,d,f){null!==d?Bi(n,i,l,d,f):Mi(n,i,l)}function eu(n,i){return n.parentNode(i)}function Ul(n,i,l){return Or(n,i,l)}let tu,Tf,Dp,Sf,Or=function mh(n,i,l){return 40&n.type?hs(n,l):null};function Cu(n,i,l,d){const f=Wn(n,d,i),v=i[Ye],P=Ul(d.parent||i[Xr],d,i);if(null!=f)if(Array.isArray(l))for(let $=0;$<l.length;$++)lo(v,f,l[$],P,!1);else lo(v,f,l,P,!1);void 0!==tu&&tu(v,d,i,l,f)}function Vl(n,i){if(null!==i){const l=i.type;if(3&l)return hs(i,n);if(4&l)return yh(-1,n[i.index]);if(8&l){const d=i.child;if(null!==d)return Vl(n,d);{const f=n[i.index];return Ei(f)?yh(-1,f):Pi(f)}}if(32&l)return Qc(i,n)()||Pi(n[i.index]);{const d=Df(n,i);return null!==d?Array.isArray(d)?d[0]:Vl(_l(n[$t]),d):Vl(n,i.next)}}return null}function Df(n,i){return null!==i?n[$t][Xr].projection[i.projection]:null}function yh(n,i){const l=ir+n+1;if(l<i.length){const d=i[l],f=d[bn].firstChild;if(null!==f)return Vl(d,f)}return i[an]}function Lg(n,i,l,d,f,v,T){for(;null!=l;){const P=d[l.index],$=l.type;if(T&&0===i&&(P&&fo(Pi(P),d),l.flags|=2),32!=(32&l.flags))if(8&$)Lg(n,i,l.child,d,f,v,!1),hc(i,n,f,P,v);else if(32&$){const X=Qc(l,d);let ge;for(;ge=X();)hc(i,n,f,ge,v);hc(i,n,f,P,v)}else 16&$?Du(n,i,d,l,f,v):hc(i,n,f,P,v);l=T?l.projectionNext:l.next}}function _h(n,i,l,d,f,v){Lg(l,d,n.firstChild,i,f,v,!1)}function Du(n,i,l,d,f,v){const T=l[$t],$=T[Xr].projection[d.projection];if(Array.isArray($))for(let X=0;X<$.length;X++)hc(i,n,f,$[X],v);else Lg(n,i,$,T[gr],f,v,!0)}function Cd(n,i,l){""===l?n.removeAttribute(i,"class"):n.setAttribute(i,"class",l)}function $g(n,i,l){const{mergedAttrs:d,classes:f,styles:v}=l;null!==d&&dn(n,i,d),null!==f&&Cd(n,i,f),null!==v&&function ey(n,i,l){n.setAttribute(i,"style",l)}(n,i,v)}function Eh(n){var i;return(null===(i=function Dd(){if(void 0===Tf&&(Tf=null,Ar.trustedTypes))try{Tf=Ar.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Tf}())||void 0===i?void 0:i.createHTML(n))||n}function Ug(n){Dp=n}function Af(n){var i;return(null===(i=function Tp(){if(void 0===Sf&&(Sf=null,Ar.trustedTypes))try{Sf=Ar.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Sf}())||void 0===i?void 0:i.createScriptURL(n))||n}class Su{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xe})`}}class ty extends Su{getTypeName(){return"HTML"}}class Ih extends Su{getTypeName(){return"Style"}}class Vg extends Su{getTypeName(){return"Script"}}class Sp extends Su{getTypeName(){return"URL"}}class wh extends Su{getTypeName(){return"ResourceURL"}}function wl(n){return n instanceof Su?n.changingThisBreaksApplicationSecurity:n}function Md(n,i){const l=function jg(n){return n instanceof Su&&n.getTypeName()||null}(n);if(null!=l&&l!==i){if("ResourceURL"===l&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${l} (see ${Xe})`)}return l===i}function ny(n){return new ty(n)}function Hg(n){return new Ih(n)}function po(n){return new Vg(n)}function Ui(n){return new Sp(n)}function ry(n){return new wh(n)}class Gg{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const l=(new window.DOMParser).parseFromString(Eh(i),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(i):(l.removeChild(l.firstChild),l)}catch{return null}}}class Ap{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const l=this.inertDocument.createElement("template");return l.innerHTML=Eh(i),l}}const bh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Rd(n){return(n=String(n)).match(bh)?n:"unsafe:"+n}function gc(n){const i={};for(const l of n.split(","))i[l]=!0;return i}function xd(...n){const i={};for(const l of n)for(const d in l)l.hasOwnProperty(d)&&(i[d]=!0);return i}const Wg=gc("area,br,col,hr,img,wbr"),Kg=gc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ch=gc("rp,rt"),qg=xd(Wg,xd(Kg,gc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xd(Ch,gc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xd(Ch,Kg)),Rf=gc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sy=xd(Rf,gc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),gc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Js=gc("script,style,template");class Lc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let l=i.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(i){const l=i.nodeName.toLowerCase();if(!qg.hasOwnProperty(l))return this.sanitizedSomething=!0,!Js.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=i.attributes;for(let f=0;f<d.length;f++){const v=d.item(f),T=v.name,P=T.toLowerCase();if(!sy.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let $=v.value;Rf[P]&&($=Rd($)),this.buf.push(" ",T,'="',Jo($),'"')}return this.buf.push(">"),!0}endElement(i){const l=i.nodeName.toLowerCase();qg.hasOwnProperty(l)&&!Wg.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(i){this.buf.push(Jo(i))}checkClobberedElement(i,l){if(l&&(i.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return l}}const Yg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Th=/([^\#-~ |!])/g;function Jo(n){return n.replace(/&/g,"&amp;").replace(Yg,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Th,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nu;function Sh(n,i){let l=null;try{nu=nu||function zg(n){const i=new Ap(n);return function Mf(){try{return!!(new window.DOMParser).parseFromString(Eh(""),"text/html")}catch{return!1}}()?new Gg(i):i}(n);let d=i?String(i):"";l=nu.getInertBodyElement(d);let f=5,v=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=v,v=l.innerHTML,l=nu.getInertBodyElement(d)}while(d!==v);return Eh((new Lc).sanitizeChildren(Pd(l)||l))}finally{if(l){const d=Pd(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Pd(n){return"content"in n&&function oy(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var eo=(()=>((eo=eo||{})[eo.NONE=0]="NONE",eo[eo.HTML=1]="HTML",eo[eo.STYLE=2]="STYLE",eo[eo.SCRIPT=3]="SCRIPT",eo[eo.URL=4]="URL",eo[eo.RESOURCE_URL=5]="RESOURCE_URL",eo))();function ay(n){const i=Nd();return i?i.sanitize(eo.URL,n)||"":Md(n,"URL")?wl(n):Rd(oe(n))}function bl(n){const i=Nd();if(i)return Af(i.sanitize(eo.RESOURCE_URL,n)||"");if(Md(n,"ResourceURL"))return Af(wl(n));throw new Se(904,!1)}function Ah(n,i,l){return function Xg(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?bl:ay}(i,l)(n)}function Nd(){const n=Ht();return n&&n[be]}const Mh=new fi("ENVIRONMENT_INITIALIZER"),cy=new fi("INJECTOR",-1),Qa=new fi("INJECTOR_DEF_TYPES");class Au{get(i,l=xr){if(l===xr){const d=new Error(`NullInjectorError: No provider for ${me(i)}!`);throw d.name="NullInjectorError",d}return l}}function Jg(n){return{\u0275providers:n}}function em(...n){return{\u0275providers:kd(0,n),\u0275fromNgModule:!0}}function kd(n,...i){const l=[],d=new Set;let f;return S(i,v=>{const T=v;Rh(T,l,[],d)&&(f||(f=[]),f.push(T))}),void 0!==f&&jl(f,l),l}function jl(n,i){for(let l=0;l<n.length;l++){const{providers:f}=n[l];xh(f,v=>{i.push(v)})}}function Rh(n,i,l,d){if(!(n=De(n)))return!1;let f=null,v=nn(n);const T=!v&&pr(n);if(v||T){if(T&&!T.standalone)return!1;f=n}else{const $=n.ngModule;if(v=nn($),!v)return!1;f=$}const P=d.has(f);if(T){if(P)return!1;if(d.add(f),T.dependencies){const $="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const X of $)Rh(X,i,l,d)}}else{if(!v)return!1;{if(null!=v.imports&&!P){let X;d.add(f);try{S(v.imports,ge=>{Rh(ge,i,l,d)&&(X||(X=[]),X.push(ge))})}finally{}void 0!==X&&jl(X,i)}if(!P){const X=di(f)||(()=>new f);i.push({provide:f,useFactory:X,deps:dt},{provide:Qa,useValue:f,multi:!0},{provide:Mh,useValue:()=>Xn(f),multi:!0})}const $=v.providers;null==$||P||xh($,ge=>{i.push(ge)})}}return f!==n&&void 0!==n.providers}function xh(n,i){for(let l of n)je(l)&&(l=l.\u0275providers),Array.isArray(l)?xh(l,i):i(l)}const Mp=Pe({provide:String,useValue:Pe});function Cl(n){return null!==n&&"object"==typeof n&&Mp in n}function mc(n){return"function"==typeof n}const Fd=new fi("Set Injector scope."),Ph={},tm={};let xp;function Pp(){return void 0===xp&&(xp=new Au),xp}class ru{}class xf extends ru{get destroyed(){return this._destroyed}constructor(i,l,d,f){super(),this.parent=l,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ou(i,T=>this.processProvider(T)),this.records.set(cy,iu(void 0,this)),f.has("environment")&&this.records.set(ru,iu(void 0,this));const v=this.records.get(Fd);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Qa.multi,dt,un.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const l=er(this),d=Ir(void 0);try{return i()}finally{er(l),Ir(d)}}get(i,l=xr,d=un.Default){this.assertNotDestroyed(),d=En(d);const f=er(this),v=Ir(void 0);try{if(!(d&un.SkipSelf)){let P=this.records.get(i);if(void 0===P){const $=function Op(n){return"function"==typeof n||"object"==typeof n&&n instanceof fi}(i)&&Jt(i);P=$&&this.injectableDefInScope($)?iu(xu(i),Ph):null,this.records.set(i,P)}if(null!=P)return this.hydrate(i,P)}return(d&un.Self?Pp():this.parent).get(i,l=d&un.Optional&&l===xr?null:l)}catch(T){if("NullInjectorError"===T.name){if((T[cr]=T[cr]||[]).unshift(me(i)),f)throw T;return function Pr(n,i,l,d){const f=n[cr];throw i[Er]&&f.unshift(i[Er]),n.message=function Ze(n,i,l,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==xi?n.slice(2):n;let f=me(i);if(Array.isArray(i))f=i.map(me).join(" -> ");else if("object"==typeof i){let v=[];for(let T in i)if(i.hasOwnProperty(T)){let P=i[T];v.push(T+":"+("string"==typeof P?JSON.stringify(P):me(P)))}f=`{${v.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${n.replace(Vr,"\n  ")}`}("\n"+n.message,f,l,d),n[si]=f,n[cr]=null,n}(T,i,"R3InjectorError",this.source)}throw T}finally{Ir(v),er(f)}}resolveInjectorInitializers(){const i=er(this),l=Ir(void 0);try{const d=this.get(Mh.multi,dt,un.Self);for(const f of d)f()}finally{er(i),Ir(l)}}toString(){const i=[],l=this.records;for(const d of l.keys())i.push(me(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(i){let l=mc(i=De(i))?i:De(i&&i.provide);const d=function Bc(n){return Cl(n)?iu(void 0,n.useValue):iu(Pu(n),Ph)}(i);if(mc(i)||!0!==i.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=iu(void 0,Ph,!0),f.factory=()=>An(f.multi),this.records.set(l,f)),l=i,f.multi.push(i)}this.records.set(l,d)}hydrate(i,l){return l.value===Ph&&(l.value=tm,l.value=l.factory()),"object"==typeof l.value&&l.value&&function k_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(i){if(!i.providedIn)return!1;const l=De(i.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function xu(n){const i=Jt(n),l=null!==i?i.factory:di(n);if(null!==l)return l;if(n instanceof fi)throw new Se(204,!1);if(n instanceof Function)return function Ld(n){const i=n.length;if(i>0)throw N(i,"?"),new Se(204,!1);const l=function gn(n){return n&&(n[vn]||n[nr])||null}(n);return null!==l?()=>l.factory(n):()=>new n}(n);throw new Se(204,!1)}function Pu(n,i,l){let d;if(mc(n)){const f=De(n);return di(f)||xu(f)}if(Cl(n))d=()=>De(n.useValue);else if(function Ru(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...An(n.deps||[]));else if(function Mu(n){return!(!n||!n.useExisting)}(n))d=()=>Xn(De(n.useExisting));else{const f=De(n&&(n.useClass||n.provide));if(!function dy(n){return!!n.deps}(n))return di(f)||xu(f);d=()=>new f(...An(n.deps))}return d}function iu(n,i,l=!1){return{factory:n,value:i,multi:l?[]:void 0}}function Ou(n,i){for(const l of n)Array.isArray(l)?Ou(l,i):l&&je(l)?Ou(l.\u0275providers,i):i(l)}class Bd{}class Dl{}class L_{resolveComponentFactory(i){throw function Np(n){const i=Error(`No component factory found for ${me(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let su=(()=>{class n{}return n.NULL=new L_,n})();function Oh(){return Nu(Ns(),Ht())}function Nu(n,i){return new $d(hs(n,i))}let $d=(()=>{class n{constructor(l){this.nativeElement=l}}return n.__NG_ELEMENT_ID__=Oh,n})();function Ud(n){return n instanceof $d?n.nativeElement:n}class Hl{}let ku=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function B_(){const n=Ht(),l=D(Ns().index,n);return($r(l)?l:n)[Ye]}(),n})(),kp=(()=>{class n{}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:()=>null}),n})();class Vd{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Nh=new Vd("15.2.8"),Fu={},jd="ngOriginalError";function Lu(n){return n[jd]}class kh{constructor(){this._console=console}handleError(i){const l=this._findOriginalError(i);this._console.error("ERROR",i),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(i){let l=i&&Lu(i);for(;l&&Lu(l);)l=Lu(l);return l||null}}function $c(n){return n instanceof Function?n():n}function kf(n,i,l){let d=n.length;for(;;){const f=n.indexOf(i,l);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=i.length;if(f+v===d||n.charCodeAt(f+v)<=32)return f}l=f+1}}const py="ng-template";function im(n,i,l){let d=0,f=!0;for(;d<n.length;){let v=n[d++];if("string"==typeof v&&f){const T=n[d++];if(l&&"class"===v&&-1!==kf(T.toLowerCase(),i,0))return!0}else{if(1===v){for(;d<n.length&&"string"==typeof(v=n[d++]);)if(v.toLowerCase()===i)return!0;return!1}"number"==typeof v&&(f=!1)}}return!1}function gy(n){return 4===n.type&&n.value!==py}function Lp(n,i,l){return i===(4!==n.type||l?n.value:py)}function my(n,i,l){let d=4;const f=n.attrs||[],v=function au(n){for(let i=0;i<n.length;i++)if(xn(n[i]))return i;return n.length}(f);let T=!1;for(let P=0;P<i.length;P++){const $=i[P];if("number"!=typeof $){if(!T)if(4&d){if(d=2|1&d,""!==$&&!Lp(n,$,l)||""===$&&1===i.length){if(zl(d))return!1;T=!0}}else{const X=8&d?$:i[++P];if(8&d&&null!==n.attrs){if(!im(n.attrs,X,l)){if(zl(d))return!1;T=!0}continue}const ke=yy(8&d?"class":$,f,gy(n),l);if(-1===ke){if(zl(d))return!1;T=!0;continue}if(""!==X){let gt;gt=ke>v?"":f[ke+1].toLowerCase();const Pt=8&d?gt:null;if(Pt&&-1!==kf(Pt,X,0)||2&d&&X!==gt){if(zl(d))return!1;T=!0}}}}else{if(!T&&!zl(d)&&!zl($))return!1;if(T&&zl($))continue;T=!1,d=$|1&d}}return zl(d)||T}function zl(n){return 0==(1&n)}function yy(n,i,l,d){if(null===i)return-1;let f=0;if(d||!l){let v=!1;for(;f<i.length;){const T=i[f];if(T===n)return f;if(3===T||6===T)v=!0;else{if(1===T||2===T){let P=i[++f];for(;"string"==typeof P;)P=i[++f];continue}if(4===T)break;if(0===T){f+=4;continue}}f+=v?1:2}return-1}return function Lh(n,i){let l=n.indexOf(4);if(l>-1)for(l++;l<n.length;){const d=n[l];if("number"==typeof d)return-1;if(d===i)return l;l++}return-1}(i,n)}function _y(n,i,l=!1){for(let d=0;d<i.length;d++)if(my(n,i[d],l))return!0;return!1}function Ey(n,i){e:for(let l=0;l<i.length;l++){const d=i[l];if(n.length===d.length){for(let f=0;f<n.length;f++)if(n[f]!==d[f])continue e;return!0}}return!1}function Uu(n,i){return n?":not("+i.trim()+")":i}function Vu(n){let i=n[0],l=1,d=2,f="",v=!1;for(;l<n.length;){let T=n[l];if("string"==typeof T)if(2&d){const P=n[++l];f+="["+T+(P.length>0?'="'+P+'"':"")+"]"}else 8&d?f+="."+T:4&d&&(f+=" "+T);else""!==f&&!zl(T)&&(i+=Uu(v,f),f=""),d=T,v=v||!zl(d);l++}return""!==f&&(i+=Uu(v,f)),i}const Wr={};function Bp(n){Ls(Yn(),Ht(),ls()+n,!1)}function Ls(n,i,l,d){if(!d)if(3==(3&i[ar])){const v=n.preOrderCheckHooks;null!==v&&Wc(i,v,l)}else{const v=n.preOrderHooks;null!==v&&Ea(i,v,0,l)}Xs(l)}function $h(n,i=null,l=null,d){const f=Up(n,i,l,d);return f.resolveInjectorInitializers(),f}function Up(n,i=null,l=null,d,f=new Set){const v=[l||dt,em(n)];return d=d||("object"==typeof n?void 0:me(n)),new xf(v,i||Pp(),d||null,f)}let Gl=(()=>{class n{static create(l,d){if(Array.isArray(l))return $h({name:""},d,l,"");{var f;const v=null!==(f=l.name)&&void 0!==f?f:"";return $h({name:v},l.parent,l.providers,v)}}}return n.THROW_IF_NOT_FOUND=xr,n.NULL=new Au,n.\u0275prov=Tt({token:n,providedIn:"any",factory:()=>Xn(cy)}),n.__NG_ELEMENT_ID__=-1,n})();function ea(n,i=un.Default){const l=Ht();return null===l?Xn(n,i):hd(Ns(),l,De(n),i)}function Vf(){throw new Error("invalid")}function My(n,i){const l=n.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const v=l[d+1];if(-1!==v){const T=n.data[v];qo(l[d]),T.contentQueries(2,i[v],v)}}}function Gh(n,i,l,d,f,v,T,P,$,X,ge){const ke=i.blueprint.slice();return ke[gi]=f,ke[ar]=76|d,(null!==ge||n&&1024&n[ar])&&(ke[ar]|=1024),Gn(ke),ke[gr]=ke[kt]=n,ke[Br]=l,ke[Re]=T||n&&n[Re],ke[Ye]=P||n&&n[Ye],ke[be]=$||n&&n[be]||null,ke[de]=X||n&&n[de]||null,ke[Xr]=v,ke[qn]=function Bl(){return qc++}(),ke[Qn]=ge,ke[$t]=2==i.type?n[$t]:ke,ke}function Wh(n,i,l,d,f){let v=n.data[i];if(null===v)v=function um(n,i,l,d,f){const v=Ha(),T=sl(),$=n.data[i]=function G_(n,i,l,d,f,v){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?v:v&&v.parent,l,i,d,f);return null===n.firstChild&&(n.firstChild=$),null!==v&&(T?null==v.child&&null!==$.parent&&(v.child=$):null===v.next&&(v.next=$,$.prev=v)),$}(n,i,l,d,f),function la(){return Pn.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=l,v.value=d,v.attrs=f;const T=function il(){const n=Pn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===T?-1:T.injectorIndex}return Gs(v,!0),v}function go(n,i,l,d){if(0===l)return-1;const f=i.length;for(let v=0;v<l;v++)i.push(d),n.blueprint.push(d),n.data.push(null);return f}function dm(n,i,l){Ao(i);try{const d=n.viewQuery;null!==d&&ha(1,d,l);const f=n.template;null!==f&&zf(n,i,f,1,l),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&My(n,i),n.staticViewQueries&&ha(2,n.viewQuery,l);const v=n.components;null!==v&&function jf(n,i){for(let l=0;l<i.length;l++)_m(n,i[l])}(i,v)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[ar]&=-5,cl()}}function Hf(n,i,l,d){const f=i[ar];if(128!=(128&f)){Ao(i);try{Gn(i),function Qs(n){return Pn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==l&&zf(n,i,l,2,d);const T=3==(3&f);if(T){const X=n.preOrderCheckHooks;null!==X&&Wc(i,X,null)}else{const X=n.preOrderHooks;null!==X&&Ea(i,X,0,null),L(i,0)}if(function q_(n){for(let i=Id(n);null!==i;i=wd(i)){if(!i[Vt])continue;const l=i[mr];for(let d=0;d<l.length;d++){const f=l[d];512&f[ar]||Dr(f[gr],1),f[ar]|=512}}}(i),function Uy(n){for(let i=Id(n);null!==i;i=wd(i))for(let l=ir;l<i.length;l++){const d=i[l],f=d[bn];Ie(d)&&Hf(f,d,f.template,d[Br])}}(i),null!==n.contentQueries&&My(n,i),T){const X=n.contentCheckHooks;null!==X&&Wc(i,X)}else{const X=n.contentHooks;null!==X&&Ea(i,X,1),L(i,1)}!function Ay(n,i){const l=n.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)Xs(~f);else{const v=f,T=l[++d],P=l[++d];al(T,v),P(2,i[v])}}}finally{Xs(-1)}}(n,i);const P=n.components;null!==P&&function Ry(n,i){for(let l=0;l<i.length;l++)ym(n,i[l])}(i,P);const $=n.viewQuery;if(null!==$&&ha(2,$,d),T){const X=n.viewCheckHooks;null!==X&&Wc(i,X)}else{const X=n.viewHooks;null!==X&&Ea(i,X,2),L(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[ar]&=-41,512&i[ar]&&(i[ar]&=-513,Dr(i[gr],-1))}finally{cl()}}}function zf(n,i,l,d,f){const v=ls(),T=2&d;try{Xs(-1),T&&i.length>Je&&Ls(n,i,Je,!1),Gi(T?2:0,f),l(d,f)}finally{Xs(v),Gi(T?3:1,f)}}function Gd(n,i,l){if(us(i)){const f=i.directiveEnd;for(let v=i.directiveStart;v<f;v++){const T=n.data[v];T.contentQueries&&T.contentQueries(1,l[v],v)}}}function Gf(n,i,l){Ot()&&(function Ny(n,i,l,d){const f=l.directiveStart,v=l.directiveEnd;js(l)&&function By(n,i,l){const d=hs(i,n),f=xy(l),v=n[Re],T=qh(n,Gh(n,f,null,l.onPush?32:16,d,i,v,v.createRenderer(d,l),null,null,null));n[i.index]=T}(i,l,n.data[f+l.componentOffset]),n.firstCreatePass||Yo(l,i),fo(d,i);const T=l.initialInputs;for(let P=f;P<v;P++){const $=n.data[P],X=ns(i,n,P,l);fo(X,i),null!==T&&K_(0,P-f,X,$,0,T),Yr($)&&(D(l.index,i)[Br]=ns(i,n,P,l))}}(n,i,l,hs(l,i)),64==(64&l.flags)&&ky(n,i,l))}function Wp(n,i,l=hs){const d=i.localNames;if(null!==d){let f=i.index+1;for(let v=0;v<d.length;v+=2){const T=d[v+1],P=-1===T?l(i,n):n[T];n[f++]=P}}}function xy(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=hm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function hm(n,i,l,d,f,v,T,P,$,X){const ge=Je+d,ke=ge+f,gt=function H_(n,i){const l=[];for(let d=0;d<i;d++)l.push(d<n?null:Wr);return l}(ge,ke),Pt="function"==typeof X?X():X;return gt[bn]={type:n,blueprint:gt,template:l,queries:null,viewQuery:P,declTNode:i,data:gt.slice().fill(null,ge),bindingStartIndex:ge,expandoStartIndex:ke,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:$,consts:Pt,incompleteFirstPass:!1}}function Kp(n,i,l,d){const f=eg(i);null===l?f.push(d):(f.push(l),n.firstCreatePass&&Wd(n).push(d,f.length-1))}function Py(n,i,l,d){for(let f in n)if(n.hasOwnProperty(f)){l=null===l?{}:l;const v=n[f];null===d?ba(l,i,f,v):d.hasOwnProperty(f)&&ba(l,i,d[f],v)}return l}function ba(n,i,l,d){n.hasOwnProperty(l)?n[l].push(i,d):n[l]=[i,d]}function Ca(n,i,l,d,f,v,T,P){const $=hs(i,l);let ge,X=i.inputs;!P&&null!=X&&(ge=X[d])?(Wu(n,l,ge,d,f),js(i)&&function qp(n,i){const l=D(i,n);16&l[ar]||(l[ar]|=32)}(l,i.index)):3&i.type&&(d=function Gu(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),f=null!=T?T(f,i.value||"",d):f,v.setProperty($,d,f))}function Yp(n,i,l,d){if(Ot()){const f=null===d?null:{"":-1},v=function Ly(n,i){const l=n.directiveRegistry;let d=null,f=null;if(l)for(let T=0;T<l.length;T++){const P=l[T];if(_y(i,P.selectors,!1))if(d||(d=[]),Yr(P))if(null!==P.findHostDirectiveDefs){const $=[];f=f||new Map,P.findHostDirectiveDefs(P,$,f),d.unshift(...$,P),Wf(n,i,$.length)}else d.unshift(P),Wf(n,i,0);else{var v;f=f||new Map,null===(v=P.findHostDirectiveDefs)||void 0===v||v.call(P,P,d,f),d.push(P)}}return null===d?null:[d,f]}(n,l);let T,P;null===v?T=P=null:[T,P]=v,null!==T&&Zp(n,i,l,T,f,P),f&&function W_(n,i,l){if(i){const d=n.localNames=[];for(let f=0;f<i.length;f+=2){const v=l[i[f+1]];if(null==v)throw new Se(-301,!1);d.push(i[f],v)}}}(l,d,f)}l.mergedAttrs=hn(l.mergedAttrs,l.attrs)}function Zp(n,i,l,d,f,v){for(let ke=0;ke<d.length;ke++)Ti(Yo(l,i),n,d[ke].type);!function Qp(n,i,l){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+l,n.providerIndexes=i}(l,n.data.length,d.length);for(let ke=0;ke<d.length;ke++){const gt=d[ke];gt.providersResolver&&gt.providersResolver(gt)}let T=!1,P=!1,$=go(n,i,d.length,null);for(let ke=0;ke<d.length;ke++){const gt=d[ke];l.mergedAttrs=hn(l.mergedAttrs,gt.hostAttrs),mm(n,l,i,$,gt),gm($,gt,f),null!==gt.contentQueries&&(l.flags|=4),(null!==gt.hostBindings||null!==gt.hostAttrs||0!==gt.hostVars)&&(l.flags|=64);const Pt=gt.type.prototype;var X,ge;!T&&(Pt.ngOnChanges||Pt.ngOnInit||Pt.ngDoCheck)&&((null!==(X=n.preOrderHooks)&&void 0!==X?X:n.preOrderHooks=[]).push(l.index),T=!0),P||!Pt.ngOnChanges&&!Pt.ngDoCheck||((null!==(ge=n.preOrderCheckHooks)&&void 0!==ge?ge:n.preOrderCheckHooks=[]).push(l.index),P=!0),$++}!function fm(n,i,l){const f=i.directiveEnd,v=n.data,T=i.attrs,P=[];let $=null,X=null;for(let ge=i.directiveStart;ge<f;ge++){const ke=v[ge],gt=l?l.get(ke):null,sn=gt?gt.outputs:null;$=Py(ke.inputs,ge,$,gt?gt.inputs:null),X=Py(ke.outputs,ge,X,sn);const Tn=null===$||null===T||gy(i)?null:Nv($,ge,T);P.push(Tn)}null!==$&&($.hasOwnProperty("class")&&(i.flags|=8),$.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=P,i.inputs=$,i.outputs=X}(n,l,v)}function ky(n,i,l){const d=l.directiveStart,f=l.directiveEnd,v=l.index,T=function va(){return Pn.lFrame.currentDirectiveIndex}();try{Xs(v);for(let P=d;P<f;P++){const $=n.data[P],X=i[P];Ga(P),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&Fy($,X)}}finally{Xs(-1),Ga(T)}}function Fy(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Wf(n,i,l){var d;i.componentOffset=l,(null!==(d=n.components)&&void 0!==d?d:n.components=[]).push(i.index)}function gm(n,i,l){if(l){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)l[i.exportAs[d]]=n;Yr(i)&&(l[""]=n)}}function mm(n,i,l,d,f){n.data[d]=f;const v=f.factory||(f.factory=di(f.type)),T=new Ne(v,Yr(f),ea);n.blueprint[d]=T,l[d]=T,function pm(n,i,l,d,f){const v=f.hostBindings;if(v){let T=n.hostBindingOpCodes;null===T&&(T=n.hostBindingOpCodes=[]);const P=~i.index;(function lu(n){let i=n.length;for(;i>0;){const l=n[--i];if("number"==typeof l&&l<0)return l}return 0})(T)!=P&&T.push(P),T.push(l,d,v)}}(n,i,d,go(n,l,f.hostVars,Wr),f)}function $a(n,i,l,d,f,v){const T=hs(n,i);!function Kf(n,i,l,d,f,v,T){if(null==v)n.removeAttribute(i,f,l);else{const P=null==T?oe(v):T(v,d||"",f);n.setAttribute(i,f,P,l)}}(i[Ye],T,v,n.value,l,d,f)}function K_(n,i,l,d,f,v){const T=v[i];if(null!==T){const P=d.setInput;for(let $=0;$<T.length;){const X=T[$++],ge=T[$++],ke=T[$++];null!==P?d.setInput(l,ke,X,ge):l[ge]=ke}}}function Nv(n,i,l){let d=null,f=0;for(;f<l.length;){const v=l[f];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===d&&(d=[]);const T=n[v];for(let P=0;P<T.length;P+=2)if(T[P]===i){d.push(v,T[P+1],l[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function $y(n,i,l,d){return[n,!0,!1,i,null,0,d,l,null,null]}function ym(n,i){const l=D(i,n);if(Ie(l)){const d=l[bn];48&l[ar]?Hf(d,l,d.template,l[Br]):l[ei]>0&&Xp(l)}}function Xp(n){for(let d=Id(n);null!==d;d=wd(d))for(let f=ir;f<d.length;f++){const v=d[f];if(Ie(v))if(512&v[ar]){const T=v[bn];Hf(T,v,T.template,v[Br])}else v[ei]>0&&Xp(v)}const l=n[bn].components;if(null!==l)for(let d=0;d<l.length;d++){const f=D(l[d],n);Ie(f)&&f[ei]>0&&Xp(f)}}function _m(n,i){const l=D(i,n),d=l[bn];(function Y_(n,i){for(let l=i.length;l<n.blueprint.length;l++)i.push(n.blueprint[l])})(d,l),dm(d,l,l[Br])}function qh(n,i){return n[tt]?n[st][ui]=i:n[tt]=i,n[st]=i,i}function Jp(n){for(;n;){n[ar]|=32;const i=_l(n);if(zo(n)&&!i)return n;n=i}return null}function Sl(n,i,l,d=!0){const f=i[Re];f.begin&&f.begin();try{Hf(n,i,n.template,l)}catch(T){throw d&&tg(i,T),T}finally{f.end&&f.end()}}function ha(n,i,l){qo(0),i(n,l)}function eg(n){return n[Ci]||(n[Ci]=[])}function Wd(n){return n.cleanup||(n.cleanup=[])}function tg(n,i){const l=n[de],d=l?l.get(kh,null):null;d&&d.handleError(i)}function Wu(n,i,l,d,f){for(let v=0;v<l.length;){const T=l[v++],P=l[v++],$=i[T],X=n.data[T];null!==X.setInput?X.setInput($,f,d,P):$[P]=f}}function Zh(n,i,l){let d=l?n.styles:null,f=l?n.classes:null,v=0;if(null!==i)for(let T=0;T<i.length;T++){const P=i[T];"number"==typeof P?v=P:1==v?f=Ue(f,P):2==v&&(d=Ue(d,P+": "+i[++T]+";"))}l?n.styles=d:n.stylesWithoutHost=d,l?n.classes=f:n.classesWithoutHost=f}function Vc(n,i,l,d,f=!1){for(;null!==l;){const v=i[l.index];if(null!==v&&d.push(Pi(v)),Ei(v))for(let P=ir;P<v.length;P++){const $=v[P],X=$[bn].firstChild;null!==X&&Vc($[bn],$,X,d)}const T=l.type;if(8&T)Vc(n,i,l.child,d);else if(32&T){const P=Qc(l,i);let $;for(;$=P();)d.push($)}else if(16&T){const P=Df(i,l);if(Array.isArray(P))d.push(...P);else{const $=_l(i[$t]);Vc($[bn],$,P,d,!0)}}l=f?l.projectionNext:l.next}return d}class Qh{get rootNodes(){const i=this._lView,l=i[bn];return Vc(l,i,l.firstChild,[])}constructor(i,l){this._lView=i,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Br]}set context(i){this._lView[Br]=i}get destroyed(){return 128==(128&this._lView[ar])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[gr];if(Ei(i)){const l=i[Bn],d=l?l.indexOf(this):-1;d>-1&&(Ee(i,d),b(l,d))}this._attachedToViewContainer=!1}It(this._lView[bn],this._lView)}onDestroy(i){Kp(this._lView[bn],this._lView,null,i)}markForCheck(){Jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[ar]&=-65}reattach(){this._lView[ar]|=64}detectChanges(){Sl(this._lView[bn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function M(n,i){_h(n,i,i[Ye],2,null,null)}(this._lView[bn],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=i}}class Vy extends Qh{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Sl(i[bn],i,i[Br],!1)}checkNoChanges(){}get context(){return null}}class Ku extends su{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const l=pr(i);return new qf(l,this.ngModule)}}function ng(n){const i=[];for(let l in n)n.hasOwnProperty(l)&&i.push({propName:n[l],templateName:l});return i}class vm{constructor(i,l){this.injector=i,this.parentInjector=l}get(i,l,d){d=En(d);const f=this.injector.get(i,Fu,d);return f!==Fu||l===Fu?f:this.parentInjector.get(i,l,d)}}class qf extends Dl{get inputs(){return ng(this.componentDef.inputs)}get outputs(){return ng(this.componentDef.outputs)}constructor(i,l){super(),this.componentDef=i,this.ngModule=l,this.componentType=i.type,this.selector=function Iy(n){return n.map(Vu).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!l}create(i,l,d,f){var v;let T=(f=f||this.ngModule)instanceof ru?f:null===(v=f)||void 0===v?void 0:v.injector;T&&null!==this.componentDef.getStandaloneInjector&&(T=this.componentDef.getStandaloneInjector(T)||T);const P=T?new vm(i,T):i,$=P.get(Hl,null);if(null===$)throw new Se(407,!1);const X=P.get(kp,null),ge=$.createRenderer(null,this.componentDef),ke=this.componentDef.selectors[0][0]||"div",gt=d?function z_(n,i,l){return n.selectRootElement(i,l===ve.ShadowDom)}(ge,d,this.componentDef.encapsulation):vl(ge,ke,function rg(n){const i=n.toLowerCase();return"svg"===i?qi:"math"===i?"math":null}(ke)),Pt=this.componentDef.onPush?288:272,sn=hm(0,null,null,1,0,null,null,null,null,null),Tn=Gh(null,sn,null,Pt,null,null,$,ge,X,P,null);let Kn,Cr;Ao(Tn);try{const Ur=this.componentDef;let yn,ii=null;Ur.findHostDirectiveDefs?(yn=[],ii=new Map,Ur.findHostDirectiveDefs(Ur,yn,ii),yn.push(Ur)):yn=[Ur];const qs=function ig(n,i){const l=n[bn],d=Je;return n[d]=i,Wh(l,d,2,"#host",null)}(Tn,gt),Ho=function Z_(n,i,l,d,f,v,T,P){const $=f[bn];!function Hy(n,i,l,d){for(const f of n)i.mergedAttrs=hn(i.mergedAttrs,f.hostAttrs);null!==i.mergedAttrs&&(Zh(i,i.mergedAttrs,!0),null!==l&&$g(d,l,i))}(d,n,i,T);const X=v.createRenderer(i,l),ge=Gh(f,xy(l),null,l.onPush?32:16,f[n.index],n,v,X,P||null,null,null);return $.firstCreatePass&&Wf($,n,d.length-1),qh(f,ge),f[n.index]=ge}(qs,gt,Ur,yn,Tn,$,ge);Cr=C(sn,Je),gt&&function Im(n,i,l,d){if(d)dn(n,l,["ng-version",Nh.full]);else{const{attrs:f,classes:v}=function sm(n){const i=[],l=[];let d=1,f=2;for(;d<n.length;){let v=n[d];if("string"==typeof v)2===f?""!==v&&i.push(v,n[++d]):8===f&&l.push(v);else{if(!zl(f))break;f=v}d++}return{attrs:i,classes:l}}(i.selectors[0]);f&&dn(n,l,f),v&&v.length>0&&Cd(n,l,v.join(" "))}}(ge,Ur,gt,d),void 0!==l&&function zy(n,i,l){const d=n.projection=[];for(let f=0;f<i.length;f++){const v=l[f];d.push(null!=v?Array.from(v):null)}}(Cr,this.ngContentSelectors,l),Kn=function Q_(n,i,l,d,f,v){const T=Ns(),P=f[bn],$=hs(T,f);Zp(P,f,T,l,null,d);for(let ge=0;ge<l.length;ge++)fo(ns(f,P,T.directiveStart+ge,T),f);ky(P,f,T),$&&fo($,f);const X=ns(f,P,T.directiveStart+T.componentOffset,T);if(n[Br]=f[Br]=X,null!==v)for(const ge of v)ge(X,i);return Gd(P,T,n),X}(Ho,Ur,yn,ii,Tn,[Gy]),dm(sn,Tn,null)}finally{cl()}return new jy(this.componentType,Kn,Nu(Cr,Tn),Tn,Cr)}}class jy extends Bd{constructor(i,l,d,f,v){super(),this.location=d,this._rootLView=f,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new Vy(f),this.componentType=i}setInput(i,l){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[i])){const v=this._rootLView;Wu(v[bn],v,f,i,l),Jp(D(this._tNode.index,v))}}get injector(){return new Ia(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Gy(){const n=Ns();Ro(Ht()[bn],n)}function wm(n){let i=function sg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),l=!0;const d=[n];for(;i;){let f;if(Yr(n))f=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Se(903,!1);f=i.\u0275dir}if(f){if(l){d.push(f);const T=n;T.inputs=bm(n.inputs),T.declaredInputs=bm(n.declaredInputs),T.outputs=bm(n.outputs);const P=f.hostBindings;P&&gs(n,P);const $=f.viewQuery,X=f.contentQueries;if($&&J_(n,$),X&&Cm(n,X),Ce(n.inputs,f.inputs),Ce(n.declaredInputs,f.declaredInputs),Ce(n.outputs,f.outputs),Yr(f)&&f.data.animation){const ge=n.data;ge.animation=(ge.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let T=0;T<v.length;T++){const P=v[T];P&&P.ngInherit&&P(n),P===wm&&(l=!1)}}i=Object.getPrototypeOf(i)}!function X_(n){let i=0,l=null;for(let d=n.length-1;d>=0;d--){const f=n[d];f.hostVars=i+=f.hostVars,f.hostAttrs=hn(f.hostAttrs,l=hn(l,f.hostAttrs))}}(d)}function bm(n){return n===he?{}:n===dt?[]:n}function J_(n,i){const l=n.viewQuery;n.viewQuery=l?(d,f)=>{i(d,f),l(d,f)}:i}function Cm(n,i){const l=n.contentQueries;n.contentQueries=l?(d,f,v)=>{i(d,f,v),l(d,f,v)}:i}function gs(n,i){const l=n.hostBindings;n.hostBindings=l?(d,f)=>{i(d,f),l(d,f)}:i}function ag(n){return!!Yf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Yf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ta(n,i,l){return!Object.is(n[i],l)&&(n[i]=l,!0)}function Mm(n,i,l,d){const f=Ht();return ta(f,Co(),i)&&(Yn(),$a(Nr(),f,n,i,l,d)),Mm}function fg(n,i,l,d,f,v,T,P){const $=Ht(),X=Yn(),ge=n+Je,ke=X.firstCreatePass?function hg(n,i,l,d,f,v,T,P,$){const X=i.consts,ge=Wh(i,n,4,T||null,$n(X,P));Yp(i,l,ge,$n(X,$)),Ro(i,ge);const ke=ge.tView=hm(2,ge,d,f,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,X);return null!==i.queries&&(i.queries.template(i,ge),ke.queries=i.queries.embeddedTView(ge)),ge}(ge,X,$,i,l,d,f,v,T):X.data[ge];Gs(ke,!1);const gt=$[Ye].createComment("");Cu(X,$,gt,ke),fo(gt,$),qh($,$[ge]=$y(gt,$,gt,ke)),Ys(ke)&&Gf(X,$,ke),null!=T&&Wp($,ke,P)}function nf(n){return function Q(n,i){return n[i]}(function za(){return Pn.lFrame.contextLView}(),Je+n)}function fa(n,i,l){const d=Ht();return ta(d,Co(),i)&&Ca(Yn(),Nr(),d,n,i,d[Ye],l,!1),fa}function pg(n,i,l,d,f){const T=f?"class":"style";Wu(n,l,i.inputs[T],T,d)}function qd(n,i,l,d){const f=Ht(),v=Yn(),T=Je+n,P=f[Ye],$=v.firstCreatePass?function rf(n,i,l,d,f,v){const T=i.consts,$=Wh(i,n,2,d,$n(T,f));return Yp(i,l,$,$n(T,v)),null!==$.attrs&&Zh($,$.attrs,!1),null!==$.mergedAttrs&&Zh($,$.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,$),$}(T,v,f,i,l,d):v.data[T],X=f[T]=vl(P,i,function fs(){return Pn.lFrame.currentNamespace}()),ge=Ys($);return Gs($,!0),$g(P,X,$),32!=(32&$.flags)&&Cu(v,f,X,$),0===function j(){return Pn.lFrame.elementDepthCount}()&&fo(X,f),function F(){Pn.lFrame.elementDepthCount++}(),ge&&(Gf(v,f,$),Gd(v,$,f)),null!==d&&Wp(f,$),qd}function sf(){let n=Ns();sl()?_a():(n=n.parent,Gs(n,!1));const i=n;!function ue(){Pn.lFrame.elementDepthCount--}();const l=Yn();return l.firstCreatePass&&(Ro(l,n),us(n)&&l.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Kt(n){return 0!=(8&n.flags)}(i)&&pg(l,i,Ht(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function lr(n){return 0!=(16&n.flags)}(i)&&pg(l,i,Ht(),i.stylesWithoutHost,!1),sf}function jc(n,i,l,d){return qd(n,i,l,d),sf(),jc}function Yd(n,i,l){const d=Ht(),f=Yn(),v=n+Je,T=f.firstCreatePass?function rv(n,i,l,d,f){const v=i.consts,T=$n(v,d),P=Wh(i,n,8,"ng-container",T);return null!==T&&Zh(P,T,!0),Yp(i,l,P,$n(v,f)),null!==i.queries&&i.queries.elementStart(i,P),P}(v,f,d,i,l):f.data[v];Gs(T,!0);const P=d[v]=d[Ye].createComment("");return Cu(f,d,P,T),fo(P,d),Ys(T)&&(Gf(f,d,T),Gd(f,T,d)),null!=l&&Wp(d,T),Yd}function Hc(){let n=Ns();const i=Yn();return sl()?_a():(n=n.parent,Gs(n,!1)),i.firstCreatePass&&(Ro(i,n),us(n)&&i.queries.elementEnd(n)),Hc}function gg(n,i,l){return Yd(n,i,l),Hc(),gg}function Xy(){return Ht()}function Jy(n){return!!n&&"function"==typeof n.then}function Xf(n){return!!n&&"function"==typeof n.subscribe}const Jf=Xf;function af(n,i,l,d){const f=Ht(),v=Yn(),T=Ns();return function lf(n,i,l,d,f,v,T){const P=Ys(d),X=n.firstCreatePass&&Wd(n),ge=i[Br],ke=eg(i);let gt=!0;if(3&d.type||T){const Tn=hs(d,i),Kn=T?T(Tn):Tn,Cr=ke.length,Ur=T?ii=>T(Pi(ii[d.index])):d.index;let yn=null;if(!T&&P&&(yn=function Nm(n,i,l,d){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const T=f[v];if(T===l&&f[v+1]===d){const P=i[Ci],$=f[v+2];return P.length>$?P[$]:null}"string"==typeof T&&(v+=2)}return null}(n,i,f,d.index)),null!==yn)(yn.__ngLastListenerFn__||yn).__ngNextListenerFn__=v,yn.__ngLastListenerFn__=v,gt=!1;else{v=cf(d,i,ge,v,!1);const ii=l.listen(Kn,f,v);ke.push(v,ii),X&&X.push(f,Ur,Cr,Cr+1)}}else v=cf(d,i,ge,v,!1);const Pt=d.outputs;let sn;if(gt&&null!==Pt&&(sn=Pt[f])){const Tn=sn.length;if(Tn)for(let Kn=0;Kn<Tn;Kn+=2){const qs=i[sn[Kn]][sn[Kn+1]].subscribe(v),Ho=ke.length;ke.push(v,qs),X&&X.push(f,d.index,Ho,-(Ho+1))}}}(v,f,f[Ye],T,n,i,d),af}function mg(n,i,l,d){try{return Gi(6,i,l),!1!==l(d)}catch(f){return tg(n,f),!1}finally{Gi(7,i,l)}}function cf(n,i,l,d,f){return function v(T){if(T===Function)return d;Jp(n.componentOffset>-1?D(n.index,i):i);let $=mg(i,l,d,T),X=v.__ngNextListenerFn__;for(;X;)$=mg(i,l,X,T)&&$,X=X.__ngNextListenerFn__;return f&&!1===$&&(T.preventDefault(),T.returnValue=!1),$}}function yg(n=1){return function sc(n){return(Pn.lFrame.contextLView=function as(n,i){for(;n>0;)i=i[kt],n--;return i}(n,Pn.lFrame.contextLView))[Br]}(n)}function _g(n,i){let l=null;const d=function vy(n){const i=n.attrs;if(null!=i){const l=i.indexOf(5);if(!(1&l))return i[l+1]}return null}(n);for(let f=0;f<i.length;f++){const v=i[f];if("*"!==v){if(null===d?_y(n,v,!0):Ey(d,v))return f}else l=f}return l}function Ju(n){const i=Ht()[$t][Xr];if(!i.projection){const d=i.projection=N(n?n.length:1,null),f=d.slice();let v=i.child;for(;null!==v;){const T=n?_g(v,n):0;null!==T&&(f[T]?f[T].projectionNext=v:d[T]=v,f[T]=v),v=v.next}}}function uf(n,i=0,l){const d=Ht(),f=Yn(),v=Wh(f,Je+n,16,null,l||null);null===v.projection&&(v.projection=i),_a(),32!=(32&v.flags)&&function vh(n,i,l){Du(i[Ye],0,i,l,Wn(n,l,i),Ul(l.parent||i[Xr],l,i))}(f,d,v)}function np(n,i){return n<<17|i<<2}function Ua(n){return n>>17&32767}function Al(n){return 2|n}function Va(n){return(131068&n)>>2}function ed(n,i){return-131069&n|i<<2}function df(n){return 1|n}function td(n,i,l,d,f){const v=n[l+1],T=null===i;let P=d?Ua(v):Va(v),$=!1;for(;0!==P&&(!1===$||T);){const ge=n[P+1];s_(n[P],i)&&($=!0,n[P+1]=d?df(ge):Al(ge)),P=d?Ua(ge):Va(ge)}$&&(n[l+1]=d?Al(v):df(v))}function s_(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Un(n,i)>=0}const ri={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function na(n){return n.substring(ri.key,ri.keyEnd)}function to(n){return n.substring(ri.value,ri.valueEnd)}function ip(n,i){const l=ri.textEnd;return l===i?-1:(i=ri.keyEnd=function o_(n,i,l){for(;i<l&&n.charCodeAt(i)>32;)i++;return i}(n,ri.key=i,l),hf(n,i,l))}function Bm(n,i){const l=ri.textEnd;let d=ri.key=hf(n,i,l);return l===d?-1:(d=ri.keyEnd=function Fv(n,i,l){let d;for(;i<l&&(45===(d=n.charCodeAt(i))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)i++;return i}(n,d,l),d=sp(n,d,l),d=ri.value=hf(n,d,l),d=ri.valueEnd=function Rs(n,i,l){let d=-1,f=-1,v=-1,T=i,P=T;for(;T<l;){const $=n.charCodeAt(T++);if(59===$)return P;34===$||39===$?P=T=iv(n,$,T,l):i===T-4&&85===v&&82===f&&76===d&&40===$?P=T=iv(n,41,T,l):$>32&&(P=T),v=f,f=d,d=-33&$}return P}(n,d,l),sp(n,d,l))}function Ig(n){ri.key=0,ri.keyEnd=0,ri.value=0,ri.valueEnd=0,ri.textEnd=n.length}function hf(n,i,l){for(;i<l&&n.charCodeAt(i)<=32;)i++;return i}function sp(n,i,l,d){return(i=hf(n,i,l))<l&&i++,i}function iv(n,i,l,d){let f=-1,v=l;for(;v<d;){const T=n.charCodeAt(v++);if(T==i&&92!==f)return v;f=92==T&&92===f?0:T}throw new Error}function Ts(n,i,l){return Xl(n,i,l,!1),Ts}function Jd(n,i){return Xl(n,i,null,!0),Jd}function Zl(n){_c(lv,a_,n,!1)}function a_(n,i){for(let l=function Xd(n){return Ig(n),Bm(n,hf(n,0,ri.textEnd))}(i);l>=0;l=Bm(i,l))lv(n,na(i),to(i))}function $m(n){_c(eh,Ql,n,!0)}function Ql(n,i){for(let l=function Lm(n){return Ig(n),ip(n,hf(n,0,ri.textEnd))}(i);l>=0;l=ip(i,l))Dt(n,na(i),!0)}function Xl(n,i,l,d){const f=Ht(),v=Yn(),T=aa(2);v.firstUpdatePass&&sv(v,n,T,d),i!==Wr&&ta(f,T,i)&&u_(v,v.data[ls()],f,f[Ye],n,f[T+1]=function h_(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=me(wl(n)))),n}(i,l),d,T)}function _c(n,i,l,d){const f=Yn(),v=aa(2);f.firstUpdatePass&&sv(f,null,v,d);const T=Ht();if(l!==Wr&&ta(T,v,l)){const P=f.data[ls()];if(nd(P,d)&&!l_(f,v)){let $=d?P.classesWithoutHost:P.stylesWithoutHost;null!==$&&(l=Ue($,l||"")),pg(f,P,T,l,d)}else!function wg(n,i,l,d,f,v,T,P){f===Wr&&(f=dt);let $=0,X=0,ge=0<f.length?f[0]:null,ke=0<v.length?v[0]:null;for(;null!==ge||null!==ke;){const gt=$<f.length?f[$+1]:void 0,Pt=X<v.length?v[X+1]:void 0;let Tn,sn=null;ge===ke?($+=2,X+=2,gt!==Pt&&(sn=ke,Tn=Pt)):null===ke||null!==ge&&ge<ke?($+=2,sn=ge):(X+=2,sn=ke,Tn=Pt),null!==sn&&u_(n,i,l,d,sn,Tn,T,P),ge=$<f.length?f[$]:null,ke=X<v.length?v[X]:null}}(f,P,T,T[Ye],T[v+1],T[v+1]=function Jl(n,i,l){if(null==l||""===l)return dt;const d=[],f=wl(l);if(Array.isArray(f))for(let v=0;v<f.length;v++)n(d,f[v],!0);else if("object"==typeof f)for(const v in f)f.hasOwnProperty(v)&&n(d,v,f[v]);else"string"==typeof f&&i(d,f);return d}(n,i,l),d,v)}}function l_(n,i){return i>=n.expandoStartIndex}function sv(n,i,l,d){const f=n.data;if(null===f[l+1]){const v=f[ls()],T=l_(n,l);nd(v,d)&&null===i&&!T&&(i=!1),i=function ov(n,i,l,d){const f=function Do(n){const i=Pn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let v=d?i.residualClasses:i.residualStyles;if(null===f)0===(d?i.classBindings:i.styleBindings)&&(l=Da(l=op(null,n,i,l,d),i.attrs,d),v=null);else{const T=i.directiveStylingLast;if(-1===T||n[T]!==f)if(l=op(f,n,i,l,d),null===v){let $=function av(n,i,l){const d=l?i.classBindings:i.styleBindings;if(0!==Va(d))return n[Ua(d)]}(n,i,d);void 0!==$&&Array.isArray($)&&($=op(null,n,i,$[1],d),$=Da($,i.attrs,d),function c_(n,i,l,d){n[Ua(l?i.classBindings:i.styleBindings)]=d}(n,i,d,$))}else v=function vc(n,i,l){let d;const f=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<f;v++)d=Da(d,n[v].hostAttrs,l);return Da(d,i.attrs,l)}(n,i,d)}return void 0!==v&&(d?i.residualClasses=v:i.residualStyles=v),l}(f,v,i,d),function rp(n,i,l,d,f,v){let T=v?i.classBindings:i.styleBindings,P=Ua(T),$=Va(T);n[d]=l;let ge,X=!1;if(Array.isArray(l)?(ge=l[1],(null===ge||Un(l,ge)>0)&&(X=!0)):ge=l,f)if(0!==$){const gt=Ua(n[P+1]);n[d+1]=np(gt,P),0!==gt&&(n[gt+1]=ed(n[gt+1],d)),n[P+1]=function n_(n,i){return 131071&n|i<<17}(n[P+1],d)}else n[d+1]=np(P,0),0!==P&&(n[P+1]=ed(n[P+1],d)),P=d;else n[d+1]=np($,0),0===P?P=d:n[$+1]=ed(n[$+1],d),$=d;X&&(n[d+1]=Al(n[d+1])),td(n,ge,d,!0),td(n,ge,d,!1),function i_(n,i,l,d,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&Un(v,i)>=0&&(l[d+1]=df(l[d+1]))}(i,ge,n,d,v),T=np(P,$),v?i.classBindings=T:i.styleBindings=T}(f,v,i,l,T,d)}}function op(n,i,l,d,f){let v=null;const T=l.directiveEnd;let P=l.directiveStylingLast;for(-1===P?P=l.directiveStart:P++;P<T&&(v=i[P],d=Da(d,v.hostAttrs,f),v!==n);)P++;return null!==n&&(l.directiveStylingLast=P),d}function Da(n,i,l){const d=l?1:2;let f=-1;if(null!==i)for(let v=0;v<i.length;v++){const T=i[v];"number"==typeof T?f=T:f===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Dt(n,T,!!l||i[++v]))}return void 0===n?null:n}function lv(n,i,l){Dt(n,i,wl(l))}function eh(n,i,l){const d=String(i);""!==d&&!d.includes(" ")&&Dt(n,d,l)}function u_(n,i,l,d,f,v,T,P){if(!(3&i.type))return;const $=n.data,X=$[P+1],ge=function r_(n){return 1==(1&n)}(X)?d_($,i,l,f,Va(X),T):void 0;th(ge)||(th(v)||function t_(n){return 2==(2&n)}(X)&&(v=d_($,null,l,f,P,T)),function Tu(n,i,l,d,f){if(i)f?n.addClass(l,d):n.removeClass(l,d);else{let v=-1===d.indexOf("-")?void 0:wa.DashCase;null==f?n.removeStyle(l,d,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=wa.Important),n.setStyle(l,d,f,v))}}(d,T,co(ls(),l),f,v))}function d_(n,i,l,d,f,v){const T=null===i;let P;for(;f>0;){const $=n[f],X=Array.isArray($),ge=X?$[1]:$,ke=null===ge;let gt=l[f+1];gt===Wr&&(gt=ke?dt:void 0);let Pt=ke?wn(gt,d):ge===d?gt:void 0;if(X&&!th(Pt)&&(Pt=wn($,d)),th(Pt)&&(P=Pt,T))return P;const sn=n[f+1];f=T?Ua(sn):Va(sn)}if(null!==i){let $=v?i.residualClasses:i.residualStyles;null!=$&&(P=wn($,d))}return P}function th(n){return void 0!==n}function nd(n,i){return 0!=(n.flags&(i?8:16))}function bg(n,i=""){const l=Ht(),d=Yn(),f=n+Je,v=d.firstCreatePass?Wh(d,f,1,i,null):d.data[f],T=l[f]=function $l(n,i){return n.createText(i)}(l[Ye],i);Cu(d,l,T,v),Gs(v,!1)}function ec(n){return nh("",n,""),ec}function nh(n,i,l){const d=Ht(),f=function nl(n,i,l,d){return ta(n,Co(),l)?i+oe(l)+d:Wr}(d,n,i,l);return f!==Wr&&function el(n,i,l){const d=co(i,n);!function bd(n,i,l){n.setValue(i,l)}(n[Ye],d,l)}(d,ls(),f),nh}function od(n,i,l){const d=Ht();return ta(d,Co(),i)&&Ca(Yn(),Nr(),d,n,i,d[Ye],l,!0),od}const sh=void 0;var pv=["en",[["a","p"],["AM","PM"],sh],[["AM","PM"],sh,sh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sh,"{1} 'at' {0}",sh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oh(n){const l=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let ah={};function pp(n){const i=function Mg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let l=zm(i);if(l)return l;const d=i.split("-")[0];if(l=zm(d),l)return l;if("en"===d)return pv;throw new Se(701,!1)}function ad(n){return pp(n)[Rr.PluralCase]}function zm(n){return n in ah||(ah[n]=Ar.ng&&Ar.ng.common&&Ar.ng.common.locales&&Ar.ng.common.locales[n]),ah[n]}var Rr=(()=>((Rr=Rr||{})[Rr.LocaleId=0]="LocaleId",Rr[Rr.DayPeriodsFormat=1]="DayPeriodsFormat",Rr[Rr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rr[Rr.DaysFormat=3]="DaysFormat",Rr[Rr.DaysStandalone=4]="DaysStandalone",Rr[Rr.MonthsFormat=5]="MonthsFormat",Rr[Rr.MonthsStandalone=6]="MonthsStandalone",Rr[Rr.Eras=7]="Eras",Rr[Rr.FirstDayOfWeek=8]="FirstDayOfWeek",Rr[Rr.WeekendRange=9]="WeekendRange",Rr[Rr.DateFormat=10]="DateFormat",Rr[Rr.TimeFormat=11]="TimeFormat",Rr[Rr.DateTimeFormat=12]="DateTimeFormat",Rr[Rr.NumberSymbols=13]="NumberSymbols",Rr[Rr.NumberFormats=14]="NumberFormats",Rr[Rr.CurrencyCode=15]="CurrencyCode",Rr[Rr.CurrencySymbol=16]="CurrencySymbol",Rr[Rr.CurrencyName=17]="CurrencyName",Rr[Rr.Currencies=18]="Currencies",Rr[Rr.Directionality=19]="Directionality",Rr[Rr.PluralCase=20]="PluralCase",Rr[Rr.ExtraData=21]="ExtraData",Rr))();const gp="en-US";let lh=gp;function Dv(n,i,l,d,f){if(n=De(n),Array.isArray(n))for(let v=0;v<n.length;v++)Dv(n[v],i,l,d,f);else{const v=Yn(),T=Ht();let P=mc(n)?n:De(n.provide),$=Pu(n);const X=Ns(),ge=1048575&X.providerIndexes,ke=X.directiveStart,gt=X.providerIndexes>>20;if(mc(n)||!n.multi){const Pt=new Ne($,f,ea),sn=S_(P,i,f?ge:ge+gt,ke);-1===sn?(Ti(Yo(X,T),v,P),T_(v,n,i.length),i.push(P),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),l.push(Pt),T.push(Pt)):(l[sn]=Pt,T[sn]=Pt)}else{const Pt=S_(P,i,ge+gt,ke),sn=S_(P,i,ge,ge+gt),Kn=sn>=0&&l[sn];if(f&&!Kn||!f&&!(Pt>=0&&l[Pt])){Ti(Yo(X,T),v,P);const Cr=function c0(n,i,l,d,f){const v=new Ne(n,l,ea);return v.multi=[],v.index=i,v.componentProviders=0,Tv(v,f,d&&!l),v}(f?Uv:l0,l.length,f,d,$);!f&&Kn&&(l[sn].providerFactory=Cr),T_(v,n,i.length,0),i.push(P),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),l.push(Cr),T.push(Cr)}else T_(v,n,Pt>-1?Pt:sn,Tv(l[f?sn:Pt],$,!f&&d));!f&&d&&Kn&&l[sn].componentProviders++}}}function T_(n,i,l,d){const f=mc(i),v=function Rp(n){return!!n.useClass}(i);if(f||v){const $=(v?De(i.useClass):i).prototype.ngOnDestroy;if($){const X=n.destroyHooks||(n.destroyHooks=[]);if(!f&&i.multi){const ge=X.indexOf(l);-1===ge?X.push(l,[d,$]):X[ge+1].push(d,$)}else X.push(l,$)}}}function Tv(n,i,l){return l&&n.componentProviders++,n.multi.push(i)-1}function S_(n,i,l,d){for(let f=l;f<d;f++)if(i[f]===n)return f;return-1}function l0(n,i,l,d){return A_(this.multi,[])}function Uv(n,i,l,d){const f=this.multi;let v;if(this.providerFactory){const T=this.providerFactory.componentProviders,P=ns(l,l[bn],this.providerFactory.index,d);v=P.slice(0,T),A_(f,v);for(let $=T;$<P.length;$++)v.push(P[$])}else v=[],A_(f,v);return v}function A_(n,i){for(let l=0;l<n.length;l++)i.push((0,n[l])());return i}function Vv(n,i=[]){return l=>{l.providersResolver=(d,f)=>function Cv(n,i,l){const d=Yn();if(d.firstCreatePass){const f=Yr(n);Dv(l,d.data,d.blueprint,f,!0),Dv(i,d.data,d.blueprint,f,!1)}}(d,f?f(n):n,i)}}class vp{}class Sv{}function u0(n,i){return new e(n,null!=i?i:null)}class e extends vp{constructor(i,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ku(this);const d=Jn(i);this._bootstrapComponents=$c(d.bootstrap),this._r3Injector=Up(i,l,[{provide:vp,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],me(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class t extends Sv{constructor(i){super(),this.moduleType=i}create(i){return new e(this.moduleType,i)}}class a extends vp{constructor(i,l,d){super(),this.componentFactoryResolver=new Ku(this),this.instance=null;const f=new xf([...i,{provide:vp,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],l||Pp(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function h(n,i,l=null){return new a(n,i,l).injector}let m=(()=>{class n{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=kd(0,l.type),f=d.length>0?h([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Tt({token:n,providedIn:"environment",factory:()=>new n(Xn(ru))}),n})();function w(n){n.getStandaloneInjector=i=>i.get(m).getOrCreateStandaloneInjector(n)}function d0(n){return i=>{setTimeout(n,void 0,i)}}const vf=class cI extends y.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,l,d){let f=i,v=l||(()=>null),T=d;if(i&&"object"==typeof i){var P,$,X;const ke=i;f=null===(P=ke.next)||void 0===P?void 0:P.bind(ke),v=null===($=ke.error)||void 0===$?void 0:$.bind(ke),T=null===(X=ke.complete)||void 0===X?void 0:X.bind(ke)}this.__isAsync&&(v=d0(v),f&&(f=d0(f)),T&&(T=d0(T)));const ge=super.subscribe({next:f,error:v,complete:T});return i instanceof g.w0&&i.add(ge),ge}};function uI(){return this._results[Symbol.iterator]()}class jv{get changes(){return this._changes||(this._changes=new vf)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=jv.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=uI)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,l){return this._results.reduce(i,l)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,l){const d=this;d.dirty=!1;const f=function Bo(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Lo(n,i,l){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let f=n[d],v=i[d];if(l&&(f=l(f),v=l(v)),v!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Rv=(()=>{class n{}return n.__NG_ELEMENT_ID__=fI,n})();const dI=Rv,hI=class extends dI{constructor(i,l,d){super(),this._declarationLView=i,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(i,l){const d=this._declarationTContainer.tView,f=Gh(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,l||null);f[Wt]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[pn];return null!==T&&(f[pn]=T.createEmbeddedView(d)),dm(d,f,i),new Qh(f)}};function fI(){return Hv(Ns(),Ht())}function Hv(n,i){return 4&n.type?new hI(i,n,Nu(n,i)):null}let zv=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();function pI(){return H0(Ns(),Ht())}const gI=zv,V0=class extends gI{constructor(i,l,d){super(),this._lContainer=i,this._hostTNode=l,this._hostLView=d}get element(){return Nu(this._hostTNode,this._hostLView)}get injector(){return new Ia(this._hostTNode,this._hostLView)}get parentInjector(){const i=ca(this._hostTNode,this._hostLView);if(tn(i)){const l=Ka(i,this._hostLView),d=Di(i);return new Ia(l[bn].data[d+8],l)}return new Ia(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const l=j0(this._lContainer);return null!==l&&l[i]||null}get length(){return this._lContainer.length-ir}createEmbeddedView(i,l,d){let f,v;"number"==typeof d?f=d:null!=d&&(f=d.index,v=d.injector);const T=i.createEmbeddedView(l||{},v);return this.insert(T,f),T}createComponent(i,l,d,f,v){const T=i&&!function Za(n){return"function"==typeof n}(i);let P;if(T)P=l;else{const ke=l||{};P=ke.index,d=ke.injector,f=ke.projectableNodes,v=ke.environmentInjector||ke.ngModuleRef}const $=T?i:new qf(pr(i)),X=d||this.parentInjector;if(!v&&null==$.ngModule){const gt=(T?X:this.parentInjector).get(ru,null);gt&&(v=gt)}const ge=$.create(X,f,void 0,v);return this.insert(ge.hostView,P),ge}insert(i,l){const d=i._lView,f=d[bn];if(function Qt(n){return Ei(n[gr])}(d)){const ge=this.indexOf(i);if(-1!==ge)this.detach(ge);else{const ke=d[gr],gt=new V0(ke,ke[Xr],ke[gr]);gt.detach(gt.indexOf(i))}}const v=this._adjustIndex(l),T=this._lContainer;!function I(n,i,l,d){const f=ir+d,v=l.length;d>0&&(l[f-1][ui]=i),d<v-ir?(i[ui]=l[f],R(l,ir+d,i)):(l.push(i),i[ui]=null),i[gr]=l;const T=i[Wt];null!==T&&l!==T&&function x(n,i){const l=n[mr];i[$t]!==i[gr][gr][$t]&&(n[Vt]=!0),null===l?n[mr]=[i]:l.push(i)}(T,i);const P=i[pn];null!==P&&P.insertView(n),i[ar]|=64}(f,d,T,v);const P=yh(v,T),$=d[Ye],X=eu($,T[an]);return null!==X&&function El(n,i,l,d,f,v){d[gi]=f,d[Xr]=i,_h(n,d,l,1,f,v)}(f,T[Xr],$,d,X,P),i.attachToViewContainerRef(),R(h0(T),v,i),i}move(i,l){return this.insert(i,l)}indexOf(i){const l=j0(this._lContainer);return null!==l?l.indexOf(i):-1}remove(i){const l=this._adjustIndex(i,-1),d=Ee(this._lContainer,l);d&&(b(h0(this._lContainer),l),It(d[bn],d))}detach(i){const l=this._adjustIndex(i,-1),d=Ee(this._lContainer,l);return d&&null!=b(h0(this._lContainer),l)?new Qh(d):null}_adjustIndex(i,l=0){return null==i?this.length+l:i}};function j0(n){return n[Bn]}function h0(n){return n[Bn]||(n[Bn]=[])}function H0(n,i){let l;const d=i[n.index];if(Ei(d))l=d;else{let f;if(8&n.type)f=Pi(d);else{const v=i[Ye];f=v.createComment("");const T=hs(n,i);Bi(v,eu(v,T),f,function Fc(n,i){return n.nextSibling(i)}(v,T),!1)}i[n.index]=l=$y(d,i,f,n),qh(i,l)}return new V0(l,n,i)}class f0{constructor(i){this.queryList=i,this.matches=null}clone(){return new f0(this.queryList)}setDirty(){this.queryList.setDirty()}}class p0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const l=i.queries;if(null!==l){const d=null!==i.contentQueries?i.contentQueries[0]:l.length,f=[];for(let v=0;v<d;v++){const T=l.getByIndex(v);f.push(this.queries[T.indexInDeclarationView].clone())}return new p0(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let l=0;l<this.queries.length;l++)null!==X0(i,l).matches&&this.queries[l].setDirty()}}class z0{constructor(i,l,d=null){this.predicate=i,this.flags=l,this.read=d}}class g0{constructor(i=[]){this.queries=i}elementStart(i,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,l)}elementEnd(i){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(i)}embeddedTView(i){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,v=this.getByIndex(d).embeddedTView(i,f);v&&(v.indexInDeclarationView=d,null!==l?l.push(v):l=[v])}return null!==l?new g0(l):null}template(i,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,l)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class m0{constructor(i,l=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(i,l){this.isApplyingToNode(l)&&this.matchTNode(i,l)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,l){this.elementStart(i,l)}embeddedTView(i,l){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,l),new m0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const v=d[f];this.matchTNodeWithReadOption(i,l,mI(l,v)),this.matchTNodeWithReadOption(i,l,bs(l,i,v,!1,!1))}else d===Rv?4&l.type&&this.matchTNodeWithReadOption(i,l,-1):this.matchTNodeWithReadOption(i,l,bs(l,i,d,!1,!1))}matchTNodeWithReadOption(i,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===$d||f===zv||f===Rv&&4&l.type)this.addMatch(l.index,-2);else{const v=bs(l,i,f,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,d)}}addMatch(i,l){null===this.matches?this.matches=[i,l]:this.matches.push(i,l)}}function mI(n,i){const l=n.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===i)return l[d+1];return null}function _I(n,i,l,d){return-1===l?function yI(n,i){return 11&n.type?Nu(n,i):4&n.type?Hv(n,i):null}(i,n):-2===l?function vI(n,i,l){return l===$d?Nu(i,n):l===Rv?Hv(i,n):l===zv?H0(i,n):void 0}(n,i,d):ns(n,n[bn],l,i)}function G0(n,i,l,d){const f=i[pn].queries[d];if(null===f.matches){const v=n.data,T=l.matches,P=[];for(let $=0;$<T.length;$+=2){const X=T[$];P.push(X<0?null:_I(i,v[X],T[$+1],l.metadata.read))}f.matches=P}return f.matches}function y0(n,i,l,d){const f=n.queries.getByIndex(l),v=f.matches;if(null!==v){const T=G0(n,i,f,l);for(let P=0;P<v.length;P+=2){const $=v[P];if($>0)d.push(T[P/2]);else{const X=v[P+1],ge=i[-$];for(let ke=ir;ke<ge.length;ke++){const gt=ge[ke];gt[Wt]===gt[gr]&&y0(gt[bn],gt,X,d)}if(null!==ge[mr]){const ke=ge[mr];for(let gt=0;gt<ke.length;gt++){const Pt=ke[gt];y0(Pt[bn],Pt,X,d)}}}}}return d}function W0(n){const i=Ht(),l=Yn(),d=ll();qo(d+1);const f=X0(l,d);if(n.dirty&&function K(n){return 4==(4&n[ar])}(i)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?y0(l,i,d,[]):G0(l,i,f,d);n.reset(v,Ud),n.notifyOnChanges()}return!0}return!1}function K0(n,i,l){const d=Yn();d.firstCreatePass&&(Q0(d,new z0(n,i,l),-1),2==(2&i)&&(d.staticViewQueries=!0)),Z0(d,Ht(),i)}function q0(n,i,l,d){const f=Yn();if(f.firstCreatePass){const v=Ns();Q0(f,new z0(i,l,d),v.index),function II(n,i){const l=n.contentQueries||(n.contentQueries=[]);i!==(l.length?l[l.length-1]:-1)&&l.push(n.queries.length-1,i)}(f,n),2==(2&l)&&(f.staticContentQueries=!0)}Z0(f,Ht(),l)}function Y0(){return function EI(n,i){return n[pn].queries[i].queryList}(Ht(),ll())}function Z0(n,i,l){const d=new jv(4==(4&l));Kp(n,i,d,d.destroy),null===i[pn]&&(i[pn]=new p0),i[pn].queries.push(new f0(d))}function Q0(n,i,l){null===n.queries&&(n.queries=new g0),n.queries.track(new m0(i,l))}function X0(n,i){return n.queries.getByIndex(i)}function J0(n,i){return Hv(n,i)}function _0(n){return!!Jn(n)}function Wv(...n){}const yE=new fi("Application Initializer");let Kv=(()=>{class n{constructor(l){this.appInits=l,this.resolve=Wv,this.reject=Wv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(Jy(v))l.push(v);else if(Jf(v)){const T=new Promise((P,$)=>{v.subscribe({complete:P,error:$})});l.push(T)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return n.\u0275fac=function(l){return new(l||n)(Xn(yE,8))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _E=new fi("AppId",{providedIn:"root",factory:function vE(){return`${b0()}${b0()}${b0()}`}});function b0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EE=new fi("Platform Initializer"),VI=new fi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),jI=new fi("AnimationModuleType");let HI=(()=>{class n{log(l){console.log(l)}warn(l){console.warn(l)}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const qv=new fi("LocaleId",{providedIn:"root",factory:()=>Gt(qv,un.Optional|un.SkipSelf)||function zI(){return typeof $localize<"u"&&$localize.locale||gp}()}),GI=new fi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WI{constructor(i,l){this.ngModuleFactory=i,this.componentFactories=l}}let KI=(()=>{class n{compileModuleSync(l){return new t(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),v=$c(Jn(l).declarations).reduce((T,P)=>{const $=pr(P);return $&&T.push(new qf($)),T},[]);return new WI(d,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZI=(()=>Promise.resolve(0))();function C0(n){typeof Zone>"u"?ZI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ud{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vf(!1),this.onMicrotaskEmpty=new vf(!1),this.onStable=new vf(!1),this.onError=new vf(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function QI(){let n=Ar.requestAnimationFrame,i=Ar.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function ew(n){const i=()=>{!function JI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ar,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,T0(n),n.isCheckStableRunning=!0,D0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),T0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,v,T,P)=>{try{return bE(n),l.invokeTask(f,v,T,P)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),CE(n)}},onInvoke:(l,d,f,v,T,P,$)=>{try{return bE(n),l.invoke(f,v,T,P,$)}finally{n.shouldCoalesceRunChangeDetection&&i(),CE(n)}},onHasTask:(l,d,f,v)=>{l.hasTask(f,v),d===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,T0(n),D0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,d,f,v)=>(l.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ud.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(ud.isInAngularZone())throw new Se(909,!1)}run(i,l,d){return this._inner.run(i,l,d)}runTask(i,l,d,f){const v=this._inner,T=v.scheduleEventTask("NgZoneEvent: "+f,i,XI,Wv,Wv);try{return v.runTask(T,l,d)}finally{v.cancelTask(T)}}runGuarded(i,l,d){return this._inner.runGuarded(i,l,d)}runOutsideAngular(i){return this._outer.run(i)}}const XI={};function D0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function T0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CE(n){n._nesting--,D0(n)}class tw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vf,this.onMicrotaskEmpty=new vf,this.onStable=new vf,this.onError=new vf}run(i,l,d){return i.apply(l,d)}runGuarded(i,l,d){return i.apply(l,d)}runOutsideAngular(i){return i()}runTask(i,l,d,f){return i.apply(l,d)}}const DE=new fi(""),TE=new fi("");let S0,nw=(()=>{class n{constructor(l,d,f){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,S0||(function rw(n){S0=n}(f),f.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ud.assertNotInAngularZone(),C0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())C0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==v),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,f){return[]}}return n.\u0275fac=function(l){return new(l||n)(Xn(ud),Xn(SE),Xn(TE))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac}),n})(),SE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){var f,v;return null!==(f=null===(v=S0)||void 0===v?void 0:v.findTestabilityInTree(this,l,d))&&void 0!==f?f:null}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ep=!1;let Ng=null;const A0=new fi("PlatformDestroyListeners"),ME=new fi("appBootstrapListener");class ow{constructor(i,l){this.name=i,this.token=l}}function cw(n){const{rootComponent:i,appProviders:l,platformProviders:d}=n;Ep&&void 0!==i&&function $u(n){if(function Nf(n){if(!pr(n))throw new Se(906,`The ${lt(n)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(n),!pr(n).standalone)throw new Se(907,`The ${lt(n)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${lt(n)} component has the \`standalone: true\` flag in the decorator.`)}(i);const f=function lw(n=[]){if(Ng)return Ng;const i=function xE(n=[],i){return Gl.create({name:i,providers:[{provide:Fd,useValue:"platform"},{provide:A0,useValue:new Set([()=>Ng=null])},...n]})}(n);return Ng=i,function RE(n){const i=n.get(EE,null);i&&i.forEach(l=>l())}(i),i}(d),v=function NE(n,i){let l;return l="noop"===n?new tw:("zone.js"===n?void 0:n)||new ud(i),l}("zone.js",function OE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return v.run(()=>{const P=h([{provide:ud,useValue:v},...l||[]],f,"Environment Injector"),$=P.get(kh,null);if(Ep&&!$)throw new Se(402,"No `ErrorHandler` found in the Dependency Injection tree.");let X;v.runOutsideAngular(()=>{X=v.onError.subscribe({next:gt=>{$.handleError(gt)}})});const ge=()=>P.destroy(),ke=f.get(A0);return ke.add(ge),P.onDestroy(()=>{X.unsubscribe(),ke.delete(ge)}),function kE(n,i,l){try{const d=l();return Jy(d)?d.catch(f=>{throw i.runOutsideAngular(()=>n.handleError(f)),f}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}($,v,()=>{const gt=P.get(Kv);return gt.runInitializers(),gt.donePromise.then(()=>{!function du(n){_t(n,"Expected localeId to be defined"),"string"==typeof n&&(lh=n.toLowerCase().replace(/_/g,"-"))}(P.get(qv,gp)||gp);const sn=P.get(Yv);return void 0!==i&&sn.bootstrap(i),sn})})})}let Yv=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,d,f){this._zone=l,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new Y.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),T=new Y.y(P=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{ud.assertNotInAngularZone(),C0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{ud.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{$.unsubscribe(),X.unsubscribe()}});this.isStable=(0,ae.T)(v,T.pipe((0,xe.B)()))}bootstrap(l,d){Ep&&this.warnIfDestroyed();const f=l instanceof Dl;if(!this._injector.get(Kv).done){const Pt="Cannot bootstrap as there are still asynchronous initializers running."+(!f&&rr(l)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new Se(405,Ep&&Pt)}let T;T=f?l:this._injector.get(su).resolveComponentFactory(l),this.componentTypes.push(T.componentType);const P=function sw(n){return n.isBoundToModule}(T)?void 0:this._injector.get(vp),X=T.create(Gl.NULL,[],d||T.selector,P),ge=X.location.nativeElement,ke=X.injector.get(DE,null);return null==ke||ke.registerApplication(ge),X.onDestroy(()=>{this.detachView(X.hostView),Zv(this.components,X),null==ke||ke.unregisterApplication(ge)}),this._loadComponent(X),X}tick(){if(Ep&&this.warnIfDestroyed(),this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){Ep&&this.warnIfDestroyed();const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){Ep&&this.warnIfDestroyed();const d=l;Zv(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(ME,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return Ep&&this.warnIfDestroyed(),this._destroyListeners.push(l),()=>Zv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Se(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Ep&&this._destroyed&&console.warn(_e(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return n.\u0275fac=function(l){return new(l||n)(Xn(ud),Xn(ru),Xn(kh))},n.\u0275prov=Tt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zv(n,i){const l=n.indexOf(i);l>-1&&n.splice(l,1)}function hw(){return!1}function fw(){}let pw=(()=>{class n{}return n.__NG_ELEMENT_ID__=gw,n})();function gw(n){return function mw(n,i,l){if(js(n)&&!l){const d=D(n.index,i);return new Qh(d,d)}return 47&n.type?new Qh(i[$t],i):null}(Ns(),Ht(),16==(16&n))}class VE{constructor(){}supports(i){return ag(i)}create(i){return new ww(i)}}const Iw=(n,i)=>i;class ww{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Iw}forEachItem(i){let l;for(l=this._itHead;null!==l;l=l._next)i(l)}forEachOperation(i){let l=this._itHead,d=this._removalsHead,f=0,v=null;for(;l||d;){const T=!d||l&&l.currentIndex<HE(d,f,v)?l:d,P=HE(T,f,v),$=T.currentIndex;if(T===d)f--,d=d._nextRemoved;else if(l=l._next,null==T.previousIndex)f++;else{v||(v=[]);const X=P-f,ge=$-f;if(X!=ge){for(let gt=0;gt<X;gt++){const Pt=gt<v.length?v[gt]:v[gt]=0,sn=Pt+gt;ge<=sn&&sn<X&&(v[gt]=Pt+1)}v[T.previousIndex]=ge-X}}P!==$&&i(T,P,$)}}forEachPreviousItem(i){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)i(l)}forEachAddedItem(i){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)i(l)}forEachMovedItem(i){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)i(l)}forEachRemovedItem(i){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)i(l)}forEachIdentityChange(i){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)i(l)}diff(i){if(null==i&&(i=[]),!ag(i))throw new Se(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,v,T,l=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let P=0;P<this.length;P++)v=i[P],T=this._trackByFn(P,v),null!==l&&Object.is(l.trackById,T)?(d&&(l=this._verifyReinsertion(l,v,T,P)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,T,P),d=!0),l=l._next}else f=0,function kv(n,i){if(Array.isArray(n))for(let l=0;l<n.length;l++)i(n[l]);else{const l=n[Symbol.iterator]();let d;for(;!(d=l.next()).done;)i(d.value)}}(i,P=>{T=this._trackByFn(f,P),null!==l&&Object.is(l.trackById,T)?(d&&(l=this._verifyReinsertion(l,P,T,f)),Object.is(l.item,P)||this._addIdentityChange(l,P)):(l=this._mismatch(l,P,T,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,l,d,f){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,l)||this._addIdentityChange(i,l),this._reinsertAfter(i,v,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(i.item,l)||this._addIdentityChange(i,l),this._moveAfter(i,v,f)):i=this._addAfter(new bw(l,d),v,f),i}_verifyReinsertion(i,l,d,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?i=this._reinsertAfter(v,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const l=i._next;this._addToRemovals(this._unlink(i)),i=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,v=i._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(i,l,d),this._addToMoves(i,d),i}_moveAfter(i,l,d){return this._unlink(i),this._insertAfter(i,l,d),this._addToMoves(i,d),i}_addAfter(i,l,d){return this._insertAfter(i,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,l,d){const f=null===l?this._itHead:l._next;return i._next=f,i._prev=l,null===f?this._itTail=i:f._prev=i,null===l?this._itHead=i:l._next=i,null===this._linkedRecords&&(this._linkedRecords=new jE),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const l=i._prev,d=i._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,i}_addToMoves(i,l){return i.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jE),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,l){return i.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class bw{constructor(i,l){this.item=i,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const l=i._prevDup,d=i._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class jE{constructor(){this.map=new Map}put(i){const l=i.trackById;let d=this.map.get(l);d||(d=new Cw,this.map.set(l,d)),d.add(i)}get(i,l){const f=this.map.get(i);return f?f.get(i,l):null}remove(i){const l=i.trackById;return this.map.get(l).remove(i)&&this.map.delete(l),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HE(n,i,l){const d=n.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+i+f}class zE{constructor(){}supports(i){return i instanceof Map||Yf(i)}create(){return new Dw}}class Dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let l;for(l=this._mapHead;null!==l;l=l._next)i(l)}forEachPreviousItem(i){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)i(l)}forEachChangedItem(i){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)i(l)}forEachAddedItem(i){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)i(l)}forEachRemovedItem(i){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)i(l)}diff(i){if(i){if(!(i instanceof Map||Yf(i)))throw new Se(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,l){if(i){const d=i._prev;return l._next=i,l._prev=d,i._prev=l,d&&(d._next=l),i===this._mapHead&&(this._mapHead=l),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(i,l){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,l);const v=f._prev,T=f._next;return v&&(v._next=T),T&&(T._prev=v),f._next=null,f._prev=null,f}const d=new Tw(i);return this._records.set(i,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,l){Object.is(l,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=l,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,l){i instanceof Map?i.forEach(l):Object.keys(i).forEach(d=>l(i[d],d))}}class Tw{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GE(){return new N0([new VE])}let N0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||GE()),deps:[[n,new pl,new Fl]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Se(901,!1)}}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:GE}),n})();function WE(){return new k0([new zE])}let k0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||WE()),deps:[[n,new pl,new Fl]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new Se(901,!1)}}return n.\u0275prov=Tt({token:n,providedIn:"root",factory:WE}),n})(),Mw=(()=>{class n{constructor(l){}}return n.\u0275fac=function(l){return new(l||n)(Xn(Yv))},n.\u0275mod=rs({type:n}),n.\u0275inj=Rt({}),n})();function Rw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Pw(n,i){const l=pr(n),d=i.elementInjector||Pp();return new qf(l).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},4006:(on,ot,k)=>{"use strict";k.d(ot,{Cf:()=>_e,F:()=>Xr,JJ:()=>Hn,JL:()=>un,JU:()=>me,UX:()=>Yi,Zs:()=>ma,_Y:()=>Je,a5:()=>nn,kI:()=>ze,qu:()=>Qt,sg:()=>Yr,u:()=>no,u5:()=>Pn});var y=k(4650),g=k(6895),Y=k(8996),ae=k(4128),xe=k(4004);let Pe=(()=>{class z{constructor(F,ue){this._renderer=F,this._elementRef=ue,this.onChange=Ot=>{},this.onTouched=()=>{}}setProperty(F,ue){this._renderer.setProperty(this._elementRef.nativeElement,F,ue)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return z.\u0275fac=function(F){return new(F||z)(y.Y36(y.Qsj),y.Y36(y.SBq))},z.\u0275dir=y.lG2({type:z}),z})(),Ce=(()=>{class z extends Pe{}return z.\u0275fac=function(){let j;return function(ue){return(j||(j=y.n5z(z)))(ue||z)}}(),z.\u0275dir=y.lG2({type:z,features:[y.qOj]}),z})();const me=new y.OlP("NgValueAccessor"),pe={provide:me,useExisting:(0,y.Gpc)(()=>je),multi:!0},Fe=new y.OlP("CompositionEventMode");let je=(()=>{class z extends Pe{constructor(F,ue,Ot){super(F,ue),this._compositionMode=Ot,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function De(){const z=(0,g.q)()?(0,g.q)().getUserAgent():"";return/android (\d+)/.test(z.toLowerCase())}())}writeValue(F){this.setProperty("value",null==F?"":F)}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return z.\u0275fac=function(F){return new(F||z)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Fe,8))},z.\u0275dir=y.lG2({type:z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,ue){1&F&&y.NdJ("input",function(Nn){return ue._handleInput(Nn.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Nn){return ue._compositionEnd(Nn.target.value)})},features:[y._Bn([pe]),y.qOj]}),z})();const Be=!1;function Xe(z){return null==z||("string"==typeof z||Array.isArray(z))&&0===z.length}function Se(z){return null!=z&&"number"==typeof z.length}const _e=new y.OlP("NgValidators"),oe=new y.OlP("NgAsyncValidators"),lt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ze{static min(j){return function Ae(z){return j=>{if(Xe(j.value)||Xe(z))return null;const F=parseFloat(j.value);return!isNaN(F)&&F<z?{min:{min:z,actual:j.value}}:null}}(j)}static max(j){return function q(z){return j=>{if(Xe(j.value)||Xe(z))return null;const F=parseFloat(j.value);return!isNaN(F)&&F>z?{max:{max:z,actual:j.value}}:null}}(j)}static required(j){return pt(j)}static requiredTrue(j){return Ke(j)}static email(j){return function ne(z){return Xe(z.value)||lt.test(z.value)?null:{email:!0}}(j)}static minLength(j){return function nt(z){return j=>Xe(j.value)||!Se(j.value)?null:j.value.length<z?{minlength:{requiredLength:z,actualLength:j.value.length}}:null}(j)}static maxLength(j){return function Me(z){return j=>Se(j.value)&&j.value.length>z?{maxlength:{requiredLength:z,actualLength:j.value.length}}:null}(j)}static pattern(j){return function et(z){if(!z)return vt;let j,F;return"string"==typeof z?(F="","^"!==z.charAt(0)&&(F+="^"),F+=z,"$"!==z.charAt(z.length-1)&&(F+="$"),j=new RegExp(F)):(F=z.toString(),j=z),ue=>{if(Xe(ue.value))return null;const Ot=ue.value;return j.test(Ot)?null:{pattern:{requiredPattern:F,actualValue:Ot}}}}(j)}static nullValidator(j){return null}static compose(j){return Ge(j)}static composeAsync(j){return mt(j)}}function pt(z){return Xe(z.value)?{required:!0}:null}function Ke(z){return!0===z.value?null:{required:!0}}function vt(z){return null}function Le(z){return null!=z}function ut(z){const j=(0,y.QGY)(z)?(0,Y.D)(z):z;if(Be&&!(0,y.CqO)(j)){let F="Expected async validator to return Promise or Observable.";throw"object"==typeof z&&(F+=" Are you using a synchronous validator where an async validator is expected?"),new y.vHH(-1101,F)}return j}function bt(z){let j={};return z.forEach(F=>{j=null!=F?{...j,...F}:j}),0===Object.keys(j).length?null:j}function yt(z,j){return j.map(F=>F(z))}function He(z){return z.map(j=>function We(z){return!z.validate}(j)?j:F=>j.validate(F))}function Ge(z){if(!z)return null;const j=z.filter(Le);return 0==j.length?null:function(F){return bt(yt(F,j))}}function _t(z){return null!=z?Ge(He(z)):null}function mt(z){if(!z)return null;const j=z.filter(Le);return 0==j.length?null:function(F){const ue=yt(F,j).map(ut);return(0,ae.D)(ue).pipe((0,xe.U)(bt))}}function Ct(z){return null!=z?mt(He(z)):null}function jt(z,j){return null===z?[j]:Array.isArray(z)?[...z,j]:[z,j]}function _n(z){return z._rawValidators}function Tt(z){return z._rawAsyncValidators}function ct(z){return z?Array.isArray(z)?z:[z]:[]}function Rt(z,j){return Array.isArray(z)?z.includes(j):z===j}function Jt(z,j){const F=ct(j);return ct(z).forEach(Ot=>{Rt(F,Ot)||F.push(Ot)}),F}function Cn(z,j){return ct(j).filter(F=>!Rt(z,F))}class Fn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(j){this._rawValidators=j||[],this._composedValidatorFn=_t(this._rawValidators)}_setAsyncValidators(j){this._rawAsyncValidators=j||[],this._composedAsyncValidatorFn=Ct(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(j){this._onDestroyCallbacks.push(j)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(j=>j()),this._onDestroyCallbacks=[]}reset(j){this.control&&this.control.reset(j)}hasError(j,F){return!!this.control&&this.control.hasError(j,F)}getError(j,F){return this.control?this.control.getError(j,F):null}}class gn extends Fn{get formDirective(){return null}get path(){return null}}class nn extends Fn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vn{constructor(j){this._cd=j}get isTouched(){var j,F;return!(null===(j=this._cd)||void 0===j||null===(F=j.control)||void 0===F||!F.touched)}get isUntouched(){var j,F;return!(null===(j=this._cd)||void 0===j||null===(F=j.control)||void 0===F||!F.untouched)}get isPristine(){var j,F;return!(null===(j=this._cd)||void 0===j||null===(F=j.control)||void 0===F||!F.pristine)}get isDirty(){var j,F;return!(null===(j=this._cd)||void 0===j||null===(F=j.control)||void 0===F||!F.dirty)}get isValid(){var j,F;return!(null===(j=this._cd)||void 0===j||null===(F=j.control)||void 0===F||!F.valid)}get isInvalid(){var j,F;return!(null===(j=this._cd)||void 0===j||null===(F=j.control)||void 0===F||!F.invalid)}get isPending(){var j,F;return!(null===(j=this._cd)||void 0===j||null===(F=j.control)||void 0===F||!F.pending)}get isSubmitted(){var j;return!(null===(j=this._cd)||void 0===j||!j.submitted)}}let Hn=(()=>{class z extends vn{constructor(F){super(F)}}return z.\u0275fac=function(F){return new(F||z)(y.Y36(nn,2))},z.\u0275dir=y.lG2({type:z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,ue){2&F&&y.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)},features:[y.qOj]}),z})(),un=(()=>{class z extends vn{constructor(F){super(F)}}return z.\u0275fac=function(F){return new(F||z)(y.Y36(gn,10))},z.\u0275dir=y.lG2({type:z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,ue){2&F&&y.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)("ng-submitted",ue.isSubmitted)},features:[y.qOj]}),z})();function Vr(z,j){return z?`with name: '${j}'`:`at index: ${j}`}const er=!1,bi="VALID",Xn="INVALID",mn="PENDING",Gt="DISABLED";function En(z){return(Pr(z)?z.validators:z)||null}function zn(z,j){return(Pr(j)?j.asyncValidators:z)||null}function Pr(z){return null!=z&&!Array.isArray(z)&&"object"==typeof z}function Ze(z,j,F){const ue=z.controls;if(!(j?Object.keys(ue):ue).length)throw new y.vHH(1e3,er?function xi(z){return`\n    There are no form controls registered with this ${z?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(j):"");if(!ue[F])throw new y.vHH(1001,er?function Er(z,j){return`Cannot find form control ${Vr(z,j)}`}(j,F):"")}function Ve(z,j,F){z._forEachChild((ue,Ot)=>{if(void 0===F[Ot])throw new y.vHH(1002,er?function Zr(z,j){return`Must supply a value for form control ${Vr(z,j)}`}(j,Ot):"")})}class fe{constructor(j,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(j),this._assignAsyncValidators(F)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===bi}get invalid(){return this.status===Xn}get pending(){return this.status==mn}get disabled(){return this.status===Gt}get enabled(){return this.status!==Gt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._assignValidators(j)}setAsyncValidators(j){this._assignAsyncValidators(j)}addValidators(j){this.setValidators(Jt(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(Jt(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(Cn(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(Cn(j,this._rawAsyncValidators))}hasValidator(j){return Rt(this._rawValidators,j)}hasAsyncValidator(j){return Rt(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=mn,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=Gt,this.errors=null,this._forEachChild(ue=>{ue.disable({...j,onlySelf:!0})}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...j,skipPristineCheck:F}),this._onDisabledChange.forEach(ue=>ue(!0))}enable(j={}){const F=this._parentMarkedDirty(j.onlySelf);this.status=bi,this._forEachChild(ue=>{ue.enable({...j,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors({...j,skipPristineCheck:F}),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}getRawValue(){return this.value}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bi||this.status===mn)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gt:bi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=mn,this._hasOwnPendingAsyncValidator=!0;const F=ut(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,F={}){this.errors=j,this._updateControlsErrors(!1!==F.emitEvent)}get(j){let F=j;return null==F||(Array.isArray(F)||(F=F.split(".")),0===F.length)?null:F.reduce((ue,Ot)=>ue&&ue._find(Ot),this)}getError(j,F){const ue=F?this.get(F):this;return ue&&ue.errors?ue.errors[j]:null}hasError(j,F){return!!this.getError(j,F)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?Gt:this.errors?Xn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mn)?mn:this._anyControlsHaveStatus(Xn)?Xn:bi}_anyControlsHaveStatus(j){return this._anyControls(F=>F.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){Pr(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(j){return null}_assignValidators(j){this._rawValidators=Array.isArray(j)?j.slice():j,this._composedValidatorFn=function An(z){return Array.isArray(z)?_t(z):z||null}(this._rawValidators)}_assignAsyncValidators(j){this._rawAsyncValidators=Array.isArray(j)?j.slice():j,this._composedAsyncValidatorFn=function ur(z){return Array.isArray(z)?Ct(z):z||null}(this._rawAsyncValidators)}}class ve extends fe{constructor(j,F,ue){super(En(F),zn(ue,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,F){return this.controls[j]?this.controls[j]:(this.controls[j]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(j,F,ue={}){this.registerControl(j,F),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(j,F={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(j,F,ue={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],F&&this.registerControl(j,F),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,F={}){Ve(this,!0,j),Object.keys(j).forEach(ue=>{Ze(this,!0,ue),this.controls[ue].setValue(j[ue],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(Object.keys(j).forEach(ue=>{const Ot=this.controls[ue];Ot&&Ot.patchValue(j[ue],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j={},F={}){this._forEachChild((ue,Ot)=>{ue.reset(j[Ot],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(j,F,ue)=>(j[ue]=F.getRawValue(),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(F,ue)=>!!ue._syncPendingControls()||F);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){Object.keys(this.controls).forEach(F=>{const ue=this.controls[F];ue&&j(ue,F)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const[F,ue]of Object.entries(this.controls))if(this.contains(F)&&j(ue))return!0;return!1}_reduceValue(){return this._reduceChildren({},(F,ue,Ot)=>((ue.enabled||this.disabled)&&(F[Ot]=ue.value),F))}_reduceChildren(j,F){let ue=j;return this._forEachChild((Ot,Nn)=>{ue=F(ue,Ot,Nn)}),ue}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(j){return this.controls.hasOwnProperty(j)?this.controls[j]:null}}class Oe extends ve{}const we=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>rt}),rt="always";function Yt(z,j,F=rt){var ue,Ot;Jr(z,j),j.valueAccessor.writeValue(z.value),(z.disabled||"always"===F)&&(null===(ue=(Ot=j.valueAccessor).setDisabledState)||void 0===ue||ue.call(Ot,z.disabled)),function rs(z,j){j.valueAccessor.registerOnChange(F=>{z._pendingValue=F,z._pendingChange=!0,z._pendingDirty=!0,"change"===z.updateOn&&Hi(z,j)})}(z,j),function is(z,j){const F=(ue,Ot)=>{j.valueAccessor.writeValue(ue),Ot&&j.viewToModelUpdate(ue)};z.registerOnChange(F),j._registerOnDestroy(()=>{z._unregisterOnChange(F)})}(z,j),function Vi(z,j){j.valueAccessor.registerOnTouched(()=>{z._pendingTouched=!0,"blur"===z.updateOn&&z._pendingChange&&Hi(z,j),"submit"!==z.updateOn&&z.markAsTouched()})}(z,j),function dr(z,j){if(j.valueAccessor.setDisabledState){const F=ue=>{j.valueAccessor.setDisabledState(ue)};z.registerOnDisabledChange(F),j._registerOnDestroy(()=>{z._unregisterOnDisabledChange(F)})}}(z,j)}function In(z,j,F=!0){const ue=()=>{};j.valueAccessor&&(j.valueAccessor.registerOnChange(ue),j.valueAccessor.registerOnTouched(ue)),ki(z,j),z&&(j._invokeOnDestroyCallbacks(),z._registerOnCollectionChange(()=>{}))}function fn(z,j){z.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(j)})}function Jr(z,j){const F=_n(z);null!==j.validator?z.setValidators(jt(F,j.validator)):"function"==typeof F&&z.setValidators([F]);const ue=Tt(z);null!==j.asyncValidator?z.setAsyncValidators(jt(ue,j.asyncValidator)):"function"==typeof ue&&z.setAsyncValidators([ue]);const Ot=()=>z.updateValueAndValidity();fn(j._rawValidators,Ot),fn(j._rawAsyncValidators,Ot)}function ki(z,j){let F=!1;if(null!==z){if(null!==j.validator){const Ot=_n(z);if(Array.isArray(Ot)&&Ot.length>0){const Nn=Ot.filter(hi=>hi!==j.validator);Nn.length!==Ot.length&&(F=!0,z.setValidators(Nn))}}if(null!==j.asyncValidator){const Ot=Tt(z);if(Array.isArray(Ot)&&Ot.length>0){const Nn=Ot.filter(hi=>hi!==j.asyncValidator);Nn.length!==Ot.length&&(F=!0,z.setAsyncValidators(Nn))}}}const ue=()=>{};return fn(j._rawValidators,ue),fn(j._rawAsyncValidators,ue),F}function Hi(z,j){z._pendingDirty&&z.markAsDirty(),z.setValue(z._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(z._pendingValue),z._pendingChange=!1}function ws(z,j){Jr(z,j)}function gi(z,j){z._syncPendingControls(),j.forEach(F=>{const ue=F.control;"submit"===ue.updateOn&&ue._pendingChange&&(F.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}const ui={provide:gn,useExisting:(0,y.Gpc)(()=>Xr)},ei=(()=>Promise.resolve())();let Xr=(()=>{class z extends gn{constructor(F,ue,Ot){super(),this.callSetDisabledState=Ot,this.submitted=!1,this._directives=new Set,this.ngSubmit=new y.vpe,this.form=new ve({},_t(F),Ct(ue))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(F){ei.then(()=>{const ue=this._findContainer(F.path);F.control=ue.registerControl(F.name,F.control),Yt(F.control,F,this.callSetDisabledState),F.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(F)})}getControl(F){return this.form.get(F.path)}removeControl(F){ei.then(()=>{const ue=this._findContainer(F.path);ue&&ue.removeControl(F.name),this._directives.delete(F)})}addFormGroup(F){ei.then(()=>{const ue=this._findContainer(F.path),Ot=new ve({});ws(Ot,F),ue.registerControl(F.name,Ot),Ot.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(F){ei.then(()=>{const ue=this._findContainer(F.path);ue&&ue.removeControl(F.name)})}getFormGroup(F){return this.form.get(F.path)}updateModel(F,ue){ei.then(()=>{this.form.get(F.path).setValue(ue)})}setValue(F){this.control.setValue(F)}onSubmit(F){var ue;return this.submitted=!0,gi(this.form,this._directives),this.ngSubmit.emit(F),"dialog"===(null==F||null===(ue=F.target)||void 0===ue?void 0:ue.method)}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(F){return F.pop(),F.length?this.form.get(F):this.form}}return z.\u0275fac=function(F){return new(F||z)(y.Y36(_e,10),y.Y36(oe,10),y.Y36(we,8))},z.\u0275dir=y.lG2({type:z,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(F,ue){1&F&&y.NdJ("submit",function(Nn){return ue.onSubmit(Nn)})("reset",function(){return ue.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([ui]),y.qOj]}),z})();function Ci(z,j){const F=z.indexOf(j);F>-1&&z.splice(F,1)}function Br(z){return"object"==typeof z&&null!==z&&2===Object.keys(z).length&&"value"in z&&"disabled"in z}const de=class extends fe{constructor(j=null,F,ue){super(En(F),zn(ue,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(j),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pr(F)&&(F.nonNullable||F.initialValueIsDefault)&&(this.defaultValue=Br(j)?j.value:j)}setValue(j,F={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(j,F={}){this.setValue(j,F)}reset(j=this.defaultValue,F={}){this._applyFormState(j),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){Ci(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){Ci(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){Br(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}};let Je=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275dir=y.lG2({type:z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),z})(),Bn=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=y.oAB({type:z}),z.\u0275inj=y.cJS({}),z})();const Ei=new y.OlP("NgModelWithFormControlWarning"),Ys={provide:gn,useExisting:(0,y.Gpc)(()=>Yr)};let Yr=(()=>{class z extends gn{constructor(F,ue,Ot){super(),this.callSetDisabledState=Ot,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(F),this._setAsyncValidators(ue)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ki(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const ue=this.form.get(F.path);return Yt(ue,F,this.callSetDisabledState),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),ue}getControl(F){return this.form.get(F.path)}removeControl(F){In(F.control||null,F,!1),function ar(z,j){const F=z.indexOf(j);F>-1&&z.splice(F,1)}(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,ue){this.form.get(F.path).setValue(ue)}onSubmit(F){var ue;return this.submitted=!0,gi(this.form,this.directives),this.ngSubmit.emit(F),"dialog"===(null==F||null===(ue=F.target)||void 0===ue?void 0:ue.method)}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const ue=F.control,Ot=this.form.get(F.path);ue!==Ot&&(In(ue||null,F),(z=>z instanceof de)(Ot)&&(Yt(Ot,F,this.callSetDisabledState),F.control=Ot))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const ue=this.form.get(F.path);ws(ue,F),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const ue=this.form.get(F.path);ue&&function pr(z,j){return ki(z,j)}(ue,F)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jr(this.form,this),this._oldForm&&ki(this._oldForm,this)}_checkFormPresent(){}}return z.\u0275fac=function(F){return new(F||z)(y.Y36(_e,10),y.Y36(oe,10),y.Y36(we,8))},z.\u0275dir=y.lG2({type:z,selectors:[["","formGroup",""]],hostBindings:function(F,ue){1&F&&y.NdJ("submit",function(Nn){return ue.onSubmit(Nn)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Ys]),y.qOj,y.TTD]}),z})();const yo={provide:nn,useExisting:(0,y.Gpc)(()=>no)};let no=(()=>{class z extends nn{set isDisabled(F){}constructor(F,ue,Ot,Nn,hi){super(),this._ngModelWarningConfig=hi,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(ue),this._setAsyncValidators(Ot),this.valueAccessor=function bn(z,j){if(!j)return null;let F,ue,Ot;return Array.isArray(j),j.forEach(Nn=>{Nn.constructor===je?F=Nn:function Fi(z){return Object.getPrototypeOf(z.constructor)===Ce}(Nn)?ue=Nn:Ot=Nn}),Ot||ue||F||null}(0,Nn)}ngOnChanges(F){this._added||this._setUpControl(),function oi(z,j){if(!z.hasOwnProperty("model"))return!1;const F=z.model;return!!F.isFirstChange()||!Object.is(j,F.currentValue)}(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return function Mt(z,j){return[...j.path,z]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return z._ngModelWarningSentOnce=!1,z.\u0275fac=function(F){return new(F||z)(y.Y36(gn,13),y.Y36(_e,10),y.Y36(oe,10),y.Y36(me,10),y.Y36(Ei,8))},z.\u0275dir=y.lG2({type:z,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([yo]),y.qOj,y.TTD]}),z})(),zs=(()=>{class z{constructor(){this._validator=vt}ngOnChanges(F){if(this.inputName in F){const ue=this.normalizeInput(F[this.inputName].currentValue);this._enabled=this.enabled(ue),this._validator=this._enabled?this.createValidator(ue):vt,this._onChange&&this._onChange()}}validate(F){return this._validator(F)}registerOnValidatorChange(F){this._onChange=F}enabled(F){return null!=F}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275dir=y.lG2({type:z,features:[y.TTD]}),z})();const oa={provide:_e,useExisting:(0,y.Gpc)(()=>Eo),multi:!0},Aa={provide:_e,useExisting:(0,y.Gpc)(()=>ma),multi:!0};let Eo=(()=>{class z extends zs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=y.D6c,this.createValidator=F=>pt}enabled(F){return F}}return z.\u0275fac=function(){let j;return function(ue){return(j||(j=y.n5z(z)))(ue||z)}}(),z.\u0275dir=y.lG2({type:z,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(F,ue){2&F&&y.uIk("required",ue._enabled?"":null)},inputs:{required:"required"},features:[y._Bn([oa]),y.qOj]}),z})(),ma=(()=>{class z extends Eo{constructor(){super(...arguments),this.createValidator=F=>Ke}}return z.\u0275fac=function(){let j;return function(ue){return(j||(j=y.n5z(z)))(ue||z)}}(),z.\u0275dir=y.lG2({type:z,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(F,ue){2&F&&y.uIk("required",ue._enabled?"":null)},features:[y._Bn([Aa]),y.qOj]}),z})(),C=(()=>{class z{}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=y.oAB({type:z}),z.\u0275inj=y.cJS({imports:[Bn]}),z})();class Q extends fe{constructor(j,F,ue){super(En(F),zn(ue,F)),this.controls=j,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(j){return this.controls[this._adjustIndex(j)]}push(j,F={}){this.controls.push(j),this._registerControl(j),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(j,F,ue={}){this.controls.splice(j,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(j,F={}){let ue=this._adjustIndex(j);ue<0&&(ue=0),this.controls[ue]&&this.controls[ue]._registerOnCollectionChange(()=>{}),this.controls.splice(ue,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(j,F,ue={}){let Ot=this._adjustIndex(j);Ot<0&&(Ot=0),this.controls[Ot]&&this.controls[Ot]._registerOnCollectionChange(()=>{}),this.controls.splice(Ot,1),F&&(this.controls.splice(Ot,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(j,F={}){Ve(this,!1,j),j.forEach((ue,Ot)=>{Ze(this,!1,Ot),this.at(Ot).setValue(ue,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(j,F={}){null!=j&&(j.forEach((ue,Ot)=>{this.at(Ot)&&this.at(Ot).patchValue(ue,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(j=[],F={}){this._forEachChild((ue,Ot)=>{ue.reset(j[Ot],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(j=>j.getRawValue())}clear(j={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:j.emitEvent}))}_adjustIndex(j){return j<0?j+this.length:j}_syncPendingControls(){let j=this.controls.reduce((F,ue)=>!!ue._syncPendingControls()||F,!1);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_forEachChild(j){this.controls.forEach((F,ue)=>{j(F,ue)})}_updateValue(){this.value=this.controls.filter(j=>j.enabled||this.disabled).map(j=>j.value)}_anyControls(j){return this.controls.some(F=>F.enabled&&j(F))}_setUpControls(){this._forEachChild(j=>this._registerControl(j))}_allControlsDisabled(){for(const j of this.controls)if(j.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(j){j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)}_find(j){var F;return null!==(F=this.at(j))&&void 0!==F?F:null}}function Ie(z){return!!z&&(void 0!==z.asyncValidators||void 0!==z.validators||void 0!==z.updateOn)}let Qt=(()=>{class z{constructor(){this.useNonNullable=!1}get nonNullable(){const F=new z;return F.useNonNullable=!0,F}group(F,ue=null){const Ot=this._reduceControls(F);let Nn={};return Ie(ue)?Nn=ue:null!==ue&&(Nn.validators=ue.validator,Nn.asyncValidators=ue.asyncValidator),new ve(Ot,Nn)}record(F,ue=null){const Ot=this._reduceControls(F);return new Oe(Ot,ue)}control(F,ue,Ot){let Nn={};return this.useNonNullable?(Ie(ue)?Nn=ue:(Nn.validators=ue,Nn.asyncValidators=Ot),new de(F,{...Nn,nonNullable:!0})):new de(F,ue,Ot)}array(F,ue,Ot){const Nn=F.map(hi=>this._createControl(hi));return new Q(Nn,ue,Ot)}_reduceControls(F){const ue={};return Object.keys(F).forEach(Ot=>{ue[Ot]=this._createControl(F[Ot])}),ue}_createControl(F){return F instanceof de||F instanceof fe?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275prov=y.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})(),Pn=(()=>{class z{static withConfig(F){var ue;return{ngModule:z,providers:[{provide:we,useValue:null!==(ue=F.callSetDisabledState)&&void 0!==ue?ue:rt}]}}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=y.oAB({type:z}),z.\u0275inj=y.cJS({imports:[C]}),z})(),Yi=(()=>{class z{static withConfig(F){var ue,Ot;return{ngModule:z,providers:[{provide:Ei,useValue:null!==(ue=F.warnOnNgModelWithFormControl)&&void 0!==ue?ue:"always"},{provide:we,useValue:null!==(Ot=F.callSetDisabledState)&&void 0!==Ot?Ot:rt}]}}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275mod=y.oAB({type:z}),z.\u0275inj=y.cJS({imports:[C]}),z})()},1481:(on,ot,k)=>{"use strict";k.d(ot,{Cg:()=>Rt,Dx:()=>fr,H7:()=>fe,b2:()=>ci,se:()=>Le});var y=k(6895),g=k(4650);class Y extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ae extends Y{static makeCurrent(){(0,y.HT)(new ae)}onAndCancel($e,we,rt){return $e.addEventListener(we,rt,!1),()=>{$e.removeEventListener(we,rt,!1)}}dispatchEvent($e,we){$e.dispatchEvent(we)}remove($e){$e.parentNode&&$e.parentNode.removeChild($e)}createElement($e,we){return(we=we||this.getDefaultDocument()).createElement($e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($e){return $e.nodeType===Node.ELEMENT_NODE}isShadowRoot($e){return $e instanceof DocumentFragment}getGlobalEventTarget($e,we){return"window"===we?window:"document"===we?$e:"body"===we?$e.body:null}getBaseHref($e){const we=function Pe(){return xe=xe||document.querySelector("base"),xe?xe.getAttribute("href"):null}();return null==we?null:function me(Oe){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",Oe);const $e=Ce.pathname;return"/"===$e.charAt(0)?$e:`/${$e}`}(we)}resetBaseElement(){xe=null}getUserAgent(){return window.navigator.userAgent}getCookie($e){return(0,y.Mx)(document.cookie,$e)}}let Ce,xe=null;const Ue=new g.OlP("TRANSITION_ID"),pe=[{provide:g.ip1,useFactory:function Te(Oe,$e,we){return()=>{we.get(g.CZH).donePromise.then(()=>{const rt=(0,y.q)(),Mt=$e.querySelectorAll(`style[ng-transition="${Oe}"]`);for(let Yt=0;Yt<Mt.length;Yt++)rt.remove(Mt[Yt])})}},deps:[Ue,y.K0,g.zs3],multi:!0}];let Fe=(()=>{class Oe{build(){return new XMLHttpRequest}}return Oe.\u0275fac=function(we){return new(we||Oe)},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const je=new g.OlP("EventManagerPlugins");let Be=(()=>{class Oe{constructor(we,rt){this._zone=rt,this._eventNameToPlugin=new Map,we.forEach(Mt=>{Mt.manager=this}),this._plugins=we.slice().reverse()}addEventListener(we,rt,Mt){return this._findPluginFor(rt).addEventListener(we,rt,Mt)}addGlobalEventListener(we,rt,Mt){return this._findPluginFor(rt).addGlobalEventListener(we,rt,Mt)}getZone(){return this._zone}_findPluginFor(we){const rt=this._eventNameToPlugin.get(we);if(rt)return rt;const Mt=this._plugins;for(let Yt=0;Yt<Mt.length;Yt++){const In=Mt[Yt];if(In.supports(we))return this._eventNameToPlugin.set(we,In),In}throw new Error(`No event manager plugin found for event ${we}`)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(je),g.LFG(g.R0b))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class Xe{constructor($e){this._doc=$e}addGlobalEventListener($e,we,rt){const Mt=(0,y.q)().getGlobalEventTarget(this._doc,$e);if(!Mt)throw new Error(`Unsupported event target ${Mt} for event ${we}`);return this.addEventListener(Mt,we,rt)}}let Se=(()=>{class Oe{constructor(){this.usageCount=new Map}addStyles(we){for(const rt of we)1===this.changeUsageCount(rt,1)&&this.onStyleAdded(rt)}removeStyles(we){for(const rt of we)0===this.changeUsageCount(rt,-1)&&this.onStyleRemoved(rt)}onStyleRemoved(we){}onStyleAdded(we){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(we,rt){var Mt;const Yt=this.usageCount;let In=null!==(Mt=Yt.get(we))&&void 0!==Mt?Mt:0;return In+=rt,In>0?Yt.set(we,In):Yt.delete(we),In}ngOnDestroy(){for(const we of this.getAllStyles())this.onStyleRemoved(we);this.usageCount.clear()}}return Oe.\u0275fac=function(we){return new(we||Oe)},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})(),_e=(()=>{class Oe extends Se{constructor(we){super(),this.doc=we,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(we){for(const rt of this.hostNodes)this.addStyleToHost(rt,we)}onStyleRemoved(we){const rt=this.styleRef,Mt=rt.get(we);null==Mt||Mt.forEach(Yt=>Yt.remove()),rt.delete(we)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(we){this.hostNodes.add(we);for(const rt of this.getAllStyles())this.addStyleToHost(we,rt)}removeHost(we){this.hostNodes.delete(we)}addStyleToHost(we,rt){const Mt=this.doc.createElement("style");Mt.textContent=rt,we.appendChild(Mt);const Yt=this.styleRef.get(rt);Yt?Yt.push(Mt):this.styleRef.set(rt,[Mt])}resetHostNodes(){const we=this.hostNodes;we.clear(),we.add(this.doc.head)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(y.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const oe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lt=/%COMP%/g,ne=new g.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function et(Oe,$e){return $e.flat(100).map(we=>we.replace(lt,Oe))}function vt(Oe){return $e=>{if("__ngUnwrap__"===$e)return Oe;!1===Oe($e)&&($e.preventDefault(),$e.returnValue=!1)}}let Le=(()=>{class Oe{constructor(we,rt,Mt,Yt){this.eventManager=we,this.sharedStylesHost=rt,this.appId=Mt,this.removeStylesOnCompDestory=Yt,this.rendererByCompId=new Map,this.defaultRenderer=new ut(we)}createRenderer(we,rt){if(!we||!rt)return this.defaultRenderer;const Mt=this.getOrCreateRenderer(we,rt);return Mt instanceof _t?Mt.applyToHost(we):Mt instanceof Ge&&Mt.applyStyles(),Mt}getOrCreateRenderer(we,rt){const Mt=this.rendererByCompId;let Yt=Mt.get(rt.id);if(!Yt){const In=this.eventManager,fn=this.sharedStylesHost,dr=this.removeStylesOnCompDestory;switch(rt.encapsulation){case g.ifc.Emulated:Yt=new _t(In,fn,rt,this.appId,dr);break;case g.ifc.ShadowDom:return new He(In,fn,we,rt);default:Yt=new Ge(In,fn,rt,dr)}Yt.onDestroy=()=>Mt.delete(rt.id),Mt.set(rt.id,Yt)}return Yt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(Be),g.LFG(_e),g.LFG(g.AFp),g.LFG(ne))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class ut{constructor($e){this.eventManager=$e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($e,we){return we?document.createElementNS(oe[we]||we,$e):document.createElement($e)}createComment($e){return document.createComment($e)}createText($e){return document.createTextNode($e)}appendChild($e,we){(We($e)?$e.content:$e).appendChild(we)}insertBefore($e,we,rt){$e&&(We($e)?$e.content:$e).insertBefore(we,rt)}removeChild($e,we){$e&&$e.removeChild(we)}selectRootElement($e,we){let rt="string"==typeof $e?document.querySelector($e):$e;if(!rt)throw new Error(`The selector "${$e}" did not match any elements`);return we||(rt.textContent=""),rt}parentNode($e){return $e.parentNode}nextSibling($e){return $e.nextSibling}setAttribute($e,we,rt,Mt){if(Mt){we=Mt+":"+we;const Yt=oe[Mt];Yt?$e.setAttributeNS(Yt,we,rt):$e.setAttribute(we,rt)}else $e.setAttribute(we,rt)}removeAttribute($e,we,rt){if(rt){const Mt=oe[rt];Mt?$e.removeAttributeNS(Mt,we):$e.removeAttribute(`${rt}:${we}`)}else $e.removeAttribute(we)}addClass($e,we){$e.classList.add(we)}removeClass($e,we){$e.classList.remove(we)}setStyle($e,we,rt,Mt){Mt&(g.JOm.DashCase|g.JOm.Important)?$e.style.setProperty(we,rt,Mt&g.JOm.Important?"important":""):$e.style[we]=rt}removeStyle($e,we,rt){rt&g.JOm.DashCase?$e.style.removeProperty(we):$e.style[we]=""}setProperty($e,we,rt){$e[we]=rt}setValue($e,we){$e.nodeValue=we}listen($e,we,rt){return"string"==typeof $e?this.eventManager.addGlobalEventListener($e,we,vt(rt)):this.eventManager.addEventListener($e,we,vt(rt))}}function We(Oe){return"TEMPLATE"===Oe.tagName&&void 0!==Oe.content}class He extends ut{constructor($e,we,rt,Mt){super($e),this.sharedStylesHost=we,this.hostEl=rt,this.shadowRoot=rt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Yt=et(Mt.id,Mt.styles);for(const In of Yt){const fn=document.createElement("style");fn.textContent=In,this.shadowRoot.appendChild(fn)}}nodeOrShadowRoot($e){return $e===this.hostEl?this.shadowRoot:$e}appendChild($e,we){return super.appendChild(this.nodeOrShadowRoot($e),we)}insertBefore($e,we,rt){return super.insertBefore(this.nodeOrShadowRoot($e),we,rt)}removeChild($e,we){return super.removeChild(this.nodeOrShadowRoot($e),we)}parentNode($e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ge extends ut{constructor($e,we,rt,Mt,Yt=rt.id){super($e),this.sharedStylesHost=we,this.removeStylesOnCompDestory=Mt,this.rendererUsageCount=0,this.styles=et(Yt,rt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var $e;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===($e=this.onDestroy)||void 0===$e||$e.call(this))}}class _t extends Ge{constructor($e,we,rt,Mt,Yt){const In=Mt+"-"+rt.id;super($e,we,rt,Yt,In),this.contentAttr=function nt(Oe){return"_ngcontent-%COMP%".replace(lt,Oe)}(In),this.hostAttr=function Me(Oe){return"_nghost-%COMP%".replace(lt,Oe)}(In)}applyToHost($e){this.applyStyles(),this.setAttribute($e,this.hostAttr,"")}createElement($e,we){const rt=super.createElement($e,we);return super.setAttribute(rt,this.contentAttr,""),rt}}let mt=(()=>{class Oe extends Xe{constructor(we){super(we)}supports(we){return!0}addEventListener(we,rt,Mt){return we.addEventListener(rt,Mt,!1),()=>this.removeEventListener(we,rt,Mt)}removeEventListener(we,rt,Mt){return we.removeEventListener(rt,Mt)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(y.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const Ct=["alt","control","meta","shift"],jt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_n={alt:Oe=>Oe.altKey,control:Oe=>Oe.ctrlKey,meta:Oe=>Oe.metaKey,shift:Oe=>Oe.shiftKey};let Tt=(()=>{class Oe extends Xe{constructor(we){super(we)}supports(we){return null!=Oe.parseEventName(we)}addEventListener(we,rt,Mt){const Yt=Oe.parseEventName(rt),In=Oe.eventCallback(Yt.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(we,Yt.domEventName,In))}static parseEventName(we){const rt=we.toLowerCase().split("."),Mt=rt.shift();if(0===rt.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const Yt=Oe._normalizeKey(rt.pop());let In="",fn=rt.indexOf("code");if(fn>-1&&(rt.splice(fn,1),In="code."),Ct.forEach(Jr=>{const ki=rt.indexOf(Jr);ki>-1&&(rt.splice(ki,1),In+=Jr+".")}),In+=Yt,0!=rt.length||0===Yt.length)return null;const dr={};return dr.domEventName=Mt,dr.fullKey=In,dr}static matchEventFullKeyCode(we,rt){let Mt=jt[we.key]||we.key,Yt="";return rt.indexOf("code.")>-1&&(Mt=we.code,Yt="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),Ct.forEach(In=>{In!==Mt&&(0,_n[In])(we)&&(Yt+=In+".")}),Yt+=Mt,Yt===rt)}static eventCallback(we,rt,Mt){return Yt=>{Oe.matchEventFullKeyCode(Yt,we)&&Mt.runGuarded(()=>rt(Yt))}}static _normalizeKey(we){return"esc"===we?"escape":we}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(y.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();function Rt(Oe,$e){return(0,g.iPO)({rootComponent:Oe,...Cn($e)})}function Cn(Oe){var $e;return{appProviders:[...or,...null!==($e=null==Oe?void 0:Oe.providers)&&void 0!==$e?$e:[]],platformProviders:Ut}}const Ut=[{provide:g.Lbi,useValue:y.bD},{provide:g.g9A,useValue:function gn(){ae.makeCurrent()},multi:!0},{provide:y.K0,useFactory:function vn(){return(0,g.RDi)(document),document},deps:[]}],Hn=new g.OlP(""),un=[{provide:g.rWj,useClass:class De{addToWindow($e){g.dqk.getAngularTestability=(rt,Mt=!0)=>{const Yt=$e.findTestabilityInTree(rt,Mt);if(null==Yt)throw new Error("Could not find testability for element.");return Yt},g.dqk.getAllAngularTestabilities=()=>$e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>$e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(rt=>{const Mt=g.dqk.getAllAngularTestabilities();let Yt=Mt.length,In=!1;const fn=function(dr){In=In||dr,Yt--,0==Yt&&rt(In)};Mt.forEach(function(dr){dr.whenStable(fn)})})}findTestabilityInTree($e,we,rt){if(null==we)return null;const Mt=$e.getTestability(we);return null!=Mt?Mt:rt?(0,y.q)().isShadowRoot(we)?this.findTestabilityInTree($e,we.host,!0):this.findTestabilityInTree($e,we.parentElement,!0):null}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],or=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function nn(){return new g.qLn},deps:[]},{provide:je,useClass:mt,multi:!0,deps:[y.K0,g.R0b,g.Lbi]},{provide:je,useClass:Tt,multi:!0,deps:[y.K0]},{provide:Le,useClass:Le,deps:[Be,_e,g.AFp,ne]},{provide:g.FYo,useExisting:Le},{provide:Se,useExisting:_e},{provide:_e,useClass:_e,deps:[y.K0]},{provide:Be,useClass:Be,deps:[je,g.R0b]},{provide:y.JF,useClass:Fe,deps:[]},[]];let ci=(()=>{class Oe{constructor(we){}static withServerTransition(we){return{ngModule:Oe,providers:[{provide:g.AFp,useValue:we.appId},{provide:Ue,useExisting:g.AFp},pe]}}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(Hn,12))},Oe.\u0275mod=g.oAB({type:Oe}),Oe.\u0275inj=g.cJS({providers:[...or,...un],imports:[y.ez,g.hGG]}),Oe})(),fr=(()=>{class Oe{constructor(we){this._doc=we}getTitle(){return this._doc.title}setTitle(we){this._doc.title=we||""}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(y.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:function(we){let rt=null;return rt=we?new we:function Ar(){return new fr((0,g.LFG)(y.K0))}(),rt},providedIn:"root"}),Oe})();typeof window<"u"&&window;let fe=(()=>{class Oe{}return Oe.\u0275fac=function(we){return new(we||Oe)},Oe.\u0275prov=g.Yz7({token:Oe,factory:function(we){let rt=null;return rt=we?new(we||Oe):g.LFG(he),rt},providedIn:"root"}),Oe})(),he=(()=>{class Oe extends fe{constructor(we){super(),this._doc=we}sanitize(we,rt){if(null==rt)return null;switch(we){case g.q3G.NONE:return rt;case g.q3G.HTML:return(0,g.qzn)(rt,"HTML")?(0,g.z3N)(rt):(0,g.EiD)(this._doc,String(rt)).toString();case g.q3G.STYLE:return(0,g.qzn)(rt,"Style")?(0,g.z3N)(rt):rt;case g.q3G.SCRIPT:if((0,g.qzn)(rt,"Script"))return(0,g.z3N)(rt);throw new Error("unsafe value used in a script context");case g.q3G.URL:return(0,g.qzn)(rt,"URL")?(0,g.z3N)(rt):(0,g.mCW)(String(rt));case g.q3G.RESOURCE_URL:if((0,g.qzn)(rt,"ResourceURL"))return(0,g.z3N)(rt);throw new Error(`unsafe value used in a resource URL context (see ${g.JZr})`);default:throw new Error(`Unexpected SecurityContext ${we} (see ${g.JZr})`)}}bypassSecurityTrustHtml(we){return(0,g.JVY)(we)}bypassSecurityTrustStyle(we){return(0,g.L6k)(we)}bypassSecurityTrustScript(we){return(0,g.eBb)(we)}bypassSecurityTrustUrl(we){return(0,g.LAX)(we)}bypassSecurityTrustResourceUrl(we){return(0,g.pB0)(we)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(y.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:function(we){let rt=null;return rt=we?new we:function ve(Oe){return new he(Oe.get(y.K0))}(g.LFG(g.zs3)),rt},providedIn:"root"}),Oe})()},6159:(on,ot,k)=>{"use strict";k.d(ot,{gz:()=>Yr,y6:()=>zi,OD:()=>Xr,eC:()=>Ct,wN:()=>Di,F0:()=>hr,rH:()=>ca,Od:()=>Ti,Bz:()=>Fo,Hx:()=>Vr,bU:()=>kl});var y=k(4650),g=k(8996),Y=k(9646),ae=k(1135),xe=k(6805),Pe=k(9841),Ce=k(7272),me=k(9770),Ue=k(9635),Te=k(2843),pe=k(9751),De=k(515),Fe=k(4033),je=k(7579),Be=k(6895),Xe=k(4004),Se=k(3900),_e=k(5698),oe=k(8675),lt=k(9300),ze=k(5577),Ae=k(590),q=k(4351),pt=k(8505),Ke=k(262),ne=k(5026),nt=k(4482),Me=k(5403);function et(S){return S<=0?()=>De.E:(0,nt.e)((R,b)=>{let N=[];R.subscribe((0,Me.x)(b,H=>{N.push(H),S<N.length&&N.shift()},()=>{for(const H of N)b.next(H);b.complete()},void 0,()=>{N=null}))})}var vt=k(8068),Le=k(6590),ut=k(4671);function bt(S,R){const b=arguments.length>=2;return N=>N.pipe(S?(0,lt.h)((H,re)=>S(H,re,N)):ut.y,et(1),b?(0,Le.d)(R):(0,vt.T)(()=>new xe.K))}var We=k(9718),He=k(8746),Ge=k(8343),_t=k(8189),mt=k(1481);const Ct="primary",jt=Symbol("RouteTitle");class _n{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b[0]:b}return null}getAll(R){if(this.has(R)){const b=this.params[R];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Tt(S){return new _n(S)}function ct(S,R,b){const N=b.path.split("/");if(N.length>S.length||"full"===b.pathMatch&&(R.hasChildren()||N.length<S.length))return null;const H={};for(let re=0;re<N.length;re++){const le=N[re],ht=S[re];if(le.startsWith(":"))H[le.substring(1)]=ht;else if(le!==ht.path)return null}return{consumed:S.slice(0,N.length),posParams:H}}function Jt(S,R){const b=S?Object.keys(S):void 0,N=R?Object.keys(R):void 0;if(!b||!N||b.length!=N.length)return!1;let H;for(let re=0;re<b.length;re++)if(H=b[re],!Cn(S[H],R[H]))return!1;return!0}function Cn(S,R){if(Array.isArray(S)&&Array.isArray(R)){if(S.length!==R.length)return!1;const b=[...S].sort(),N=[...R].sort();return b.every((H,re)=>N[re]===H)}return S===R}function Fn(S){return Array.prototype.concat.apply([],S)}function gn(S){return S.length>0?S[S.length-1]:null}function vn(S,R){for(const b in S)S.hasOwnProperty(b)&&R(S[b],b)}function Ut(S){return(0,y.CqO)(S)?S:(0,y.QGY)(S)?(0,g.D)(Promise.resolve(S)):(0,Y.of)(S)}const nr=!1,Hn={exact:function Ir(S,R,b){if(!cr(S.segments,R.segments)||!fr(S.segments,R.segments,b)||S.numberOfChildren!==R.numberOfChildren)return!1;for(const N in R.children)if(!S.children[N]||!Ir(S.children[N],R.children[N],b))return!1;return!0},subset:Gr},un={exact:function ci(S,R){return Jt(S,R)},subset:function Ni(S,R){return Object.keys(R).length<=Object.keys(S).length&&Object.keys(R).every(b=>Cn(S[b],R[b]))},ignored:()=>!0};function or(S,R,b){return Hn[b.paths](S.root,R.root,b.matrixParams)&&un[b.queryParams](S.queryParams,R.queryParams)&&!("exact"===b.fragment&&S.fragment!==R.fragment)}function Gr(S,R,b){return Ar(S,R,R.segments,b)}function Ar(S,R,b,N){if(S.segments.length>b.length){const H=S.segments.slice(0,b.length);return!(!cr(H,b)||R.hasChildren()||!fr(H,b,N))}if(S.segments.length===b.length){if(!cr(S.segments,b)||!fr(S.segments,b,N))return!1;for(const H in R.children)if(!S.children[H]||!Gr(S.children[H],R.children[H],N))return!1;return!0}{const H=b.slice(0,S.segments.length),re=b.slice(S.segments.length);return!!(cr(S.segments,H)&&fr(S.segments,H,N)&&S.children[Ct])&&Ar(S.children[Ct],R,re,N)}}function fr(S,R,b){return R.every((N,H)=>un[b](S[H].parameters,N.parameters))}class Rn{constructor(R=new rn([],{}),b={},N=null){this.root=R,this.queryParams=b,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tt(this.queryParams)),this._queryParamMap}toString(){return Er.serialize(this)}}class rn{constructor(R,b){this.segments=R,this.children=b,this.parent=null,vn(b,(N,H)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zr(this)}}class xr{constructor(R,b){this.path=R,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Tt(this.parameters)),this._parameterMap}toString(){return zn(this)}}function cr(S,R){return S.length===R.length&&S.every((b,N)=>b.path===R[N].path)}let Vr=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return new xi},providedIn:"root"}),S})();class xi{parse(R){const b=new Oe(R);return new Rn(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(R){const b=`/${er(R.root,!0)}`,N=function Pr(S){const R=Object.keys(S).map(b=>{const N=S[b];return Array.isArray(N)?N.map(H=>`${Xn(b)}=${Xn(H)}`).join("&"):`${Xn(b)}=${Xn(N)}`}).filter(b=>!!b);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${b}${N}${"string"==typeof R.fragment?`#${function mn(S){return encodeURI(S)}(R.fragment)}`:""}`}}const Er=new xi;function Zr(S){return S.segments.map(R=>zn(R)).join("/")}function er(S,R){if(!S.hasChildren())return Zr(S);if(R){const b=S.children[Ct]?er(S.children[Ct],!1):"",N=[];return vn(S.children,(H,re)=>{re!==Ct&&N.push(`${re}:${er(H,!1)}`)}),N.length>0?`${b}(${N.join("//")})`:b}{const b=function si(S,R){let b=[];return vn(S.children,(N,H)=>{H===Ct&&(b=b.concat(R(N,H)))}),vn(S.children,(N,H)=>{H!==Ct&&(b=b.concat(R(N,H)))}),b}(S,(N,H)=>H===Ct?[er(S.children[Ct],!1)]:[`${H}:${er(N,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Ct]?`${Zr(S)}/${b[0]}`:`${Zr(S)}/(${b.join("//")})`}}function bi(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xn(S){return bi(S).replace(/%3B/gi,";")}function Gt(S){return bi(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function En(S){return decodeURIComponent(S)}function An(S){return En(S.replace(/\+/g,"%20"))}function zn(S){return`${Gt(S.path)}${function ur(S){return Object.keys(S).map(R=>`;${Gt(R)}=${Gt(S[R])}`).join("")}(S.parameters)}`}const Ze=/^[^\/()?;=#]+/;function Ve(S){const R=S.match(Ze);return R?R[0]:""}const fe=/^[^=?&#]+/,he=/^[^&#]+/;class Oe{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(R.length>0||Object.keys(b).length>0)&&(N[Ct]=new rn(R,b)),N}parseSegment(){const R=Ve(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new y.vHH(4009,nr);return this.capture(R),new xr(En(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const b=Ve(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const H=Ve(this.remaining);H&&(N=H,this.capture(N))}R[En(b)]=En(N)}parseQueryParam(R){const b=function ve(S){const R=S.match(fe);return R?R[0]:""}(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const le=function dt(S){const R=S.match(he);return R?R[0]:""}(this.remaining);le&&(N=le,this.capture(N))}const H=An(b),re=An(N);if(R.hasOwnProperty(H)){let le=R[H];Array.isArray(le)||(le=[le],R[H]=le),le.push(re)}else R[H]=re}parseParens(R){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=Ve(this.remaining),H=this.remaining[N.length];if("/"!==H&&")"!==H&&";"!==H)throw new y.vHH(4010,nr);let re;N.indexOf(":")>-1?(re=N.slice(0,N.indexOf(":")),this.capture(re),this.capture(":")):R&&(re=Ct);const le=this.parseChildren();b[re]=1===Object.keys(le).length?le[Ct]:new rn([],le),this.consumeOptional("//")}return b}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new y.vHH(4011,nr)}}function $e(S){return S.segments.length>0?new rn([],{[Ct]:S}):S}function we(S){const R={};for(const N of Object.keys(S.children)){const re=we(S.children[N]);(re.segments.length>0||re.hasChildren())&&(R[N]=re)}return function rt(S){if(1===S.numberOfChildren&&S.children[Ct]){const R=S.children[Ct];return new rn(S.segments.concat(R.segments),R.children)}return S}(new rn(S.segments,R))}function Mt(S){return S instanceof Rn}const Yt=!1;function Jr(S,R,b,N,H){var re;if(0===b.length)return Vi(R.root,R.root,R.root,N,H);const le=function ws(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new is(!0,0,S);let R=0,b=!1;const N=S.reduce((H,re,le)=>{if("object"==typeof re&&null!=re){if(re.outlets){const ht={};return vn(re.outlets,(Dt,wn)=>{ht[wn]="string"==typeof Dt?Dt.split("/"):Dt}),[...H,{outlets:ht}]}if(re.segmentPath)return[...H,re.segmentPath]}return"string"!=typeof re?[...H,re]:0===le?(re.split("/").forEach((ht,Dt)=>{0==Dt&&"."===ht||(0==Dt&&""===ht?b=!0:".."===ht?R++:""!=ht&&H.push(ht))}),H):[...H,re]},[]);return new is(b,R,N)}(b);return le.toRoot()?Vi(R.root,R.root,new rn([],{}),N,H):function ht(wn){var Un;const Vn=function Qr(S,R,b,N){if(S.isAbsolute)return new pr(R.root,!0,0);if(-1===N)return new pr(b,b===R.root,0);return function rr(S,R,b){let N=S,H=R,re=b;for(;re>H;){if(re-=H,N=N.parent,!N)throw new y.vHH(4005,Yt&&"Invalid number of '../'");H=N.segments.length}return new pr(N,!1,H-re)}(b,N+(ki(S.commands[0])?0:1),S.numberOfDoubleDots)}(le,R,null===(Un=S.snapshot)||void 0===Un?void 0:Un._urlSegment,wn),ai=Vn.processChildren?oi(Vn.segmentGroup,Vn.index,le.commands):Vs(Vn.segmentGroup,Vn.index,le.commands);return Vi(R.root,Vn.segmentGroup,ai,N,H)}(null===(re=S.snapshot)||void 0===re?void 0:re._lastPathIndex)}function ki(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function rs(S){return"object"==typeof S&&null!=S&&S.outlets}function Vi(S,R,b,N,H){let le,re={};N&&vn(N,(Dt,wn)=>{re[wn]=Array.isArray(Dt)?Dt.map(Un=>`${Un}`):`${Dt}`}),le=S===R?b:Hi(S,R,b);const ht=$e(we(le));return new Rn(ht,re,H)}function Hi(S,R,b){const N={};return vn(S.children,(H,re)=>{N[re]=H===R?b:Hi(H,R,b)}),new rn(S.segments,N)}class is{constructor(R,b,N){if(this.isAbsolute=R,this.numberOfDoubleDots=b,this.commands=N,R&&N.length>0&&ki(N[0]))throw new y.vHH(4003,Yt&&"Root segment cannot have matrix parameters");const H=N.find(rs);if(H&&H!==gn(N))throw new y.vHH(4004,Yt&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pr{constructor(R,b,N){this.segmentGroup=R,this.processChildren=b,this.index=N}}function Vs(S,R,b){if(S||(S=new rn([],{})),0===S.segments.length&&S.hasChildren())return oi(S,R,b);const N=function Fi(S,R,b){let N=0,H=R;const re={match:!1,pathIndex:0,commandIndex:0};for(;H<S.segments.length;){if(N>=b.length)return re;const le=S.segments[H],ht=b[N];if(rs(ht))break;const Dt=`${ht}`,wn=N<b.length-1?b[N+1]:null;if(H>0&&void 0===Dt)break;if(Dt&&wn&&"object"==typeof wn&&void 0===wn.outlets){if(!gr(Dt,wn,le))return re;N+=2}else{if(!gr(Dt,{},le))return re;N++}H++}return{match:!0,pathIndex:H,commandIndex:N}}(S,R,b),H=b.slice(N.commandIndex);if(N.match&&N.pathIndex<S.segments.length){const re=new rn(S.segments.slice(0,N.pathIndex),{});return re.children[Ct]=new rn(S.segments.slice(N.pathIndex),S.children),oi(re,0,H)}return N.match&&0===H.length?new rn(S.segments,{}):N.match&&!S.hasChildren()?gi(S,R,b):N.match?oi(S,0,H):gi(S,R,b)}function oi(S,R,b){if(0===b.length)return new rn(S.segments,{});{const N=function Jn(S){return rs(S[0])?S[0].outlets:{[Ct]:S}}(b),H={};if(!N[Ct]&&S.children[Ct]&&1===S.numberOfChildren&&0===S.children[Ct].segments.length){const re=oi(S.children[Ct],R,b);return new rn(S.segments,re.children)}return vn(N,(re,le)=>{"string"==typeof re&&(re=[re]),null!==re&&(H[le]=Vs(S.children[le],R,re))}),vn(S.children,(re,le)=>{void 0===N[le]&&(H[le]=re)}),new rn(S.segments,H)}}function gi(S,R,b){const N=S.segments.slice(0,R);let H=0;for(;H<b.length;){const re=b[H];if(rs(re)){const Dt=bn(re.outlets);return new rn(N,Dt)}if(0===H&&ki(b[0])){N.push(new xr(S.segments[R].path,ar(b[0]))),H++;continue}const le=rs(re)?re.outlets[Ct]:`${re}`,ht=H<b.length-1?b[H+1]:null;le&&ht&&ki(ht)?(N.push(new xr(le,ar(ht))),H+=2):(N.push(new xr(le,{})),H++)}return new rn(N,{})}function bn(S){const R={};return vn(S,(b,N)=>{"string"==typeof b&&(b=[b]),null!==b&&(R[N]=gi(new rn([],{}),0,b))}),R}function ar(S){const R={};return vn(S,(b,N)=>R[N]=`${b}`),R}function gr(S,R,b){return S==b.path&&Jt(R,b.parameters)}const ui="imperative";class ei{constructor(R,b){this.id=R,this.url=b}}class Xr extends ei{constructor(R,b,N="imperative",H=null){super(R,b),this.type=0,this.navigationTrigger=N,this.restoredState=H}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ci extends ei{constructor(R,b,N){super(R,b),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Br extends ei{constructor(R,b,N,H){super(R,b),this.reason=N,this.code=H,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class de extends ei{constructor(R,b,N,H){super(R,b),this.reason=N,this.code=H,this.type=16}}class Re extends ei{constructor(R,b,N,H){super(R,b),this.error=N,this.target=H,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ye extends ei{constructor(R,b,N,H){super(R,b),this.urlAfterRedirects=N,this.state=H,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be extends ei{constructor(R,b,N,H){super(R,b),this.urlAfterRedirects=N,this.state=H,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt extends ei{constructor(R,b,N,H,re){super(R,b),this.urlAfterRedirects=N,this.state=H,this.shouldActivate=re,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class st extends ei{constructor(R,b,N,H){super(R,b),this.urlAfterRedirects=N,this.state=H,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kt extends ei{constructor(R,b,N,H){super(R,b),this.urlAfterRedirects=N,this.state=H,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $t{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wt{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zt{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pn{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qn{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qn{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Je{constructor(R,b,N){this.routerEvent=R,this.position=b,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Vt=(()=>{class S{createUrlTree(b,N,H,re,le,ht){return Jr(b||N.root,H,re,le,ht)}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac}),S})(),Bn=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:function(R){return Vt.\u0275fac(R)},providedIn:"root"}),S})();class mr{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const b=this.pathFromRoot(R);return b.length>1?b[b.length-2]:null}children(R){const b=ir(R,this._root);return b?b.children.map(N=>N.value):[]}firstChild(R){const b=ir(R,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(R){const b=kr(R,this._root);return b.length<2?[]:b[b.length-2].children.map(H=>H.value).filter(H=>H!==R)}pathFromRoot(R){return kr(R,this._root).map(b=>b.value)}}function ir(S,R){if(S===R.value)return R;for(const b of R.children){const N=ir(S,b);if(N)return N}return null}function kr(S,R){if(S===R.value)return[R];for(const b of R.children){const N=kr(S,b);if(N.length)return N.unshift(R),N}return[]}class $r{constructor(R,b){this.value=R,this.children=b}toString(){return`TreeNode(${this.value})`}}function Ei(S){const R={};return S&&S.children.forEach(b=>R[b.value.outlet]=b),R}class us extends mr{constructor(R,b){super(R),this.snapshot=b,Ko(this,R)}toString(){return this.snapshot.toString()}}function js(S,R){const b=function Ys(S,R){const le=new ss([],{},{},"",{},Ct,R,null,S.root,-1,{});return new Wo("",new $r(le,[]))}(S,R),N=new ae.X([new xr("",{})]),H=new ae.X({}),re=new ae.X({}),le=new ae.X({}),ht=new ae.X(""),Dt=new Yr(N,H,le,ht,re,Ct,R,b.root);return Dt.snapshot=b.root,new us(new $r(Dt,[]),b)}class Yr{constructor(R,b,N,H,re,le,ht,Dt){var wn,Un;this.url=R,this.params=b,this.queryParams=N,this.fragment=H,this.data=re,this.outlet=le,this.component=ht,this.title=null!==(wn=null===(Un=this.data)||void 0===Un?void 0:Un.pipe((0,Xe.U)(Vn=>Vn[jt])))&&void 0!==wn?wn:(0,Y.of)(void 0),this._futureSnapshot=Dt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(R=>Tt(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(R=>Tt(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zo(S,R="emptyOnly"){const b=S.pathFromRoot;let N=0;if("always"!==R)for(N=b.length-1;N>=1;){const H=b[N],re=b[N-1];if(H.routeConfig&&""===H.routeConfig.path)N--;else{if(re.component)break;N--}}return function Go(S){return S.reduce((R,b)=>{var N;return{params:{...R.params,...b.params},data:{...R.data,...b.data},resolve:{...b.data,...R.resolve,...null===(N=b.routeConfig)||void 0===N?void 0:N.data,...b._resolvedData}}},{params:{},data:{},resolve:{}})}(b.slice(N))}class ss{get title(){var R;return null===(R=this.data)||void 0===R?void 0:R[jt]}constructor(R,b,N,H,re,le,ht,Dt,wn,Un,Vn){this.url=R,this.params=b,this.queryParams=N,this.fragment=H,this.data=re,this.outlet=le,this.component=ht,this.routeConfig=Dt,this._urlSegment=wn,this._lastPathIndex=Un,this._resolve=Vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wo extends mr{constructor(R,b){super(b),this.url=R,Ko(this,b)}toString(){return yo(this._root)}}function Ko(S,R){R.value._routerState=S,R.children.forEach(b=>Ko(S,b))}function yo(S){const R=S.children.length>0?` { ${S.children.map(yo).join(", ")} } `:"";return`${S.value}${R}`}function no(S){if(S.snapshot){const R=S.snapshot,b=S._futureSnapshot;S.snapshot=b,Jt(R.queryParams,b.queryParams)||S.queryParams.next(b.queryParams),R.fragment!==b.fragment&&S.fragment.next(b.fragment),Jt(R.params,b.params)||S.params.next(b.params),function Rt(S,R){if(S.length!==R.length)return!1;for(let b=0;b<S.length;++b)if(!Jt(S[b],R[b]))return!1;return!0}(R.url,b.url)||S.url.next(b.url),Jt(R.data,b.data)||S.data.next(b.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function ia(S,R){const b=Jt(S.params,R.params)&&function Lr(S,R){return cr(S,R)&&S.every((b,N)=>Jt(b.parameters,R[N].parameters))}(S.url,R.url);return b&&!(!S.parent!=!R.parent)&&(!S.parent||ia(S.parent,R.parent))}function Hs(S,R,b){if(b&&S.shouldReuseRoute(R.value,b.value.snapshot)){const N=b.value;N._futureSnapshot=R.value;const H=function sa(S,R,b){return R.children.map(N=>{for(const H of b.children)if(S.shouldReuseRoute(N.value,H.value.snapshot))return Hs(S,N,H);return Hs(S,N)})}(S,R,b);return new $r(N,H)}{if(S.shouldAttach(R.value)){const re=S.retrieve(R.value);if(null!==re){const le=re.route;return le.value._futureSnapshot=R.value,le.children=R.children.map(ht=>Hs(S,ht)),le}}const N=function Zs(S){return new Yr(new ae.X(S.url),new ae.X(S.params),new ae.X(S.queryParams),new ae.X(S.fragment),new ae.X(S.data),S.outlet,S.component,S)}(R.value),H=R.children.map(re=>Hs(S,re));return new $r(N,H)}}const ds="ngNavigationCancelingError";function _o(S,R){const{redirectTo:b,navigationBehaviorOptions:N}=Mt(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,H=ga(!1,0,R);return H.url=b,H.navigationBehaviorOptions=N,H}function ga(S,R,b){const N=new Error("NavigationCancelingError: "+(S||""));return N[ds]=!0,N.cancellationCode=R,b&&(N.url=b),N}function vo(S){return xs(S)&&Mt(S.url)}function xs(S){return S&&S[ds]}class Ss{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zi,this.attachRef=null}}let zi=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(b,N){const H=this.getOrCreateContext(b);H.outlet=N,this.contexts.set(b,H)}onChildOutletDestroyed(b){const N=this.getContext(b);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let N=this.getContext(b);return N||(N=new Ss,this.contexts.set(b,N)),N}getContext(b){return this.contexts.get(b)||null}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ps=!1;let zs=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ct,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(zi),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb)}ngOnChanges(b){if(b.name){const{firstChange:N,previousValue:H}=b.name;if(N)return;this.isTrackedInParentContexts(H)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(H)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){var N;return(null===(N=this.parentContexts.getContext(b))||void 0===N?void 0:N.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);null!=b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,Ps);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,Ps);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,Ps);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,N){this.activated=b,this._activatedRoute=N,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,N){if(this.isActivated)throw new y.vHH(4013,Ps);this._activatedRoute=b;const H=this.location,le=b.snapshot.component,ht=this.parentContexts.getOrCreateContext(this.name).children,Dt=new di(b,ht,H.injector);if(N&&function Os(S){return!!S.resolveComponentFactory}(N)){const wn=N.resolveComponentFactory(le);this.activated=H.createComponent(wn,H.length,Dt)}else this.activated=H.createComponent(le,{index:H.length,injector:Dt,environmentInjector:null!=N?N:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275dir=y.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),S})();class di{constructor(R,b,N){this.route=R,this.childContexts=b,this.parent=N}get(R,b){return R===Yr?this.route:R===zi?this.childContexts:this.parent.get(R,b)}}let io=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275cmp=y.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(b,N){1&b&&y._UZ(0,"router-outlet")},dependencies:[zs],encapsulation:2}),S})();function so(S,R){var b;return S.providers&&!S._injector&&(S._injector=(0,y.MMx)(S.providers,R,`Route: ${S.path}`)),null!==(b=S._injector)&&void 0!==b?b:R}function qi(S){const R=S.children&&S.children.map(qi),b=R?{...S,children:R}:{...S};return!b.component&&!b.loadComponent&&(R||b.loadChildren)&&b.outlet&&b.outlet!==Ct&&(b.component=io),b}function ms(S){return S.outlet||Ct}function Pi(S,R){const b=S.filter(N=>ms(N)===R);return b.push(...S.filter(N=>ms(N)!==R)),b}function ys(S){var R;if(!S)return null;if(null!==(R=S.routeConfig)&&void 0!==R&&R._injector)return S.routeConfig._injector;for(let b=S.parent;b;b=b.parent){const N=b.routeConfig;if(null!=N&&N._loadedInjector)return N._loadedInjector;if(null!=N&&N._injector)return N._injector}return null}class hs{constructor(R,b,N,H){this.routeReuseStrategy=R,this.futureState=b,this.currState=N,this.forwardEvent=H}activate(R){const b=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,N,R),no(this.futureState.root),this.activateChildRoutes(b,N,R)}deactivateChildRoutes(R,b,N){const H=Ei(b);R.children.forEach(re=>{const le=re.value.outlet;this.deactivateRoutes(re,H[le],N),delete H[le]}),vn(H,(re,le)=>{this.deactivateRouteAndItsChildren(re,N)})}deactivateRoutes(R,b,N){const H=R.value,re=b?b.value:null;if(H===re)if(H.component){const le=N.getContext(H.outlet);le&&this.deactivateChildRoutes(R,b,le.children)}else this.deactivateChildRoutes(R,b,N);else re&&this.deactivateRouteAndItsChildren(b,N)}deactivateRouteAndItsChildren(R,b){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,b):this.deactivateRouteAndOutlet(R,b)}detachAndStoreRouteSubtree(R,b){const N=b.getContext(R.value.outlet),H=N&&R.value.component?N.children:b,re=Ei(R);for(const le of Object.keys(re))this.deactivateRouteAndItsChildren(re[le],H);if(N&&N.outlet){const le=N.outlet.detach(),ht=N.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:le,route:R,contexts:ht})}}deactivateRouteAndOutlet(R,b){const N=b.getContext(R.value.outlet),H=N&&R.value.component?N.children:b,re=Ei(R);for(const le of Object.keys(re))this.deactivateRouteAndItsChildren(re[le],H);N&&(N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated()),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(R,b,N){const H=Ei(b);R.children.forEach(re=>{this.activateRoutes(re,H[re.value.outlet],N),this.forwardEvent(new Qn(re.value.snapshot))}),R.children.length&&this.forwardEvent(new pn(R.value.snapshot))}activateRoutes(R,b,N){const H=R.value,re=b?b.value:null;if(no(H),H===re)if(H.component){const ht=N.getOrCreateContext(H.outlet);this.activateChildRoutes(R,b,ht.children)}else this.activateChildRoutes(R,b,N);else if(H.component){const ht=N.getOrCreateContext(H.outlet);if(this.routeReuseStrategy.shouldAttach(H.snapshot)){const Dt=this.routeReuseStrategy.retrieve(H.snapshot);this.routeReuseStrategy.store(H.snapshot,null),ht.children.onOutletReAttached(Dt.contexts),ht.attachRef=Dt.componentRef,ht.route=Dt.route.value,ht.outlet&&ht.outlet.attach(Dt.componentRef,Dt.route.value),no(Dt.route.value),this.activateChildRoutes(R,null,ht.children)}else{var le;const Dt=ys(H.snapshot),wn=null!==(le=null==Dt?void 0:Dt.get(y._Vd))&&void 0!==le?le:null;ht.attachRef=null,ht.route=H,ht.resolver=wn,ht.injector=Dt,ht.outlet&&ht.outlet.activateWith(H,ht.injector),this.activateChildRoutes(R,null,ht.children)}}else this.activateChildRoutes(R,null,N)}}class bo{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class C{constructor(R,b){this.component=R,this.route=b}}function Q(S,R,b){const N=S._root;return Ie(N,R?R._root:null,b,[N.value])}function K(S,R){const b=Symbol(),N=R.get(S,b);return N===b?"function"!=typeof S||(0,y.Z0I)(S)?R.get(S):S:N}function Ie(S,R,b,N,H={canDeactivateChecks:[],canActivateChecks:[]}){const re=Ei(R);return S.children.forEach(le=>{(function Qt(S,R,b,N,H={canDeactivateChecks:[],canActivateChecks:[]}){const re=S.value,le=R?R.value:null,ht=b?b.getContext(S.value.outlet):null;if(le&&re.routeConfig===le.routeConfig){const Dt=function $n(S,R,b){if("function"==typeof b)return b(S,R);switch(b){case"pathParamsChange":return!cr(S.url,R.url);case"pathParamsOrQueryParamsChange":return!cr(S.url,R.url)||!Jt(S.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ia(S,R)||!Jt(S.queryParams,R.queryParams);default:return!ia(S,R)}}(le,re,re.routeConfig.runGuardsAndResolvers);Dt?H.canActivateChecks.push(new bo(N)):(re.data=le.data,re._resolvedData=le._resolvedData),Ie(S,R,re.component?ht?ht.children:null:b,N,H),Dt&&ht&&ht.outlet&&ht.outlet.isActivated&&H.canDeactivateChecks.push(new C(ht.outlet.component,le))}else le&&Gn(R,ht,H),H.canActivateChecks.push(new bo(N)),Ie(S,null,re.component?ht?ht.children:null:b,N,H)})(le,re[le.value.outlet],b,N.concat([le.value]),H),delete re[le.value.outlet]}),vn(re,(le,ht)=>Gn(le,b.getContext(ht),H)),H}function Gn(S,R,b){const N=Ei(S),H=S.value;vn(N,(re,le)=>{Gn(re,H.component?R?R.children.getContext(le):null:R,b)}),b.canDeactivateChecks.push(new C(H.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,H))}function Dr(S){return"function"==typeof S}function hi(S){return S instanceof xe.K||"EmptyError"===(null==S?void 0:S.name)}const Ht=Symbol("INITIAL_VALUE");function Yn(){return(0,Se.w)(S=>(0,Pe.a)(S.map(R=>R.pipe((0,_e.q)(1),(0,oe.O)(Ht)))).pipe((0,Xe.U)(R=>{for(const b of R)if(!0!==b){if(b===Ht)return Ht;if(!1===b||b instanceof Rn)return b}return!0}),(0,lt.h)(R=>R!==Ht),(0,_e.q)(1)))}function uo(S){return(0,Ue.z)((0,pt.b)(R=>{if(Mt(R))throw _o(0,R)}),(0,Xe.U)(R=>!0===R))}const os={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ks(S,R,b,N,H){const re=Qs(S,R,b);return re.matched?function ol(S,R,b,N){const H=R.canMatch;if(!H||0===H.length)return(0,Y.of)(!0);const re=H.map(le=>{const ht=K(le,S);return Ut(function ue(S){return S&&Dr(S.canMatch)}(ht)?ht.canMatch(R,b):S.runInContext(()=>ht(R,b)))});return(0,Y.of)(re).pipe(Yn(),uo())}(N=so(R,N),R,b).pipe((0,Xe.U)(le=>!0===le?re:{...os})):(0,Y.of)(re)}function Qs(S,R,b){var N;if(""===R.path)return"full"===R.pathMatch&&(S.hasChildren()||b.length>0)?{...os}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const re=(R.matcher||ct)(b,S,R);if(!re)return{...os};const le={};vn(re.posParams,(Dt,wn)=>{le[wn]=Dt.path});const ht=re.consumed.length>0?{...le,...re.consumed[re.consumed.length-1].parameters}:le;return{matched:!0,consumedSegments:re.consumed,remainingSegments:b.slice(re.consumed.length),parameters:ht,positionalParamSegments:null!==(N=re.posParams)&&void 0!==N?N:{}}}function Co(S,R,b,N){if(b.length>0&&function Ra(S,R,b){return b.some(N=>va(S,R,N)&&ms(N)!==Ct)}(S,b,N)){const re=new rn(R,function la(S,R,b,N){const H={};H[Ct]=N,N._sourceSegment=S,N._segmentIndexShift=R.length;for(const re of b)if(""===re.path&&ms(re)!==Ct){const le=new rn([],{});le._sourceSegment=S,le._segmentIndexShift=R.length,H[ms(re)]=le}return H}(S,R,N,new rn(b,S.children)));return re._sourceSegment=S,re._segmentIndexShift=R.length,{segmentGroup:re,slicedSegments:[]}}if(0===b.length&&function al(S,R,b){return b.some(N=>va(S,R,N))}(S,b,N)){const re=new rn(S.segments,function aa(S,R,b,N,H){const re={};for(const le of N)if(va(S,b,le)&&!H[ms(le)]){const ht=new rn([],{});ht._sourceSegment=S,ht._segmentIndexShift=R.length,re[ms(le)]=ht}return{...H,...re}}(S,R,b,N,S.children));return re._sourceSegment=S,re._segmentIndexShift=R.length,{segmentGroup:re,slicedSegments:b}}const H=new rn(S.segments,S.children);return H._sourceSegment=S,H._segmentIndexShift=R.length,{segmentGroup:H,slicedSegments:b}}function va(S,R,b){return(!(S.hasChildren()||R.length>0)||"full"!==b.pathMatch)&&""===b.path}function Ga(S,R,b,N){return!!(ms(S)===N||N!==Ct&&va(R,b,S))&&("**"===S.path||Qs(R,S,b).matched)}function Do(S,R,b){return 0===R.length&&!S.children[b]}const ll=!1;class qo{constructor(R){this.segmentGroup=R||null}}class To{constructor(R){this.urlTree=R}}function So(S){return(0,Te._)(new qo(S))}function Ao(S){return(0,Te._)(new To(S))}class Ws{constructor(R,b,N,H,re){this.injector=R,this.configLoader=b,this.urlSerializer=N,this.urlTree=H,this.config=re,this.allowRedirects=!0}apply(){const R=Co(this.urlTree.root,[],[],this.config).segmentGroup,b=new rn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,b,Ct).pipe((0,Xe.U)(re=>this.createUrlTree(we(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ke.K)(re=>{if(re instanceof To)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof qo?this.noMatchError(re):re}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,Ct).pipe((0,Xe.U)(H=>this.createUrlTree(we(H),R.queryParams,R.fragment))).pipe((0,Ke.K)(H=>{throw H instanceof qo?this.noMatchError(H):H}))}noMatchError(R){return new y.vHH(4002,ll)}createUrlTree(R,b,N){const H=$e(R);return new Rn(H,b,N)}expandSegmentGroup(R,b,N,H){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(R,b,N).pipe((0,Xe.U)(re=>new rn([],re))):this.expandSegment(R,N,b,N.segments,H,!0)}expandChildren(R,b,N){const H=[];for(const re of Object.keys(N.children))"primary"===re?H.unshift(re):H.push(re);return(0,g.D)(H).pipe((0,q.b)(re=>{const le=N.children[re],ht=Pi(b,re);return this.expandSegmentGroup(R,ht,le,re).pipe((0,Xe.U)(Dt=>({segment:Dt,outlet:re})))}),(0,ne.R)((re,le)=>(re[le.outlet]=le.segment,re),{}),bt())}expandSegment(R,b,N,H,re,le){return(0,g.D)(N).pipe((0,q.b)(ht=>this.expandSegmentAgainstRoute(R,b,N,ht,H,re,le).pipe((0,Ke.K)(wn=>{if(wn instanceof qo)return(0,Y.of)(null);throw wn}))),(0,Ae.P)(ht=>!!ht),(0,Ke.K)((ht,Dt)=>{if(hi(ht))return Do(b,H,re)?(0,Y.of)(new rn([],{})):So(b);throw ht}))}expandSegmentAgainstRoute(R,b,N,H,re,le,ht){return Ga(H,b,re,le)?void 0===H.redirectTo?this.matchSegmentAgainstRoute(R,b,H,re,le):ht&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,b,N,H,re,le):So(b):So(b)}expandSegmentAgainstRouteUsingRedirect(R,b,N,H,re,le){return"**"===H.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,N,H,le):this.expandRegularSegmentAgainstRouteUsingRedirect(R,b,N,H,re,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,b,N,H){const re=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?Ao(re):this.lineralizeSegments(N,re).pipe((0,ze.z)(le=>{const ht=new rn(le,{});return this.expandSegment(R,ht,b,le,H,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,b,N,H,re,le){const{matched:ht,consumedSegments:Dt,remainingSegments:wn,positionalParamSegments:Un}=Qs(b,H,re);if(!ht)return So(b);const Vn=this.applyRedirectCommands(Dt,H.redirectTo,Un);return H.redirectTo.startsWith("/")?Ao(Vn):this.lineralizeSegments(H,Vn).pipe((0,ze.z)(ai=>this.expandSegment(R,b,N,ai.concat(wn),le,!1)))}matchSegmentAgainstRoute(R,b,N,H,re){return"**"===N.path?(R=so(N,R),N.loadChildren?(N._loadedRoutes?(0,Y.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(R,N)).pipe((0,Xe.U)(ht=>(N._loadedRoutes=ht.routes,N._loadedInjector=ht.injector,new rn(H,{})))):(0,Y.of)(new rn(H,{}))):ks(b,N,H,R).pipe((0,Se.w)(({matched:le,consumedSegments:ht,remainingSegments:Dt})=>{var wn;return le?(R=null!==(wn=N._injector)&&void 0!==wn?wn:R,this.getChildConfig(R,N,H).pipe((0,ze.z)(Vn=>{var ai;const jr=null!==(ai=Vn.injector)&&void 0!==ai?ai:R,Tr=Vn.routes,{segmentGroup:Zi,slicedSegments:Fs}=Co(b,ht,Dt,Tr),Zo=new rn(Zi.segments,Zi.children);if(0===Fs.length&&Zo.hasChildren())return this.expandChildren(jr,Tr,Zo).pipe((0,Xe.U)(fl=>new rn(ht,fl)));if(0===Tr.length&&0===Fs.length)return(0,Y.of)(new rn(ht,{}));const ps=ms(N)===re;return this.expandSegment(jr,Zo,Tr,Fs,ps?Ct:re,!0).pipe((0,Xe.U)(ho=>new rn(ht.concat(ho.segments),ho.children)))}))):So(b)}))}getChildConfig(R,b,N){return b.children?(0,Y.of)({routes:b.children,injector:R}):b.loadChildren?void 0!==b._loadedRoutes?(0,Y.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function za(S,R,b,N){const H=R.canLoad;if(void 0===H||0===H.length)return(0,Y.of)(!0);const re=H.map(le=>{const ht=K(le,S);return Ut(function Yi(S){return S&&Dr(S.canLoad)}(ht)?ht.canLoad(R,b):S.runInContext(()=>ht(R,b)))});return(0,Y.of)(re).pipe(Yn(),uo())}(R,b,N).pipe((0,ze.z)(H=>H?this.configLoader.loadChildren(R,b).pipe((0,pt.b)(re=>{b._loadedRoutes=re.routes,b._loadedInjector=re.injector})):function wc(S){return(0,Te._)(ga(ll,3))}())):(0,Y.of)({routes:[],injector:R})}lineralizeSegments(R,b){let N=[],H=b.root;for(;;){if(N=N.concat(H.segments),0===H.numberOfChildren)return(0,Y.of)(N);if(H.numberOfChildren>1||!H.children[Ct])return R.redirectTo,(0,Te._)(new y.vHH(4e3,ll));H=H.children[Ct]}}applyRedirectCommands(R,b,N){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),R,N)}applyRedirectCreateUrlTree(R,b,N,H){const re=this.createSegmentGroup(R,b.root,N,H);return new Rn(re,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(R,b){const N={};return vn(R,(H,re)=>{if("string"==typeof H&&H.startsWith(":")){const ht=H.substring(1);N[re]=b[ht]}else N[re]=H}),N}createSegmentGroup(R,b,N,H){const re=this.createSegments(R,b.segments,N,H);let le={};return vn(b.children,(ht,Dt)=>{le[Dt]=this.createSegmentGroup(R,ht,N,H)}),new rn(re,le)}createSegments(R,b,N,H){return b.map(re=>re.path.startsWith(":")?this.findPosParam(R,re,H):this.findOrReturn(re,N))}findPosParam(R,b,N){const H=N[b.path.substring(1)];if(!H)throw new y.vHH(4001,ll);return H}findOrReturn(R,b){let N=0;for(const H of b){if(H.path===R.path)return b.splice(N),H;N++}return R}}class as{}class Nr{constructor(R,b,N,H,re,le,ht){this.injector=R,this.rootComponentType=b,this.config=N,this.urlTree=H,this.url=re,this.paramsInheritanceStrategy=le,this.urlSerializer=ht}recognize(){const R=Co(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Ct).pipe((0,Xe.U)(b=>{if(null===b)return null;const N=new ss([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ct,this.rootComponentType,null,this.urlTree.root,-1,{}),H=new $r(N,b),re=new Wo(this.url,H);return this.inheritParamsAndData(re._root),re}))}inheritParamsAndData(R){const b=R.value,N=zo(b,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data),R.children.forEach(H=>this.inheritParamsAndData(H))}processSegmentGroup(R,b,N,H){return 0===N.segments.length&&N.hasChildren()?this.processChildren(R,b,N):this.processSegment(R,b,N,N.segments,H)}processChildren(R,b,N){return(0,g.D)(Object.keys(N.children)).pipe((0,q.b)(H=>{const re=N.children[H],le=Pi(b,H);return this.processSegmentGroup(R,le,re,H)}),(0,ne.R)((H,re)=>H&&re?(H.push(...re),H):null),function yt(S,R=!1){return(0,nt.e)((b,N)=>{let H=0;b.subscribe((0,Me.x)(N,re=>{const le=S(re,H++);(le||R)&&N.next(re),!le&&N.complete()}))})}(H=>null!==H),(0,Le.d)(null),bt(),(0,Xe.U)(H=>{if(null===H)return null;const re=Gc(H);return function es(S){S.sort((R,b)=>R.value.outlet===Ct?-1:b.value.outlet===Ct?1:R.value.outlet.localeCompare(b.value.outlet))}(re),re}))}processSegment(R,b,N,H,re){return(0,g.D)(b).pipe((0,q.b)(le=>{var ht;return this.processSegmentAgainstRoute(null!==(ht=le._injector)&&void 0!==ht?ht:R,le,N,H,re)}),(0,Ae.P)(le=>!!le),(0,Ke.K)(le=>{if(hi(le))return Do(N,H,re)?(0,Y.of)([]):(0,Y.of)(null);throw le}))}processSegmentAgainstRoute(R,b,N,H,re){if(b.redirectTo||!Ga(b,N,H,re))return(0,Y.of)(null);let le;if("**"===b.path){var ht,Dt;const wn=H.length>0?gn(H).parameters:{},Un=Ro(N)+H.length,Vn=new ss(H,wn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(b),ms(b),null!==(ht=null!==(Dt=b.component)&&void 0!==Dt?Dt:b._loadedComponent)&&void 0!==ht?ht:null,b,Mo(N),Un,L(b));le=(0,Y.of)({snapshot:Vn,consumedSegments:[],remainingSegments:[]})}else le=ks(N,b,H,R).pipe((0,Xe.U)(({matched:wn,consumedSegments:Un,remainingSegments:Vn,parameters:ai})=>{var jr,Tr;if(!wn)return null;const Zi=Ro(N)+Un.length;return{snapshot:new ss(Un,ai,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ea(b),ms(b),null!==(jr=null!==(Tr=b.component)&&void 0!==Tr?Tr:b._loadedComponent)&&void 0!==jr?jr:null,b,Mo(N),Zi,L(b)),consumedSegments:Un,remainingSegments:Vn}}));return le.pipe((0,Se.w)(wn=>{var Un,Vn;if(null===wn)return(0,Y.of)(null);const{snapshot:ai,consumedSegments:jr,remainingSegments:Tr}=wn;R=null!==(Un=b._injector)&&void 0!==Un?Un:R;const Zi=null!==(Vn=b._loadedInjector)&&void 0!==Vn?Vn:R,Fs=function Ol(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(b),{segmentGroup:Zo,slicedSegments:ps}=Co(N,jr,Tr,Fs.filter(ho=>void 0===ho.redirectTo));if(0===ps.length&&Zo.hasChildren())return this.processChildren(Zi,Fs,Zo).pipe((0,Xe.U)(ho=>null===ho?null:[new $r(ai,ho)]));if(0===Fs.length&&0===ps.length)return(0,Y.of)([new $r(ai,[])]);const hl=ms(b)===re;return this.processSegment(Zi,Fs,Zo,ps,hl?Ct:re).pipe((0,Xe.U)(ho=>null===ho?null:[new $r(ai,ho)]))}))}}function $i(S){const R=S.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function Gc(S){const R=[],b=new Set;for(const N of S){if(!$i(N)){R.push(N);continue}const H=R.find(re=>N.value.routeConfig===re.value.routeConfig);void 0!==H?(H.children.push(...N.children),b.add(H)):R.push(N)}for(const N of b){const H=Gc(N.children);R.push(new $r(N.value,H))}return R.filter(N=>!b.has(N))}function Mo(S){let R=S;for(;R._sourceSegment;)R=R._sourceSegment;return R}function Ro(S){var R;let b=S,N=null!==(R=b._segmentIndexShift)&&void 0!==R?R:0;for(;b._sourceSegment;){var H;b=b._sourceSegment,N+=null!==(H=b._segmentIndexShift)&&void 0!==H?H:0}return N-1}function Ea(S){return S.data||{}}function L(S){return S.resolve||{}}function jn(S){return"string"==typeof S.title||null===S.title}function Fr(S){return(0,Se.w)(R=>{const b=S(R);return b?(0,g.D)(b).pipe((0,Xe.U)(()=>R)):(0,Y.of)(R)})}const lr=new y.OlP("ROUTES");let vr=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,Y.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const N=Ut(b.loadComponent()).pipe((0,Xe.U)(dn),(0,pt.b)(re=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=re}),(0,He.x)(()=>{this.componentLoaders.delete(b)})),H=new Fe.c(N,()=>new je.x).pipe((0,Ge.x)());return this.componentLoaders.set(b,H),H}loadChildren(b,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,Y.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const re=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,Xe.U)(ht=>{this.onLoadEndListener&&this.onLoadEndListener(N);let Dt,wn,Un=!1;Array.isArray(ht)?wn=ht:(Dt=ht.create(b).injector,wn=Fn(Dt.get(lr,[],y.XFs.Self|y.XFs.Optional)));return{routes:wn.map(qi),injector:Dt}}),(0,He.x)(()=>{this.childrenLoaders.delete(N)})),le=new Fe.c(re,()=>new je.x).pipe((0,Ge.x)());return this.childrenLoaders.set(N,le),le}loadModuleFactoryOrRoutes(b){return Ut(b()).pipe((0,Xe.U)(dn),(0,ze.z)(N=>N instanceof y.YKP||Array.isArray(N)?(0,Y.of)(N):(0,g.D)(this.compiler.compileModuleAsync(N))))}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function dn(S){return function ts(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let xo=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new je.x,this.configLoader=(0,y.f3M)(vr),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(Vr),this.rootContexts=(0,y.f3M)(zi),this.navigationId=0,this.afterPreactivation=()=>(0,Y.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=H=>this.events.next(new Wt(H)),this.configLoader.onLoadStartListener=H=>this.events.next(new $t(H))}complete(){var b;null===(b=this.transitions)||void 0===b||b.complete()}handleNavigationRequest(b){var N;const H=++this.navigationId;null===(N=this.transitions)||void 0===N||N.next({...this.transitions.value,...b,id:H})}setupNavigations(b){return this.transitions=new ae.X({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ui,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,lt.h)(N=>0!==N.id),(0,Xe.U)(N=>({...N,extractedUrl:b.urlHandlingStrategy.extract(N.rawUrl)})),(0,Se.w)(N=>{let H=!1,re=!1;return(0,Y.of)(N).pipe((0,pt.b)(le=>{this.currentNavigation={id:le.id,initialUrl:le.rawUrl,extractedUrl:le.extractedUrl,trigger:le.source,extras:le.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Se.w)(le=>{var ht;const Dt=b.browserUrlTree.toString(),wn=!b.navigated||le.extractedUrl.toString()!==Dt||Dt!==b.currentUrlTree.toString(),Un=null!==(ht=le.extras.onSameUrlNavigation)&&void 0!==ht?ht:b.onSameUrlNavigation;if(!wn&&"reload"!==Un){const Vn="";return this.events.next(new de(le.id,b.serializeUrl(N.rawUrl),Vn,0)),b.rawUrlTree=le.rawUrl,le.resolve(null),De.E}if(b.urlHandlingStrategy.shouldProcessUrl(le.rawUrl))return hn(le.source)&&(b.browserUrlTree=le.extractedUrl),(0,Y.of)(le).pipe((0,Se.w)(Vn=>{var ai,jr;const Tr=null===(ai=this.transitions)||void 0===ai?void 0:ai.getValue();return this.events.next(new Xr(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),Vn.source,Vn.restoredState)),Tr!==(null===(jr=this.transitions)||void 0===jr?void 0:jr.getValue())?De.E:Promise.resolve(Vn)}),function cl(S,R,b,N){return(0,Se.w)(H=>function Pa(S,R,b,N,H){return new Ws(S,R,b,N,H).apply()}(S,R,b,H.extractedUrl,N).pipe((0,Xe.U)(re=>({...H,urlAfterRedirects:re}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),(0,pt.b)(Vn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Vn.urlAfterRedirects},N.urlAfterRedirects=Vn.urlAfterRedirects}),function J(S,R,b,N,H){return(0,ze.z)(re=>function Xs(S,R,b,N,H,re,le="emptyOnly"){return new Nr(S,R,b,N,H,le,re).recognize().pipe((0,Se.w)(ht=>null===ht?function ls(S){return new pe.y(R=>R.error(S))}(new as):(0,Y.of)(ht)))}(S,R,b,re.urlAfterRedirects,N.serialize(re.urlAfterRedirects),N,H).pipe((0,Xe.U)(le=>({...re,targetSnapshot:le}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,pt.b)(Vn=>{if(N.targetSnapshot=Vn.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!Vn.extras.skipLocationChange){const jr=b.urlHandlingStrategy.merge(Vn.urlAfterRedirects,Vn.rawUrl);b.setBrowserUrl(jr,Vn)}b.browserUrlTree=Vn.urlAfterRedirects}const ai=new Ye(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),this.urlSerializer.serialize(Vn.urlAfterRedirects),Vn.targetSnapshot);this.events.next(ai)}));if(wn&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:Vn,extractedUrl:ai,source:jr,restoredState:Tr,extras:Zi}=le,Fs=new Xr(Vn,this.urlSerializer.serialize(ai),jr,Tr);this.events.next(Fs);const Zo=js(ai,this.rootComponentType).snapshot;return N={...le,targetSnapshot:Zo,urlAfterRedirects:ai,extras:{...Zi,skipLocationChange:!1,replaceUrl:!1}},(0,Y.of)(N)}{const Vn="";return this.events.next(new de(le.id,b.serializeUrl(N.extractedUrl),Vn,1)),b.rawUrlTree=le.rawUrl,le.resolve(null),De.E}}),(0,pt.b)(le=>{const ht=new be(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot);this.events.next(ht)}),(0,Xe.U)(le=>N={...le,guards:Q(le.targetSnapshot,le.currentSnapshot,this.rootContexts)}),function ya(S,R){return(0,ze.z)(b=>{const{targetSnapshot:N,currentSnapshot:H,guards:{canActivateChecks:re,canDeactivateChecks:le}}=b;return 0===le.length&&0===re.length?(0,Y.of)({...b,guardsResult:!0}):function Ma(S,R,b,N){return(0,g.D)(S).pipe((0,ze.z)(H=>function _a(S,R,b,N,H){const re=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,Y.of)(!0);const le=re.map(ht=>{var Dt;const wn=null!==(Dt=ys(R))&&void 0!==Dt?Dt:H,Un=K(ht,wn);return Ut(function F(S){return S&&Dr(S.canDeactivate)}(Un)?Un.canDeactivate(S,R,b,N):wn.runInContext(()=>Un(S,R,b,N))).pipe((0,Ae.P)())});return(0,Y.of)(le).pipe(Yn())}(H.component,H.route,b,R,N)),(0,Ae.P)(H=>!0!==H,!0))}(le,N,H,S).pipe((0,ze.z)(ht=>ht&&function Pn(S){return"boolean"==typeof S}(ht)?function Ns(S,R,b,N){return(0,g.D)(R).pipe((0,q.b)(H=>(0,Ce.z)(function il(S,R){return null!==S&&R&&R(new zt(S)),(0,Y.of)(!0)}(H.route.parent,N),function Ha(S,R){return null!==S&&R&&R(new qn(S)),(0,Y.of)(!0)}(H.route,N),function sl(S,R,b){const N=R[R.length-1],re=R.slice(0,R.length-1).reverse().map(le=>function D(S){const R=S.routeConfig?S.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:S,guards:R}:null}(le)).filter(le=>null!==le).map(le=>(0,me.P)(()=>{const ht=le.guards.map(Dt=>{var wn;const Un=null!==(wn=ys(le.node))&&void 0!==wn?wn:b,Vn=K(Dt,Un);return Ut(function j(S){return S&&Dr(S.canActivateChild)}(Vn)?Vn.canActivateChild(N,S):Un.runInContext(()=>Vn(N,S))).pipe((0,Ae.P)())});return(0,Y.of)(ht).pipe(Yn())}));return(0,Y.of)(re).pipe(Yn())}(S,H.path,b),function Gs(S,R,b){const N=R.routeConfig?R.routeConfig.canActivate:null;if(!N||0===N.length)return(0,Y.of)(!0);const H=N.map(re=>(0,me.P)(()=>{var le;const ht=null!==(le=ys(R))&&void 0!==le?le:b,Dt=K(re,ht);return Ut(function z(S){return S&&Dr(S.canActivate)}(Dt)?Dt.canActivate(R,S):ht.runInContext(()=>Dt(R,S))).pipe((0,Ae.P)())}));return(0,Y.of)(H).pipe(Yn())}(S,H.route,b))),(0,Ae.P)(H=>!0!==H,!0))}(N,re,S,R):(0,Y.of)(ht)),(0,Xe.U)(ht=>({...b,guardsResult:ht})))})}(this.environmentInjector,le=>this.events.next(le)),(0,pt.b)(le=>{if(N.guardsResult=le.guardsResult,Mt(le.guardsResult))throw _o(0,le.guardsResult);const ht=new tt(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot,!!le.guardsResult);this.events.next(ht)}),(0,lt.h)(le=>!!le.guardsResult||(b.restoreHistory(le),this.cancelNavigationTransition(le,"",3),!1)),Fr(le=>{if(le.guards.canActivateChecks.length)return(0,Y.of)(le).pipe((0,pt.b)(ht=>{const Dt=new st(ht.id,this.urlSerializer.serialize(ht.extractedUrl),this.urlSerializer.serialize(ht.urlAfterRedirects),ht.targetSnapshot);this.events.next(Dt)}),(0,Se.w)(ht=>{let Dt=!1;return(0,Y.of)(ht).pipe(function U(S,R){return(0,ze.z)(b=>{const{targetSnapshot:N,guards:{canActivateChecks:H}}=b;if(!H.length)return(0,Y.of)(b);let re=0;return(0,g.D)(H).pipe((0,q.b)(le=>function ce(S,R,b,N){const H=S.routeConfig,re=S._resolve;return void 0!==(null==H?void 0:H.title)&&!jn(H)&&(re[jt]=H.title),function Ne(S,R,b,N){const H=function Ft(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===H.length)return(0,Y.of)({});const re={};return(0,g.D)(H).pipe((0,ze.z)(le=>function Zt(S,R,b,N){var H;const re=null!==(H=ys(R))&&void 0!==H?H:N,le=K(S,re);return Ut(le.resolve?le.resolve(R,b):re.runInContext(()=>le(R,b)))}(S[le],R,b,N).pipe((0,Ae.P)(),(0,pt.b)(ht=>{re[le]=ht}))),et(1),(0,We.h)(re),(0,Ke.K)(le=>hi(le)?De.E:(0,Te._)(le)))}(re,S,R,N).pipe((0,Xe.U)(le=>(S._resolvedData=le,S.data=zo(S,b).resolve,H&&jn(H)&&(S.data[jt]=H.title),null)))}(le.route,N,S,R)),(0,pt.b)(()=>re++),et(1),(0,ze.z)(le=>re===H.length?(0,Y.of)(b):De.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,pt.b)({next:()=>Dt=!0,complete:()=>{Dt||(b.restoreHistory(ht),this.cancelNavigationTransition(ht,"",2))}}))}),(0,pt.b)(ht=>{const Dt=new kt(ht.id,this.urlSerializer.serialize(ht.extractedUrl),this.urlSerializer.serialize(ht.urlAfterRedirects),ht.targetSnapshot);this.events.next(Dt)}))}),Fr(le=>{const ht=Dt=>{var wn;const Un=[];null!==(wn=Dt.routeConfig)&&void 0!==wn&&wn.loadComponent&&!Dt.routeConfig._loadedComponent&&Un.push(this.configLoader.loadComponent(Dt.routeConfig).pipe((0,pt.b)(Vn=>{Dt.component=Vn}),(0,Xe.U)(()=>{})));for(const Vn of Dt.children)Un.push(...ht(Vn));return Un};return(0,Pe.a)(ht(le.targetSnapshot.root)).pipe((0,Le.d)(),(0,_e.q)(1))}),Fr(()=>this.afterPreactivation()),(0,Xe.U)(le=>{const ht=function ro(S,R,b){const N=Hs(S,R._root,b?b._root:void 0);return new us(N,R)}(b.routeReuseStrategy,le.targetSnapshot,le.currentRouterState);return N={...le,targetRouterState:ht}}),(0,pt.b)(le=>{b.currentUrlTree=le.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(le.urlAfterRedirects,le.rawUrl),b.routerState=le.targetRouterState,"deferred"===b.urlUpdateStrategy&&(le.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,le),b.browserUrlTree=le.urlAfterRedirects)}),((S,R,b)=>(0,Xe.U)(N=>(new hs(R,N.targetRouterState,N.currentRouterState,b).activate(S),N)))(this.rootContexts,b.routeReuseStrategy,le=>this.events.next(le)),(0,_e.q)(1),(0,pt.b)({next:le=>{var ht;H=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new Ci(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),null===(ht=b.titleStrategy)||void 0===ht||ht.updateTitle(le.targetRouterState.snapshot),le.resolve(!0)},complete:()=>{H=!0}}),(0,He.x)(()=>{var le;H||re||this.cancelNavigationTransition(N,"",1),(null===(le=this.currentNavigation)||void 0===le?void 0:le.id)===N.id&&(this.currentNavigation=null)}),(0,Ke.K)(le=>{if(re=!0,xs(le)){vo(le)||(b.navigated=!0,b.restoreHistory(N,!0));const Dt=new Br(N.id,this.urlSerializer.serialize(N.extractedUrl),le.message,le.cancellationCode);if(this.events.next(Dt),vo(le)){const wn=b.urlHandlingStrategy.merge(le.url,b.rawUrlTree),Un={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||hn(N.source)};b.scheduleNavigation(wn,ui,null,Un,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{var ht;b.restoreHistory(N,!0);const Dt=new Re(N.id,this.urlSerializer.serialize(N.extractedUrl),le,null!==(ht=N.targetSnapshot)&&void 0!==ht?ht:void 0);this.events.next(Dt);try{N.resolve(b.errorHandler(le))}catch(wn){N.reject(wn)}}return De.E}))}))}cancelNavigationTransition(b,N,H){const re=new Br(b.id,this.urlSerializer.serialize(b.extractedUrl),N,H);this.events.next(re),b.resolve(!1)}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function hn(S){return S!==ui}let Nt=(()=>{class S{buildTitle(b){let N,H=b.root;for(;void 0!==H;){var re;N=null!==(re=this.getResolvedTitleForRoute(H))&&void 0!==re?re:N,H=H.children.find(le=>le.outlet===Ct)}return N}getResolvedTitleForRoute(b){return b.data[jt]}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(tn)},providedIn:"root"}),S})(),tn=(()=>{class S extends Nt{constructor(b){super(),this.title=b}updateTitle(b){const N=this.buildTitle(b);void 0!==N&&this.title.setTitle(N)}}return S.\u0275fac=function(b){return new(b||S)(y.LFG(mt.Dx))},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Di=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(Ka)},providedIn:"root"}),S})();class Wa{shouldDetach(R){return!1}store(R,b){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,b){return R.routeConfig===b.routeConfig}}let Ka=(()=>{class S extends Wa{}return S.\u0275fac=function(){let R;return function(N){return(R||(R=y.n5z(S)))(N||S)}}(),S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const qa=new y.OlP("",{providedIn:"root",factory:()=>({})});let pu=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(oc)},providedIn:"root"}),S})(),oc=(()=>{class S{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,N){return b}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function bc(S){throw S}function Po(S,R,b){return R.parse("/")}const dd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hr=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var b;if("computed"===this.canceledNavigationResolution)return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var b;this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this.options=(0,y.f3M)(qa,{optional:!0})||{},this.errorHandler=this.options.errorHandler||bc,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Po,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(pu),this.routeReuseStrategy=(0,y.f3M)(Di),this.urlCreationStrategy=(0,y.f3M)(Bn),this.titleStrategy=(0,y.f3M)(Nt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Fn(null!==(b=(0,y.f3M)(lr,{optional:!0}))&&void 0!==b?b:[]),this.navigationTransitions=(0,y.f3M)(xo),this.urlSerializer=(0,y.f3M)(Vr),this.location=(0,y.f3M)(Be.Ye),this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Rn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=js(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(N=>{var H;this.lastSuccessfulId=N.id,this.currentPageId=null!==(H=this.browserPageId)&&void 0!==H?H:0},N=>{this.console.warn(`Unhandled Navigation Error: ${N}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ui,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const N="popstate"===b.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,N,b.state)},0)}))}navigateToSyncWithBrowser(b,N,H){const re={replaceUrl:!0},le=null!=H&&H.navigationId?H:null;if(H){const Dt={...H};delete Dt.navigationId,delete Dt.\u0275routerPageId,0!==Object.keys(Dt).length&&(re.state=Dt)}const ht=this.parseUrl(b);this.scheduleNavigation(ht,N,le,re)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map(qi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,N={}){const{relativeTo:H,queryParams:re,fragment:le,queryParamsHandling:ht,preserveFragment:Dt}=N,wn=Dt?this.currentUrlTree.fragment:le;let Un=null;switch(ht){case"merge":Un={...this.currentUrlTree.queryParams,...re};break;case"preserve":Un=this.currentUrlTree.queryParams;break;default:Un=re||null}return null!==Un&&(Un=this.removeEmptyProps(Un)),this.urlCreationStrategy.createUrlTree(H,this.routerState,this.currentUrlTree,b,Un,null!=wn?wn:null)}navigateByUrl(b,N={skipLocationChange:!1}){const H=Mt(b)?b:this.parseUrl(b),re=this.urlHandlingStrategy.merge(H,this.rawUrlTree);return this.scheduleNavigation(re,ui,null,N)}navigate(b,N={skipLocationChange:!1}){return function Oi(S){for(let R=0;R<S.length;R++){const b=S[R];if(null==b)throw new y.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,N),N)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let N;try{N=this.urlSerializer.parse(b)}catch(H){N=this.malformedUriErrorHandler(H,this.urlSerializer,b)}return N}isActive(b,N){let H;if(H=!0===N?{...dd}:!1===N?{...Yo}:N,Mt(b))return or(this.currentUrlTree,b,H);const re=this.parseUrl(b);return or(this.currentUrlTree,re,H)}removeEmptyProps(b){return Object.keys(b).reduce((N,H)=>{const re=b[H];return null!=re&&(N[H]=re),N},{})}scheduleNavigation(b,N,H,re,le){if(this.disposed)return Promise.resolve(!1);let ht,Dt,wn,Un;if(le?(ht=le.resolve,Dt=le.reject,wn=le.promise):wn=new Promise((ai,jr)=>{ht=ai,Dt=jr}),"computed"===this.canceledNavigationResolution)if(H&&H.\u0275routerPageId)Un=H.\u0275routerPageId;else{var Vn;Un=(null!==(Vn=this.browserPageId)&&void 0!==Vn?Vn:0)+1}else Un=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Un,source:N,restoredState:H,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:re,resolve:ht,reject:Dt,promise:wn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),wn.catch(ai=>Promise.reject(ai))}setBrowserUrl(b,N){const H=this.urlSerializer.serialize(b);if(this.location.isCurrentPathEqualTo(H)||N.extras.replaceUrl){const le={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId)};this.location.replaceState(H,"",le)}else{const re={...N.extras.state,...this.generateNgRouterState(N.id,N.targetPageId)};this.location.go(H,"",re)}}restoreHistory(b,N=!1){if("computed"===this.canceledNavigationResolution){var H,re;const le=null!==(H=this.browserPageId)&&void 0!==H?H:this.currentPageId,ht=this.currentPageId-le;0!==ht?this.location.historyGo(ht):this.currentUrlTree===(null===(re=this.getCurrentNavigation())||void 0===re?void 0:re.finalUrl)&&0===ht&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,N){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:N}:{navigationId:b}}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),ca=(()=>{class S{constructor(b,N,H,re,le,ht){var Dt;this.router=b,this.route=N,this.tabIndexAttribute=H,this.renderer=re,this.el=le,this.locationStrategy=ht,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new je.x;const wn=null===(Dt=le.nativeElement.tagName)||void 0===Dt?void 0:Dt.toLowerCase();this.isAnchorElement="a"===wn||"area"===wn,this.isAnchorElement?this.subscription=b.events.subscribe(Un=>{Un instanceof Ci&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,y.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,y.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,y.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,N,H,re,le){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||N||H||re||le||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var b;null===(b=this.subscription)||void 0===b||b.unsubscribe()}updateHref(){var b;this.href=null!==this.urlTree&&this.locationStrategy?null===(b=this.locationStrategy)||void 0===b?void 0:b.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const N=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",N)}applyAttributeValue(b,N){const H=this.renderer,re=this.el.nativeElement;null!==N?H.setAttribute(re,b,N):H.removeAttribute(re,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(b){return new(b||S)(y.Y36(hr),y.Y36(Yr),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Be.S$))},S.\u0275dir=y.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,N){1&b&&y.NdJ("click",function(re){return N.onClick(re.button,re.ctrlKey,re.shiftKey,re.altKey,re.metaKey)}),2&b&&y.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[y.TTD]}),S})(),Ti=(()=>{class S{get isActive(){return this._isActive}constructor(b,N,H,re,le){this.router=b,this.element=N,this.renderer=H,this.cdr=re,this.link=le,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new y.vpe,this.routerEventsSubscription=b.events.subscribe(ht=>{ht instanceof Ci&&this.update()})}ngAfterContentInit(){(0,Y.of)(this.links.changes,(0,Y.of)(null)).pipe((0,_t.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var b;null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe();const N=[...this.links.toArray(),this.link].filter(H=>!!H).map(H=>H.onChanges);this.linkInputChangesSubscription=(0,g.D)(N).pipe((0,_t.J)()).subscribe(H=>{this._isActive!==this.isLinkActive(this.router)(H)&&this.update()})}set routerLinkActive(b){const N=Array.isArray(b)?b:b.split(" ");this.classes=N.filter(H=>!!H)}ngOnChanges(b){this.update()}ngOnDestroy(){var b;this.routerEventsSubscription.unsubscribe(),null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this._isActive!==b&&(this._isActive=b,this.cdr.markForCheck(),this.classes.forEach(N=>{b?this.renderer.addClass(this.element.nativeElement,N):this.renderer.removeClass(this.element.nativeElement,N)}),b&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(b))})}isLinkActive(b){const N=function yr(S){return!!S.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return H=>!!H.urlTree&&b.isActive(H.urlTree,N)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.links.some(b)}}return S.\u0275fac=function(b){return new(b||S)(y.Y36(hr),y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(y.sBO),y.Y36(ca,8))},S.\u0275dir=y.lG2({type:S,selectors:[["","routerLinkActive",""]],contentQueries:function(b,N,H){if(1&b&&y.Suo(H,ca,5),2&b){let re;y.iGM(re=y.CRH())&&(N.links=re)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[y.TTD]}),S})();class Oa{}let Wi=(()=>{class S{constructor(b,N,H,re,le){this.router=b,this.injector=H,this.preloadingStrategy=re,this.loader=le}setUpPreloading(){this.subscription=this.router.events.pipe((0,lt.h)(b=>b instanceof Ci),(0,q.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,N){const H=[];for(const Dt of N){var re,le;Dt.providers&&!Dt._injector&&(Dt._injector=(0,y.MMx)(Dt.providers,b,`Route: ${Dt.path}`));const wn=null!==(re=Dt._injector)&&void 0!==re?re:b,Un=null!==(le=Dt._loadedInjector)&&void 0!==le?le:wn;var ht;(Dt.loadChildren&&!Dt._loadedRoutes&&void 0===Dt.canLoad||Dt.loadComponent&&!Dt._loadedComponent)&&H.push(this.preloadConfig(wn,Dt)),(Dt.children||Dt._loadedRoutes)&&H.push(this.processRoutes(Un,null!==(ht=Dt.children)&&void 0!==ht?ht:Dt._loadedRoutes))}return(0,g.D)(H).pipe((0,_t.J)())}preloadConfig(b,N){return this.preloadingStrategy.preload(N,()=>{let H;H=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(b,N):(0,Y.of)(null);const re=H.pipe((0,ze.z)(le=>{var ht;return null===le?(0,Y.of)(void 0):(N._loadedRoutes=le.routes,N._loadedInjector=le.injector,this.processRoutes(null!==(ht=le.injector)&&void 0!==ht?ht:b,le.routes))}));if(N.loadComponent&&!N._loadedComponent){const le=this.loader.loadComponent(N);return(0,g.D)([re,le]).pipe((0,_t.J)())}return re})}}return S.\u0275fac=function(b){return new(b||S)(y.LFG(hr),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(Oa),y.LFG(vr))},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const On=new y.OlP("");let bs=(()=>{class S{constructor(b,N,H,re,le={}){this.urlSerializer=b,this.transitions=N,this.viewportScroller=H,this.zone=re,this.options=le,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},le.scrollPositionRestoration=le.scrollPositionRestoration||"disabled",le.anchorScrolling=le.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Xr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Ci&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Je&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,N){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Je(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))})},0)})}ngOnDestroy(){var b,N;null===(b=this.routerEventsSubscription)||void 0===b||b.unsubscribe(),null===(N=this.scrollEventsSubscription)||void 0===N||N.unsubscribe()}}return S.\u0275fac=function(b){y.$Z()},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac}),S})();var ns=(()=>((ns=ns||{})[ns.COMPLETE=0]="COMPLETE",ns[ns.FAILED=1]="FAILED",ns[ns.REDIRECTING=2]="REDIRECTING",ns))();const No=!1;function kl(S,...R){return(0,y.MR2)([{provide:lr,multi:!0,useValue:S},No?{provide:Na,useValue:!0}:[],{provide:Yr,useFactory:Ia,deps:[hr]},{provide:y.tb,multi:!0,useFactory:Tc},R.map(b=>b.\u0275providers)])}function Ia(S){return S.routerState.root}function _s(S,R){return{\u0275kind:S,\u0275providers:R}}const Na=new y.OlP("",{providedIn:"root",factory:()=>!1});function Tc(){const S=(0,y.f3M)(y.zs3);return R=>{var b,N;const H=S.get(y.z2F);if(R!==H.components[0])return;const re=S.get(hr),le=S.get(Ya);1===S.get(vs)&&re.initialNavigation(),null===(b=S.get(As,null,y.XFs.Optional))||void 0===b||b.setUpPreloading(),null===(N=S.get(On,null,y.XFs.Optional))||void 0===N||N.init(),re.resetRootComponentType(H.componentTypes[0]),le.closed||(le.next(),le.complete(),le.unsubscribe())}}const Ya=new y.OlP(No?"bootstrap done indicator":"",{factory:()=>new je.x}),vs=new y.OlP(No?"initial navigation":"",{providedIn:"root",factory:()=>1});function ac(){let S=[];return S=No?[{provide:y.Xts,multi:!0,useFactory:()=>{const R=(0,y.f3M)(hr);return()=>R.events.subscribe(b=>{var N,H,re,le;null===(N=(H=console).group)||void 0===N||N.call(H,`Router Event: ${b.constructor.name}`),console.log(function at(S){var R,b,N,H;if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${(null===(R=S.snapshot.routeConfig)||void 0===R?void 0:R.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(b=S.snapshot.routeConfig)||void 0===b?void 0:b.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(N=S.snapshot.routeConfig)||void 0===N?void 0:N.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(H=S.snapshot.routeConfig)||void 0===H?void 0:H.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(b)),console.log(b),null===(re=(le=console).groupEnd)||void 0===re||re.call(le)})}}]:[],_s(1,S)}const As=new y.OlP(No?"router preloader":"");function Sc(S){return _s(0,[{provide:As,useExisting:Wi},{provide:Oa,useExisting:S}])}const ua=!1,dl=new y.OlP(ua?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),pd=[Be.Ye,{provide:Vr,useClass:xi},hr,zi,{provide:Yr,useFactory:Ia,deps:[hr]},vr,ua?{provide:Na,useValue:!0}:[]];function uh(){return new y.PXZ("Router",hr)}let Fo=(()=>{class S{constructor(b){}static forRoot(b,N){return{ngModule:S,providers:[pd,ua&&null!=N&&N.enableTracing?ac().\u0275providers:[],{provide:lr,multi:!0,useValue:b},{provide:dl,useFactory:mi,deps:[[hr,new y.FiY,new y.tp0]]},{provide:qa,useValue:N||{}},null!=N&&N.useHash?{provide:Be.S$,useClass:Be.Do}:{provide:Be.S$,useClass:Be.b0},{provide:On,useFactory:()=>{const S=(0,y.f3M)(Be.EM),R=(0,y.f3M)(y.R0b),b=(0,y.f3M)(qa),N=(0,y.f3M)(xo),H=(0,y.f3M)(Vr);return b.scrollOffset&&S.setOffset(b.scrollOffset),new bs(H,N,S,R,b)}},null!=N&&N.preloadingStrategy?Sc(N.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:uh},null!=N&&N.initialNavigation?Mc(N):[],[{provide:Za,useFactory:Tc},{provide:y.tb,multi:!0,useExisting:Za}]]}}static forChild(b){return{ngModule:S,providers:[{provide:lr,multi:!0,useValue:b}]}}}return S.\u0275fac=function(b){return new(b||S)(y.LFG(dl,8))},S.\u0275mod=y.oAB({type:S}),S.\u0275inj=y.cJS({imports:[io]}),S})();function mi(S){if(ua&&S)throw new y.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Mc(S){return["disabled"===S.initialNavigation?_s(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const R=(0,y.f3M)(hr);return()=>{R.setUpLocationChangeListener()}}},{provide:vs,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?_s(2,[{provide:vs,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:R=>{const b=R.get(Be.V_,Promise.resolve());return()=>b.then(()=>new Promise(N=>{const H=R.get(hr),re=R.get(Ya);(function Oo(S,R){S.events.pipe((0,lt.h)(b=>b instanceof Ci||b instanceof Br||b instanceof Re||b instanceof de),(0,Xe.U)(b=>b instanceof Ci||b instanceof de?ns.COMPLETE:b instanceof Br&&(0===b.code||1===b.code)?ns.REDIRECTING:ns.FAILED),(0,lt.h)(b=>b!==ns.REDIRECTING),(0,_e.q)(1)).subscribe(()=>{R()})})(H,()=>{N(!0)}),R.get(xo).afterPreactivation=()=>(N(!0),re.closed?(0,Y.of)(void 0):re),H.initialNavigation()}))}}]).\u0275providers:[]]}const Za=new y.OlP(ua?"Router Initializer":"")},3942:(on,ot,k)=>{"use strict";k.d(ot,{Z:()=>Be});var y=k(2090),g=k(4859),Y=k(9681),ae=k(1877);class xe{constructor(Se,_e){this._delegate=Se,this.firebase=_e,(0,Y._addComponent)(Se,new g.wA("app-compat",()=>this,"PUBLIC")),this.container=Se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this._delegate.automaticDataCollectionEnabled=Se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Se=>{this._delegate.checkDestroyed(),Se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Se,_e=Y._DEFAULT_ENTRY_NAME){var oe;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(Se);return!lt.isInitialized()&&"EXPLICIT"===(null===(oe=lt.getComponent())||void 0===oe?void 0:oe.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:_e})}_removeServiceInstance(Se,_e=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Se).clearInstance(_e)}_addComponent(Se){(0,Y._addComponent)(this._delegate,Se)}_addOrOverwriteComponent(Se){(0,Y._addOrOverwriteComponent)(this._delegate,Se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Te=function Ue(){const Xe=function me(Xe){const Se={},_e={__esModule:!0,initializeApp:function ze(Ke,ne={}){const nt=Y.initializeApp(Ke,ne);if((0,y.r3)(Se,nt.name))return Se[nt.name];const Me=new Xe(nt,_e);return Se[nt.name]=Me,Me},app:lt,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function q(Ke){const ne=Ke.name,nt=ne.replace("-compat","");if(Y._registerComponent(Ke)&&"PUBLIC"===Ke.type){const Me=(et=lt())=>{if("function"!=typeof et[nt])throw Ce.create("invalid-app-argument",{appName:ne});return et[nt]()};void 0!==Ke.serviceProps&&(0,y.ZB)(Me,Ke.serviceProps),_e[nt]=Me,Xe.prototype[nt]=function(...et){return this._getService.bind(this,ne).apply(this,Ke.multipleInstances?et:[])}}return"PUBLIC"===Ke.type?_e[nt]:null},removeApp:function oe(Ke){delete Se[Ke]},useAsService:function pt(Ke,ne){return"serverAuth"===ne?null:ne},modularAPIs:Y}};function lt(Ke){if(!(0,y.r3)(Se,Ke=Ke||Y._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Ke});return Se[Ke]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function Ae(){return Object.keys(Se).map(Ke=>Se[Ke])}}),lt.App=Xe,_e}(xe);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:Ue,extendNamespace:function Se(_e){(0,y.ZB)(Xe,_e)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),Xe}(),pe=new ae.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Be=Te;!function je(Xe){(0,Y.registerVersion)("@firebase/app-compat","0.2.8",Xe)}()},9681:(on,ot,k)=>{"use strict";k.r(ot),k.d(ot,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>gn,_DEFAULT_ENTRY_NAME:()=>He,_addComponent:()=>Ct,_addOrOverwriteComponent:()=>jt,_apps:()=>_t,_clearComponents:()=>Rt,_components:()=>mt,_getProvider:()=>Tt,_registerComponent:()=>_n,_removeServiceInstance:()=>ct,deleteApp:()=>nr,getApp:()=>vn,getApps:()=>Ut,initializeApp:()=>nn,onLog:()=>or,registerVersion:()=>un,setLogLevel:()=>ci});var y=k(5861),g=k(4859),Y=k(1877),ae=k(2090),xe=k(8766);class Pe{constructor(Gt){this.container=Gt}getPlatformInfoString(){return this.container.getProviders().map(En=>{if(function Ce(mn){const Gt=mn.getComponent();return"VERSION"===(null==Gt?void 0:Gt.type)}(En)){const An=En.getImmediate();return`${An.library}/${An.version}`}return null}).filter(En=>En).join(" ")}}const me="@firebase/app",Te=new Y.Yd("@firebase/app"),He="[DEFAULT]",Ge={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_t=new Map,mt=new Map;function Ct(mn,Gt){try{mn.container.addComponent(Gt)}catch(En){Te.debug(`Component ${Gt.name} failed to register with FirebaseApp ${mn.name}`,En)}}function jt(mn,Gt){mn.container.addOrOverwriteComponent(Gt)}function _n(mn){const Gt=mn.name;if(mt.has(Gt))return Te.debug(`There were multiple attempts to register component ${Gt}.`),!1;mt.set(Gt,mn);for(const En of _t.values())Ct(En,mn);return!0}function Tt(mn,Gt){const En=mn.container.getProvider("heartbeat").getImmediate({optional:!0});return En&&En.triggerHeartbeat(),mn.container.getProvider(Gt)}function ct(mn,Gt,En=He){Tt(mn,Gt).clearInstance(En)}function Rt(){mt.clear()}const Cn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fn{constructor(Gt,En,An){this._isDeleted=!1,this._options=Object.assign({},Gt),this._config=Object.assign({},En),this._name=En.name,this._automaticDataCollectionEnabled=En.automaticDataCollectionEnabled,this._container=An,this.container.addComponent(new g.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Gt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Gt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Gt){this._isDeleted=Gt}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}const gn="9.20.0";function nn(mn,Gt={}){let En=mn;"object"!=typeof Gt&&(Gt={name:Gt});const An=Object.assign({name:He,automaticDataCollectionEnabled:!1},Gt),zn=An.name;if("string"!=typeof zn||!zn)throw Cn.create("bad-app-name",{appName:String(zn)});if(En||(En=(0,ae.aH)()),!En)throw Cn.create("no-options");const ur=_t.get(zn);if(ur){if((0,ae.vZ)(En,ur.options)&&(0,ae.vZ)(An,ur.config))return ur;throw Cn.create("duplicate-app",{appName:zn})}const Pr=new g.H0(zn);for(const Ve of mt.values())Pr.addComponent(Ve);const Ze=new Fn(En,An,Pr);return _t.set(zn,Ze),Ze}function vn(mn=He){const Gt=_t.get(mn);if(!Gt&&mn===He)return nn();if(!Gt)throw Cn.create("no-app",{appName:mn});return Gt}function Ut(){return Array.from(_t.values())}function nr(mn){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,y.Z)(function*(mn){const Gt=mn.name;_t.has(Gt)&&(_t.delete(Gt),yield Promise.all(mn.container.getProviders().map(En=>En.delete())),mn.isDeleted=!0)})).apply(this,arguments)}function un(mn,Gt,En){var An;let zn=null!==(An=Ge[mn])&&void 0!==An?An:mn;En&&(zn+=`-${En}`);const ur=zn.match(/\s|\//),Pr=Gt.match(/\s|\//);if(ur||Pr){const Ze=[`Unable to register library "${zn}" with version "${Gt}":`];return ur&&Ze.push(`library name "${zn}" contains illegal characters (whitespace or "/")`),ur&&Pr&&Ze.push("and"),Pr&&Ze.push(`version name "${Gt}" contains illegal characters (whitespace or "/")`),void Te.warn(Ze.join(" "))}_n(new g.wA(`${zn}-version`,()=>({library:zn,version:Gt}),"VERSION"))}function or(mn,Gt){if(null!==mn&&"function"!=typeof mn)throw Cn.create("invalid-log-argument");(0,Y.Am)(mn,Gt)}function ci(mn){(0,Y.Ub)(mn)}const Ir="firebase-heartbeat-database",Ni=1,Gr="firebase-heartbeat-store";let Ar=null;function fr(){return Ar||(Ar=(0,xe.X3)(Ir,Ni,{upgrade:(mn,Gt)=>{0===Gt&&mn.createObjectStore(Gr)}}).catch(mn=>{throw Cn.create("idb-open",{originalErrorMessage:mn.message})})),Ar}function rn(){return(rn=(0,y.Z)(function*(mn){try{return(yield fr()).transaction(Gr).objectStore(Gr).get(cr(mn))}catch(Gt){if(Gt instanceof ae.ZR)Te.warn(Gt.message);else{const En=Cn.create("idb-get",{originalErrorMessage:null==Gt?void 0:Gt.message});Te.warn(En.message)}}})).apply(this,arguments)}function xr(mn,Gt){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,y.Z)(function*(mn,Gt){try{const An=(yield fr()).transaction(Gr,"readwrite");return yield An.objectStore(Gr).put(Gt,cr(mn)),An.done}catch(En){if(En instanceof ae.ZR)Te.warn(En.message);else{const An=Cn.create("idb-set",{originalErrorMessage:null==En?void 0:En.message});Te.warn(An.message)}}})).apply(this,arguments)}function cr(mn){return`${mn.name}!${mn.options.appId}`}class xi{constructor(Gt){this.container=Gt,this._heartbeatsCache=null;const En=this.container.getProvider("app").getImmediate();this._storage=new er(En),this._heartbeatsCachePromise=this._storage.read().then(An=>(this._heartbeatsCache=An,An))}triggerHeartbeat(){var Gt=this;return(0,y.Z)(function*(){const An=Gt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),zn=Er();if(null===Gt._heartbeatsCache&&(Gt._heartbeatsCache=yield Gt._heartbeatsCachePromise),Gt._heartbeatsCache.lastSentHeartbeatDate!==zn&&!Gt._heartbeatsCache.heartbeats.some(ur=>ur.date===zn))return Gt._heartbeatsCache.heartbeats.push({date:zn,agent:An}),Gt._heartbeatsCache.heartbeats=Gt._heartbeatsCache.heartbeats.filter(ur=>{const Pr=new Date(ur.date).valueOf();return Date.now()-Pr<=2592e6}),Gt._storage.overwrite(Gt._heartbeatsCache)})()}getHeartbeatsHeader(){var Gt=this;return(0,y.Z)(function*(){if(null===Gt._heartbeatsCache&&(yield Gt._heartbeatsCachePromise),null===Gt._heartbeatsCache||0===Gt._heartbeatsCache.heartbeats.length)return"";const En=Er(),{heartbeatsToSend:An,unsentEntries:zn}=function Zr(mn,Gt=1024){const En=[];let An=mn.slice();for(const zn of mn){const ur=En.find(Pr=>Pr.agent===zn.agent);if(ur){if(ur.dates.push(zn.date),bi(En)>Gt){ur.dates.pop();break}}else if(En.push({agent:zn.agent,dates:[zn.date]}),bi(En)>Gt){En.pop();break}An=An.slice(1)}return{heartbeatsToSend:En,unsentEntries:An}}(Gt._heartbeatsCache.heartbeats),ur=(0,ae.L)(JSON.stringify({version:2,heartbeats:An}));return Gt._heartbeatsCache.lastSentHeartbeatDate=En,zn.length>0?(Gt._heartbeatsCache.heartbeats=zn,yield Gt._storage.overwrite(Gt._heartbeatsCache)):(Gt._heartbeatsCache.heartbeats=[],Gt._storage.overwrite(Gt._heartbeatsCache)),ur})()}}function Er(){return(new Date).toISOString().substring(0,10)}class er{constructor(Gt){this.app=Gt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Gt=this;return(0,y.Z)(function*(){return(yield Gt._canUseIndexedDBPromise)&&(yield function Rn(mn){return rn.apply(this,arguments)}(Gt.app))||{heartbeats:[]}})()}overwrite(Gt){var En=this;return(0,y.Z)(function*(){var An;if(yield En._canUseIndexedDBPromise){const ur=yield En.read();return xr(En.app,{lastSentHeartbeatDate:null!==(An=Gt.lastSentHeartbeatDate)&&void 0!==An?An:ur.lastSentHeartbeatDate,heartbeats:Gt.heartbeats})}})()}add(Gt){var En=this;return(0,y.Z)(function*(){var An;if(yield En._canUseIndexedDBPromise){const ur=yield En.read();return xr(En.app,{lastSentHeartbeatDate:null!==(An=Gt.lastSentHeartbeatDate)&&void 0!==An?An:ur.lastSentHeartbeatDate,heartbeats:[...ur.heartbeats,...Gt.heartbeats]})}})()}}function bi(mn){return(0,ae.L)(JSON.stringify({version:2,heartbeats:mn})).length}!function Xn(mn){_n(new g.wA("platform-logger",Gt=>new Pe(Gt),"PRIVATE")),_n(new g.wA("heartbeat",Gt=>new xi(Gt),"PRIVATE")),un(me,"0.9.8",mn),un(me,"0.9.8","esm2017"),un("fire-js","")}("")},4859:(on,ot,k)=>{"use strict";k.d(ot,{H0:()=>me,wA:()=>Y,zt:()=>xe});var y=k(5861),g=k(2090);class Y{constructor(Te,pe,De){this.name=Te,this.instanceFactory=pe,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Te){return this.instantiationMode=Te,this}setMultipleInstances(Te){return this.multipleInstances=Te,this}setServiceProps(Te){return this.serviceProps=Te,this}setInstanceCreatedCallback(Te){return this.onInstanceCreated=Te,this}}const ae="[DEFAULT]";class xe{constructor(Te,pe){this.name=Te,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Te){const pe=this.normalizeInstanceIdentifier(Te);if(!this.instancesDeferred.has(pe)){const De=new g.BH;if(this.instancesDeferred.set(pe,De),this.isInitialized(pe)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:pe});Fe&&De.resolve(Fe)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(Te){var pe;const De=this.normalizeInstanceIdentifier(null==Te?void 0:Te.identifier),Fe=null!==(pe=null==Te?void 0:Te.optional)&&void 0!==pe&&pe;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(je){if(Fe)return null;throw je}}getComponent(){return this.component}setComponent(Te){if(Te.name!==this.name)throw Error(`Mismatching Component ${Te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Te,this.shouldAutoInitialize()){if(function Ce(Ue){return"EAGER"===Ue.instantiationMode}(Te))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[pe,De]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(pe);try{const je=this.getOrInitializeService({instanceIdentifier:Fe});De.resolve(je)}catch{}}}}clearInstance(Te=ae){this.instancesDeferred.delete(Te),this.instancesOptions.delete(Te),this.instances.delete(Te)}delete(){var Te=this;return(0,y.Z)(function*(){const pe=Array.from(Te.instances.values());yield Promise.all([...pe.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...pe.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Te=ae){return this.instances.has(Te)}getOptions(Te=ae){return this.instancesOptions.get(Te)||{}}initialize(Te={}){const{options:pe={}}=Te,De=this.normalizeInstanceIdentifier(Te.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:De,options:pe});for(const[je,Be]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(je)&&Be.resolve(Fe);return Fe}onInit(Te,pe){var De;const Fe=this.normalizeInstanceIdentifier(pe),je=null!==(De=this.onInitCallbacks.get(Fe))&&void 0!==De?De:new Set;je.add(Te),this.onInitCallbacks.set(Fe,je);const Be=this.instances.get(Fe);return Be&&Te(Be,Fe),()=>{je.delete(Te)}}invokeOnInitCallbacks(Te,pe){const De=this.onInitCallbacks.get(pe);if(De)for(const Fe of De)try{Fe(Te,pe)}catch{}}getOrInitializeService({instanceIdentifier:Te,options:pe={}}){let De=this.instances.get(Te);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(Ue=Te,Ue===ae?void 0:Ue),options:pe}),this.instances.set(Te,De),this.instancesOptions.set(Te,pe),this.invokeOnInitCallbacks(De,Te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Te,De)}catch{}var Ue;return De||null}normalizeInstanceIdentifier(Te=ae){return this.component?this.component.multipleInstances?Te:ae:Te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(Te){this.name=Te,this.providers=new Map}addComponent(Te){const pe=this.getProvider(Te.name);if(pe.isComponentSet())throw new Error(`Component ${Te.name} has already been registered with ${this.name}`);pe.setComponent(Te)}addOrOverwriteComponent(Te){this.getProvider(Te.name).isComponentSet()&&this.providers.delete(Te.name),this.addComponent(Te)}getProvider(Te){if(this.providers.has(Te))return this.providers.get(Te);const pe=new xe(Te,this);return this.providers.set(Te,pe),pe}getProviders(){return Array.from(this.providers.values())}}},1877:(on,ot,k)=>{"use strict";k.d(ot,{Am:()=>Ue,Ub:()=>me,Yd:()=>Ce,in:()=>g});const y=[];var g=(()=>{return(Te=g||(g={}))[Te.DEBUG=0]="DEBUG",Te[Te.VERBOSE=1]="VERBOSE",Te[Te.INFO=2]="INFO",Te[Te.WARN=3]="WARN",Te[Te.ERROR=4]="ERROR",Te[Te.SILENT=5]="SILENT",g;var Te})();const Y={debug:g.DEBUG,verbose:g.VERBOSE,info:g.INFO,warn:g.WARN,error:g.ERROR,silent:g.SILENT},ae=g.INFO,xe={[g.DEBUG]:"log",[g.VERBOSE]:"log",[g.INFO]:"info",[g.WARN]:"warn",[g.ERROR]:"error"},Pe=(Te,pe,...De)=>{if(pe<Te.logLevel)return;const Fe=(new Date).toISOString(),je=xe[pe];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[je](`[${Fe}]  ${Te.name}:`,...De)};class Ce{constructor(pe){this.name=pe,this._logLevel=ae,this._logHandler=Pe,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in g))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?Y[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,g.DEBUG,...pe),this._logHandler(this,g.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,g.VERBOSE,...pe),this._logHandler(this,g.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,g.INFO,...pe),this._logHandler(this,g.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,g.WARN,...pe),this._logHandler(this,g.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,g.ERROR,...pe),this._logHandler(this,g.ERROR,...pe)}}function me(Te){y.forEach(pe=>{pe.setLogLevel(Te)})}function Ue(Te,pe){for(const De of y){let Fe=null;pe&&pe.level&&(Fe=Y[pe.level]),De.userLogHandler=null===Te?null:(je,Be,...Xe)=>{const Se=Xe.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Be>=(null!=Fe?Fe:je.logLevel)&&Te({level:g[Be].toLowerCase(),message:Se,args:Xe,type:je.name})}}}},2879:(on,ot,k)=>{"use strict";k.d(ot,{dr:()=>ci,YG:()=>rn,wI:()=>er,W2:()=>bi,IJ:()=>Gt,W4:()=>En,zq:()=>An,jY:()=>ur,gu:()=>Ze,Xz:()=>Ve,pK:()=>he,Ie:()=>dt,Q$:()=>Yt,uN:()=>is,d8:()=>di,jP:()=>_o,Nd:()=>bn,PQ:()=>Br,Pc:()=>bo,r4:()=>Pi,Fo:()=>Ps,j9:()=>Cn,yF:()=>wo});var y=k(5861),g=k(4650),Y=k(4006),ae=k(655),xe=k(4968),Pe=k(7579),Ce=k(1135),me=k(6159),Fe=(k(9613),k(5158),k(3175),k(1898),k(6406)),je=k(3577),Be=k(3982),Xe=k(2998),_e=(k(3354),k(1397)),ze=(k(3457),k(4349),k(9816)),q=k(9300),pt=k(3900),Ke=k(1884),ne=k(6895);const Me=Fe.i,Le=["*"];function He(C,Q){if(1&C&&g.GkF(0,1),2&C){const D=g.oxw();g.Q6J("ngTemplateOutlet",D.template)}}const Ge=C=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(C):"function"==typeof requestAnimationFrame?requestAnimationFrame(C):setTimeout(C);let _t=(()=>{class C{constructor(D,K){this.injector=D,this.el=K,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(D){this.el.nativeElement.value=this.lastValue=D,mt(this.el)}handleValueChange(D,K){D===this.el.nativeElement&&(K!==this.lastValue&&(this.lastValue=K,this.onChange(K)),mt(this.el))}_handleBlurEvent(D){D===this.el.nativeElement&&(this.onTouched(),mt(this.el))}registerOnChange(D){this.onChange=D}registerOnTouched(D){this.onTouched=D}setDisabledState(D){this.el.nativeElement.disabled=D}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let D;try{D=this.injector.get(Y.a5)}catch{}if(!D)return;D.statusChanges&&(this.statusChanges=D.statusChanges.subscribe(()=>mt(this.el)));const K=D.control;K&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Qt=>{if(typeof K[Qt]<"u"){const $n=K[Qt].bind(K);K[Qt]=(...Gn)=>{$n(...Gn),mt(this.el)}}})}}return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.zs3),g.Y36(g.SBq))},C.\u0275dir=g.lG2({type:C,hostBindings:function(D,K){1&D&&g.NdJ("ionBlur",function(Qt){return K._handleBlurEvent(Qt.target)})}}),C})();const mt=C=>{Ge(()=>{const Q=C.nativeElement,D=null!=Q.value&&Q.value.toString().length>0,K=Ct(Q);jt(Q,K);const Ie=Q.closest("ion-item");Ie&&jt(Ie,D?[...K,"item-has-value"]:K)})},Ct=C=>{const Q=C.classList,D=[];for(let K=0;K<Q.length;K++){const Ie=Q.item(K);null!==Ie&&_n(Ie,"ng-")&&D.push(`ion-${Ie.substring(3)}`)}return D},jt=(C,Q)=>{const D=C.classList;D.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),D.add(...Q)},_n=(C,Q)=>C.substring(0,Q.length)===Q;let Cn=(()=>{class C extends _t{constructor(D,K){super(D,K)}_handleInputEvent(D){this.handleValueChange(D,D.value)}}return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.zs3),g.Y36(g.SBq))},C.\u0275dir=g.lG2({type:C,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(D,K){1&D&&g.NdJ("ionInput",function(Qt){return K._handleInputEvent(Qt.target)})},features:[g._Bn([{provide:Y.JU,useExisting:C,multi:!0}]),g.qOj]}),C})();const Fn=(C,Q)=>{const D=C.prototype;Q.forEach(K=>{Object.defineProperty(D,K,{get(){return this.el[K]},set(Ie){this.z.runOutsideAngular(()=>this.el[K]=Ie)}})})},gn=(C,Q)=>{const D=C.prototype;Q.forEach(K=>{D[K]=function(){const Ie=arguments;return this.z.runOutsideAngular(()=>this.el[K].apply(this.el,Ie))}})},nn=(C,Q,D)=>{D.forEach(K=>C[K]=(0,xe.R)(Q,K))};function Ut(C){return function(D){const{defineCustomElementFn:K,inputs:Ie,methods:Qt}=C;return void 0!==K&&K(),Ie&&Fn(D,Ie),Qt&&gn(D,Qt),D}}let ci=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-app"]],ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({})],C),C})(),rn=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement,nn(this,this.el,["ionFocus","ionBlur"])}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],C),C})(),er=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],C),C})(),bi=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement,nn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],C),C})(),Gt=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],C),C})(),En=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement,nn(this,this.el,["ionFocus","ionBlur"])}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],C),C})(),An=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-fab-list"]],inputs:{activated:"activated",side:"side"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["activated","side"]})],C),C})(),ur=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["fixed"]})],C),C})(),Ze=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],C),C})(),Ve=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement,nn(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["alt","src"]})],C),C})(),he=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement,nn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],C),C})(),dt=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],C),C})(),Yt=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["color","mode","position"]})],C),C})(),is=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["color","mode"]})],C),C})(),bn=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-row"]],ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({})],C),C})(),Br=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:Le,decls:1,vars:0,template:function(D,K){1&D&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["color","duration","name","paused"]})],C),C})(),pn=(()=>{class C{get(D,K){const Ie=Qn();return Ie?Ie.get(D,K):null}getBoolean(D,K){const Ie=Qn();return!!Ie&&Ie.getBoolean(D,K)}getNumber(D,K){const Ie=Qn();return Ie?Ie.getNumber(D,K):0}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const qn=new g.OlP("USERCONFIG"),Qn=()=>{if(typeof window<"u"){const C=window.Ionic;if(null!=C&&C.config)return C.config}return null};let Je=(()=>{class C{constructor(D,K){this.doc=D,this.backButton=new Pe.x,this.keyboardDidShow=new Pe.x,this.keyboardDidHide=new Pe.x,this.pause=new Pe.x,this.resume=new Pe.x,this.resize=new Pe.x,K.run(()=>{var Ie;let Qt;this.win=D.defaultView,this.backButton.subscribeWithPriority=function($n,Gn){return this.subscribe(Dr=>Dr.register($n,Pn=>K.run(()=>Gn(Pn))))},wt(this.pause,D,"pause"),wt(this.resume,D,"resume"),wt(this.backButton,D,"ionBackButton"),wt(this.resize,this.win,"resize"),wt(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),wt(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise($n=>{Qt=$n}),null!==(Ie=this.win)&&void 0!==Ie&&Ie.cordova?D.addEventListener("deviceready",()=>{Qt("cordova")},{once:!0}):Qt("dom")})}is(D){return(0,Fe.a)(this.win,D)}platforms(){return(0,Fe.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(D){return at(this.win.location.href,D)}isLandscape(){return!this.isPortrait()}isPortrait(){var D,K;return null===(D=(K=this.win).matchMedia)||void 0===D?void 0:D.call(K,"(orientation: portrait)").matches}testUserAgent(D){const K=this.win.navigator;return!!(null!=K&&K.userAgent&&K.userAgent.indexOf(D)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return C.\u0275fac=function(D){return new(D||C)(g.LFG(ne.K0),g.LFG(g.R0b))},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const at=(C,Q)=>{Q=Q.replace(/[[\]\\]/g,"\\$&");const K=new RegExp("[\\?&]"+Q+"=([^&#]*)").exec(C);return K?decodeURIComponent(K[1].replace(/\+/g," ")):null},wt=(C,Q,D)=>{Q&&Q.addEventListener(D,K=>{C.next(null!=K?K.detail:void 0)})};let Vt=(()=>{class C{constructor(D,K,Ie,Qt){this.location=K,this.serializer=Ie,this.router=Qt,this.direction=Bn,this.animated=mr,this.guessDirection="forward",this.lastNavId=-1,Qt&&Qt.events.subscribe($n=>{if($n instanceof me.OD){const Gn=$n.restoredState?$n.restoredState.navigationId:$n.id;this.guessDirection=Gn<this.lastNavId?"back":"forward",this.guessAnimation=$n.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?$n.id:Gn}}),D.backButton.subscribeWithPriority(0,$n=>{this.pop(),$n()})}navigateForward(D,K={}){return this.setDirection("forward",K.animated,K.animationDirection,K.animation),this.navigate(D,K)}navigateBack(D,K={}){return this.setDirection("back",K.animated,K.animationDirection,K.animation),this.navigate(D,K)}navigateRoot(D,K={}){return this.setDirection("root",K.animated,K.animationDirection,K.animation),this.navigate(D,K)}back(D={animated:!0,animationDirection:"back"}){return this.setDirection("back",D.animated,D.animationDirection,D.animation),this.location.back()}pop(){var D=this;return(0,y.Z)(function*(){let K=D.topOutlet;for(;K&&!(yield K.pop());)K=K.parentOutlet})()}setDirection(D,K,Ie,Qt){this.direction=D,this.animated=an(D,K,Ie),this.animationBuilder=Qt}setTopOutlet(D){this.topOutlet=D}consumeTransition(){let K,D="root";const Ie=this.animationBuilder;return"auto"===this.direction?(D=this.guessDirection,K=this.guessAnimation):(K=this.animated,D=this.direction),this.direction=Bn,this.animated=mr,this.animationBuilder=void 0,{direction:D,animation:K,animationBuilder:Ie}}navigate(D,K){if(Array.isArray(D))return this.router.navigate(D,K);{const Ie=this.serializer.parse(D.toString());return void 0!==K.queryParams&&(Ie.queryParams={...K.queryParams}),void 0!==K.fragment&&(Ie.fragment=K.fragment),this.router.navigateByUrl(Ie,K)}}}return C.\u0275fac=function(D){return new(D||C)(g.LFG(Je),g.LFG(ne.Ye),g.LFG(me.Hx),g.LFG(me.F0,8))},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const an=(C,Q,D)=>{if(!1!==Q){if(void 0!==D)return D;if("forward"===C||"back"===C)return C;if("root"===C&&!0===Q)return"forward"}},Bn="auto",mr=void 0;class ir{constructor(Q={}){this.data=Q}get(Q){return this.data[Q]}}let kr=(()=>{class C{constructor(){this.zone=(0,g.f3M)(g.R0b),this.applicationRef=(0,g.f3M)(g.z2F)}create(D,K,Ie){return new $r(D,K,this.applicationRef,this.zone,Ie)}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac}),C})();class $r{constructor(Q,D,K,Ie,Qt){this.environmentInjector=Q,this.injector=D,this.applicationRef=K,this.zone=Ie,this.elementReferenceKey=Qt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(Q,D,K,Ie){return this.zone.run(()=>new Promise(Qt=>{const $n={...K};void 0!==this.elementReferenceKey&&($n[this.elementReferenceKey]=Q),Qt(Ei(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,Q,D,$n,Ie))}))}removeViewFromDom(Q,D){return this.zone.run(()=>new Promise(K=>{const Ie=this.elRefMap.get(D);if(Ie){Ie.destroy(),this.elRefMap.delete(D);const Qt=this.elEventsMap.get(D);Qt&&(Qt(),this.elEventsMap.delete(D))}K()}))}}const Ei=(C,Q,D,K,Ie,Qt,$n,Gn,Dr,Pn)=>{const Yi=g.zs3.create({providers:Yr(Dr),parent:D}),z=(0,g.LMc)(Gn,{environmentInjector:Q,elementInjector:Yi}),j=z.instance,F=z.location.nativeElement;if(Dr&&Object.assign(j,Dr),Pn)for(const Ot of Pn)F.classList.add(Ot);const ue=js(C,j,F);return $n.appendChild(F),K.attachView(z.hostView),Ie.set(F,z),Qt.set(F,ue),F},us=[Xe.L,Xe.a,Xe.b,Xe.c,Xe.d],js=(C,Q,D)=>C.run(()=>{const K=us.filter(Ie=>"function"==typeof Q[Ie]).map(Ie=>{const Qt=$n=>Q[Ie]($n.detail);return D.addEventListener(Ie,Qt),()=>D.removeEventListener(Ie,Qt)});return()=>K.forEach(Ie=>Ie())}),Ys=new g.OlP("NavParamsToken"),Yr=C=>[{provide:Ys,useValue:C},{provide:ir,useFactory:zo,deps:[Ys]}],zo=C=>new ir(C),ss=(C,Q)=>((C=C.filter(D=>D.stackId!==Q.stackId)).push(Q),C),yo=(C,Q)=>{const D=C.createUrlTree(["."],{relativeTo:Q});return C.serializeUrl(D)},ia=(C,Q)=>{if(!C)return;const D=ro(Q);for(let K=0;K<D.length;K++){if(K>=C.length)return D[K];if(D[K]!==C[K])return}},ro=C=>C.split("/").map(Q=>Q.trim()).filter(Q=>""!==Q),Hs=C=>{C&&(C.ref.destroy(),C.unlistenEvents())};class sa{constructor(Q,D,K,Ie,Qt,$n){this.containerEl=D,this.router=K,this.navCtrl=Ie,this.zone=Qt,this.location=$n,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==Q?ro(Q):void 0}createView(Q,D){var K;const Ie=yo(this.router,D),Qt=null==Q||null===(K=Q.location)||void 0===K?void 0:K.nativeElement,$n=js(this.zone,Q.instance,Qt);return{id:this.nextId++,stackId:ia(this.tabsPrefix,Ie),unlistenEvents:$n,element:Qt,ref:Q,url:Ie}}getExistingView(Q){const D=yo(this.router,Q),K=this.views.find(Ie=>Ie.url===D);return K&&K.ref.changeDetectorRef.reattach(),K}setActive(Q){var D,K,Ie;const Qt=this.navCtrl.consumeTransition();let{direction:$n,animation:Gn,animationBuilder:Dr}=Qt;const Pn=this.activeView,Yi=((C,Q)=>!Q||C.stackId!==Q.stackId)(Q,Pn);Yi&&($n="back",Gn=void 0);const z=this.views.slice();let j;const F=this.router;F.getCurrentNavigation?j=F.getCurrentNavigation():null!==(D=F.navigations)&&void 0!==D&&D.value&&(j=F.navigations.value),null!==(K=j)&&void 0!==K&&null!==(Ie=K.extras)&&void 0!==Ie&&Ie.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ue=this.views.includes(Q),Ot=this.insertView(Q,$n);ue||Q.ref.changeDetectorRef.detectChanges();const Nn=Q.animationBuilder;return void 0===Dr&&"back"===$n&&!Yi&&void 0!==Nn&&(Dr=Nn),Pn&&(Pn.animationBuilder=Dr),this.zone.runOutsideAngular(()=>this.wait(()=>(Pn&&Pn.ref.changeDetectorRef.detach(),Q.ref.changeDetectorRef.reattach(),this.transition(Q,Pn,Gn,this.canGoBack(1),!1,Dr).then(()=>Zs(Q,Ot,z,this.location,this.zone)).then(()=>({enteringView:Q,direction:$n,animation:Gn,tabSwitch:Yi})))))}canGoBack(Q,D=this.getActiveStackId()){return this.getStack(D).length>Q}pop(Q,D=this.getActiveStackId()){return this.zone.run(()=>{const K=this.getStack(D);if(K.length<=Q)return Promise.resolve(!1);const Ie=K[K.length-Q-1];let Qt=Ie.url;const $n=Ie.savedData;if($n){var Gn,Dr;const Yi=$n.get("primary");null!=Yi&&null!==(Gn=Yi.route)&&void 0!==Gn&&null!==(Dr=Gn._routerState)&&void 0!==Dr&&Dr.snapshot.url&&(Qt=Yi.route._routerState.snapshot.url)}const{animationBuilder:Pn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Qt,{...Ie.savedExtras,animation:Pn}).then(()=>!0)})}startBackTransition(){const Q=this.activeView;if(Q){const D=this.getStack(Q.stackId),K=D[D.length-2],Ie=K.animationBuilder;return this.wait(()=>this.transition(K,Q,"back",this.canGoBack(2),!0,Ie))}return Promise.resolve()}endBackTransition(Q){Q?(this.skipTransition=!0,this.pop(1)):this.activeView&&ds(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(Q){const D=this.getStack(Q);return D.length>0?D[D.length-1]:void 0}getRootUrl(Q){const D=this.getStack(Q);return D.length>0?D[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Hs),this.activeView=void 0,this.views=[]}getStack(Q){return this.views.filter(D=>D.stackId===Q)}insertView(Q,D){return this.activeView=Q,this.views=((C,Q,D)=>"root"===D?ss(C,Q):"forward"===D?((C,Q)=>(C.indexOf(Q)>=0?C=C.filter(K=>K.stackId!==Q.stackId||K.id<=Q.id):C.push(Q),C))(C,Q):((C,Q)=>C.indexOf(Q)>=0?C.filter(K=>K.stackId!==Q.stackId||K.id<=Q.id):ss(C,Q))(C,Q))(this.views,Q,D),this.views.slice()}transition(Q,D,K,Ie,Qt,$n){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(D===Q)return Promise.resolve(!1);const Gn=Q?Q.element:void 0,Dr=D?D.element:void 0,Pn=this.containerEl;return Gn&&Gn!==Dr&&(Gn.classList.add("ion-page"),Gn.classList.add("ion-page-invisible"),Gn.parentElement!==Pn&&Pn.appendChild(Gn),Pn.commit)?Pn.commit(Gn,Dr,{duration:void 0===K?0:void 0,direction:K,showGoBack:Ie,progressAnimation:Qt,animationBuilder:$n}):Promise.resolve(!1)}wait(Q){var D=this;return(0,y.Z)(function*(){void 0!==D.runningTask&&(yield D.runningTask,D.runningTask=void 0);const K=D.runningTask=Q();return K.finally(()=>D.runningTask=void 0),K})()}}const Zs=(C,Q,D,K,Ie)=>"function"==typeof requestAnimationFrame?new Promise(Qt=>{requestAnimationFrame(()=>{ds(C,Q,D,K,Ie),Qt()})}):Promise.resolve(),ds=(C,Q,D,K,Ie)=>{Ie.run(()=>D.filter(Qt=>!Q.includes(Qt)).forEach(Hs)),Q.forEach(Qt=>{const Gn=K.path().split("?")[0].split("#")[0];if(Qt!==C&&Qt.url!==Gn){const Dr=Qt.element;Dr.setAttribute("aria-hidden","true"),Dr.classList.add("ion-page-hidden"),Qt.ref.changeDetectorRef.detach()}})};let _o=(()=>{class C{constructor(D,K,Ie,Qt,$n,Gn,Dr,Pn){this.parentOutlet=Pn,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Ce.X(null),this.stackEvents=new g.vpe,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.parentContexts=(0,g.f3M)(me.y6),this.location=(0,g.f3M)(g.s_b),this.environmentInjector=(0,g.f3M)(g.lqb),this.config=(0,g.f3M)(pn),this.navCtrl=(0,g.f3M)(Vt),this.nativeEl=Qt.nativeElement,this.name=D||me.eC,this.tabsPrefix="true"===K?yo($n,Dr):void 0,this.stackCtrl=new sa(this.tabsPrefix,this.nativeEl,$n,this.navCtrl,Gn,Ie),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(D){this.nativeEl.animation=D}set animated(D){this.nativeEl.animated=D}set swipeGesture(D){this._swipeGesture=D,this.nativeEl.swipeHandler=D?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:K=>this.stackCtrl.endBackTransition(K)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const D=this.getContext();null!=D&&D.route&&this.activateWith(D.route,D.injector)}new Promise(D=>(0,je.c)(this.nativeEl,D)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(D,K){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const K=this.getContext();this.activatedView.savedData=new Map(K.children.contexts);const Ie=this.activatedView.savedData.get("primary");if(Ie&&K.route&&(Ie.route={...K.route}),this.activatedView.savedExtras={},K.route){const Qt=K.route.snapshot;this.activatedView.savedExtras.queryParams=Qt.queryParams,this.activatedView.savedExtras.fragment=Qt.fragment}}const D=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,K){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;let Ie,Qt=this.stackCtrl.getExistingView(D);if(Qt){Ie=this.activated=Qt.ref;const Gn=Qt.savedData;Gn&&(this.getContext().children.contexts=Gn),this.updateActivatedRouteProxy(Ie.instance,D)}else{var $n;const Gn=D._futureSnapshot,Dr=this.parentContexts.getOrCreateContext(this.name).children,Pn=new Ce.X(null),Yi=this.createActivatedRouteProxy(Pn,D),z=new ga(Yi,Dr,this.location.injector),j=null!==($n=Gn.routeConfig.component)&&void 0!==$n?$n:Gn.component;Ie=this.activated=this.location.createComponent(j,{index:this.location.length,injector:z,environmentInjector:null!=K?K:this.environmentInjector}),Pn.next(Ie.instance),Qt=this.stackCtrl.createView(this.activated,D),this.proxyMap.set(Ie.instance,Yi),this.currentActivatedRoute$.next({component:Ie.instance,activatedRoute:D})}this.activatedView=Qt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Qt).then(Gn=>{this.activateEvents.emit(Ie.instance),this.stackEvents.emit(Gn)})}canGoBack(D=1,K){return this.stackCtrl.canGoBack(D,K)}pop(D=1,K){return this.stackCtrl.pop(D,K)}getLastUrl(D){const K=this.stackCtrl.getLastUrl(D);return K?K.url:void 0}getLastRouteView(D){return this.stackCtrl.getLastUrl(D)}getRootView(D){return this.stackCtrl.getRootUrl(D)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(D,K){const Ie=new me.gz;return Ie._futureSnapshot=K._futureSnapshot,Ie._routerState=K._routerState,Ie.snapshot=K.snapshot,Ie.outlet=K.outlet,Ie.component=K.component,Ie._paramMap=this.proxyObservable(D,"paramMap"),Ie._queryParamMap=this.proxyObservable(D,"queryParamMap"),Ie.url=this.proxyObservable(D,"url"),Ie.params=this.proxyObservable(D,"params"),Ie.queryParams=this.proxyObservable(D,"queryParams"),Ie.fragment=this.proxyObservable(D,"fragment"),Ie.data=this.proxyObservable(D,"data"),Ie}proxyObservable(D,K){return D.pipe((0,q.h)(Ie=>!!Ie),(0,pt.w)(Ie=>this.currentActivatedRoute$.pipe((0,q.h)(Qt=>null!==Qt&&Qt.component===Ie),(0,pt.w)(Qt=>Qt&&Qt.activatedRoute[K]),(0,Ke.x)())))}updateActivatedRouteProxy(D,K){const Ie=this.proxyMap.get(D);if(!Ie)throw new Error("Could not find activated route proxy for view");Ie._futureSnapshot=K._futureSnapshot,Ie._routerState=K._routerState,Ie.snapshot=K.snapshot,Ie.outlet=K.outlet,Ie.component=K.component,this.currentActivatedRoute$.next({component:D,activatedRoute:K})}}return C.\u0275fac=function(D){return new(D||C)(g.$8M("name"),g.$8M("tabs"),g.Y36(ne.Ye),g.Y36(g.SBq),g.Y36(me.F0),g.Y36(g.R0b),g.Y36(me.gz),g.Y36(C,12))},C.\u0275dir=g.lG2({type:C,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),C})();class ga{constructor(Q,D,K){this.route=Q,this.childContexts=D,this.parent=K}get(Q,D){return Q===me.gz?this.route:Q===me.y6?this.childContexts:this.parent.get(Q,D)}}let Ps=(()=>{class C{constructor(D,K,Ie,Qt,$n){this.locationStrategy=D,this.navCtrl=K,this.elementRef=Ie,this.router=Qt,this.routerLink=$n,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var D;if(null!==(D=this.routerLink)&&void 0!==D&&D.urlTree){const K=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=K}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return C.\u0275fac=function(D){return new(D||C)(g.Y36(ne.S$),g.Y36(Vt),g.Y36(g.SBq),g.Y36(me.F0),g.Y36(me.rH,8))},C.\u0275dir=g.lG2({type:C,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(D,K){1&D&&g.NdJ("click",function(){return K.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[g.TTD]}),C})(),di=(()=>{let C=class{constructor(D,K,Ie){this.z=Ie,this.isCmpOpen=!1,this.el=K.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,D.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,D.detectChanges()}),nn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}};return C.\u0275fac=function(D){return new(D||C)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},C.\u0275cmp=g.Xpm({type:C,selectors:[["ion-popover"]],contentQueries:function(D,K,Ie){if(1&D&&g.Suo(Ie,g.Rgc,5),2&D){let Qt;g.iGM(Qt=g.CRH())&&(K.template=Qt.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"},decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(D,K){1&D&&g.YNc(0,He,1,1,"ng-container",0),2&D&&g.Q6J("ngIf",K.isCmpOpen||K.keepContentsMounted)},dependencies:[ne.O5,ne.tP],encapsulation:2,changeDetection:0}),C=(0,ae.gn)([Ut({inputs:["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],C),C})();class Os{constructor(Q){this.ctrl=Q}create(Q){return this.ctrl.create(Q||{})}dismiss(Q,D,K){return this.ctrl.dismiss(Q,D,K)}getTop(){return this.ctrl.getTop()}}let ma=(()=>{class C extends Os{constructor(){super(_e.m),this.angularDelegate=(0,g.f3M)(kr),this.injector=(0,g.f3M)(g.zs3),this.environmentInjector=(0,g.f3M)(g.lqb)}create(D){return super.create({...D,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac}),C})(),Io=(()=>{class C extends Os{constructor(){super(_e.c),this.angularDelegate=(0,g.f3M)(kr),this.injector=(0,g.f3M)(g.zs3),this.environmentInjector=(0,g.f3M)(g.lqb)}create(D){return super.create({...D,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac}),C})(),wo=(()=>{class C extends Os{constructor(){super(_e.t)}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();class Pi{shouldDetach(Q){return!1}shouldAttach(Q){return!1}store(Q,D){}retrieve(Q){return null}shouldReuseRoute(Q,D){if(Q.routeConfig!==D.routeConfig)return!1;const K=Q.params,Ie=D.params,Qt=Object.keys(K),$n=Object.keys(Ie);if(Qt.length!==$n.length)return!1;for(const Gn of Qt)if(Ie[Gn]!==K[Gn])return!1;return!0}}const ys=(C,Q,D)=>()=>{if(Q.defaultView&&typeof window<"u"){(0,Be.s)({...C,_zoneGate:Qt=>D.run(Qt)});const Ie="__zone_symbol__addEventListener"in Q.body?"__zone_symbol__addEventListener":"addEventListener";return function nt(){var C=[];if(typeof window<"u"){var Q=window;(!Q.customElements||Q.Element&&(!Q.Element.prototype.closest||!Q.Element.prototype.matches||!Q.Element.prototype.remove||!Q.Element.prototype.getRootNode))&&C.push(k.e(6748).then(k.t.bind(k,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||Q.NodeList&&!Q.NodeList.prototype.forEach||!Q.fetch||!function(){try{var K=new URL("b","http://a");return K.pathname="c%20d","http://a/c%20d"===K.href&&K.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&C.push(k.e(2214).then(k.t.bind(k,4144,23)))}return Promise.all(C)}().then(()=>((C,Q)=>typeof window>"u"?Promise.resolve():(0,ze.p)().then(()=>(Me(),(0,ze.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),Q))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Ge,jmp:Qt=>D.runOutsideAngular(Qt),ael(Qt,$n,Gn,Dr){Qt[Ie]($n,Gn,Dr)},rel(Qt,$n,Gn,Dr){Qt.removeEventListener($n,Gn,Dr)}}))}};let bo=(()=>{class C{static forRoot(D){return{ngModule:C,providers:[{provide:qn,useValue:D},{provide:g.ip1,useFactory:ys,multi:!0,deps:[qn,ne.K0,g.R0b]}]}}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=g.oAB({type:C}),C.\u0275inj=g.cJS({providers:[kr,ma,Io],imports:[ne.ez]}),C})()},259:(on,ot,k)=>{"use strict";k.d(ot,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=k(9681);(0,y.registerVersion)("firebase","9.20.0","app")},9260:(on,ot,k)=>{"use strict";k.d(ot,{Z:()=>y.Z});var y=k(3942);y.Z.registerVersion("firebase","9.20.0","app-compat")},9568:(on,ot,k)=>{"use strict";k.r(ot);var y=k(5861),g=k(3942),Y=k(8277),ae=k(2090),Ce=(k(9681),k(1877),k(4859));function me(){return window}const Ue=2e3;function pe(){return pe=(0,y.Z)(function*(fe,ve,he){var dt;const{BuildInfo:Oe}=me();(0,Y.as)(ve.sessionId,"AuthEvent did not contain a session ID");const $e=yield function _e(fe){return oe.apply(this,arguments)}(ve.sessionId),we={};return(0,Y.at)()?we.ibi=Oe.packageName:(0,Y.au)()?we.apn=Oe.packageName:(0,Y.av)(fe,"operation-not-supported-in-this-environment"),Oe.displayName&&(we.appDisplayName=Oe.displayName),we.sessionId=$e,(0,Y.aw)(fe,he,ve.type,void 0,null!==(dt=ve.eventId)&&void 0!==dt?dt:void 0,we)}),pe.apply(this,arguments)}function Fe(){return(Fe=(0,y.Z)(function*(fe){const{BuildInfo:ve}=me(),he={};(0,Y.at)()?he.iosBundleId=ve.packageName:(0,Y.au)()?he.androidPackageName=ve.packageName:(0,Y.av)(fe,"operation-not-supported-in-this-environment"),yield(0,Y.ax)(fe,he)})).apply(this,arguments)}function Xe(){return(Xe=(0,y.Z)(function*(fe,ve,he){const{cordova:dt}=me();let Oe=()=>{};try{yield new Promise(($e,we)=>{let rt=null;function Mt(){var fn;$e();const dr=null===(fn=dt.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof dr&&dr(),"function"==typeof(null==he?void 0:he.close)&&he.close()}function Yt(){rt||(rt=window.setTimeout(()=>{we((0,Y.az)(fe,"redirect-cancelled-by-user"))},Ue))}function In(){"visible"===(null==document?void 0:document.visibilityState)&&Yt()}ve.addPassiveListener(Mt),document.addEventListener("resume",Yt,!1),(0,Y.au)()&&document.addEventListener("visibilitychange",In,!1),Oe=()=>{ve.removePassiveListener(Mt),document.removeEventListener("resume",Yt,!1),document.removeEventListener("visibilitychange",In,!1),rt&&window.clearTimeout(rt)}})}finally{Oe()}})).apply(this,arguments)}function oe(){return(oe=(0,y.Z)(function*(fe){const ve=function lt(fe){if((0,Y.as)(/[0-9a-zA-Z]+/.test(fe),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(fe);const ve=new ArrayBuffer(fe.length),he=new Uint8Array(ve);for(let dt=0;dt<fe.length;dt++)he[dt]=fe.charCodeAt(dt);return he}(fe),he=yield crypto.subtle.digest("SHA-256",ve);return Array.from(new Uint8Array(he)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ze=20;class Ae extends Y.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ve=>{this.resolveInialized=ve})}addPassiveListener(ve){this.passiveListeners.add(ve)}removePassiveListener(ve){this.passiveListeners.delete(ve)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ve){return this.resolveInialized(),this.passiveListeners.forEach(he=>he(ve)),super.onEvent(ve)}initialized(){var ve=this;return(0,y.Z)(function*(){yield ve.initPromise})()}}function Ke(fe){return ne.apply(this,arguments)}function ne(){return(ne=(0,y.Z)(function*(fe){const ve=yield et()._get(vt(fe));return ve&&(yield et()._remove(vt(fe))),ve})).apply(this,arguments)}function Me(){const fe=[],ve="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let he=0;he<ze;he++){const dt=Math.floor(Math.random()*ve.length);fe.push(ve.charAt(dt))}return fe.join("")}function et(){return(0,Y.aC)(Y.b)}function vt(fe){return(0,Y.aD)("authEvent",fe.config.apiKey,fe.name)}function bt(fe){if(null==fe||!fe.includes("?"))return{};const[ve,...he]=fe.split("?");return(0,ae.zd)(he.join("?"))}const He=class We{constructor(){this._redirectPersistence=Y.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Y.aE,this._overrideRedirectResult=Y.aF}_initialize(ve){var he=this;return(0,y.Z)(function*(){const dt=ve._key();let Oe=he.eventManagers.get(dt);return Oe||(Oe=new Ae(ve),he.eventManagers.set(dt,Oe),he.attachCallbackListeners(ve,Oe)),Oe})()}_openPopup(ve){(0,Y.av)(ve,"operation-not-supported-in-this-environment")}_openRedirect(ve,he,dt,Oe){var $e=this;return(0,y.Z)(function*(){!function Se(fe){var ve,he,dt,Oe,$e,we,rt,Mt,Yt,In;const fn=me();(0,Y.aA)("function"==typeof(null===(ve=null==fn?void 0:fn.universalLinks)||void 0===ve?void 0:ve.subscribe),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,Y.aA)(typeof(null===(he=null==fn?void 0:fn.BuildInfo)||void 0===he?void 0:he.packageName)<"u",fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,Y.aA)("function"==typeof(null===($e=null===(Oe=null===(dt=null==fn?void 0:fn.cordova)||void 0===dt?void 0:dt.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===$e?void 0:$e.openUrl),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Y.aA)("function"==typeof(null===(Mt=null===(rt=null===(we=null==fn?void 0:fn.cordova)||void 0===we?void 0:we.plugins)||void 0===rt?void 0:rt.browsertab)||void 0===Mt?void 0:Mt.isAvailable),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Y.aA)("function"==typeof(null===(In=null===(Yt=null==fn?void 0:fn.cordova)||void 0===Yt?void 0:Yt.InAppBrowser)||void 0===In?void 0:In.open),fe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ve);const we=yield $e._initialize(ve);yield we.initialized(),we.resetRedirect(),(0,Y.aG)(),yield $e._originValidation(ve);const rt=function q(fe,ve,he=null){return{type:ve,eventId:he,urlResponse:null,sessionId:Me(),postBody:null,tenantId:fe.tenantId,error:(0,Y.az)(fe,"no-auth-event")}}(ve,dt,Oe);yield function pt(fe,ve){return et()._set(vt(fe),ve)}(ve,rt);const Mt=yield function Te(fe,ve,he){return pe.apply(this,arguments)}(ve,rt,he),Yt=yield function je(fe){const{cordova:ve}=me();return new Promise(he=>{ve.plugins.browsertab.isAvailable(dt=>{let Oe=null;dt?ve.plugins.browsertab.openUrl(fe):Oe=ve.InAppBrowser.open(fe,(0,Y.ay)()?"_blank":"_system","location=yes"),he(Oe)})})}(Mt);return function Be(fe,ve,he){return Xe.apply(this,arguments)}(ve,we,Yt)})()}_isIframeWebStorageSupported(ve,he){throw new Error("Method not implemented.")}_originValidation(ve){const he=ve._key();return this.originValidationPromises[he]||(this.originValidationPromises[he]=function De(fe){return Fe.apply(this,arguments)}(ve)),this.originValidationPromises[he]}attachCallbackListeners(ve,he){const{universalLinks:dt,handleOpenURL:Oe,BuildInfo:$e}=me(),we=setTimeout((0,y.Z)(function*(){yield Ke(ve),he.onEvent(Ge())}),500),rt=function(){var In=(0,y.Z)(function*(fn){clearTimeout(we);const dr=yield Ke(ve);let Jr=null;dr&&null!=fn&&fn.url&&(Jr=function nt(fe,ve){var he,dt;const Oe=function ut(fe){const ve=bt(fe),he=ve.link?decodeURIComponent(ve.link):void 0,dt=bt(he).link,Oe=ve.deep_link_id?decodeURIComponent(ve.deep_link_id):void 0;return bt(Oe).link||Oe||dt||he||fe}(ve);if(Oe.includes("/__/auth/callback")){const $e=bt(Oe),we=$e.firebaseError?function Le(fe){try{return JSON.parse(fe)}catch{return null}}(decodeURIComponent($e.firebaseError)):null,rt=null===(dt=null===(he=null==we?void 0:we.code)||void 0===he?void 0:he.split("auth/"))||void 0===dt?void 0:dt[1],Mt=rt?(0,Y.az)(rt):null;return Mt?{type:fe.type,eventId:fe.eventId,tenantId:fe.tenantId,error:Mt,urlResponse:null,sessionId:null,postBody:null}:{type:fe.type,eventId:fe.eventId,tenantId:fe.tenantId,sessionId:fe.sessionId,urlResponse:Oe,postBody:null}}return null}(dr,fn.url)),he.onEvent(Jr||Ge())});return function(dr){return In.apply(this,arguments)}}();typeof dt<"u"&&"function"==typeof dt.subscribe&&dt.subscribe(null,rt);const Mt=Oe,Yt=`${$e.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var In=(0,y.Z)(function*(fn){if(fn.toLowerCase().startsWith(Yt)&&rt({url:fn}),"function"==typeof Mt)try{Mt(fn)}catch(dr){console.error(dr)}});return function(fn){return In.apply(this,arguments)}}()}};function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,Y.az)("no-auth-event")}}const jt=1e3;function _n(){var fe;return(null===(fe=null==self?void 0:self.location)||void 0===fe?void 0:fe.protocol)||null}function ct(fe=(0,ae.z$)()){return!("file:"!==_n()&&"ionic:"!==_n()&&"capacitor:"!==_n()||!fe.toLowerCase().match(/iphone|ipad|ipod|android/))}function gn(){try{const fe=self.localStorage,ve=Y.aL();if(fe)return fe.setItem(ve,"1"),fe.removeItem(ve),!function Fn(fe=(0,ae.z$)()){return function Jt(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Cn(fe=(0,ae.z$)()){return/Edge\/\d+/.test(fe)}(fe)}()||(0,ae.hl)()}catch{return nn()&&(0,ae.hl)()}return!1}function nn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vn(){return(function Tt(){return"http:"===_n()||"https:"===_n()}()||(0,ae.ru)()||ct())&&!function Rt(){return(0,ae.b$)()||(0,ae.UG)()}()&&gn()&&!nn()}function Ut(){return ct()&&typeof document<"u"}function Hn(){return(Hn=(0,y.Z)(function*(){return!!Ut()&&new Promise(fe=>{const ve=setTimeout(()=>{fe(!1)},jt);document.addEventListener("deviceready",()=>{clearTimeout(ve),fe(!0)})})})).apply(this,arguments)}const or={LOCAL:"local",NONE:"none",SESSION:"session"},ci=Y.aA,Ir="persistence";function Gr(fe){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,y.Z)(function*(fe){yield fe._initializationPromise;const ve=Rn(),he=Y.aD(Ir,fe.config.apiKey,fe.name);ve&&ve.setItem(he,fe._getPersistence())})).apply(this,arguments)}function Rn(){var fe;try{return(null===(fe=function un(){return typeof window<"u"?window:null}())||void 0===fe?void 0:fe.sessionStorage)||null}catch{return null}}const rn=Y.aA;class xr{constructor(){this.browserResolver=Y.aC(Y.k),this.cordovaResolver=Y.aC(He),this.underlyingResolver=null,this._redirectPersistence=Y.a,this._completeRedirectFn=Y.aE,this._overrideRedirectResult=Y.aF}_initialize(ve){var he=this;return(0,y.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._initialize(ve)})()}_openPopup(ve,he,dt,Oe){var $e=this;return(0,y.Z)(function*(){return yield $e.selectUnderlyingResolver(),$e.assertedUnderlyingResolver._openPopup(ve,he,dt,Oe)})()}_openRedirect(ve,he,dt,Oe){var $e=this;return(0,y.Z)(function*(){return yield $e.selectUnderlyingResolver(),$e.assertedUnderlyingResolver._openRedirect(ve,he,dt,Oe)})()}_isIframeWebStorageSupported(ve,he){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ve,he)}_originValidation(ve){return this.assertedUnderlyingResolver._originValidation(ve)}get _shouldInitProactively(){return Ut()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ve=this;return(0,y.Z)(function*(){if(ve.underlyingResolver)return;const he=yield function nr(){return Hn.apply(this,arguments)}();ve.underlyingResolver=he?ve.cordovaResolver:ve.browserResolver})()}}function Lr(fe){return fe.unwrap()}function si(fe){return xi(fe)}function xi(fe){const{_tokenResponse:ve}=fe instanceof ae.ZR?fe.customData:fe;if(!ve)return null;if(!(fe instanceof ae.ZR)&&"temporaryProof"in ve&&"phoneNumber"in ve)return Y.P.credentialFromResult(fe);const he=ve.providerId;if(!he||he===Y.p.PASSWORD)return null;let dt;switch(he){case Y.p.GOOGLE:dt=Y.V;break;case Y.p.FACEBOOK:dt=Y.U;break;case Y.p.GITHUB:dt=Y.W;break;case Y.p.TWITTER:dt=Y.Z;break;default:const{oauthIdToken:Oe,oauthAccessToken:$e,oauthTokenSecret:we,pendingToken:rt,nonce:Mt}=ve;return $e||we||Oe||rt?rt?he.startsWith("saml.")?Y.aO._create(he,rt):Y.L._fromParams({providerId:he,signInMethod:he,pendingToken:rt,idToken:Oe,accessToken:$e}):new Y.X(he).credential({idToken:Oe,accessToken:$e,rawNonce:Mt}):null}return fe instanceof ae.ZR?dt.credentialFromError(fe):dt.credentialFromResult(fe)}function Er(fe,ve){return ve.catch(he=>{throw he instanceof ae.ZR&&function Vr(fe,ve){var he;const dt=null===(he=ve.customData)||void 0===he?void 0:he._tokenResponse;if("auth/multi-factor-auth-required"===(null==ve?void 0:ve.code))ve.resolver=new bi(fe,Y.aq(fe,ve));else if(dt){const Oe=xi(ve),$e=ve;Oe&&($e.credential=Oe,$e.tenantId=dt.tenantId||void 0,$e.email=dt.email||void 0,$e.phoneNumber=dt.phoneNumber||void 0)}}(fe,he),he}).then(he=>{const Oe=he.user;return{operationType:he.operationType,credential:si(he),additionalUserInfo:Y.ao(he),user:Xn.getOrCreate(Oe)}})}function Zr(fe,ve){return er.apply(this,arguments)}function er(){return(er=(0,y.Z)(function*(fe,ve){const he=yield ve;return{verificationId:he.verificationId,confirm:dt=>Er(fe,he.confirm(dt))}})).apply(this,arguments)}class bi{constructor(ve,he){this.resolver=he,this.auth=function cr(fe){return fe.wrapped()}(ve)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ve){return Er(Lr(this.auth),this.resolver.resolveSignIn(ve))}}class Xn{constructor(ve){this._delegate=ve,this.multiFactor=Y.ar(ve)}static getOrCreate(ve){return Xn.USER_MAP.has(ve)||Xn.USER_MAP.set(ve,new Xn(ve)),Xn.USER_MAP.get(ve)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ve){return this._delegate.getIdTokenResult(ve)}getIdToken(ve){return this._delegate.getIdToken(ve)}linkAndRetrieveDataWithCredential(ve){return this.linkWithCredential(ve)}linkWithCredential(ve){var he=this;return(0,y.Z)(function*(){return Er(he.auth,Y.a0(he._delegate,ve))})()}linkWithPhoneNumber(ve,he){var dt=this;return(0,y.Z)(function*(){return Zr(dt.auth,Y.l(dt._delegate,ve,he))})()}linkWithPopup(ve){var he=this;return(0,y.Z)(function*(){return Er(he.auth,Y.d(he._delegate,ve,xr))})()}linkWithRedirect(ve){var he=this;return(0,y.Z)(function*(){return yield Gr(Y.aH(he.auth)),Y.g(he._delegate,ve,xr)})()}reauthenticateAndRetrieveDataWithCredential(ve){return this.reauthenticateWithCredential(ve)}reauthenticateWithCredential(ve){var he=this;return(0,y.Z)(function*(){return Er(he.auth,Y.a1(he._delegate,ve))})()}reauthenticateWithPhoneNumber(ve,he){return Zr(this.auth,Y.r(this._delegate,ve,he))}reauthenticateWithPopup(ve){return Er(this.auth,Y.e(this._delegate,ve,xr))}reauthenticateWithRedirect(ve){var he=this;return(0,y.Z)(function*(){return yield Gr(Y.aH(he.auth)),Y.h(he._delegate,ve,xr)})()}sendEmailVerification(ve){return Y.ae(this._delegate,ve)}unlink(ve){var he=this;return(0,y.Z)(function*(){return yield Y.an(he._delegate,ve),he})()}updateEmail(ve){return Y.aj(this._delegate,ve)}updatePassword(ve){return Y.ak(this._delegate,ve)}updatePhoneNumber(ve){return Y.u(this._delegate,ve)}updateProfile(ve){return Y.ai(this._delegate,ve)}verifyBeforeUpdateEmail(ve,he){return Y.af(this._delegate,ve,he)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xn.USER_MAP=new WeakMap;const mn=Y.aA;let Gt=(()=>{class fe{constructor(he,dt){if(this.app=he,dt.isInitialized())return this._delegate=dt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=he.options;mn(Oe,"invalid-api-key",{appName:he.name}),mn(Oe,"invalid-api-key",{appName:he.name});const $e=typeof window<"u"?xr:void 0;this._delegate=dt.initialize({options:{persistence:An(Oe,he.name),popupRedirectResolver:$e}}),this._delegate._updateErrorMap(Y.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(he){this._delegate.languageCode=he}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(he){this._delegate.tenantId=he}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(he,dt){Y.I(this._delegate,he,dt)}applyActionCode(he){return Y.a5(this._delegate,he)}checkActionCode(he){return Y.a6(this._delegate,he)}confirmPasswordReset(he,dt){return Y.a4(this._delegate,he,dt)}createUserWithEmailAndPassword(he,dt){var Oe=this;return(0,y.Z)(function*(){return Er(Oe._delegate,Y.a8(Oe._delegate,he,dt))})()}fetchProvidersForEmail(he){return this.fetchSignInMethodsForEmail(he)}fetchSignInMethodsForEmail(he){return Y.ad(this._delegate,he)}isSignInWithEmailLink(he){return Y.ab(this._delegate,he)}getRedirectResult(){var he=this;return(0,y.Z)(function*(){mn(vn(),he._delegate,"operation-not-supported-in-this-environment");const dt=yield Y.j(he._delegate,xr);return dt?Er(he._delegate,Promise.resolve(dt)):{credential:null,user:null}})()}addFrameworkForLogging(he){!function _t(fe,ve){(0,Y.aH)(fe)._logFramework(ve)}(this._delegate,he)}onAuthStateChanged(he,dt,Oe){const{next:$e,error:we,complete:rt}=En(he,dt,Oe);return this._delegate.onAuthStateChanged($e,we,rt)}onIdTokenChanged(he,dt,Oe){const{next:$e,error:we,complete:rt}=En(he,dt,Oe);return this._delegate.onIdTokenChanged($e,we,rt)}sendSignInLinkToEmail(he,dt){return Y.aa(this._delegate,he,dt)}sendPasswordResetEmail(he,dt){return Y.a3(this._delegate,he,dt||void 0)}setPersistence(he){var dt=this;return(0,y.Z)(function*(){let Oe;switch(function Ni(fe,ve){ci(Object.values(or).includes(ve),fe,"invalid-persistence-type"),(0,ae.b$)()?ci(ve!==or.SESSION,fe,"unsupported-persistence-type"):(0,ae.UG)()?ci(ve===or.NONE,fe,"unsupported-persistence-type"):nn()?ci(ve===or.NONE||ve===or.LOCAL&&(0,ae.hl)(),fe,"unsupported-persistence-type"):ci(ve===or.NONE||gn(),fe,"unsupported-persistence-type")}(dt._delegate,he),he){case or.SESSION:Oe=Y.a;break;case or.LOCAL:Oe=(yield Y.aC(Y.i)._isAvailable())?Y.i:Y.b;break;case or.NONE:Oe=Y.N;break;default:return Y.av("argument-error",{appName:dt._delegate.name})}return dt._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(he){return this.signInWithCredential(he)}signInAnonymously(){return Er(this._delegate,Y._(this._delegate))}signInWithCredential(he){return Er(this._delegate,Y.$(this._delegate,he))}signInWithCustomToken(he){return Er(this._delegate,Y.a2(this._delegate,he))}signInWithEmailAndPassword(he,dt){return Er(this._delegate,Y.a9(this._delegate,he,dt))}signInWithEmailLink(he,dt){return Er(this._delegate,Y.ac(this._delegate,he,dt))}signInWithPhoneNumber(he,dt){return Zr(this._delegate,Y.s(this._delegate,he,dt))}signInWithPopup(he){var dt=this;return(0,y.Z)(function*(){return mn(vn(),dt._delegate,"operation-not-supported-in-this-environment"),Er(dt._delegate,Y.c(dt._delegate,he,xr))})()}signInWithRedirect(he){var dt=this;return(0,y.Z)(function*(){return mn(vn(),dt._delegate,"operation-not-supported-in-this-environment"),yield Gr(dt._delegate),Y.f(dt._delegate,he,xr)})()}updateCurrentUser(he){return this._delegate.updateCurrentUser(he)}verifyPasswordResetCode(he){return Y.a7(this._delegate,he)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return fe.Persistence=or,fe})();function En(fe,ve,he){let dt=fe;"function"!=typeof fe&&({next:dt,error:ve,complete:he}=fe);const Oe=dt;return{next:we=>Oe(we&&Xn.getOrCreate(we)),error:ve,complete:he}}function An(fe,ve){const he=function fr(fe,ve){const he=Rn();if(!he)return[];const dt=Y.aD(Ir,fe,ve);switch(he.getItem(dt)){case or.NONE:return[Y.N];case or.LOCAL:return[Y.i,Y.a];case or.SESSION:return[Y.a];default:return[]}}(fe,ve);if(typeof self<"u"&&!he.includes(Y.i)&&he.push(Y.i),typeof window<"u")for(const dt of[Y.b,Y.a])he.includes(dt)||he.push(dt);return he.includes(Y.N)||he.push(Y.N),he}class zn{constructor(){this.providerId="phone",this._delegate=new Y.P(Lr(g.Z.auth()))}static credential(ve,he){return Y.P.credential(ve,he)}verifyPhoneNumber(ve,he){return this._delegate.verifyPhoneNumber(ve,he)}unwrap(){return this._delegate}}zn.PHONE_SIGN_IN_METHOD=Y.P.PHONE_SIGN_IN_METHOD,zn.PROVIDER_ID=Y.P.PROVIDER_ID;const ur=Y.aA;class Pr{constructor(ve,he,dt=g.Z.app()){var Oe;ur(null===(Oe=dt.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:dt.name}),this._delegate=new Y.R(ve,he,dt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ve(fe){fe.INTERNAL.registerComponent(new Ce.wA("auth-compat",ve=>{const he=ve.getProvider("app-compat").getImmediate(),dt=ve.getProvider("auth");return new Gt(he,dt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y.A.EMAIL_SIGNIN,PASSWORD_RESET:Y.A.PASSWORD_RESET,RECOVER_EMAIL:Y.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y.A.VERIFY_EMAIL}},EmailAuthProvider:Y.Q,FacebookAuthProvider:Y.U,GithubAuthProvider:Y.W,GoogleAuthProvider:Y.V,OAuthProvider:Y.X,SAMLAuthProvider:Y.Y,PhoneAuthProvider:zn,PhoneMultiFactorGenerator:Y.m,RecaptchaVerifier:Pr,TwitterAuthProvider:Y.Z,Auth:Gt,AuthCredential:Y.J,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),fe.registerVersion("@firebase/auth-compat","0.4.0")}(g.Z)},8766:(on,ot,k)=>{"use strict";k.d(ot,{Lj:()=>ze,X3:()=>lt});var y=k(5861);const g=(ne,nt)=>nt.some(Me=>ne instanceof Me);let Y,ae;const Ce=new WeakMap,me=new WeakMap,Ue=new WeakMap,Te=new WeakMap,pe=new WeakMap;let je={get(ne,nt,Me){if(ne instanceof IDBTransaction){if("done"===nt)return me.get(ne);if("objectStoreNames"===nt)return ne.objectStoreNames||Ue.get(ne);if("store"===nt)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return _e(ne[nt])},set:(ne,nt,Me)=>(ne[nt]=Me,!0),has:(ne,nt)=>ne instanceof IDBTransaction&&("done"===nt||"store"===nt)||nt in ne};function Se(ne){return"function"==typeof ne?function Xe(ne){return ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ne)?function(...nt){return ne.apply(oe(this),nt),_e(Ce.get(this))}:function(...nt){return _e(ne.apply(oe(this),nt))}:function(nt,...Me){const et=ne.call(oe(this),nt,...Me);return Ue.set(et,nt.sort?nt.sort():[nt]),_e(et)}}(ne):(ne instanceof IDBTransaction&&function Fe(ne){if(me.has(ne))return;const nt=new Promise((Me,et)=>{const vt=()=>{ne.removeEventListener("complete",Le),ne.removeEventListener("error",ut),ne.removeEventListener("abort",ut)},Le=()=>{Me(),vt()},ut=()=>{et(ne.error||new DOMException("AbortError","AbortError")),vt()};ne.addEventListener("complete",Le),ne.addEventListener("error",ut),ne.addEventListener("abort",ut)});me.set(ne,nt)}(ne),g(ne,function xe(){return Y||(Y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ne,je):ne)}function _e(ne){if(ne instanceof IDBRequest)return function De(ne){const nt=new Promise((Me,et)=>{const vt=()=>{ne.removeEventListener("success",Le),ne.removeEventListener("error",ut)},Le=()=>{Me(_e(ne.result)),vt()},ut=()=>{et(ne.error),vt()};ne.addEventListener("success",Le),ne.addEventListener("error",ut)});return nt.then(Me=>{Me instanceof IDBCursor&&Ce.set(Me,ne)}).catch(()=>{}),pe.set(nt,ne),nt}(ne);if(Te.has(ne))return Te.get(ne);const nt=Se(ne);return nt!==ne&&(Te.set(ne,nt),pe.set(nt,ne)),nt}const oe=ne=>pe.get(ne);function lt(ne,nt,{blocked:Me,upgrade:et,blocking:vt,terminated:Le}={}){const ut=indexedDB.open(ne,nt),bt=_e(ut);return et&&ut.addEventListener("upgradeneeded",yt=>{et(_e(ut.result),yt.oldVersion,yt.newVersion,_e(ut.transaction))}),Me&&ut.addEventListener("blocked",()=>Me()),bt.then(yt=>{Le&&yt.addEventListener("close",()=>Le()),vt&&yt.addEventListener("versionchange",()=>vt())}).catch(()=>{}),bt}function ze(ne,{blocked:nt}={}){const Me=indexedDB.deleteDatabase(ne);return nt&&Me.addEventListener("blocked",()=>nt()),_e(Me).then(()=>{})}const Ae=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],pt=new Map;function Ke(ne,nt){if(!(ne instanceof IDBDatabase)||nt in ne||"string"!=typeof nt)return;if(pt.get(nt))return pt.get(nt);const Me=nt.replace(/FromIndex$/,""),et=nt!==Me,vt=q.includes(Me);if(!(Me in(et?IDBIndex:IDBObjectStore).prototype)||!vt&&!Ae.includes(Me))return;const Le=function(){var ut=(0,y.Z)(function*(bt,...yt){const We=this.transaction(bt,vt?"readwrite":"readonly");let He=We.store;return et&&(He=He.index(yt.shift())),(yield Promise.all([He[Me](...yt),vt&&We.done]))[0]});return function(yt){return ut.apply(this,arguments)}}();return pt.set(nt,Le),Le}!function Be(ne){je=ne(je)}(ne=>({...ne,get:(nt,Me,et)=>Ke(nt,Me)||ne.get(nt,Me,et),has:(nt,Me)=>!!Ke(nt,Me)||ne.has(nt,Me)}))},5861:(on,ot,k)=>{"use strict";function y(Y,ae,xe,Pe,Ce,me,Ue){try{var Te=Y[me](Ue),pe=Te.value}catch(De){return void xe(De)}Te.done?ae(pe):Promise.resolve(pe).then(Pe,Ce)}function g(Y){return function(){var ae=this,xe=arguments;return new Promise(function(Pe,Ce){var me=Y.apply(ae,xe);function Ue(pe){y(me,Pe,Ce,Ue,Te,"next",pe)}function Te(pe){y(me,Pe,Ce,Ue,Te,"throw",pe)}Ue(void 0)})}}k.d(ot,{Z:()=>g})}},on=>{on(on.s=5626)}]);